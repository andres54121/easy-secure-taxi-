(self.webpackChunkEasyST=self.webpackChunkEasyST||[]).push([[179],{8255:e=>{function t(e){return Promise.resolve().then(()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t})}t.keys=()=>[],t.resolve=t,t.id=8255,e.exports=t},1855:(e,t,n)=>{"use strict";n.d(t,{ZT:()=>i,_T:()=>s,mG:()=>o});var r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function s(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}function o(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((r=r.apply(e,t||[])).next())})}},6274:(e,t,n)=>{"use strict";n.d(t,{mr:()=>w,Ov:()=>j,ez:()=>q,K0:()=>c,Do:()=>I,V_:()=>h,Ye:()=>C,S$:()=>v,sg:()=>P,O5:()=>D,b0:()=>b,lw:()=>l,EM:()=>H,JF:()=>K,PM:()=>z,w_:()=>a,bD:()=>B,q:()=>s,Mx:()=>N,HT:()=>o});var r=n(2741);let i=null;function s(){return i}function o(e){i||(i=e)}class a{}const c=new r.OlP("DocumentToken");let l=(()=>{class e{historyGo(e){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,r.Yz7)({factory:u,token:e,providedIn:"platform"}),e})();function u(){return(0,r.LFG)(d)}const h=new r.OlP("Location Initialized");let d=(()=>{class e extends l{constructor(e){super(),this._doc=e,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return s().getBaseHref(this._doc)}onPopState(e){const t=s().getGlobalEventTarget(this._doc,"window");return t.addEventListener("popstate",e,!1),()=>t.removeEventListener("popstate",e)}onHashChange(e){const t=s().getGlobalEventTarget(this._doc,"window");return t.addEventListener("hashchange",e,!1),()=>t.removeEventListener("hashchange",e)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(e){this.location.pathname=e}pushState(e,t,n){p()?this._history.pushState(e,t,n):this.location.hash=n}replaceState(e,t,n){p()?this._history.replaceState(e,t,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}historyGo(e=0){this._history.go(e)}getState(){return this._history.state}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(c))},e.\u0275prov=(0,r.Yz7)({factory:f,token:e,providedIn:"platform"}),e})();function p(){return!!window.history.pushState}function f(){return new d((0,r.LFG)(c))}function g(e,t){if(0==e.length)return t;if(0==t.length)return e;let n=0;return e.endsWith("/")&&n++,t.startsWith("/")&&n++,2==n?e+t.substring(1):1==n?e+t:e+"/"+t}function m(e){const t=e.match(/#|\?|$/),n=t&&t.index||e.length;return e.slice(0,n-("/"===e[n-1]?1:0))+e.slice(n)}function y(e){return e&&"?"!==e[0]?"?"+e:e}let v=(()=>{class e{historyGo(e){throw new Error("Not implemented")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,r.Yz7)({factory:_,token:e,providedIn:"root"}),e})();function _(e){const t=(0,r.LFG)(c).location;return new b((0,r.LFG)(l),t&&t.origin||"")}const w=new r.OlP("appBaseHref");let b=(()=>{class e extends v{constructor(e,t){if(super(),this._platformLocation=e,this._removeListenerFns=[],null==t&&(t=this._platformLocation.getBaseHrefFromDOM()),null==t)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=t}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}prepareExternalUrl(e){return g(this._baseHref,e)}path(e=!1){const t=this._platformLocation.pathname+y(this._platformLocation.search),n=this._platformLocation.hash;return n&&e?`${t}${n}`:t}pushState(e,t,n,r){const i=this.prepareExternalUrl(n+y(r));this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){const i=this.prepareExternalUrl(n+y(r));this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformLocation).historyGo)||void 0===n||n.call(t,e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(l),r.LFG(w,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),I=(()=>{class e extends v{constructor(e,t){super(),this._platformLocation=e,this._baseHref="",this._removeListenerFns=[],null!=t&&(this._baseHref=t)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(e){this._removeListenerFns.push(this._platformLocation.onPopState(e),this._platformLocation.onHashChange(e))}getBaseHref(){return this._baseHref}path(e=!1){let t=this._platformLocation.hash;return null==t&&(t="#"),t.length>0?t.substring(1):t}prepareExternalUrl(e){const t=g(this._baseHref,e);return t.length>0?"#"+t:t}pushState(e,t,n,r){let i=this.prepareExternalUrl(n+y(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(e,t,i)}replaceState(e,t,n,r){let i=this.prepareExternalUrl(n+y(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(e,t,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformLocation).historyGo)||void 0===n||n.call(t,e)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(l),r.LFG(w,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})(),C=(()=>{class e{constructor(e,t){this._subject=new r.vpe,this._urlChangeListeners=[],this._platformStrategy=e;const n=this._platformStrategy.getBaseHref();this._platformLocation=t,this._baseHref=m(E(n)),this._platformStrategy.onPopState(e=>{this._subject.emit({url:this.path(!0),pop:!0,state:e.state,type:e.type})})}path(e=!1){return this.normalize(this._platformStrategy.path(e))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(e,t=""){return this.path()==this.normalize(e+y(t))}normalize(t){return e.stripTrailingSlash(function(e,t){return e&&t.startsWith(e)?t.substring(e.length):t}(this._baseHref,E(t)))}prepareExternalUrl(e){return e&&"/"!==e[0]&&(e="/"+e),this._platformStrategy.prepareExternalUrl(e)}go(e,t="",n=null){this._platformStrategy.pushState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+y(t)),n)}replaceState(e,t="",n=null){this._platformStrategy.replaceState(n,"",e,t),this._notifyUrlChangeListeners(this.prepareExternalUrl(e+y(t)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(e=0){var t,n;null===(n=(t=this._platformStrategy).historyGo)||void 0===n||n.call(t,e)}onUrlChange(e){this._urlChangeListeners.push(e),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(e=>{this._notifyUrlChangeListeners(e.url,e.state)}))}_notifyUrlChangeListeners(e="",t){this._urlChangeListeners.forEach(n=>n(e,t))}subscribe(e,t,n){return this._subject.subscribe({next:e,error:t,complete:n})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(v),r.LFG(l))},e.normalizeQueryParams=y,e.joinWithSlash=g,e.stripTrailingSlash=m,e.\u0275prov=(0,r.Yz7)({factory:T,token:e,providedIn:"root"}),e})();function T(){return new C((0,r.LFG)(v),(0,r.LFG)(l))}function E(e){return e.replace(/\/index.html$/,"")}var S=(()=>((S=S||{})[S.Zero=0]="Zero",S[S.One=1]="One",S[S.Two=2]="Two",S[S.Few=3]="Few",S[S.Many=4]="Many",S[S.Other=5]="Other",S))();const k=r.kL8;class A{}let x=(()=>{class e extends A{constructor(e){super(),this.locale=e}getPluralCategory(e,t){switch(k(t||this.locale)(e)){case S.Zero:return"zero";case S.One:return"one";case S.Two:return"two";case S.Few:return"few";case S.Many:return"many";default:return"other"}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.soG))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac}),e})();function N(e,t){t=encodeURIComponent(t);for(const n of e.split(";")){const e=n.indexOf("="),[r,i]=-1==e?[n,""]:[n.slice(0,e),n.slice(e+1)];if(r.trim()===t)return decodeURIComponent(i)}return null}class O{constructor(e,t,n,r){this.$implicit=e,this.ngForOf=t,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let P=(()=>{class e{constructor(e,t,n){this._viewContainer=e,this._template=t,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(e){this._ngForOf=e,this._ngForOfDirty=!0}set ngForTrackBy(e){this._trackByFn=e}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(e){e&&(this._template=e)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(t){throw new Error(`Cannot find a differ supporting object '${n}' of type '${e=n,e.name||typeof e}'. NgFor only supports binding to Iterables such as Arrays.`)}}var e;if(this._differ){const e=this._differ.diff(this._ngForOf);e&&this._applyChanges(e)}}_applyChanges(e){const t=[];e.forEachOperation((e,n,r)=>{if(null==e.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new O(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new R(e,n);t.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const s=new R(e,i);t.push(s)}});for(let n=0;n<t.length;n++)this._perViewChange(t[n].view,t[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const e=this._viewContainer.get(n);e.context.index=n,e.context.count=r,e.context.ngForOf=this._ngForOf}e.forEachIdentityChange(e=>{this._viewContainer.get(e.currentIndex).context.$implicit=e.item})}_perViewChange(e,t){e.context.$implicit=t.item}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.s_b),r.Y36(r.Rgc),r.Y36(r.ZZ4))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),e})();class R{constructor(e,t){this.record=e,this.view=t}}let D=(()=>{class e{constructor(e,t){this._viewContainer=e,this._context=new L,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=t}set ngIf(e){this._context.$implicit=this._context.ngIf=e,this._updateView()}set ngIfThen(e){M("ngIfThen",e),this._thenTemplateRef=e,this._thenViewRef=null,this._updateView()}set ngIfElse(e){M("ngIfElse",e),this._elseTemplateRef=e,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(e,t){return!0}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.s_b),r.Y36(r.Rgc))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),e})();class L{constructor(){this.$implicit=null,this.ngIf=null}}function M(e,t){if(t&&!t.createEmbeddedView)throw new Error(`${e} must be a TemplateRef, but received '${(0,r.AaK)(t)}'.`)}class F{createSubscription(e,t){return e.subscribe({next:t,error:e=>{throw e}})}dispose(e){e.unsubscribe()}onDestroy(e){e.unsubscribe()}}class ${createSubscription(e,t){return e.then(t,e=>{throw e})}dispose(e){}onDestroy(e){}}const V=new $,U=new F;let j=(()=>{class e{constructor(e){this._ref=e,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(e){return this._obj?e!==this._obj?(this._dispose(),this.transform(e)):this._latestValue:(e&&this._subscribe(e),this._latestValue)}_subscribe(e){this._obj=e,this._strategy=this._selectStrategy(e),this._subscription=this._strategy.createSubscription(e,t=>this._updateLatestValue(e,t))}_selectStrategy(t){if((0,r.QGY)(t))return V;if((0,r.F4k)(t))return U;throw Error(`InvalidPipeArgument: '${t}' for pipe '${(0,r.AaK)(e)}'`)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(e,t){e===this._obj&&(this._latestValue=t,this._ref.markForCheck())}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.sBO,16))},e.\u0275pipe=r.Yjl({name:"async",type:e,pure:!1}),e})(),q=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[{provide:A,useClass:x}]}),e})();const B="browser";function z(e){return"server"===e}let H=(()=>{class e{}return e.\u0275prov=(0,r.Yz7)({token:e,providedIn:"root",factory:()=>new G((0,r.LFG)(c),window)}),e})();class G{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function(e,t){const n=e.getElementById(t)||e.getElementsByName(t)[0];if(n)return n;if("function"==typeof e.createTreeWalker&&e.body&&(e.body.createShadowRoot||e.body.attachShadow)){const n=e.createTreeWalker(e.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const e=r.shadowRoot;if(e){const n=e.getElementById(t)||e.querySelector(`[name="${t}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),this.attemptFocus(t))}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),n=t.left+this.window.pageXOffset,r=t.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(e){return e.focus(),this.document.activeElement===e}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=W(this.window.history)||W(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function W(e){return Object.getOwnPropertyDescriptor(e,"scrollRestoration")}class K{}},2741:(e,t,n)=>{"use strict";n.d(t,{deG:()=>an,tb:()=>Mc,AFp:()=>Oc,ip1:()=>xc,CZH:()=>Nc,hGG:()=>xl,z2F:()=>_l,ahi:()=>sn,sBO:()=>Na,Sil:()=>Wc,_Vd:()=>ea,aQ5:()=>ln,EJc:()=>Vc,SBq:()=>ia,qLn:()=>Tr,vpe:()=>ac,L6J:()=>Ac,gxx:()=>us,tBr:()=>Nn,XFs:()=>x,OlP:()=>on,zs3:()=>Es,ZZ4:()=>Ca,aQg:()=>Ea,soG:()=>$c,YKP:()=>Ua,v3s:()=>bl,h0i:()=>Va,PXZ:()=>fl,R0b:()=>Qc,FiY:()=>On,r_U:()=>kc,Lbi:()=>Lc,g9A:()=>Dc,Qsj:()=>aa,FYo:()=>oa,JOm:()=>kr,Tiy:()=>la,q3G:()=>vr,tp0:()=>Pn,EAV:()=>Tl,Rgc:()=>La,dDg:()=>rl,DyG:()=>hn,q4F:()=>ha,GfV:()=>ua,i9L:()=>un,s_b:()=>qa,ifc:()=>L,eFA:()=>gl,G48:()=>dl,Gpc:()=>p,X6Q:()=>hl,_c5:()=>kl,VLi:()=>ol,c2e:()=>Fc,zSh:()=>ds,wAp:()=>Uo,vHH:()=>m,EiD:()=>mr,mCW:()=>Zn,qzn:()=>qn,JVY:()=>zn,pB0:()=>Kn,eBb:()=>Gn,L6k:()=>Hn,LAX:()=>Wn,cg1:()=>Fo,Tjo:()=>Sl,kL8:()=>$o,yhl:()=>Bn,dqk:()=>U,sIi:()=>Ls,CqO:()=>to,QGY:()=>Zs,F4k:()=>eo,RDi:()=>Te,AaK:()=>u,z3N:()=>jn,qOj:()=>ks,TTD:()=>ve,_Bn:()=>Xo,xp6:()=>fi,uIk:()=>Vs,Tol:()=>_o,ekj:()=>vo,Suo:()=>bc,Xpm:()=>X,lG2:()=>ie,Yz7:()=>w,cJS:()=>b,oAB:()=>te,Yjl:()=>se,Y36:()=>Bs,_UZ:()=>Ys,BQk:()=>Xs,ynx:()=>Qs,qZA:()=>Ks,TgZ:()=>Ws,EpF:()=>Js,n5z:()=>Qt,Ikx:()=>Ro,LFG:()=>kn,$8M:()=>Jt,$Z:()=>zs,NdJ:()=>no,CRH:()=>Ic,oxw:()=>so,ALo:()=>ic,lcZ:()=>sc,Hsn:()=>co,F$t:()=>ao,Q6J:()=>Hs,s9C:()=>lo,MGl:()=>uo,DdM:()=>rc,iGM:()=>_c,MAs:()=>qs,CHM:()=>qe,LSH:()=>_r,kYT:()=>ne,YNc:()=>js,W1O:()=>Sc,_uU:()=>xo,Oqu:()=>No,hij:()=>Oo,AsE:()=>Po,Gf:()=>wc});var r=n(6006),i=n(9734),s=n(3948),o=n(636),a=n(2564);function c(e){for(let t in e)if(e[t]===c)return t;throw Error("Could not find renamed property on target object.")}function l(e,t){for(const n in t)t.hasOwnProperty(n)&&!e.hasOwnProperty(n)&&(e[n]=t[n])}function u(e){if("string"==typeof e)return e;if(Array.isArray(e))return"["+e.map(u).join(", ")+"]";if(null==e)return""+e;if(e.overriddenName)return`${e.overriddenName}`;if(e.name)return`${e.name}`;const t=e.toString();if(null==t)return""+t;const n=t.indexOf("\n");return-1===n?t:t.substring(0,n)}function h(e,t){return null==e||""===e?null===t?"":t:null==t||""===t?e:e+" "+t}const d=c({__forward_ref__:c});function p(e){return e.__forward_ref__=p,e.toString=function(){return u(this())},e}function f(e){return g(e)?e():e}function g(e){return"function"==typeof e&&e.hasOwnProperty(d)&&e.__forward_ref__===p}class m extends Error{constructor(e,t){super(function(e,t){return`${e?`NG0${e}: `:""}${t}`}(e,t)),this.code=e}}function y(e){return"string"==typeof e?e:null==e?"":String(e)}function v(e){return"function"==typeof e?e.name||e.toString():"object"==typeof e&&null!=e&&"function"==typeof e.type?e.type.name||e.type.toString():y(e)}function _(e,t){const n=t?` in ${t}`:"";throw new m("201",`No provider for ${v(e)} found${n}`)}function w(e){return{token:e.token,providedIn:e.providedIn||null,factory:e.factory,value:void 0}}function b(e){return{providers:e.providers||[],imports:e.imports||[]}}function I(e){return C(e,E)||C(e,k)}function C(e,t){return e.hasOwnProperty(t)?e[t]:null}function T(e){return e&&(e.hasOwnProperty(S)||e.hasOwnProperty(A))?e[S]:null}const E=c({"\u0275prov":c}),S=c({"\u0275inj":c}),k=c({ngInjectableDef:c}),A=c({ngInjectorDef:c});var x=(()=>((x=x||{})[x.Default=0]="Default",x[x.Host=1]="Host",x[x.Self=2]="Self",x[x.SkipSelf=4]="SkipSelf",x[x.Optional=8]="Optional",x))();let N;function O(e){const t=N;return N=e,t}function P(e,t,n){const r=I(e);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&x.Optional?null:void 0!==t?t:void _(u(e),"Injector")}function R(e){return{toString:e}.toString()}var D=(()=>((D=D||{})[D.OnPush=0]="OnPush",D[D.Default=1]="Default",D))(),L=(()=>((L=L||{})[L.Emulated=0]="Emulated",L[L.None=2]="None",L[L.ShadowDom=3]="ShadowDom",L))();const M="undefined"!=typeof globalThis&&globalThis,F="undefined"!=typeof window&&window,$="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,V="undefined"!=typeof global&&global,U=M||V||F||$,j={},q=[],B=c({"\u0275cmp":c}),z=c({"\u0275dir":c}),H=c({"\u0275pipe":c}),G=c({"\u0275mod":c}),W=c({"\u0275loc":c}),K=c({"\u0275fac":c}),Y=c({__NG_ELEMENT_ID__:c});let Q=0;function X(e){return R(()=>{const t={},n={type:e.type,providersResolver:null,decls:e.decls,vars:e.vars,factory:null,template:e.template||null,consts:e.consts||null,ngContentSelectors:e.ngContentSelectors,hostBindings:e.hostBindings||null,hostVars:e.hostVars||0,hostAttrs:e.hostAttrs||null,contentQueries:e.contentQueries||null,declaredInputs:t,inputs:null,outputs:null,exportAs:e.exportAs||null,onPush:e.changeDetection===D.OnPush,directiveDefs:null,pipeDefs:null,selectors:e.selectors||q,viewQuery:e.viewQuery||null,features:e.features||null,data:e.data||{},encapsulation:e.encapsulation||L.Emulated,id:"c",styles:e.styles||q,_:null,setInput:null,schemas:e.schemas||null,tView:null},r=e.directives,i=e.features,s=e.pipes;return n.id+=Q++,n.inputs=re(e.inputs,t),n.outputs=re(e.outputs),i&&i.forEach(e=>e(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(J):null,n.pipeDefs=s?()=>("function"==typeof s?s():s).map(Z):null,n})}function J(e){return oe(e)||function(e){return e[z]||null}(e)}function Z(e){return function(e){return e[H]||null}(e)}const ee={};function te(e){return R(()=>{const t={type:e.type,bootstrap:e.bootstrap||q,declarations:e.declarations||q,imports:e.imports||q,exports:e.exports||q,transitiveCompileScopes:null,schemas:e.schemas||null,id:e.id||null};return null!=e.id&&(ee[e.id]=e.type),t})}function ne(e,t){return R(()=>{const n=ae(e,!0);n.declarations=t.declarations||q,n.imports=t.imports||q,n.exports=t.exports||q})}function re(e,t){if(null==e)return j;const n={};for(const r in e)if(e.hasOwnProperty(r)){let i=e[r],s=i;Array.isArray(i)&&(s=i[1],i=i[0]),n[i]=r,t&&(t[i]=s)}return n}const ie=X;function se(e){return{type:e.type,name:e.name,factory:null,pure:!1!==e.pure,onDestroy:e.type.prototype.ngOnDestroy||null}}function oe(e){return e[B]||null}function ae(e,t){const n=e[G]||null;if(!n&&!0===t)throw new Error(`Type ${u(e)} does not have '\u0275mod' property.`);return n}const ce=20,le=10;function ue(e){return Array.isArray(e)&&"object"==typeof e[1]}function he(e){return Array.isArray(e)&&!0===e[1]}function de(e){return 0!=(8&e.flags)}function pe(e){return 2==(2&e.flags)}function fe(e){return 1==(1&e.flags)}function ge(e){return null!==e.template}function me(e,t){return e.hasOwnProperty(K)?e[K]:null}class ye{constructor(e,t,n){this.previousValue=e,this.currentValue=t,this.firstChange=n}isFirstChange(){return this.firstChange}}function ve(){return _e}function _e(e){return e.type.prototype.ngOnChanges&&(e.setInput=be),we}function we(){const e=Ie(this),t=null==e?void 0:e.current;if(t){const n=e.previous;if(n===j)e.previous=t;else for(let e in t)n[e]=t[e];e.current=null,this.ngOnChanges(t)}}function be(e,t,n,r){const i=Ie(e)||function(e,t){return e.__ngSimpleChanges__=t}(e,{previous:j,current:null}),s=i.current||(i.current={}),o=i.previous,a=this.declaredInputs[n],c=o[a];s[a]=new ye(c&&c.currentValue,t,o===j),e[r]=t}function Ie(e){return e.__ngSimpleChanges__||null}let Ce;function Te(e){Ce=e}function Ee(e){return!!e.listen}ve.ngInherit=!0;const Se={createRenderer:(e,t)=>void 0!==Ce?Ce:"undefined"!=typeof document?document:void 0};function ke(e){for(;Array.isArray(e);)e=e[0];return e}function Ae(e,t){return ke(t[e])}function xe(e,t){return ke(t[e.index])}function Ne(e,t){return e.data[t]}function Oe(e,t){return e[t]}function Pe(e,t){const n=t[e];return ue(n)?n:n[0]}function Re(e){return 4==(4&e[2])}function De(e){return 128==(128&e[2])}function Le(e,t){return null==t?null:e[t]}function Me(e){e[18]=0}function Fe(e,t){e[5]+=t;let n=e,r=e[3];for(;null!==r&&(1===t&&1===n[5]||-1===t&&0===n[5]);)r[5]+=t,n=r,r=r[3]}const $e={lFrame:ct(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ve(){return $e.bindingsEnabled}function Ue(){return $e.lFrame.lView}function je(){return $e.lFrame.tView}function qe(e){return $e.lFrame.contextLView=e,e[8]}function Be(){let e=ze();for(;null!==e&&64===e.type;)e=e.parent;return e}function ze(){return $e.lFrame.currentTNode}function He(e,t){const n=$e.lFrame;n.currentTNode=e,n.isParent=t}function Ge(){return $e.lFrame.isParent}function We(){$e.lFrame.isParent=!1}function Ke(){return $e.isInCheckNoChangesMode}function Ye(e){$e.isInCheckNoChangesMode=e}function Qe(){const e=$e.lFrame;let t=e.bindingRootIndex;return-1===t&&(t=e.bindingRootIndex=e.tView.bindingStartIndex),t}function Xe(){return $e.lFrame.bindingIndex}function Je(){return $e.lFrame.bindingIndex++}function Ze(e){const t=$e.lFrame,n=t.bindingIndex;return t.bindingIndex=t.bindingIndex+e,n}function et(e,t){const n=$e.lFrame;n.bindingIndex=n.bindingRootIndex=e,tt(t)}function tt(e){$e.lFrame.currentDirectiveIndex=e}function nt(){return $e.lFrame.currentQueryIndex}function rt(e){$e.lFrame.currentQueryIndex=e}function it(e){const t=e[1];return 2===t.type?t.declTNode:1===t.type?e[6]:null}function st(e,t,n){if(n&x.SkipSelf){let r=t,i=e;for(;r=r.parent,!(null!==r||n&x.Host||(r=it(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;t=r,e=i}const r=$e.lFrame=at();return r.currentTNode=t,r.lView=e,!0}function ot(e){const t=at(),n=e[1];$e.lFrame=t,t.currentTNode=n.firstChild,t.lView=e,t.tView=n,t.contextLView=e,t.bindingIndex=n.bindingStartIndex,t.inI18n=!1}function at(){const e=$e.lFrame,t=null===e?null:e.child;return null===t?ct(e):t}function ct(e){const t={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:e,child:null,inI18n:!1};return null!==e&&(e.child=t),t}function lt(){const e=$e.lFrame;return $e.lFrame=e.parent,e.currentTNode=null,e.lView=null,e}const ut=lt;function ht(){const e=lt();e.isParent=!0,e.tView=null,e.selectedIndex=-1,e.contextLView=null,e.elementDepthCount=0,e.currentDirectiveIndex=-1,e.currentNamespace=null,e.bindingRootIndex=-1,e.bindingIndex=-1,e.currentQueryIndex=0}function dt(){return $e.lFrame.selectedIndex}function pt(e){$e.lFrame.selectedIndex=e}function ft(){const e=$e.lFrame;return Ne(e.tView,e.selectedIndex)}function gt(e,t){for(let n=t.directiveStart,r=t.directiveEnd;n<r;n++){const t=e.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:s,ngAfterViewChecked:o,ngOnDestroy:a}=t;r&&(e.contentHooks||(e.contentHooks=[])).push(-n,r),i&&((e.contentHooks||(e.contentHooks=[])).push(n,i),(e.contentCheckHooks||(e.contentCheckHooks=[])).push(n,i)),s&&(e.viewHooks||(e.viewHooks=[])).push(-n,s),o&&((e.viewHooks||(e.viewHooks=[])).push(n,o),(e.viewCheckHooks||(e.viewCheckHooks=[])).push(n,o)),null!=a&&(e.destroyHooks||(e.destroyHooks=[])).push(n,a)}}function mt(e,t,n){_t(e,t,3,n)}function yt(e,t,n,r){(3&e[2])===n&&_t(e,t,n,r)}function vt(e,t){let n=e[2];(3&n)===t&&(n&=2047,n+=1,e[2]=n)}function _t(e,t,n,r){const i=null!=r?r:-1,s=t.length-1;let o=0;for(let a=void 0!==r?65535&e[18]:0;a<s;a++)if("number"==typeof t[a+1]){if(o=t[a],null!=r&&o>=r)break}else t[a]<0&&(e[18]+=65536),(o<i||-1==i)&&(wt(e,n,t,a),e[18]=(4294901760&e[18])+a+2),a++}function wt(e,t,n,r){const i=n[r]<0,s=n[r+1],o=e[i?-n[r]:n[r]];if(i){if(e[2]>>11<e[18]>>16&&(3&e[2])===t){e[2]+=2048;try{s.call(o)}finally{}}}else try{s.call(o)}finally{}}const bt=-1;class It{constructor(e,t,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=t,this.injectImpl=n}}function Ct(e,t,n){const r=Ee(e);let i=0;for(;i<n.length;){const s=n[i];if("number"==typeof s){if(0!==s)break;i++;const o=n[i++],a=n[i++],c=n[i++];r?e.setAttribute(t,a,c,o):t.setAttributeNS(o,a,c)}else{const o=s,a=n[++i];Et(o)?r&&e.setProperty(t,o,a):r?e.setAttribute(t,o,a):t.setAttribute(o,a),i++}}return i}function Tt(e){return 3===e||4===e||6===e}function Et(e){return 64===e.charCodeAt(0)}function St(e,t){if(null===t||0===t.length);else if(null===e||0===e.length)e=t.slice();else{let n=-1;for(let r=0;r<t.length;r++){const i=t[r];"number"==typeof i?n=i:0===n||kt(e,n,i,null,-1===n||2===n?t[++r]:null)}}return e}function kt(e,t,n,r,i){let s=0,o=e.length;if(-1===t)o=-1;else for(;s<e.length;){const n=e[s++];if("number"==typeof n){if(n===t){o=-1;break}if(n>t){o=s-1;break}}}for(;s<e.length;){const t=e[s];if("number"==typeof t)break;if(t===n){if(null===r)return void(null!==i&&(e[s+1]=i));if(r===e[s+1])return void(e[s+2]=i)}s++,null!==r&&s++,null!==i&&s++}-1!==o&&(e.splice(o,0,t),s=o+1),e.splice(s++,0,n),null!==r&&e.splice(s++,0,r),null!==i&&e.splice(s++,0,i)}function At(e){return e!==bt}function xt(e){return 32767&e}function Nt(e,t){let n=e>>16,r=t;for(;n>0;)r=r[15],n--;return r}let Ot=!0;function Pt(e){const t=Ot;return Ot=e,t}let Rt=0;function Dt(e,t){const n=Mt(e,t);if(-1!==n)return n;const r=t[1];r.firstCreatePass&&(e.injectorIndex=t.length,Lt(r.data,e),Lt(t,null),Lt(r.blueprint,null));const i=Ft(e,t),s=e.injectorIndex;if(At(i)){const e=xt(i),n=Nt(i,t),r=n[1].data;for(let i=0;i<8;i++)t[s+i]=n[e+i]|r[e+i]}return t[s+8]=i,s}function Lt(e,t){e.push(0,0,0,0,0,0,0,0,t)}function Mt(e,t){return-1===e.injectorIndex||e.parent&&e.parent.injectorIndex===e.injectorIndex||null===t[e.injectorIndex+8]?-1:e.injectorIndex}function Ft(e,t){if(e.parent&&-1!==e.parent.injectorIndex)return e.parent.injectorIndex;let n=0,r=null,i=t;for(;null!==i;){const e=i[1],t=e.type;if(r=2===t?e.declTNode:1===t?i[6]:null,null===r)return bt;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return bt}function $t(e,t,n){!function(e,t,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Y)&&(r=n[Y]),null==r&&(r=n[Y]=Rt++);const i=255&r;t.data[e+(i>>5)]|=1<<i}(e,t,n)}function Vt(e,t,n){if(n&x.Optional)return e;_(t,"NodeInjector")}function Ut(e,t,n,r){if(n&x.Optional&&void 0===r&&(r=null),0==(n&(x.Self|x.Host))){const i=e[9],s=O(void 0);try{return i?i.get(t,r,n&x.Optional):P(t,r,n&x.Optional)}finally{O(s)}}return Vt(r,t,n)}function jt(e,t,n,r=x.Default,i){if(null!==e){const s=function(e){if("string"==typeof e)return e.charCodeAt(0)||0;const t=e.hasOwnProperty(Y)?e[Y]:void 0;return"number"==typeof t?t>=0?255&t:Bt:t}(n);if("function"==typeof s){if(!st(t,e,r))return r&x.Host?Vt(i,n,r):Ut(t,n,r,i);try{const e=s(r);if(null!=e||r&x.Optional)return e;_(n)}finally{ut()}}else if("number"==typeof s){let i=null,o=Mt(e,t),a=bt,c=r&x.Host?t[16][6]:null;for((-1===o||r&x.SkipSelf)&&(a=-1===o?Ft(e,t):t[o+8],a!==bt&&Kt(r,!1)?(i=t[1],o=xt(a),t=Nt(a,t)):o=-1);-1!==o;){const e=t[1];if(Wt(s,o,e.data)){const e=zt(o,t,n,i,r,c);if(e!==qt)return e}a=t[o+8],a!==bt&&Kt(r,t[1].data[o+8]===c)&&Wt(s,o,t)?(i=e,o=xt(a),t=Nt(a,t)):o=-1}}}return Ut(t,n,r,i)}const qt={};function Bt(){return new Yt(Be(),Ue())}function zt(e,t,n,r,i,s){const o=t[1],a=o.data[e+8],c=Ht(a,o,n,null==r?pe(a)&&Ot:r!=o&&0!=(3&a.type),i&x.Host&&s===a);return null!==c?Gt(t,o,c,a):qt}function Ht(e,t,n,r,i){const s=e.providerIndexes,o=t.data,a=1048575&s,c=e.directiveStart,l=s>>20,u=i?a+l:e.directiveEnd;for(let h=r?a:a+l;h<u;h++){const e=o[h];if(h<c&&n===e||h>=c&&e.type===n)return h}if(i){const e=o[c];if(e&&ge(e)&&e.type===n)return c}return null}function Gt(e,t,n,r){let i=e[n];const s=t.data;if(i instanceof It){const o=i;o.resolving&&function(e,t){throw new m("200",`Circular dependency in DI detected for ${e}`)}(v(s[n]));const a=Pt(o.canSeeViewProviders);o.resolving=!0;const c=o.injectImpl?O(o.injectImpl):null;st(e,r,x.Default);try{i=e[n]=o.factory(void 0,s,e,r),t.firstCreatePass&&n>=r.directiveStart&&function(e,t,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:s}=t.type.prototype;if(r){const r=_e(t);(n.preOrderHooks||(n.preOrderHooks=[])).push(e,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-e,i),s&&((n.preOrderHooks||(n.preOrderHooks=[])).push(e,s),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(e,s))}(n,s[n],t)}finally{null!==c&&O(c),Pt(a),o.resolving=!1,ut()}}return i}function Wt(e,t,n){return!!(n[t+(e>>5)]&1<<e)}function Kt(e,t){return!(e&x.Self||e&x.Host&&t)}class Yt{constructor(e,t){this._tNode=e,this._lView=t}get(e,t){return jt(this._tNode,this._lView,e,void 0,t)}}function Qt(e){return R(()=>{const t=e.prototype.constructor,n=t[K]||Xt(t),r=Object.prototype;let i=Object.getPrototypeOf(e.prototype).constructor;for(;i&&i!==r;){const e=i[K]||Xt(i);if(e&&e!==n)return e;i=Object.getPrototypeOf(i)}return e=>new e})}function Xt(e){return g(e)?()=>{const t=Xt(f(e));return t&&t()}:me(e)}function Jt(e){return function(e,t){if("class"===t)return e.classes;if("style"===t)return e.styles;const n=e.attrs;if(n){const e=n.length;let r=0;for(;r<e;){const i=n[r];if(Tt(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<e&&"string"==typeof n[r];)r++;else{if(i===t)return n[r+1];r+=2}}}return null}(Be(),e)}const Zt="__parameters__",en="__prop__metadata__";function tn(e){return function(...t){if(e){const n=e(...t);for(const e in n)this[e]=n[e]}}}function nn(e,t,n){return R(()=>{const r=tn(t);function i(...e){if(this instanceof i)return r.apply(this,e),this;const t=new i(...e);return n.annotation=t,n;function n(e,n,r){const i=e.hasOwnProperty(Zt)?e[Zt]:Object.defineProperty(e,Zt,{value:[]})[Zt];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(t),e}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=e,i.annotationCls=i,i})}function rn(e,t,n,r){return R(()=>{const i=tn(t);function s(...e){if(this instanceof s)return i.apply(this,e),this;const t=new s(...e);return function(n,i){const s=n.constructor,o=s.hasOwnProperty(en)?s[en]:Object.defineProperty(s,en,{value:{}})[en];o[i]=o.hasOwnProperty(i)&&o[i]||[],o[i].unshift(t),r&&r(n,i,...e)}}return n&&(s.prototype=Object.create(n.prototype)),s.prototype.ngMetadataName=e,s.annotationCls=s,s})}const sn=function(){return nn("Attribute",e=>({attributeName:e,__NG_ELEMENT_ID__:()=>Jt(e)}))}();class on{constructor(e,t){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof t?this.__NG_ELEMENT_ID__=t:void 0!==t&&(this.\u0275prov=w({token:this,providedIn:t.providedIn||"root",factory:t.factory}))}toString(){return`InjectionToken ${this._desc}`}}const an=new on("AnalyzeForEntryComponents");class cn{}const ln=rn("ContentChild",(e,t={})=>Object.assign({selector:e,first:!0,isViewQuery:!1,descendants:!0},t),cn),un=rn("ViewChild",(e,t)=>Object.assign({selector:e,first:!0,isViewQuery:!0,descendants:!0},t),cn),hn=Function;function dn(e,t){void 0===t&&(t=e);for(let n=0;n<e.length;n++){let r=e[n];Array.isArray(r)?(t===e&&(t=e.slice(0,n)),dn(r,t)):t!==e&&t.push(r)}return t}function pn(e,t){e.forEach(e=>Array.isArray(e)?pn(e,t):t(e))}function fn(e,t,n){t>=e.length?e.push(n):e.splice(t,0,n)}function gn(e,t){return t>=e.length-1?e.pop():e.splice(t,1)[0]}function mn(e,t){const n=[];for(let r=0;r<e;r++)n.push(t);return n}function yn(e,t,n){let r=_n(e,t);return r>=0?e[1|r]=n:(r=~r,function(e,t,n,r){let i=e.length;if(i==t)e.push(n,r);else if(1===i)e.push(r,e[0]),e[0]=n;else{for(i--,e.push(e[i-1],e[i]);i>t;)e[i]=e[i-2],i--;e[t]=n,e[t+1]=r}}(e,r,t,n)),r}function vn(e,t){const n=_n(e,t);if(n>=0)return e[1|n]}function _n(e,t){return function(e,t,n){let r=0,i=e.length>>1;for(;i!==r;){const n=r+(i-r>>1),s=e[n<<1];if(t===s)return n<<1;s>t?i=n:r=n+1}return~(i<<1)}(e,t)}const wn={},bn=/\n/gm,In="__source",Cn=c({provide:String,useValue:c});let Tn;function En(e){const t=Tn;return Tn=e,t}function Sn(e,t=x.Default){if(void 0===Tn)throw new Error("inject() must be called from an injection context");return null===Tn?P(e,void 0,t):Tn.get(e,t&x.Optional?null:void 0,t)}function kn(e,t=x.Default){return(N||Sn)(f(e),t)}function An(e){const t=[];for(let n=0;n<e.length;n++){const r=f(e[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let e,n=x.Default;for(let t=0;t<r.length;t++){const i=r[t],s=i.__NG_DI_FLAG__;"number"==typeof s?-1===s?e=i.token:n|=s:e=i}t.push(kn(e,n))}else t.push(kn(r))}return t}function xn(e,t){return e.__NG_DI_FLAG__=t,e.prototype.__NG_DI_FLAG__=t,e}const Nn=xn(nn("Inject",e=>({token:e})),-1),On=xn(nn("Optional"),8),Pn=xn(nn("SkipSelf"),4);let Rn;function Dn(e){var t;return(null===(t=function(){if(void 0===Rn&&(Rn=null,U.trustedTypes))try{Rn=U.trustedTypes.createPolicy("angular",{createHTML:e=>e,createScript:e=>e,createScriptURL:e=>e})}catch(t){}return Rn}())||void 0===t?void 0:t.createHTML(e))||e}class Ln{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Mn extends Ln{getTypeName(){return"HTML"}}class Fn extends Ln{getTypeName(){return"Style"}}class $n extends Ln{getTypeName(){return"Script"}}class Vn extends Ln{getTypeName(){return"URL"}}class Un extends Ln{getTypeName(){return"ResourceURL"}}function jn(e){return e instanceof Ln?e.changingThisBreaksApplicationSecurity:e}function qn(e,t){const n=Bn(e);if(null!=n&&n!==t){if("ResourceURL"===n&&"URL"===t)return!0;throw new Error(`Required a safe ${t}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===t}function Bn(e){return e instanceof Ln&&e.getTypeName()||null}function zn(e){return new Mn(e)}function Hn(e){return new Fn(e)}function Gn(e){return new $n(e)}function Wn(e){return new Vn(e)}function Kn(e){return new Un(e)}class Yn{constructor(e){this.inertDocumentHelper=e}getInertBodyElement(e){e="<body><remove></remove>"+e;try{const t=(new window.DOMParser).parseFromString(Dn(e),"text/html").body;return null===t?this.inertDocumentHelper.getInertBodyElement(e):(t.removeChild(t.firstChild),t)}catch(t){return null}}}class Qn{constructor(e){if(this.defaultDoc=e,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const e=this.inertDocument.createElement("html");this.inertDocument.appendChild(e);const t=this.inertDocument.createElement("body");e.appendChild(t)}}getInertBodyElement(e){const t=this.inertDocument.createElement("template");if("content"in t)return t.innerHTML=Dn(e),t;const n=this.inertDocument.createElement("body");return n.innerHTML=Dn(e),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(e){const t=e.attributes;for(let r=t.length-1;0<r;r--){const n=t.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||e.removeAttribute(n)}let n=e.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Xn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Jn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Zn(e){return(e=String(e)).match(Xn)||e.match(Jn)?e:"unsafe:"+e}function er(e){const t={};for(const n of e.split(","))t[n]=!0;return t}function tr(...e){const t={};for(const n of e)for(const e in n)n.hasOwnProperty(e)&&(t[e]=!0);return t}const nr=er("area,br,col,hr,img,wbr"),rr=er("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),ir=er("rp,rt"),sr=tr(ir,rr),or=tr(nr,tr(rr,er("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),tr(ir,er("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),sr),ar=er("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),cr=er("srcset"),lr=tr(ar,cr,er("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),er("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ur=er("script,style,template");class hr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(e){let t=e.firstChild,n=!0;for(;t;)if(t.nodeType===Node.ELEMENT_NODE?n=this.startElement(t):t.nodeType===Node.TEXT_NODE?this.chars(t.nodeValue):this.sanitizedSomething=!0,n&&t.firstChild)t=t.firstChild;else for(;t;){t.nodeType===Node.ELEMENT_NODE&&this.endElement(t);let e=this.checkClobberedElement(t,t.nextSibling);if(e){t=e;break}t=this.checkClobberedElement(t,t.parentNode)}return this.buf.join("")}startElement(e){const t=e.nodeName.toLowerCase();if(!or.hasOwnProperty(t))return this.sanitizedSomething=!0,!ur.hasOwnProperty(t);this.buf.push("<"),this.buf.push(t);const n=e.attributes;for(let i=0;i<n.length;i++){const e=n.item(i),t=e.name,s=t.toLowerCase();if(!lr.hasOwnProperty(s)){this.sanitizedSomething=!0;continue}let o=e.value;ar[s]&&(o=Zn(o)),cr[s]&&(r=o,o=(r=String(r)).split(",").map(e=>Zn(e.trim())).join(", ")),this.buf.push(" ",t,'="',fr(o),'"')}var r;return this.buf.push(">"),!0}endElement(e){const t=e.nodeName.toLowerCase();or.hasOwnProperty(t)&&!nr.hasOwnProperty(t)&&(this.buf.push("</"),this.buf.push(t),this.buf.push(">"))}chars(e){this.buf.push(fr(e))}checkClobberedElement(e,t){if(t&&(e.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${e.outerHTML}`);return t}}const dr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,pr=/([^\#-~ |!])/g;function fr(e){return e.replace(/&/g,"&amp;").replace(dr,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(pr,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let gr;function mr(e,t){let n=null;try{gr=gr||function(e){const t=new Qn(e);return function(){try{return!!(new window.DOMParser).parseFromString(Dn(""),"text/html")}catch(e){return!1}}()?new Yn(t):t}(e);let r=t?String(t):"";n=gr.getInertBodyElement(r);let i=5,s=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=s,s=n.innerHTML,n=gr.getInertBodyElement(r)}while(r!==s);return Dn((new hr).sanitizeChildren(yr(n)||n))}finally{if(n){const e=yr(n)||n;for(;e.firstChild;)e.removeChild(e.firstChild)}}}function yr(e){return"content"in e&&function(e){return e.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===e.nodeName}(e)?e.content:null}var vr=(()=>((vr=vr||{})[vr.NONE=0]="NONE",vr[vr.HTML=1]="HTML",vr[vr.STYLE=2]="STYLE",vr[vr.SCRIPT=3]="SCRIPT",vr[vr.URL=4]="URL",vr[vr.RESOURCE_URL=5]="RESOURCE_URL",vr))();function _r(e){const t=function(){const e=Ue();return e&&e[12]}();return t?t.sanitize(vr.URL,e)||"":qn(e,"URL")?jn(e):Zn(y(e))}function wr(e,t){e.__ngContext__=t}function br(e){const t=function(e){return e.__ngContext__||null}(e);return t?Array.isArray(t)?t:t.lView:null}function Ir(e){return e.ngOriginalError}function Cr(e,...t){e.error(...t)}class Tr{constructor(){this._console=console}handleError(e){const t=this._findOriginalError(e),n=this._findContext(e),r=function(e){return e&&e.ngErrorLogger||Cr}(e);r(this._console,"ERROR",e),t&&r(this._console,"ORIGINAL ERROR",t),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(e){return e?function(e){return e.ngDebugContext}(e)||this._findContext(Ir(e)):null}_findOriginalError(e){let t=e&&Ir(e);for(;t&&Ir(t);)t=Ir(t);return t||null}}const Er=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(U))();function Sr(e){return e instanceof Function?e():e}var kr=(()=>((kr=kr||{})[kr.Important=1]="Important",kr[kr.DashCase=2]="DashCase",kr))();function Ar(e,t){return(void 0)(e,t)}function xr(e){const t=e[3];return he(t)?t[3]:t}function Nr(e){return Pr(e[13])}function Or(e){return Pr(e[4])}function Pr(e){for(;null!==e&&!he(e);)e=e[4];return e}function Rr(e,t,n,r,i){if(null!=r){let s,o=!1;he(r)?s=r:ue(r)&&(o=!0,r=r[0]);const a=ke(r);0===e&&null!==n?null==i?jr(t,n,a):Ur(t,n,a,i||null,!0):1===e&&null!==n?Ur(t,n,a,i||null,!0):2===e?function(e,t,n){const r=Br(e,t);r&&function(e,t,n,r){Ee(e)?e.removeChild(t,n,r):t.removeChild(n)}(e,r,t,n)}(t,a,o):3===e&&t.destroyNode(a),null!=s&&function(e,t,n,r,i){const s=n[7];s!==ke(n)&&Rr(t,e,r,s,i);for(let o=le;o<n.length;o++){const i=n[o];Xr(i[1],i,e,t,r,s)}}(t,e,s,n,i)}}function Dr(e,t,n){return Ee(e)?e.createElement(t,n):null===n?e.createElement(t):e.createElementNS(n,t)}function Lr(e,t){const n=e[9],r=n.indexOf(t),i=t[3];1024&t[2]&&(t[2]&=-1025,Fe(i,-1)),n.splice(r,1)}function Mr(e,t){if(e.length<=le)return;const n=le+t,r=e[n];if(r){const s=r[17];null!==s&&s!==e&&Lr(s,r),t>0&&(e[n-1][4]=r[4]);const o=gn(e,le+t);Xr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=o[19];null!==a&&a.detachView(o[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Fr(e,t){if(!(256&t[2])){const n=t[11];Ee(n)&&n.destroyNode&&Xr(e,t,n,3,null,null),function(e){let t=e[13];if(!t)return $r(e[1],e);for(;t;){let n=null;if(ue(t))n=t[13];else{const e=t[10];e&&(n=e)}if(!n){for(;t&&!t[4]&&t!==e;)ue(t)&&$r(t[1],t),t=t[3];null===t&&(t=e),ue(t)&&$r(t[1],t),n=t&&t[4]}t=n}}(t)}}function $r(e,t){if(!(256&t[2])){t[2]&=-129,t[2]|=256,function(e,t){let n;if(null!=e&&null!=(n=e.destroyHooks))for(let r=0;r<n.length;r+=2){const e=t[n[r]];if(!(e instanceof It)){const t=n[r+1];if(Array.isArray(t))for(let n=0;n<t.length;n+=2){const r=e[t[n]],i=t[n+1];try{i.call(r)}finally{}}else try{t.call(e)}finally{}}}}(e,t),function(e,t){const n=e.cleanup,r=t[7];let i=-1;if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const e=n[s+1],o="function"==typeof e?e(t):ke(t[e]),a=r[i=n[s+2]],c=n[s+3];"boolean"==typeof c?o.removeEventListener(n[s],a,c):c>=0?r[i=c]():r[i=-c].unsubscribe(),s+=2}else{const e=r[i=n[s+1]];n[s].call(e)}if(null!==r){for(let e=i+1;e<r.length;e++)(0,r[e])();t[7]=null}}(e,t),1===t[1].type&&Ee(t[11])&&t[11].destroy();const n=t[17];if(null!==n&&he(t[3])){n!==t[3]&&Lr(n,t);const r=t[19];null!==r&&r.detachView(e)}}}function Vr(e,t,n){return function(e,t,n){let r=t;for(;null!==r&&40&r.type;)r=(t=r).parent;if(null===r)return n[0];if(2&r.flags){const t=e.data[r.directiveStart].encapsulation;if(t===L.None||t===L.Emulated)return null}return xe(r,n)}(e,t.parent,n)}function Ur(e,t,n,r,i){Ee(e)?e.insertBefore(t,n,r,i):t.insertBefore(n,r,i)}function jr(e,t,n){Ee(e)?e.appendChild(t,n):t.appendChild(n)}function qr(e,t,n,r,i){null!==r?Ur(e,t,n,r,i):jr(e,t,n)}function Br(e,t){return Ee(e)?e.parentNode(t):t.parentNode}function zr(e,t,n){return Hr(e,t,n)}let Hr=function(e,t,n){return 40&e.type?xe(e,n):null};function Gr(e,t,n,r){const i=Vr(e,r,t),s=t[11],o=zr(r.parent||t[6],r,t);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)qr(s,i,n[a],o,!1);else qr(s,i,n,o,!1)}function Wr(e,t){if(null!==t){const n=t.type;if(3&n)return xe(t,e);if(4&n)return Yr(-1,e[t.index]);if(8&n){const n=t.child;if(null!==n)return Wr(e,n);{const n=e[t.index];return he(n)?Yr(-1,n):ke(n)}}if(32&n)return Ar(t,e)()||ke(e[t.index]);{const n=Kr(e,t);return null!==n?Array.isArray(n)?n[0]:Wr(xr(e[16]),n):Wr(e,t.next)}}return null}function Kr(e,t){return null!==t?e[16][6].projection[t.projection]:null}function Yr(e,t){const n=le+e+1;if(n<t.length){const e=t[n],r=e[1].firstChild;if(null!==r)return Wr(e,r)}return t[7]}function Qr(e,t,n,r,i,s,o){for(;null!=n;){const a=r[n.index],c=n.type;if(o&&0===t&&(a&&wr(ke(a),r),n.flags|=4),64!=(64&n.flags))if(8&c)Qr(e,t,n.child,r,i,s,!1),Rr(t,e,i,a,s);else if(32&c){const o=Ar(n,r);let c;for(;c=o();)Rr(t,e,i,c,s);Rr(t,e,i,a,s)}else 16&c?Jr(e,t,r,n,i,s):Rr(t,e,i,a,s);n=o?n.projectionNext:n.next}}function Xr(e,t,n,r,i,s){Qr(n,r,e.firstChild,t,i,s,!1)}function Jr(e,t,n,r,i,s){const o=n[16],a=o[6].projection[r.projection];if(Array.isArray(a))for(let c=0;c<a.length;c++)Rr(t,e,i,a[c],s);else Qr(e,t,a,o[3],i,s,!0)}function Zr(e,t,n){Ee(e)?e.setAttribute(t,"style",n):t.style.cssText=n}function ei(e,t,n){Ee(e)?""===n?e.removeAttribute(t,"class"):e.setAttribute(t,"class",n):t.className=n}function ti(e,t,n){let r=e.length;for(;;){const i=e.indexOf(t,n);if(-1===i)return i;if(0===i||e.charCodeAt(i-1)<=32){const n=t.length;if(i+n===r||e.charCodeAt(i+n)<=32)return i}n=i+1}}const ni="ng-template";function ri(e,t,n){let r=0;for(;r<e.length;){let i=e[r++];if(n&&"class"===i){if(i=e[r],-1!==ti(i.toLowerCase(),t,0))return!0}else if(1===i){for(;r<e.length&&"string"==typeof(i=e[r++]);)if(i.toLowerCase()===t)return!0;return!1}}return!1}function ii(e){return 4===e.type&&e.value!==ni}function si(e,t,n){return t===(4!==e.type||n?e.value:ni)}function oi(e,t,n){let r=4;const i=e.attrs||[],s=function(e){for(let t=0;t<e.length;t++)if(Tt(e[t]))return t;return e.length}(i);let o=!1;for(let a=0;a<t.length;a++){const c=t[a];if("number"!=typeof c){if(!o)if(4&r){if(r=2|1&r,""!==c&&!si(e,c,n)||""===c&&1===t.length){if(ai(r))return!1;o=!0}}else{const l=8&r?c:t[++a];if(8&r&&null!==e.attrs){if(!ri(e.attrs,l,n)){if(ai(r))return!1;o=!0}continue}const u=ci(8&r?"class":c,i,ii(e),n);if(-1===u){if(ai(r))return!1;o=!0;continue}if(""!==l){let e;e=u>s?"":i[u+1].toLowerCase();const t=8&r?e:null;if(t&&-1!==ti(t,l,0)||2&r&&l!==e){if(ai(r))return!1;o=!0}}}}else{if(!o&&!ai(r)&&!ai(c))return!1;if(o&&ai(c))continue;o=!1,r=c|1&r}}return ai(r)||o}function ai(e){return 0==(1&e)}function ci(e,t,n,r){if(null===t)return-1;let i=0;if(r||!n){let n=!1;for(;i<t.length;){const r=t[i];if(r===e)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let e=t[++i];for(;"string"==typeof e;)e=t[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(e,t){let n=e.indexOf(4);if(n>-1)for(n++;n<e.length;){const r=e[n];if("number"==typeof r)return-1;if(r===t)return n;n++}return-1}(t,e)}function li(e,t,n=!1){for(let r=0;r<t.length;r++)if(oi(e,t[r],n))return!0;return!1}function ui(e,t){e:for(let n=0;n<t.length;n++){const r=t[n];if(e.length===r.length){for(let t=0;t<e.length;t++)if(e[t]!==r[t])continue e;return!0}}return!1}function hi(e,t){return e?":not("+t.trim()+")":t}function di(e){let t=e[0],n=1,r=2,i="",s=!1;for(;n<e.length;){let o=e[n];if("string"==typeof o)if(2&r){const t=e[++n];i+="["+o+(t.length>0?'="'+t+'"':"")+"]"}else 8&r?i+="."+o:4&r&&(i+=" "+o);else""===i||ai(o)||(t+=hi(s,i),i=""),r=o,s=s||!ai(r);n++}return""!==i&&(t+=hi(s,i)),t}const pi={};function fi(e){gi(je(),Ue(),dt()+e,Ke())}function gi(e,t,n,r){if(!r)if(3==(3&t[2])){const r=e.preOrderCheckHooks;null!==r&&mt(t,r,n)}else{const r=e.preOrderHooks;null!==r&&yt(t,r,0,n)}pt(n)}function mi(e,t){return e<<17|t<<2}function yi(e){return e>>17&32767}function vi(e){return 2|e}function _i(e){return(131068&e)>>2}function wi(e,t){return-131069&e|t<<2}function bi(e){return 1|e}function Ii(e,t){const n=e.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],s=n[r+1];if(-1!==s){const n=e.data[s];rt(i),n.contentQueries(2,t[s],s)}}}function Ci(e,t,n,r,i,s,o,a,c,l){const u=t.blueprint.slice();return u[0]=i,u[2]=140|r,Me(u),u[3]=u[15]=e,u[8]=n,u[10]=o||e&&e[10],u[11]=a||e&&e[11],u[12]=c||e&&e[12]||null,u[9]=l||e&&e[9]||null,u[6]=s,u[16]=2==t.type?e[16]:u,u}function Ti(e,t,n,r,i){let s=e.data[t];if(null===s)s=function(e,t,n,r,i){const s=ze(),o=Ge(),a=e.data[t]=function(e,t,n,r,i,s){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:t?t.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:s,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:t,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,o?s:s&&s.parent,n,t,r,i);return null===e.firstChild&&(e.firstChild=a),null!==s&&(o?null==s.child&&null!==a.parent&&(s.child=a):null===s.next&&(s.next=a)),a}(e,t,n,r,i),$e.lFrame.inI18n&&(s.flags|=64);else if(64&s.type){s.type=n,s.value=r,s.attrs=i;const e=function(){const e=$e.lFrame,t=e.currentTNode;return e.isParent?t:t.parent}();s.injectorIndex=null===e?-1:e.injectorIndex}return He(s,!0),s}function Ei(e,t,n,r){if(0===n)return-1;const i=t.length;for(let s=0;s<n;s++)t.push(r),e.blueprint.push(r),e.data.push(null);return i}function Si(e,t,n){ot(t);try{const r=e.viewQuery;null!==r&&ns(1,r,n);const i=e.template;null!==i&&xi(e,t,i,1,n),e.firstCreatePass&&(e.firstCreatePass=!1),e.staticContentQueries&&Ii(e,t),e.staticViewQueries&&ns(2,e.viewQuery,n);const s=e.components;null!==s&&function(e,t){for(let n=0;n<t.length;n++)Xi(e,t[n])}(t,s)}catch(r){throw e.firstCreatePass&&(e.incompleteFirstPass=!0),r}finally{t[2]&=-5,ht()}}function ki(e,t,n,r){const i=t[2];if(256==(256&i))return;ot(t);const s=Ke();try{Me(t),$e.lFrame.bindingIndex=e.bindingStartIndex,null!==n&&xi(e,t,n,2,r);const o=3==(3&i);if(!s)if(o){const n=e.preOrderCheckHooks;null!==n&&mt(t,n,null)}else{const n=e.preOrderHooks;null!==n&&yt(t,n,0,null),vt(t,0)}if(function(e){for(let t=Nr(e);null!==t;t=Or(t)){if(!t[2])continue;const e=t[9];for(let t=0;t<e.length;t++){const n=e[t],r=n[3];0==(1024&n[2])&&Fe(r,1),n[2]|=1024}}}(t),function(e){for(let t=Nr(e);null!==t;t=Or(t))for(let e=le;e<t.length;e++){const n=t[e],r=n[1];De(n)&&ki(r,n,r.template,n[8])}}(t),null!==e.contentQueries&&Ii(e,t),!s)if(o){const n=e.contentCheckHooks;null!==n&&mt(t,n)}else{const n=e.contentHooks;null!==n&&yt(t,n,1),vt(t,1)}!function(e,t){const n=e.hostBindingOpCodes;if(null!==n)try{for(let e=0;e<n.length;e++){const r=n[e];if(r<0)pt(~r);else{const i=r,s=n[++e],o=n[++e];et(s,i),o(2,t[i])}}}finally{pt(-1)}}(e,t);const a=e.components;null!==a&&function(e,t){for(let n=0;n<t.length;n++)Yi(e,t[n])}(t,a);const c=e.viewQuery;if(null!==c&&ns(2,c,r),!s)if(o){const n=e.viewCheckHooks;null!==n&&mt(t,n)}else{const n=e.viewHooks;null!==n&&yt(t,n,2),vt(t,2)}!0===e.firstUpdatePass&&(e.firstUpdatePass=!1),s||(t[2]&=-73),1024&t[2]&&(t[2]&=-1025,Fe(t[3],-1))}finally{ht()}}function Ai(e,t,n,r){const i=t[10],s=!Ke(),o=Re(t);try{s&&!o&&i.begin&&i.begin(),o&&Si(e,t,r),ki(e,t,n,r)}finally{s&&!o&&i.end&&i.end()}}function xi(e,t,n,r,i){const s=dt(),o=2&r;try{pt(-1),o&&t.length>ce&&gi(e,t,ce,Ke()),n(r,i)}finally{pt(s)}}function Ni(e,t,n){if(de(t)){const r=t.directiveEnd;for(let i=t.directiveStart;i<r;i++){const t=e.data[i];t.contentQueries&&t.contentQueries(1,n[i],i)}}}function Oi(e,t,n){Ve()&&(function(e,t,n,r){const i=n.directiveStart,s=n.directiveEnd;e.firstCreatePass||Dt(n,t),wr(r,t);const o=n.initialInputs;for(let a=i;a<s;a++){const r=e.data[a],s=ge(r);s&&Hi(t,n,r);const c=Gt(t,e,a,n);wr(c,t),null!==o&&Gi(0,a-i,c,r,0,o),s&&(Pe(n.index,t)[8]=c)}}(e,t,n,xe(n,t)),128==(128&n.flags)&&function(e,t,n){const r=n.directiveStart,i=n.directiveEnd,s=n.index,o=$e.lFrame.currentDirectiveIndex;try{pt(s);for(let n=r;n<i;n++){const r=e.data[n],i=t[n];tt(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Ui(r,i)}}finally{pt(-1),tt(o)}}(e,t,n))}function Pi(e,t,n=xe){const r=t.localNames;if(null!==r){let i=t.index+1;for(let s=0;s<r.length;s+=2){const o=r[s+1],a=-1===o?n(t,e):e[o];e[i++]=a}}}function Ri(e){const t=e.tView;return null===t||t.incompleteFirstPass?e.tView=Di(1,null,e.template,e.decls,e.vars,e.directiveDefs,e.pipeDefs,e.viewQuery,e.schemas,e.consts):t}function Di(e,t,n,r,i,s,o,a,c,l){const u=ce+r,h=u+i,d=function(e,t){const n=[];for(let r=0;r<t;r++)n.push(r<e?null:pi);return n}(u,h),p="function"==typeof l?l():l;return d[1]={type:e,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:t,data:d.slice().fill(null,u),bindingStartIndex:u,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof s?s():s,pipeRegistry:"function"==typeof o?o():o,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1}}function Li(e,t,n,r){const i=is(t);null===n?i.push(r):(i.push(n),e.firstCreatePass&&ss(e).push(r,i.length-1))}function Mi(e,t,n){for(let r in e)if(e.hasOwnProperty(r)){const i=e[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(t,i):n[r]=[t,i]}return n}function Fi(e,t,n,r,i,s,o,a){const c=xe(t,n);let l,u=t.inputs;var h;!a&&null!=u&&(l=u[r])?(as(e,n,l,r,i),pe(t)&&function(e,t){const n=Pe(t,e);16&n[2]||(n[2]|=64)}(n,t.index)):3&t.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=o?o(i,t.value||"",r):i,Ee(s)?s.setProperty(c,r,i):Et(r)||(c.setProperty?c.setProperty(r,i):c[r]=i))}function $i(e,t,n,r){let i=!1;if(Ve()){const s=function(e,t,n){const r=e.directiveRegistry;let i=null;if(r)for(let s=0;s<r.length;s++){const o=r[s];li(n,o.selectors,!1)&&(i||(i=[]),$t(Dt(n,t),e,o.type),ge(o)?(ji(e,n),i.unshift(o)):i.push(o))}return i}(e,t,n),o=null===r?null:{"":-1};if(null!==s){i=!0,Bi(n,e.data.length,s.length);for(let e=0;e<s.length;e++){const t=s[e];t.providersResolver&&t.providersResolver(t)}let r=!1,a=!1,c=Ei(e,t,s.length,null);for(let i=0;i<s.length;i++){const l=s[i];n.mergedAttrs=St(n.mergedAttrs,l.hostAttrs),zi(e,n,t,c,l),qi(c,l,o),null!==l.contentQueries&&(n.flags|=8),null===l.hostBindings&&null===l.hostAttrs&&0===l.hostVars||(n.flags|=128);const u=l.type.prototype;!r&&(u.ngOnChanges||u.ngOnInit||u.ngDoCheck)&&((e.preOrderHooks||(e.preOrderHooks=[])).push(n.index),r=!0),a||!u.ngOnChanges&&!u.ngDoCheck||((e.preOrderCheckHooks||(e.preOrderCheckHooks=[])).push(n.index),a=!0),c++}!function(e,t){const n=t.directiveEnd,r=e.data,i=t.attrs,s=[];let o=null,a=null;for(let c=t.directiveStart;c<n;c++){const e=r[c],n=e.inputs,l=null===i||ii(t)?null:Wi(n,i);s.push(l),o=Mi(n,c,o),a=Mi(e.outputs,c,a)}null!==o&&(o.hasOwnProperty("class")&&(t.flags|=16),o.hasOwnProperty("style")&&(t.flags|=32)),t.initialInputs=s,t.inputs=o,t.outputs=a}(e,n)}o&&function(e,t,n){if(t){const r=e.localNames=[];for(let e=0;e<t.length;e+=2){const i=n[t[e+1]];if(null==i)throw new m("301",`Export of name '${t[e+1]}' not found!`);r.push(t[e],i)}}}(n,r,o)}return n.mergedAttrs=St(n.mergedAttrs,n.attrs),i}function Vi(e,t,n,r,i,s){const o=s.hostBindings;if(o){let n=e.hostBindingOpCodes;null===n&&(n=e.hostBindingOpCodes=[]);const s=~t.index;(function(e){let t=e.length;for(;t>0;){const n=e[--t];if("number"==typeof n&&n<0)return n}return 0})(n)!=s&&n.push(s),n.push(r,i,o)}}function Ui(e,t){null!==e.hostBindings&&e.hostBindings(1,t)}function ji(e,t){t.flags|=2,(e.components||(e.components=[])).push(t.index)}function qi(e,t,n){if(n){if(t.exportAs)for(let r=0;r<t.exportAs.length;r++)n[t.exportAs[r]]=e;ge(t)&&(n[""]=e)}}function Bi(e,t,n){e.flags|=1,e.directiveStart=t,e.directiveEnd=t+n,e.providerIndexes=t}function zi(e,t,n,r,i){e.data[r]=i;const s=i.factory||(i.factory=me(i.type)),o=new It(s,ge(i),null);e.blueprint[r]=o,n[r]=o,Vi(e,t,0,r,Ei(e,n,i.hostVars,pi),i)}function Hi(e,t,n){const r=xe(t,e),i=Ri(n),s=e[10],o=Ji(e,Ci(e,i,null,n.onPush?64:16,r,t,s,s.createRenderer(r,n),null,null));e[t.index]=o}function Gi(e,t,n,r,i,s){const o=s[t];if(null!==o){const e=r.setInput;for(let t=0;t<o.length;){const i=o[t++],s=o[t++],a=o[t++];null!==e?r.setInput(n,a,i,s):n[s]=a}}}function Wi(e,t){let n=null,r=0;for(;r<t.length;){const i=t[r];if(0!==i)if(5!==i){if("number"==typeof i)break;e.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,e[i],t[r+1])),r+=2}else r+=2;else r+=4}return n}function Ki(e,t,n,r){return new Array(e,!0,!1,t,null,0,r,n,null,null)}function Yi(e,t){const n=Pe(t,e);if(De(n)){const e=n[1];80&n[2]?ki(e,n,e.template,n[8]):n[5]>0&&Qi(n)}}function Qi(e){for(let n=Nr(e);null!==n;n=Or(n))for(let e=le;e<n.length;e++){const t=n[e];if(1024&t[2]){const e=t[1];ki(e,t,e.template,t[8])}else t[5]>0&&Qi(t)}const t=e[1].components;if(null!==t)for(let n=0;n<t.length;n++){const r=Pe(t[n],e);De(r)&&r[5]>0&&Qi(r)}}function Xi(e,t){const n=Pe(t,e),r=n[1];!function(e,t){for(let n=t.length;n<e.blueprint.length;n++)t.push(e.blueprint[n])}(r,n),Si(r,n,n[8])}function Ji(e,t){return e[13]?e[14][4]=t:e[13]=t,e[14]=t,t}function Zi(e){for(;e;){e[2]|=64;const t=xr(e);if(0!=(512&e[2])&&!t)return e;e=t}return null}function es(e,t,n){const r=t[10];r.begin&&r.begin();try{ki(e,t,e.template,n)}catch(i){throw os(t,i),i}finally{r.end&&r.end()}}function ts(e){!function(e){for(let t=0;t<e.components.length;t++){const n=e.components[t],r=br(n),i=r[1];Ai(i,r,i.template,n)}}(e[8])}function ns(e,t,n){rt(0),t(e,n)}const rs=(()=>Promise.resolve(null))();function is(e){return e[7]||(e[7]=[])}function ss(e){return e.cleanup||(e.cleanup=[])}function os(e,t){const n=e[9],r=n?n.get(Tr,null):null;r&&r.handleError(t)}function as(e,t,n,r,i){for(let s=0;s<n.length;){const o=n[s++],a=n[s++],c=t[o],l=e.data[o];null!==l.setInput?l.setInput(c,i,r,a):c[a]=i}}function cs(e,t,n){const r=Ae(t,e);!function(e,t,n){Ee(e)?e.setValue(t,n):t.textContent=n}(e[11],r,n)}function ls(e,t,n){let r=n?e.styles:null,i=n?e.classes:null,s=0;if(null!==t)for(let o=0;o<t.length;o++){const e=t[o];"number"==typeof e?s=e:1==s?i=h(i,e):2==s&&(r=h(r,e+": "+t[++o]+";"))}n?e.styles=r:e.stylesWithoutHost=r,n?e.classes=i:e.classesWithoutHost=i}const us=new on("INJECTOR",-1);class hs{get(e,t=wn){if(t===wn){const t=new Error(`NullInjectorError: No provider for ${u(e)}!`);throw t.name="NullInjectorError",t}return t}}const ds=new on("Set Injector scope."),ps={},fs={};let gs;function ms(){return void 0===gs&&(gs=new hs),gs}function ys(e,t=null,n=null,r){return new vs(e,n,t||ms(),r)}class vs{constructor(e,t,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];t&&pn(t,n=>this.processProvider(n,e,t)),pn([e],e=>this.processInjectorType(e,[],i)),this.records.set(us,bs(void 0,this));const s=this.records.get(ds);this.scope=null!=s?s.value:null,this.source=r||("object"==typeof e?null:u(e))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(e=>e.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(e,t=wn,n=x.Default){this.assertNotDestroyed();const r=En(this),i=O(void 0);try{if(!(n&x.SkipSelf)){let t=this.records.get(e);if(void 0===t){const n=("function"==typeof(s=e)||"object"==typeof s&&s instanceof on)&&I(e);t=n&&this.injectableDefInScope(n)?bs(_s(e),ps):null,this.records.set(e,t)}if(null!=t)return this.hydrate(e,t)}return(n&x.Self?ms():this.parent).get(e,t=n&x.Optional&&t===wn?null:t)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(u(e)),r)throw o;return function(e,t,n,r){const i=e.ngTempTokenPath;throw t[In]&&i.unshift(t[In]),e.message=function(e,t,n,r=null){e=e&&"\n"===e.charAt(0)&&"\u0275"==e.charAt(1)?e.substr(2):e;let i=u(t);if(Array.isArray(t))i=t.map(u).join(" -> ");else if("object"==typeof t){let e=[];for(let n in t)if(t.hasOwnProperty(n)){let r=t[n];e.push(n+":"+("string"==typeof r?JSON.stringify(r):u(r)))}i=`{${e.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${e.replace(bn,"\n  ")}`}("\n"+e.message,i,n,r),e.ngTokenPath=i,e.ngTempTokenPath=null,e}(o,e,"R3InjectorError",this.source)}throw o}finally{O(i),En(r)}var s}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(e=>this.get(e))}toString(){const e=[];return this.records.forEach((t,n)=>e.push(u(n))),`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(e,t,n){if(!(e=f(e)))return!1;let r=T(e);const i=null==r&&e.ngModule||void 0,s=void 0===i?e:i,o=-1!==n.indexOf(s);if(void 0!==i&&(r=T(i)),null==r)return!1;if(null!=r.imports&&!o){let e;n.push(s);try{pn(r.imports,r=>{this.processInjectorType(r,t,n)&&(void 0===e&&(e=[]),e.push(r))})}finally{}if(void 0!==e)for(let t=0;t<e.length;t++){const{ngModule:n,providers:r}=e[t];pn(r,e=>this.processProvider(e,n,r||q))}}this.injectorDefTypes.add(s);const a=me(s)||(()=>new s);this.records.set(s,bs(a,ps));const c=r.providers;if(null!=c&&!o){const t=e;pn(c,e=>this.processProvider(e,t,c))}return void 0!==i&&void 0!==e.providers}processProvider(e,t,n){let r=Cs(e=f(e))?e:f(e&&e.provide);const i=function(e,t,n){return Is(e)?bs(void 0,e.useValue):bs(ws(e),ps)}(e);if(Cs(e)||!0!==e.multi)this.records.get(r);else{let t=this.records.get(r);t||(t=bs(void 0,ps,!0),t.factory=()=>An(t.multi),this.records.set(r,t)),r=e,t.multi.push(e)}this.records.set(r,i)}hydrate(e,t){var n;return t.value===ps&&(t.value=fs,t.value=t.factory()),"object"==typeof t.value&&t.value&&null!==(n=t.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(t.value),t.value}injectableDefInScope(e){if(!e.providedIn)return!1;const t=f(e.providedIn);return"string"==typeof t?"any"===t||t===this.scope:this.injectorDefTypes.has(t)}}function _s(e){const t=I(e),n=null!==t?t.factory:me(e);if(null!==n)return n;if(e instanceof on)throw new Error(`Token ${u(e)} is missing a \u0275prov definition.`);if(e instanceof Function)return function(e){const t=e.length;if(t>0){const n=mn(t,"?");throw new Error(`Can't resolve all parameters for ${u(e)}: (${n.join(", ")}).`)}const n=function(e){const t=e&&(e[E]||e[k]);if(t){const n=function(e){if(e.hasOwnProperty("name"))return e.name;const t=(""+e).match(/^function\s*([^\s(]+)/);return null===t?"":t[1]}(e);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),t}return null}(e);return null!==n?()=>n.factory(e):()=>new e}(e);throw new Error("unreachable")}function ws(e,t,n){let r;if(Cs(e)){const t=f(e);return me(t)||_s(t)}if(Is(e))r=()=>f(e.useValue);else if((i=e)&&i.useFactory)r=()=>e.useFactory(...An(e.deps||[]));else if(function(e){return!(!e||!e.useExisting)}(e))r=()=>kn(f(e.useExisting));else{const t=f(e&&(e.useClass||e.provide));if(!function(e){return!!e.deps}(e))return me(t)||_s(t);r=()=>new t(...An(e.deps))}var i;return r}function bs(e,t,n=!1){return{factory:e,value:t,multi:n?[]:void 0}}function Is(e){return null!==e&&"object"==typeof e&&Cn in e}function Cs(e){return"function"==typeof e}const Ts=function(e,t,n){return function(e,t=null,n=null,r){const i=ys(e,t,n,r);return i._resolveInjectorDefTypes(),i}({name:n},t,e,n)};class Es{static create(e,t){return Array.isArray(e)?Ts(e,t,""):Ts(e.providers,e.parent,e.name||"")}}function Ss(e,t){gt(br(e)[1],Be())}function ks(e){let t=Object.getPrototypeOf(e.type.prototype).constructor,n=!0;const r=[e];for(;t;){let i;if(ge(e))i=t.\u0275cmp||t.\u0275dir;else{if(t.\u0275cmp)throw new Error("Directives cannot inherit Components");i=t.\u0275dir}if(i){if(n){r.push(i);const t=e;t.inputs=As(e.inputs),t.declaredInputs=As(e.declaredInputs),t.outputs=As(e.outputs);const n=i.hostBindings;n&&Os(e,n);const s=i.viewQuery,o=i.contentQueries;if(s&&xs(e,s),o&&Ns(e,o),l(e.inputs,i.inputs),l(e.declaredInputs,i.declaredInputs),l(e.outputs,i.outputs),ge(i)&&i.data.animation){const t=e.data;t.animation=(t.animation||[]).concat(i.data.animation)}}const t=i.features;if(t)for(let r=0;r<t.length;r++){const i=t[r];i&&i.ngInherit&&i(e),i===ks&&(n=!1)}}t=Object.getPrototypeOf(t)}!function(e){let t=0,n=null;for(let r=e.length-1;r>=0;r--){const i=e[r];i.hostVars=t+=i.hostVars,i.hostAttrs=St(i.hostAttrs,n=St(n,i.hostAttrs))}}(r)}function As(e){return e===j?{}:e===q?[]:e}function xs(e,t){const n=e.viewQuery;e.viewQuery=n?(e,r)=>{t(e,r),n(e,r)}:t}function Ns(e,t){const n=e.contentQueries;e.contentQueries=n?(e,r,i)=>{t(e,r,i),n(e,r,i)}:t}function Os(e,t){const n=e.hostBindings;e.hostBindings=n?(e,r)=>{t(e,r),n(e,r)}:t}Es.THROW_IF_NOT_FOUND=wn,Es.NULL=new hs,Es.\u0275prov=w({token:Es,providedIn:"any",factory:()=>kn(us)}),Es.__NG_ELEMENT_ID__=-1;let Ps=null;function Rs(){if(!Ps){const e=U.Symbol;if(e&&e.iterator)Ps=e.iterator;else{const e=Object.getOwnPropertyNames(Map.prototype);for(let t=0;t<e.length;++t){const n=e[t];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Ps=n)}}}return Ps}class Ds{constructor(e){this.wrapped=e}static wrap(e){return new Ds(e)}static unwrap(e){return Ds.isWrapped(e)?e.wrapped:e}static isWrapped(e){return e instanceof Ds}}function Ls(e){return!!Ms(e)&&(Array.isArray(e)||!(e instanceof Map)&&Rs()in e)}function Ms(e){return null!==e&&("function"==typeof e||"object"==typeof e)}function Fs(e,t,n){return e[t]=n}function $s(e,t,n){return!Object.is(e[t],n)&&(e[t]=n,!0)}function Vs(e,t,n,r){const i=Ue();return $s(i,Je(),t)&&(je(),function(e,t,n,r,i,s){const o=xe(e,t);!function(e,t,n,r,i,s,o){if(null==s)Ee(e)?e.removeAttribute(t,i,n):t.removeAttribute(i);else{const a=null==o?y(s):o(s,r||"",i);Ee(e)?e.setAttribute(t,i,a,n):n?t.setAttributeNS(n,i,a):t.setAttribute(i,a)}}(t[11],o,s,e.value,n,r,i)}(ft(),i,e,t,n,r)),Vs}function Us(e,t,n,r){return $s(e,Je(),n)?t+y(n)+r:pi}function js(e,t,n,r,i,s,o,a){const c=Ue(),l=je(),u=e+ce,h=l.firstCreatePass?function(e,t,n,r,i,s,o,a,c){const l=t.consts,u=Ti(t,e,4,o||null,Le(l,a));$i(t,n,u,Le(l,c)),gt(t,u);const h=u.tViews=Di(2,u,r,i,s,t.directiveRegistry,t.pipeRegistry,null,t.schemas,l);return null!==t.queries&&(t.queries.template(t,u),h.queries=t.queries.embeddedTView(u)),u}(u,l,c,t,n,r,i,s,o):l.data[u];He(h,!1);const d=c[11].createComment("");Gr(l,c,d,h),wr(d,c),Ji(c,c[u]=Ki(d,c,d,h)),fe(h)&&Oi(l,c,h),null!=o&&Pi(c,h,a)}function qs(e){return Oe($e.lFrame.contextLView,ce+e)}function Bs(e,t=x.Default){const n=Ue();return null===n?kn(e,t):jt(Be(),n,f(e),t)}function zs(){throw new Error("invalid")}function Hs(e,t,n){const r=Ue();return $s(r,Je(),t)&&Fi(je(),ft(),r,e,t,r[11],n,!1),Hs}function Gs(e,t,n,r,i){const s=i?"class":"style";as(e,n,t.inputs[s],s,r)}function Ws(e,t,n,r){const i=Ue(),s=je(),o=ce+e,a=i[11],c=i[o]=Dr(a,t,$e.lFrame.currentNamespace),l=s.firstCreatePass?function(e,t,n,r,i,s,o){const a=t.consts,c=Ti(t,e,2,i,Le(a,s));return $i(t,n,c,Le(a,o)),null!==c.attrs&&ls(c,c.attrs,!1),null!==c.mergedAttrs&&ls(c,c.mergedAttrs,!0),null!==t.queries&&t.queries.elementStart(t,c),c}(o,s,i,0,t,n,r):s.data[o];He(l,!0);const u=l.mergedAttrs;null!==u&&Ct(a,c,u);const h=l.classes;null!==h&&ei(a,c,h);const d=l.styles;null!==d&&Zr(a,c,d),64!=(64&l.flags)&&Gr(s,i,c,l),0===$e.lFrame.elementDepthCount&&wr(c,i),$e.lFrame.elementDepthCount++,fe(l)&&(Oi(s,i,l),Ni(s,l,i)),null!==r&&Pi(i,l)}function Ks(){let e=Be();Ge()?We():(e=e.parent,He(e,!1));const t=e;$e.lFrame.elementDepthCount--;const n=je();n.firstCreatePass&&(gt(n,e),de(e)&&n.queries.elementEnd(e)),null!=t.classesWithoutHost&&function(e){return 0!=(16&e.flags)}(t)&&Gs(n,t,Ue(),t.classesWithoutHost,!0),null!=t.stylesWithoutHost&&function(e){return 0!=(32&e.flags)}(t)&&Gs(n,t,Ue(),t.stylesWithoutHost,!1)}function Ys(e,t,n,r){Ws(e,t,n,r),Ks()}function Qs(e,t,n){const r=Ue(),i=je(),s=e+ce,o=i.firstCreatePass?function(e,t,n,r,i){const s=t.consts,o=Le(s,r),a=Ti(t,e,8,"ng-container",o);return null!==o&&ls(a,o,!0),$i(t,n,a,Le(s,i)),null!==t.queries&&t.queries.elementStart(t,a),a}(s,i,r,t,n):i.data[s];He(o,!0);const a=r[s]=r[11].createComment("");Gr(i,r,a,o),wr(a,r),fe(o)&&(Oi(i,r,o),Ni(i,o,r)),null!=n&&Pi(r,o)}function Xs(){let e=Be();const t=je();Ge()?We():(e=e.parent,He(e,!1)),t.firstCreatePass&&(gt(t,e),de(e)&&t.queries.elementEnd(e))}function Js(){return Ue()}function Zs(e){return!!e&&"function"==typeof e.then}function eo(e){return!!e&&"function"==typeof e.subscribe}const to=eo;function no(e,t,n,r){const i=Ue(),s=je(),o=Be();return function(e,t,n,r,i,s,o,a){const c=fe(r),l=e.firstCreatePass&&ss(e),u=is(t);let h=!0;if(3&r.type||a){const d=xe(r,t),p=a?a(d):d,f=u.length,g=a?e=>a(ke(e[r.index])):r.index;if(Ee(n)){let o=null;if(!a&&c&&(o=function(e,t,n,r){const i=e.cleanup;if(null!=i)for(let s=0;s<i.length-1;s+=2){const e=i[s];if(e===n&&i[s+1]===r){const e=t[7],n=i[s+2];return e.length>n?e[n]:null}"string"==typeof e&&(s+=2)}return null}(e,t,i,r.index)),null!==o)(o.__ngLastListenerFn__||o).__ngNextListenerFn__=s,o.__ngLastListenerFn__=s,h=!1;else{s=io(r,t,0,s,!1);const e=n.listen(p,i,s);u.push(s,e),l&&l.push(i,g,f,f+1)}}else s=io(r,t,0,s,!0),p.addEventListener(i,s,o),u.push(s),l&&l.push(i,g,f,o)}else s=io(r,t,0,s,!1);const d=r.outputs;let p;if(h&&null!==d&&(p=d[i])){const e=p.length;if(e)for(let n=0;n<e;n+=2){const e=t[p[n]][p[n+1]].subscribe(s),o=u.length;u.push(s,e),l&&l.push(i,r.index,o,-(o+1))}}}(s,i,i[11],o,e,t,!!n,r),no}function ro(e,t,n,r){try{return!1!==n(r)}catch(i){return os(e,i),!1}}function io(e,t,n,r,i){return function n(s){if(s===Function)return r;const o=2&e.flags?Pe(e.index,t):t;0==(32&t[2])&&Zi(o);let a=ro(t,0,r,s),c=n.__ngNextListenerFn__;for(;c;)a=ro(t,0,c,s)&&a,c=c.__ngNextListenerFn__;return i&&!1===a&&(s.preventDefault(),s.returnValue=!1),a}}function so(e=1){return function(e){return($e.lFrame.contextLView=function(e,t){for(;e>0;)t=t[15],e--;return t}(e,$e.lFrame.contextLView))[8]}(e)}function oo(e,t){let n=null;const r=function(e){const t=e.attrs;if(null!=t){const e=t.indexOf(5);if(0==(1&e))return t[e+1]}return null}(e);for(let i=0;i<t.length;i++){const s=t[i];if("*"!==s){if(null===r?li(e,s,!0):ui(r,s))return i}else n=i}return n}function ao(e){const t=Ue()[16][6];if(!t.projection){const n=t.projection=mn(e?e.length:1,null),r=n.slice();let i=t.child;for(;null!==i;){const t=e?oo(i,e):0;null!==t&&(r[t]?r[t].projectionNext=i:n[t]=i,r[t]=i),i=i.next}}}function co(e,t=0,n){const r=Ue(),i=je(),s=Ti(i,ce+e,16,null,n||null);null===s.projection&&(s.projection=t),We(),64!=(64&s.flags)&&function(e,t,n){Jr(t[11],0,t,n,Vr(e,n,t),zr(n.parent||t[6],n,t))}(i,r,s)}function lo(e,t,n){return uo(e,"",t,"",n),lo}function uo(e,t,n,r,i){const s=Ue(),o=Us(s,t,n,r);return o!==pi&&Fi(je(),ft(),s,e,o,s[11],i,!1),uo}function ho(e,t,n,r,i){const s=e[n+1],o=null===t;let a=r?yi(s):_i(s),c=!1;for(;0!==a&&(!1===c||o);){const n=e[a+1];po(e[a],t)&&(c=!0,e[a+1]=r?bi(n):vi(n)),a=r?yi(n):_i(n)}c&&(e[n+1]=r?vi(s):bi(s))}function po(e,t){return null===e||null==t||(Array.isArray(e)?e[1]:e)===t||!(!Array.isArray(e)||"string"!=typeof t)&&_n(e,t)>=0}const fo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function go(e){return e.substring(fo.key,fo.keyEnd)}function mo(e,t){const n=fo.textEnd;return n===t?-1:(t=fo.keyEnd=function(e,t,n){for(;t<n&&e.charCodeAt(t)>32;)t++;return t}(e,fo.key=t,n),yo(e,t,n))}function yo(e,t,n){for(;t<n&&e.charCodeAt(t)<=32;)t++;return t}function vo(e,t){return function(e,t,n,r){const i=Ue(),s=je(),o=Ze(2);s.firstUpdatePass&&Io(s,e,o,true),t!==pi&&$s(i,o,t)&&Eo(s,s.data[dt()],i,i[11],e,i[o+1]=function(e,t){return null==e||"object"==typeof e&&(e=u(jn(e))),e}(t),true,o)}(e,t),vo}function _o(e){!function(e,t,n,r){const i=je(),s=Ze(2);i.firstUpdatePass&&Io(i,null,s,r);const o=Ue();if(n!==pi&&$s(o,s,n)){const a=i.data[dt()];if(Ao(a,r)&&!bo(i,s)){let e=a.classesWithoutHost;null!==e&&(n=h(e,n||"")),Gs(i,a,o,n,r)}else!function(e,t,n,r,i,s,o,a){i===pi&&(i=q);let c=0,l=0,u=0<i.length?i[0]:null,h=0<s.length?s[0]:null;for(;null!==u||null!==h;){const o=c<i.length?i[c+1]:void 0,d=l<s.length?s[l+1]:void 0;let p,f=null;u===h?(c+=2,l+=2,o!==d&&(f=h,p=d)):null===h||null!==u&&u<h?(c+=2,f=u):(l+=2,f=h,p=d),null!==f&&Eo(e,t,n,r,f,p,true,a),u=c<i.length?i[c]:null,h=l<s.length?s[l]:null}}(i,a,o,o[11],o[s+1],o[s+1]=function(e,t,n){if(null==n||""===n)return q;const r=[],i=jn(n);if(Array.isArray(i))for(let s=0;s<i.length;s++)e(r,i[s],!0);else if("object"==typeof i)for(const s in i)i.hasOwnProperty(s)&&e(r,s,i[s]);else"string"==typeof i&&t(r,i);return r}(e,t,n),0,s)}}(yn,wo,e,!0)}function wo(e,t){for(let n=function(e){return function(e){fo.key=0,fo.keyEnd=0,fo.value=0,fo.valueEnd=0,fo.textEnd=e.length}(e),mo(e,yo(e,0,fo.textEnd))}(t);n>=0;n=mo(t,n))yn(e,go(t),!0)}function bo(e,t){return t>=e.expandoStartIndex}function Io(e,t,n,r){const i=e.data;if(null===i[n+1]){const s=i[dt()],o=bo(e,n);Ao(s,r)&&null===t&&!o&&(t=!1),t=function(e,t,n,r){const i=function(e){const t=$e.lFrame.currentDirectiveIndex;return-1===t?null:e[t]}(e);let s=r?t.residualClasses:t.residualStyles;if(null===i)0===(r?t.classBindings:t.styleBindings)&&(n=To(n=Co(null,e,t,n,r),t.attrs,r),s=null);else{const o=t.directiveStylingLast;if(-1===o||e[o]!==i)if(n=Co(i,e,t,n,r),null===s){let n=function(e,t,n){const r=n?t.classBindings:t.styleBindings;if(0!==_i(r))return e[yi(r)]}(e,t,r);void 0!==n&&Array.isArray(n)&&(n=Co(null,e,t,n[1],r),n=To(n,t.attrs,r),function(e,t,n,r){e[yi(n?t.classBindings:t.styleBindings)]=r}(e,t,r,n))}else s=function(e,t,n){let r;const i=t.directiveEnd;for(let s=1+t.directiveStylingLast;s<i;s++)r=To(r,e[s].hostAttrs,n);return To(r,t.attrs,n)}(e,t,r)}return void 0!==s&&(r?t.residualClasses=s:t.residualStyles=s),n}(i,s,t,r),function(e,t,n,r,i,s){let o=s?t.classBindings:t.styleBindings,a=yi(o),c=_i(o);e[r]=n;let l,u=!1;if(Array.isArray(n)){const e=n;l=e[1],(null===l||_n(e,l)>0)&&(u=!0)}else l=n;if(i)if(0!==c){const t=yi(e[a+1]);e[r+1]=mi(t,a),0!==t&&(e[t+1]=wi(e[t+1],r)),e[a+1]=131071&e[a+1]|r<<17}else e[r+1]=mi(a,0),0!==a&&(e[a+1]=wi(e[a+1],r)),a=r;else e[r+1]=mi(c,0),0===a?a=r:e[c+1]=wi(e[c+1],r),c=r;u&&(e[r+1]=vi(e[r+1])),ho(e,l,r,!0),ho(e,l,r,!1),function(e,t,n,r,i){const s=i?e.residualClasses:e.residualStyles;null!=s&&"string"==typeof t&&_n(s,t)>=0&&(n[r+1]=bi(n[r+1]))}(t,l,e,r,s),o=mi(a,c),s?t.classBindings=o:t.styleBindings=o}(i,s,t,n,o,r)}}function Co(e,t,n,r,i){let s=null;const o=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<o&&(s=t[a],r=To(r,s.hostAttrs,i),s!==e);)a++;return null!==e&&(n.directiveStylingLast=a),r}function To(e,t,n){const r=n?1:2;let i=-1;if(null!==t)for(let s=0;s<t.length;s++){const o=t[s];"number"==typeof o?i=o:i===r&&(Array.isArray(e)||(e=void 0===e?[]:["",e]),yn(e,o,!!n||t[++s]))}return void 0===e?null:e}function Eo(e,t,n,r,i,s,o,a){if(!(3&t.type))return;const c=e.data,l=c[a+1];ko(1==(1&l)?So(c,t,n,i,_i(l),o):void 0)||(ko(s)||2==(2&l)&&(s=So(c,null,n,i,a,o)),function(e,t,n,r,i){const s=Ee(e);if(t)i?s?e.addClass(n,r):n.classList.add(r):s?e.removeClass(n,r):n.classList.remove(r);else{let t=-1===r.indexOf("-")?void 0:kr.DashCase;if(null==i)s?e.removeStyle(n,r,t):n.style.removeProperty(r);else{const o="string"==typeof i&&i.endsWith("!important");o&&(i=i.slice(0,-10),t|=kr.Important),s?e.setStyle(n,r,i,t):n.style.setProperty(r,i,o?"important":"")}}}(r,o,Ae(dt(),n),i,s))}function So(e,t,n,r,i,s){const o=null===t;let a;for(;i>0;){const t=e[i],s=Array.isArray(t),c=s?t[1]:t,l=null===c;let u=n[i+1];u===pi&&(u=l?q:void 0);let h=l?vn(u,r):c===r?u:void 0;if(s&&!ko(h)&&(h=vn(t,r)),ko(h)&&(a=h,o))return a;const d=e[i+1];i=o?yi(d):_i(d)}if(null!==t){let e=s?t.residualClasses:t.residualStyles;null!=e&&(a=vn(e,r))}return a}function ko(e){return void 0!==e}function Ao(e,t){return 0!=(e.flags&(t?16:32))}function xo(e,t=""){const n=Ue(),r=je(),i=e+ce,s=r.firstCreatePass?Ti(r,i,1,t,null):r.data[i],o=n[i]=function(e,t){return Ee(e)?e.createText(t):e.createTextNode(t)}(n[11],t);Gr(r,n,o,s),He(s,!1)}function No(e){return Oo("",e,""),No}function Oo(e,t,n){const r=Ue(),i=Us(r,e,t,n);return i!==pi&&cs(r,dt(),i),Oo}function Po(e,t,n,r,i){const s=Ue(),o=function(e,t,n,r,i,s){const o=function(e,t,n,r){const i=$s(e,t,n);return $s(e,t+1,r)||i}(e,Xe(),n,i);return Ze(2),o?t+y(n)+r+y(i)+s:pi}(s,e,t,n,r,i);return o!==pi&&cs(s,dt(),o),Po}function Ro(e,t,n){const r=Ue();return $s(r,Je(),t)&&Fi(je(),ft(),r,e,t,r[11],n,!0),Ro}const Do=void 0;var Lo=["en",[["a","p"],["AM","PM"],Do],[["AM","PM"],Do,Do],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Do,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Do,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Do,"{1} 'at' {0}",Do],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(e){let t=Math.floor(Math.abs(e)),n=e.toString().replace(/^[^.]*\.?/,"").length;return 1===t&&0===n?1:5}];let Mo={};function Fo(e){const t=function(e){return e.toLowerCase().replace(/_/g,"-")}(e);let n=Vo(t);if(n)return n;const r=t.split("-")[0];if(n=Vo(r),n)return n;if("en"===r)return Lo;throw new Error(`Missing locale data for the locale "${e}".`)}function $o(e){return Fo(e)[Uo.PluralCase]}function Vo(e){return e in Mo||(Mo[e]=U.ng&&U.ng.common&&U.ng.common.locales&&U.ng.common.locales[e]),Mo[e]}var Uo=(()=>((Uo=Uo||{})[Uo.LocaleId=0]="LocaleId",Uo[Uo.DayPeriodsFormat=1]="DayPeriodsFormat",Uo[Uo.DayPeriodsStandalone=2]="DayPeriodsStandalone",Uo[Uo.DaysFormat=3]="DaysFormat",Uo[Uo.DaysStandalone=4]="DaysStandalone",Uo[Uo.MonthsFormat=5]="MonthsFormat",Uo[Uo.MonthsStandalone=6]="MonthsStandalone",Uo[Uo.Eras=7]="Eras",Uo[Uo.FirstDayOfWeek=8]="FirstDayOfWeek",Uo[Uo.WeekendRange=9]="WeekendRange",Uo[Uo.DateFormat=10]="DateFormat",Uo[Uo.TimeFormat=11]="TimeFormat",Uo[Uo.DateTimeFormat=12]="DateTimeFormat",Uo[Uo.NumberSymbols=13]="NumberSymbols",Uo[Uo.NumberFormats=14]="NumberFormats",Uo[Uo.CurrencyCode=15]="CurrencyCode",Uo[Uo.CurrencySymbol=16]="CurrencySymbol",Uo[Uo.CurrencyName=17]="CurrencyName",Uo[Uo.Currencies=18]="Currencies",Uo[Uo.Directionality=19]="Directionality",Uo[Uo.PluralCase=20]="PluralCase",Uo[Uo.ExtraData=21]="ExtraData",Uo))();const jo="en-US";let qo=jo;function Bo(e){var t,n;n="Expected localeId to be defined",null==(t=e)&&function(e,t,n,r){throw new Error(`ASSERTION ERROR: ${e} [Expected=> null != ${t} <=Actual]`)}(n,t),"string"==typeof e&&(qo=e.toLowerCase().replace(/_/g,"-"))}function zo(e,t,n,r,i){if(e=f(e),Array.isArray(e))for(let s=0;s<e.length;s++)zo(e[s],t,n,r,i);else{const s=je(),o=Ue();let a=Cs(e)?e:f(e.provide),c=ws(e);const l=Be(),u=1048575&l.providerIndexes,h=l.directiveStart,d=l.providerIndexes>>20;if(Cs(e)||!e.multi){const r=new It(c,i,Bs),p=Wo(a,t,i?u:u+d,h);-1===p?($t(Dt(l,o),s,a),Ho(s,e,t.length),t.push(a),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(r),o.push(r)):(n[p]=r,o[p]=r)}else{const p=Wo(a,t,u+d,h),f=Wo(a,t,u,u+d),g=p>=0&&n[p],m=f>=0&&n[f];if(i&&!m||!i&&!g){$t(Dt(l,o),s,a);const u=function(e,t,n,r,i){const s=new It(e,n,Bs);return s.multi=[],s.index=t,s.componentProviders=0,Go(s,i,r&&!n),s}(i?Yo:Ko,n.length,i,r,c);!i&&m&&(n[f].providerFactory=u),Ho(s,e,t.length,0),t.push(a),l.directiveStart++,l.directiveEnd++,i&&(l.providerIndexes+=1048576),n.push(u),o.push(u)}else Ho(s,e,p>-1?p:f,Go(n[i?f:p],c,!i&&r));!i&&r&&m&&n[f].componentProviders++}}}function Ho(e,t,n,r){const i=Cs(t);if(i||t.useClass){const s=(t.useClass||t).prototype.ngOnDestroy;if(s){const o=e.destroyHooks||(e.destroyHooks=[]);if(!i&&t.multi){const e=o.indexOf(n);-1===e?o.push(n,[r,s]):o[e+1].push(r,s)}else o.push(n,s)}}}function Go(e,t,n){return n&&e.componentProviders++,e.multi.push(t)-1}function Wo(e,t,n,r){for(let i=n;i<r;i++)if(t[i]===e)return i;return-1}function Ko(e,t,n,r){return Qo(this.multi,[])}function Yo(e,t,n,r){const i=this.multi;let s;if(this.providerFactory){const e=this.providerFactory.componentProviders,t=Gt(n,n[1],this.providerFactory.index,r);s=t.slice(0,e),Qo(i,s);for(let n=e;n<t.length;n++)s.push(t[n])}else s=[],Qo(i,s);return s}function Qo(e,t){for(let n=0;n<e.length;n++)t.push((0,e[n])());return t}function Xo(e,t=[]){return n=>{n.providersResolver=(n,r)=>function(e,t,n){const r=je();if(r.firstCreatePass){const i=ge(e);zo(n,r.data,r.blueprint,i,!0),zo(t,r.data,r.blueprint,i,!1)}}(n,r?r(e):e,t)}}class Jo{}class Zo{resolveComponentFactory(e){throw function(e){const t=Error(`No component factory found for ${u(e)}. Did you add it to @NgModule.entryComponents?`);return t.ngComponent=e,t}(e)}}class ea{}function ta(...e){}function na(e,t){return new ia(xe(e,t))}ea.NULL=new Zo;const ra=function(){return na(Be(),Ue())};let ia=(()=>{class e{constructor(e){this.nativeElement=e}}return e.__NG_ELEMENT_ID__=ra,e})();function sa(e){return e instanceof ia?e.nativeElement:e}class oa{}let aa=(()=>{class e{}return e.__NG_ELEMENT_ID__=()=>ca(),e})();const ca=function(){const e=Ue(),t=Pe(Be().index,e);return function(e){return e[11]}(ue(t)?t:e)};let la=(()=>{class e{}return e.\u0275prov=w({token:e,providedIn:"root",factory:()=>null}),e})();class ua{constructor(e){this.full=e,this.major=e.split(".")[0],this.minor=e.split(".")[1],this.patch=e.split(".").slice(2).join(".")}}const ha=new ua("12.1.5");class da{constructor(){}supports(e){return Ls(e)}create(e){return new fa(e)}}const pa=(e,t)=>t;class fa{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||pa}forEachItem(e){let t;for(t=this._itHead;null!==t;t=t._next)e(t)}forEachOperation(e){let t=this._itHead,n=this._removalsHead,r=0,i=null;for(;t||n;){const s=!n||t&&t.currentIndex<va(n,r,i)?t:n,o=va(s,r,i),a=s.currentIndex;if(s===n)r--,n=n._nextRemoved;else if(t=t._next,null==s.previousIndex)r++;else{i||(i=[]);const e=o-r,t=a-r;if(e!=t){for(let n=0;n<e;n++){const r=n<i.length?i[n]:i[n]=0,s=r+n;t<=s&&s<e&&(i[n]=r+1)}i[s.previousIndex]=t-e}}o!==a&&e(s,o,a)}}forEachPreviousItem(e){let t;for(t=this._previousItHead;null!==t;t=t._nextPrevious)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachMovedItem(e){let t;for(t=this._movesHead;null!==t;t=t._nextMoved)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}forEachIdentityChange(e){let t;for(t=this._identityChangesHead;null!==t;t=t._nextIdentityChange)e(t)}diff(e){if(null==e&&(e=[]),!Ls(e))throw new Error(`Error trying to diff '${u(e)}'. Only arrays and iterables are allowed`);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t,n,r,i=this._itHead,s=!1;if(Array.isArray(e)){this.length=e.length;for(let t=0;t<this.length;t++)n=e[t],r=this._trackByFn(t,n),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,n,r,t)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,t),s=!0),i=i._next}else t=0,function(e,t){if(Array.isArray(e))for(let n=0;n<e.length;n++)t(e[n]);else{const n=e[Rs()]();let r;for(;!(r=n.next()).done;)t(r.value)}}(e,e=>{r=this._trackByFn(t,e),null!==i&&Object.is(i.trackById,r)?(s&&(i=this._verifyReinsertion(i,e,r,t)),Object.is(i.item,e)||this._addIdentityChange(i,e)):(i=this._mismatch(i,e,r,t),s=!0),i=i._next,t++}),this.length=t;return this._truncate(i),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,t,n,r){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._reinsertAfter(e,i,r)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(e.item,t)||this._addIdentityChange(e,t),this._moveAfter(e,i,r)):e=this._addAfter(new ga(t,n),i,r),e}_verifyReinsertion(e,t,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?e=this._reinsertAfter(i,e._prev,r):e.currentIndex!=r&&(e.currentIndex=r,this._addToMoves(e,r)),e}_truncate(e){for(;null!==e;){const t=e._next;this._addToRemovals(this._unlink(e)),e=t}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,t,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const r=e._prevRemoved,i=e._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(e,t,n),this._addToMoves(e,n),e}_moveAfter(e,t,n){return this._unlink(e),this._insertAfter(e,t,n),this._addToMoves(e,n),e}_addAfter(e,t,n){return this._insertAfter(e,t,n),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,t,n){const r=null===t?this._itHead:t._next;return e._next=r,e._prev=t,null===r?this._itTail=e:r._prev=e,null===t?this._itHead=e:t._next=e,null===this._linkedRecords&&(this._linkedRecords=new ya),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const t=e._prev,n=e._next;return null===t?this._itHead=n:t._next=n,null===n?this._itTail=t:n._prev=t,e}_addToMoves(e,t){return e.previousIndex===t||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ya),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,t){return e.item=t,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class ga{constructor(e,t){this.item=e,this.trackById=t,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class ma{constructor(){this._head=null,this._tail=null}add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,t){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===t||t<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){const t=e._prevDup,n=e._nextDup;return null===t?this._head=n:t._nextDup=n,null===n?this._tail=t:n._prevDup=t,null===this._head}}class ya{constructor(){this.map=new Map}put(e){const t=e.trackById;let n=this.map.get(t);n||(n=new ma,this.map.set(t,n)),n.add(e)}get(e,t){const n=this.map.get(e);return n?n.get(e,t):null}remove(e){const t=e.trackById;return this.map.get(t).remove(e)&&this.map.delete(t),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function va(e,t,n){const r=e.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+t+i}class _a{constructor(){}supports(e){return e instanceof Map||Ms(e)}create(){return new wa}}class wa{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(e){let t;for(t=this._mapHead;null!==t;t=t._next)e(t)}forEachPreviousItem(e){let t;for(t=this._previousMapHead;null!==t;t=t._nextPrevious)e(t)}forEachChangedItem(e){let t;for(t=this._changesHead;null!==t;t=t._nextChanged)e(t)}forEachAddedItem(e){let t;for(t=this._additionsHead;null!==t;t=t._nextAdded)e(t)}forEachRemovedItem(e){let t;for(t=this._removalsHead;null!==t;t=t._nextRemoved)e(t)}diff(e){if(e){if(!(e instanceof Map||Ms(e)))throw new Error(`Error trying to diff '${u(e)}'. Only maps and objects are allowed`)}else e=new Map;return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let t=this._mapHead;if(this._appendAfter=null,this._forEach(e,(e,n)=>{if(t&&t.key===n)this._maybeAddToChanges(t,e),this._appendAfter=t,t=t._next;else{const r=this._getOrCreateRecordForKey(n,e);t=this._insertBeforeOrAppend(t,r)}}),t){t._prev&&(t._prev._next=null),this._removalsHead=t;for(let e=t;null!==e;e=e._nextRemoved)e===this._mapHead&&(this._mapHead=null),this._records.delete(e.key),e._nextRemoved=e._next,e.previousValue=e.currentValue,e.currentValue=null,e._prev=null,e._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(e,t){if(e){const n=e._prev;return t._next=e,t._prev=n,e._prev=t,n&&(n._next=t),e===this._mapHead&&(this._mapHead=t),this._appendAfter=e,e}return this._appendAfter?(this._appendAfter._next=t,t._prev=this._appendAfter):this._mapHead=t,this._appendAfter=t,null}_getOrCreateRecordForKey(e,t){if(this._records.has(e)){const n=this._records.get(e);this._maybeAddToChanges(n,t);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new ba(e);return this._records.set(e,n),n.currentValue=t,this._addToAdditions(n),n}_reset(){if(this.isDirty){let e;for(this._previousMapHead=this._mapHead,e=this._previousMapHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._changesHead;null!==e;e=e._nextChanged)e.previousValue=e.currentValue;for(e=this._additionsHead;null!=e;e=e._nextAdded)e.previousValue=e.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(e,t){Object.is(t,e.currentValue)||(e.previousValue=e.currentValue,e.currentValue=t,this._addToChanges(e))}_addToAdditions(e){null===this._additionsHead?this._additionsHead=this._additionsTail=e:(this._additionsTail._nextAdded=e,this._additionsTail=e)}_addToChanges(e){null===this._changesHead?this._changesHead=this._changesTail=e:(this._changesTail._nextChanged=e,this._changesTail=e)}_forEach(e,t){e instanceof Map?e.forEach(t):Object.keys(e).forEach(n=>t(e[n],n))}}class ba{constructor(e){this.key=e,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Ia(){return new Ca([new da])}let Ca=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(null!=n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||Ia()),deps:[[e,new Pn,new On]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(null!=t)return t;throw new Error(`Cannot find a differ supporting object '${e}' of type '${n=e,n.name||typeof n}'`);var n}}return e.\u0275prov=w({token:e,providedIn:"root",factory:Ia}),e})();function Ta(){return new Ea([new _a])}let Ea=(()=>{class e{constructor(e){this.factories=e}static create(t,n){if(n){const e=n.factories.slice();t=t.concat(e)}return new e(t)}static extend(t){return{provide:e,useFactory:n=>e.create(t,n||Ta()),deps:[[e,new Pn,new On]]}}find(e){const t=this.factories.find(t=>t.supports(e));if(t)return t;throw new Error(`Cannot find a differ supporting object '${e}'`)}}return e.\u0275prov=w({token:e,providedIn:"root",factory:Ta}),e})();function Sa(e,t,n,r,i=!1){for(;null!==n;){const s=t[n.index];if(null!==s&&r.push(ke(s)),he(s))for(let e=le;e<s.length;e++){const t=s[e],n=t[1].firstChild;null!==n&&Sa(t[1],t,n,r)}const o=n.type;if(8&o)Sa(e,t,n.child,r);else if(32&o){const e=Ar(n,t);let i;for(;i=e();)r.push(i)}else if(16&o){const e=Kr(t,n);if(Array.isArray(e))r.push(...e);else{const n=xr(t[16]);Sa(n[1],n,e,r,!0)}}n=i?n.projectionNext:n.next}return r}class ka{constructor(e,t){this._lView=e,this._cdRefInjectingView=t,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const e=this._lView,t=e[1];return Sa(t,e,t.firstChild,[])}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(he(e)){const t=e[8],n=t?t.indexOf(this):-1;n>-1&&(Mr(e,n),gn(t,n))}this._attachedToViewContainer=!1}Fr(this._lView[1],this._lView)}onDestroy(e){Li(this._lView[1],this._lView,null,e)}markForCheck(){Zi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){es(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(e,t,n){Ye(!0);try{es(e,t,n)}finally{Ye(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var e;this._appRef=null,Xr(this._lView[1],e=this._lView,e[11],2,null,null)}attachToAppRef(e){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=e}}class Aa extends ka{constructor(e){super(e),this._view=e}detectChanges(){ts(this._view)}checkNoChanges(){!function(e){Ye(!0);try{ts(e)}finally{Ye(!1)}}(this._view)}get context(){return null}}const xa=function(e){return function(e,t,n){if(pe(e)&&!n){const n=Pe(e.index,t);return new ka(n,n)}return 47&e.type?new ka(t[16],t):null}(Be(),Ue(),16==(16&e))};let Na=(()=>{class e{}return e.__NG_ELEMENT_ID__=xa,e})();const Oa=[new _a],Pa=new Ca([new da]),Ra=new Ea(Oa),Da=function(){return $a(Be(),Ue())};let La=(()=>{class e{}return e.__NG_ELEMENT_ID__=Da,e})();const Ma=La,Fa=class extends Ma{constructor(e,t,n){super(),this._declarationLView=e,this._declarationTContainer=t,this.elementRef=n}createEmbeddedView(e){const t=this._declarationTContainer.tViews,n=Ci(this._declarationLView,t,e,16,null,t.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(t)),Si(t,n,e),new ka(n)}};function $a(e,t){return 4&e.type?new Fa(t,e,na(e,t)):null}class Va{}class Ua{}const ja=function(){return Wa(Be(),Ue())};let qa=(()=>{class e{}return e.__NG_ELEMENT_ID__=ja,e})();const Ba=qa,za=class extends Ba{constructor(e,t,n){super(),this._lContainer=e,this._hostTNode=t,this._hostLView=n}get element(){return na(this._hostTNode,this._hostLView)}get injector(){return new Yt(this._hostTNode,this._hostLView)}get parentInjector(){const e=Ft(this._hostTNode,this._hostLView);if(At(e)){const t=Nt(e,this._hostLView),n=xt(e);return new Yt(t[1].data[n+8],t)}return new Yt(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const t=Ha(this._lContainer);return null!==t&&t[e]||null}get length(){return this._lContainer.length-le}createEmbeddedView(e,t,n){const r=e.createEmbeddedView(t||{});return this.insert(r,n),r}createComponent(e,t,n,r,i){const s=n||this.parentInjector;if(!i&&null==e.ngModule&&s){const e=s.get(Va,null);e&&(i=e)}const o=e.create(s,r,void 0,i);return this.insert(o.hostView,t),o}insert(e,t){const n=e._lView,r=n[1];if(he(n[3])){const t=this.indexOf(e);if(-1!==t)this.detach(t);else{const t=n[3],r=new za(t,t[6],t[3]);r.detach(r.indexOf(e))}}const i=this._adjustIndex(t),s=this._lContainer;!function(e,t,n,r){const i=le+r,s=n.length;r>0&&(n[i-1][4]=t),r<s-le?(t[4]=n[i],fn(n,le+r,t)):(n.push(t),t[4]=null),t[3]=n;const o=t[17];null!==o&&n!==o&&function(e,t){const n=e[9];t[16]!==t[3][3][16]&&(e[2]=!0),null===n?e[9]=[t]:n.push(t)}(o,t);const a=t[19];null!==a&&a.insertView(e),t[2]|=128}(r,n,s,i);const o=Yr(i,s),a=n[11],c=Br(a,s[7]);return null!==c&&function(e,t,n,r,i,s){r[0]=i,r[6]=t,Xr(e,r,n,1,i,s)}(r,s[6],a,n,c,o),e.attachToViewContainerRef(),fn(Ga(s),i,e),e}move(e,t){return this.insert(e,t)}indexOf(e){const t=Ha(this._lContainer);return null!==t?t.indexOf(e):-1}remove(e){const t=this._adjustIndex(e,-1),n=Mr(this._lContainer,t);n&&(gn(Ga(this._lContainer),t),Fr(n[1],n))}detach(e){const t=this._adjustIndex(e,-1),n=Mr(this._lContainer,t);return n&&null!=gn(Ga(this._lContainer),t)?new ka(n):null}_adjustIndex(e,t=0){return null==e?this.length+t:e}};function Ha(e){return e[8]}function Ga(e){return e[8]||(e[8]=[])}function Wa(e,t){let n;const r=t[e.index];if(he(r))n=r;else{let i;if(8&e.type)i=ke(r);else{const n=t[11];i=n.createComment("");const r=xe(e,t);Ur(n,Br(n,r),i,function(e,t){return Ee(e)?e.nextSibling(t):t.nextSibling}(n,r),!1)}t[e.index]=n=Ki(r,t,i,e),Ji(t,n)}return new za(n,e,t)}const Ka={};class Ya extends ea{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const t=oe(e);return new Ja(t,this.ngModule)}}function Qa(e){const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push({propName:e[n],templateName:n});return t}const Xa=new on("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Er});class Ja extends Jo{constructor(e,t){super(),this.componentDef=e,this.ngModule=t,this.componentType=e.type,this.selector=e.selectors.map(di).join(","),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!t}get inputs(){return Qa(this.componentDef.inputs)}get outputs(){return Qa(this.componentDef.outputs)}create(e,t,n,r){const i=(r=r||this.ngModule)?function(e,t){return{get:(n,r,i)=>{const s=e.get(n,Ka,i);return s!==Ka||r===Ka?s:t.get(n,r,i)}}}(e,r.injector):e,s=i.get(oa,Se),o=i.get(la,null),a=s.createRenderer(null,this.componentDef),c=this.componentDef.selectors[0][0]||"div",l=n?function(e,t,n){if(Ee(e))return e.selectRootElement(t,n===L.ShadowDom);let r="string"==typeof t?e.querySelector(t):t;return r.textContent="",r}(a,n,this.componentDef.encapsulation):Dr(s.createRenderer(null,this.componentDef),c,function(e){const t=e.toLowerCase();return"svg"===t?"http://www.w3.org/2000/svg":"math"===t?"http://www.w3.org/1998/MathML/":null}(c)),u=this.componentDef.onPush?576:528,h={components:[],scheduler:Er,clean:rs,playerHandler:null,flags:0},d=Di(0,null,null,1,0,null,null,null,null,null),p=Ci(null,d,h,u,null,null,s,a,o,i);let f,g;ot(p);try{const e=function(e,t,n,r,i,s){const o=n[1];n[20]=e;const a=Ti(o,20,2,"#host",null),c=a.mergedAttrs=t.hostAttrs;null!==c&&(ls(a,c,!0),null!==e&&(Ct(i,e,c),null!==a.classes&&ei(i,e,a.classes),null!==a.styles&&Zr(i,e,a.styles)));const l=r.createRenderer(e,t),u=Ci(n,Ri(t),null,t.onPush?64:16,n[20],a,r,l,null,null);return o.firstCreatePass&&($t(Dt(a,n),o,t.type),ji(o,a),Bi(a,n.length,1)),Ji(n,u),n[20]=u}(l,this.componentDef,p,s,a);if(l)if(n)Ct(a,l,["ng-version",ha.full]);else{const{attrs:e,classes:t}=function(e){const t=[],n=[];let r=1,i=2;for(;r<e.length;){let s=e[r];if("string"==typeof s)2===i?""!==s&&t.push(s,e[++r]):8===i&&n.push(s);else{if(!ai(i))break;i=s}r++}return{attrs:t,classes:n}}(this.componentDef.selectors[0]);e&&Ct(a,l,e),t&&t.length>0&&ei(a,l,t.join(" "))}if(g=Ne(d,ce),void 0!==t){const e=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=t[n];e.push(null!=r?Array.from(r):null)}}f=function(e,t,n,r,i){const s=n[1],o=function(e,t,n){const r=Be();e.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),zi(e,r,t,Ei(e,t,1,null),n));const i=Gt(t,e,r.directiveStart,r);wr(i,t);const s=xe(r,t);return s&&wr(s,t),i}(s,n,t);if(r.components.push(o),e[8]=o,i&&i.forEach(e=>e(o,t)),t.contentQueries){const e=Be();t.contentQueries(1,o,e.directiveStart)}const a=Be();return!s.firstCreatePass||null===t.hostBindings&&null===t.hostAttrs||(pt(a.index),Vi(n[1],a,0,a.directiveStart,a.directiveEnd,t),Ui(t,o)),o}(e,this.componentDef,p,h,[Ss]),Si(d,p,null)}finally{ht()}return new Za(this.componentType,f,na(g,p),p,g)}}class Za extends class{}{constructor(e,t,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=t,this.hostView=this.changeDetectorRef=new Aa(r),this.componentType=e}get injector(){return new Yt(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}const ec=new Map;class tc extends Va{constructor(e,t){super(),this._parent=t,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ya(this);const n=ae(e),r=e[W]||null;r&&Bo(r),this._bootstrapComponents=Sr(n.bootstrap),this._r3Injector=ys(e,t,[{provide:Va,useValue:this},{provide:ea,useValue:this.componentFactoryResolver}],u(e)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(e)}get(e,t=Es.THROW_IF_NOT_FOUND,n=x.Default){return e===Es||e===Va||e===us?this:this._r3Injector.get(e,t,n)}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(e=>e()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class nc extends Ua{constructor(e){super(),this.moduleType=e,null!==ae(e)&&function(e){const t=new Set;!function e(n){const r=ae(n,!0),i=r.id;null!==i&&(function(e,t,n){if(t&&t!==n)throw new Error(`Duplicate module registered for ${e} - ${u(t)} vs ${u(t.name)}`)}(i,ec.get(i),n),ec.set(i,n));const s=Sr(r.imports);for(const o of s)t.has(o)||(t.add(o),e(o))}(e)}(e)}create(e){return new tc(this.moduleType,e)}}function rc(e,t,n){const r=Qe()+e,i=Ue();return i[r]===pi?Fs(i,r,n?t.call(n):t()):function(e,t){return e[t]}(i,r)}function ic(e,t){const n=je();let r;const i=e+ce;n.firstCreatePass?(r=function(e,t){if(t)for(let n=t.length-1;n>=0;n--){const r=t[n];if(e===r.name)return r}throw new m("302",`The pipe '${e}' could not be found!`)}(t,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const s=r.factory||(r.factory=me(r.type)),o=O(Bs);try{const e=Pt(!1),t=s();return Pt(e),function(e,t,n,r){n>=e.data.length&&(e.data[n]=null,e.blueprint[n]=null),t[n]=r}(n,Ue(),i,t),t}finally{O(o)}}function sc(e,t,n){const r=e+ce,i=Ue(),s=Oe(i,r);return function(e,t){return Ds.isWrapped(t)&&(t=Ds.unwrap(t),e[Xe()]=pi),t}(i,function(e,t){return e[1].data[t].pure}(i,r)?function(e,t,n,r,i,s){const o=t+n;return $s(e,o,i)?Fs(e,o+1,s?r.call(s,i):r(i)):function(e,t){const n=e[t];return n===pi?void 0:n}(e,o+1)}(i,Qe(),t,s.transform,n,s):s.transform(n))}function oc(e){return t=>{setTimeout(e,void 0,t)}}const ac=class extends r.xQ{constructor(e=!1){super(),this.__isAsync=e}emit(e){super.next(e)}subscribe(e,t,n){var r,s,o;let a=e,c=t||(()=>null),l=n;if(e&&"object"==typeof e){const t=e;a=null===(r=t.next)||void 0===r?void 0:r.bind(t),c=null===(s=t.error)||void 0===s?void 0:s.bind(t),l=null===(o=t.complete)||void 0===o?void 0:o.bind(t)}this.__isAsync&&(c=oc(c),a&&(a=oc(a)),l&&(l=oc(l)));const u=super.subscribe({next:a,error:c,complete:l});return e instanceof i.w&&e.add(u),u}};function cc(){return this._results[Rs()]()}class lc{constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const t=Rs(),n=lc.prototype;n[t]||(n[t]=cc)}get changes(){return this._changes||(this._changes=new ac)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,t){return this._results.reduce(e,t)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,t){const n=this;n.dirty=!1;const r=dn(e);(this._changesDetected=!function(e,t,n){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++){let i=e[r],s=t[r];if(n&&(i=n(i),s=n(s)),s!==i)return!1}return!0}(n._results,r,t))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;class uc{constructor(e){this.queryList=e,this.matches=null}clone(){return new uc(this.queryList)}setDirty(){this.queryList.setDirty()}}class hc{constructor(e=[]){this.queries=e}createEmbeddedView(e){const t=e.queries;if(null!==t){const n=null!==e.contentQueries?e.contentQueries[0]:t.length,r=[];for(let e=0;e<n;e++){const n=t.getByIndex(e);r.push(this.queries[n.indexInDeclarationView].clone())}return new hc(r)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let t=0;t<this.queries.length;t++)null!==Ec(e,t).matches&&this.queries[t].setDirty()}}class dc{constructor(e,t,n=null){this.predicate=e,this.flags=t,this.read=n}}class pc{constructor(e=[]){this.queries=e}elementStart(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,t)}elementEnd(e){for(let t=0;t<this.queries.length;t++)this.queries[t].elementEnd(e)}embeddedTView(e){let t=null;for(let n=0;n<this.length;n++){const r=null!==t?t.length:0,i=this.getByIndex(n).embeddedTView(e,r);i&&(i.indexInDeclarationView=n,null!==t?t.push(i):t=[i])}return null!==t?new pc(t):null}template(e,t){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,t)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}}class fc{constructor(e,t=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=t}elementStart(e,t){this.isApplyingToNode(t)&&this.matchTNode(e,t)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,t){this.elementStart(e,t)}embeddedTView(e,t){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,t),new fc(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const t=this._declarationNodeIndex;let n=e.parent;for(;null!==n&&8&n.type&&n.index!==t;)n=n.parent;return t===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(e,t){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(e,t,gc(t,i)),this.matchTNodeWithReadOption(e,t,Ht(t,e,i,!1,!1))}else n===La?4&t.type&&this.matchTNodeWithReadOption(e,t,-1):this.matchTNodeWithReadOption(e,t,Ht(t,e,n,!1,!1))}matchTNodeWithReadOption(e,t,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===ia||r===qa||r===La&&4&t.type)this.addMatch(t.index,-2);else{const n=Ht(t,e,r,!1,!1);null!==n&&this.addMatch(t.index,n)}else this.addMatch(t.index,n)}}addMatch(e,t){null===this.matches?this.matches=[e,t]:this.matches.push(e,t)}}function gc(e,t){const n=e.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===t)return n[r+1];return null}function mc(e,t,n,r){return-1===n?function(e,t){return 11&e.type?na(e,t):4&e.type?$a(e,t):null}(t,e):-2===n?function(e,t,n){return n===ia?na(t,e):n===La?$a(t,e):n===qa?Wa(t,e):void 0}(e,t,r):Gt(e,e[1],n,t)}function yc(e,t,n,r){const i=t[19].queries[r];if(null===i.matches){const r=e.data,s=n.matches,o=[];for(let e=0;e<s.length;e+=2){const i=s[e];o.push(i<0?null:mc(t,r[i],s[e+1],n.metadata.read))}i.matches=o}return i.matches}function vc(e,t,n,r){const i=e.queries.getByIndex(n),s=i.matches;if(null!==s){const o=yc(e,t,i,n);for(let e=0;e<s.length;e+=2){const n=s[e];if(n>0)r.push(o[e/2]);else{const i=s[e+1],o=t[-n];for(let e=le;e<o.length;e++){const t=o[e];t[17]===t[3]&&vc(t[1],t,i,r)}if(null!==o[9]){const e=o[9];for(let t=0;t<e.length;t++){const n=e[t];vc(n[1],n,i,r)}}}}}return r}function _c(e){const t=Ue(),n=je(),r=nt();rt(r+1);const i=Ec(n,r);if(e.dirty&&Re(t)===(2==(2&i.metadata.flags))){if(null===i.matches)e.reset([]);else{const s=i.crossesNgTemplate?vc(n,t,r,[]):yc(n,t,i,r);e.reset(s,sa),e.notifyOnChanges()}return!0}return!1}function wc(e,t,n){const r=je();r.firstCreatePass&&(Tc(r,new dc(e,t,n),-1),2==(2&t)&&(r.staticViewQueries=!0)),Cc(r,Ue(),t)}function bc(e,t,n,r){const i=je();if(i.firstCreatePass){const s=Be();Tc(i,new dc(t,n,r),s.index),function(e,t){const n=e.contentQueries||(e.contentQueries=[]);t!==(n.length?n[n.length-1]:-1)&&n.push(e.queries.length-1,t)}(i,e),2==(2&n)&&(i.staticContentQueries=!0)}Cc(i,Ue(),n)}function Ic(){return e=Ue(),t=nt(),e[19].queries[t].queryList;var e,t}function Cc(e,t,n){const r=new lc(4==(4&n));Li(e,t,r,r.destroy),null===t[19]&&(t[19]=new hc),t[19].queries.push(new uc(r))}function Tc(e,t,n){null===e.queries&&(e.queries=new pc),e.queries.track(new fc(t,n))}function Ec(e,t){return e.queries.getByIndex(t)}function Sc(e,t){return $a(e,t)}const kc=rn("Output",e=>({bindingPropertyName:e})),Ac=rn("HostListener",(e,t)=>({eventName:e,args:t})),xc=new on("Application Initializer");let Nc=(()=>{class e{constructor(e){this.appInits=e,this.resolve=ta,this.reject=ta,this.initialized=!1,this.done=!1,this.donePromise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}runInitializers(){if(this.initialized)return;const e=[],t=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const t=this.appInits[n]();if(Zs(t))e.push(t);else if(to(t)){const n=new Promise((e,n)=>{t.subscribe({complete:e,error:n})});e.push(n)}}Promise.all(e).then(()=>{t()}).catch(e=>{this.reject(e)}),0===e.length&&t(),this.initialized=!0}}return e.\u0275fac=function(t){return new(t||e)(kn(xc,8))},e.\u0275prov=w({token:e,factory:e.\u0275fac}),e})();const Oc=new on("AppId"),Pc={provide:Oc,useFactory:function(){return`${Rc()}${Rc()}${Rc()}`},deps:[]};function Rc(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Dc=new on("Platform Initializer"),Lc=new on("Platform ID"),Mc=new on("appBootstrapListener");let Fc=(()=>{class e{log(e){console.log(e)}warn(e){console.warn(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac}),e})();const $c=new on("LocaleId"),Vc=new on("DefaultCurrencyCode");class Uc{constructor(e,t){this.ngModuleFactory=e,this.componentFactories=t}}const jc=function(e){return new nc(e)},qc=jc,Bc=function(e){return Promise.resolve(jc(e))},zc=function(e){const t=jc(e),n=Sr(ae(e).declarations).reduce((e,t)=>{const n=oe(t);return n&&e.push(new Ja(n)),e},[]);return new Uc(t,n)},Hc=zc,Gc=function(e){return Promise.resolve(zc(e))};let Wc=(()=>{class e{constructor(){this.compileModuleSync=qc,this.compileModuleAsync=Bc,this.compileModuleAndAllComponentsSync=Hc,this.compileModuleAndAllComponentsAsync=Gc}clearCache(){}clearCacheFor(e){}getModuleId(e){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac}),e})();const Kc=(()=>Promise.resolve(0))();function Yc(e){"undefined"==typeof Zone?Kc.then(()=>{e&&e.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",e)}class Qc{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:t=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ac(!1),this.onMicrotaskEmpty=new ac(!1),this.onStable=new ac(!1),this.onError=new ac(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&t,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let e=U.requestAnimationFrame,t=U.cancelAnimationFrame;if("undefined"!=typeof Zone&&e&&t){const n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);const r=t[Zone.__symbol__("OriginalDelegate")];r&&(t=r)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:t}}().nativeRequestAnimationFrame,function(e){const t=()=>{!function(e){e.isCheckStableRunning||-1!==e.lastRequestAnimationFrameId||(e.lastRequestAnimationFrameId=e.nativeRequestAnimationFrame.call(U,()=>{e.fakeTopEventTask||(e.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{e.lastRequestAnimationFrameId=-1,Zc(e),e.isCheckStableRunning=!0,Jc(e),e.isCheckStableRunning=!1},void 0,()=>{},()=>{})),e.fakeTopEventTask.invoke()}),Zc(e))}(e)};e._inner=e._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,s,o,a)=>{try{return el(e),n.invokeTask(i,s,o,a)}finally{(e.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||e.shouldCoalesceRunChangeDetection)&&t(),tl(e)}},onInvoke:(n,r,i,s,o,a,c)=>{try{return el(e),n.invoke(i,s,o,a,c)}finally{e.shouldCoalesceRunChangeDetection&&t(),tl(e)}},onHasTask:(t,n,r,i)=>{t.hasTask(r,i),n===r&&("microTask"==i.change?(e._hasPendingMicrotasks=i.microTask,Zc(e),Jc(e)):"macroTask"==i.change&&(e.hasPendingMacrotasks=i.macroTask))},onHandleError:(t,n,r,i)=>(t.handleError(r,i),e.runOutsideAngular(()=>e.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Qc.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Qc.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(e,t,n){return this._inner.run(e,t,n)}runTask(e,t,n,r){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+r,e,Xc,ta,ta);try{return i.runTask(s,t,n)}finally{i.cancelTask(s)}}runGuarded(e,t,n){return this._inner.runGuarded(e,t,n)}runOutsideAngular(e){return this._outer.run(e)}}const Xc={};function Jc(e){if(0==e._nesting&&!e.hasPendingMicrotasks&&!e.isStable)try{e._nesting++,e.onMicrotaskEmpty.emit(null)}finally{if(e._nesting--,!e.hasPendingMicrotasks)try{e.runOutsideAngular(()=>e.onStable.emit(null))}finally{e.isStable=!0}}}function Zc(e){e.hasPendingMicrotasks=!!(e._hasPendingMicrotasks||(e.shouldCoalesceEventChangeDetection||e.shouldCoalesceRunChangeDetection)&&-1!==e.lastRequestAnimationFrameId)}function el(e){e._nesting++,e.isStable&&(e.isStable=!1,e.onUnstable.emit(null))}function tl(e){e._nesting--,Jc(e)}class nl{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new ac,this.onMicrotaskEmpty=new ac,this.onStable=new ac,this.onError=new ac}run(e,t,n){return e.apply(t,n)}runGuarded(e,t,n){return e.apply(t,n)}runOutsideAngular(e){return e()}runTask(e,t,n,r){return e.apply(t,n)}}let rl=(()=>{class e{constructor(e){this._ngZone=e,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),e.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Qc.assertNotInAngularZone(),Yc(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Yc(()=>{for(;0!==this._callbacks.length;){let e=this._callbacks.pop();clearTimeout(e.timeoutId),e.doneCb(this._didWork)}this._didWork=!1});else{let e=this.getPendingTasks();this._callbacks=this._callbacks.filter(t=>!t.updateCb||!t.updateCb(e)||(clearTimeout(t.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(e=>({source:e.source,creationLocation:e.creationLocation,data:e.data})):[]}addCallback(e,t,n){let r=-1;t&&t>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(e=>e.timeoutId!==r),e(this._didWork,this.getPendingTasks())},t)),this._callbacks.push({doneCb:e,timeoutId:r,updateCb:n})}whenStable(e,t,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(e,t,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(e,t,n){return[]}}return e.\u0275fac=function(t){return new(t||e)(kn(Qc))},e.\u0275prov=w({token:e,factory:e.\u0275fac}),e})(),il=(()=>{class e{constructor(){this._applications=new Map,cl.addToWindow(this)}registerApplication(e,t){this._applications.set(e,t)}unregisterApplication(e){this._applications.delete(e)}unregisterAllApplications(){this._applications.clear()}getTestability(e){return this._applications.get(e)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(e,t=!0){return cl.findTestabilityInTree(this,e,t)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=w({token:e,factory:e.\u0275fac}),e})();class sl{addToWindow(e){}findTestabilityInTree(e,t,n){return null}}function ol(e){cl=e}let al,cl=new sl,ll=!0,ul=!1;function hl(){return ul=!0,ll}function dl(){if(ul)throw new Error("Cannot enable prod mode after platform setup.");ll=!1}const pl=new on("AllowMultipleToken");class fl{constructor(e,t){this.name=e,this.token=t}}function gl(e,t,n=[]){const r=`Platform: ${t}`,i=new on(r);return(t=[])=>{let s=ml();if(!s||s.injector.get(pl,!1))if(e)e(n.concat(t).concat({provide:i,useValue:!0}));else{const e=n.concat(t).concat({provide:i,useValue:!0},{provide:ds,useValue:"platform"});!function(e){if(al&&!al.destroyed&&!al.injector.get(pl,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");al=e.get(yl);const t=e.get(Dc,null);t&&t.forEach(e=>e())}(Es.create({providers:e,name:r}))}return function(e){const t=ml();if(!t)throw new Error("No platform exists!");if(!t.injector.get(e,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return t}(i)}}function ml(){return al&&!al.destroyed?al:null}let yl=(()=>{class e{constructor(e){this._injector=e,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(e,t){const n=function(e,t){let n;return n="noop"===e?new nl:("zone.js"===e?void 0:e)||new Qc({enableLongStackTrace:hl(),shouldCoalesceEventChangeDetection:!!(null==t?void 0:t.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==t?void 0:t.ngZoneRunCoalescing)}),n}(t?t.ngZone:void 0,{ngZoneEventCoalescing:t&&t.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:t&&t.ngZoneRunCoalescing||!1}),r=[{provide:Qc,useValue:n}];return n.run(()=>{const t=Es.create({providers:r,parent:this.injector,name:e.moduleType.name}),i=e.create(t),s=i.injector.get(Tr,null);if(!s)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const e=n.onError.subscribe({next:e=>{s.handleError(e)}});i.onDestroy(()=>{wl(this._modules,i),e.unsubscribe()})}),function(e,t,n){try{const r=n();return Zs(r)?r.catch(n=>{throw t.runOutsideAngular(()=>e.handleError(n)),n}):r}catch(r){throw t.runOutsideAngular(()=>e.handleError(r)),r}}(s,n,()=>{const e=i.injector.get(Nc);return e.runInitializers(),e.donePromise.then(()=>(Bo(i.injector.get($c,jo)||jo),this._moduleDoBootstrap(i),i))})})}bootstrapModule(e,t=[]){const n=vl({},t);return function(e,t,n){const r=new nc(n);return Promise.resolve(r)}(0,0,e).then(e=>this.bootstrapModuleFactory(e,n))}_moduleDoBootstrap(e){const t=e.injector.get(_l);if(e._bootstrapComponents.length>0)e._bootstrapComponents.forEach(e=>t.bootstrap(e));else{if(!e.instance.ngDoBootstrap)throw new Error(`The module ${u(e.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);e.instance.ngDoBootstrap(t)}this._modules.push(e)}onDestroy(e){this._destroyListeners.push(e)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(e=>e.destroy()),this._destroyListeners.forEach(e=>e()),this._destroyed=!0}get destroyed(){return this._destroyed}}return e.\u0275fac=function(t){return new(t||e)(kn(Es))},e.\u0275prov=w({token:e,factory:e.\u0275fac}),e})();function vl(e,t){return Array.isArray(t)?t.reduce(vl,e):Object.assign(Object.assign({},e),t)}let _l=(()=>{class e{constructor(e,t,n,r,i){this._zone=e,this._injector=t,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const c=new s.y(e=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{e.next(this._stable),e.complete()})}),l=new s.y(e=>{let t;this._zone.runOutsideAngular(()=>{t=this._zone.onStable.subscribe(()=>{Qc.assertNotInAngularZone(),Yc(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,e.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Qc.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{e.next(!1)}))});return()=>{t.unsubscribe(),n.unsubscribe()}});this.isStable=(0,o.T)(c,l.pipe((0,a.B)()))}bootstrap(e,t){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=e instanceof Jo?e:this._componentFactoryResolver.resolveComponentFactory(e),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Va),i=n.create(Es.NULL,[],t||n.selector,r),s=i.location.nativeElement,o=i.injector.get(rl,null),a=o&&i.injector.get(il);return o&&a&&a.registerApplication(s,o),i.onDestroy(()=>{this.detachView(i.hostView),wl(this.components,i),a&&a.unregisterApplication(s)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let e of this._views)e.detectChanges()}catch(e){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(e))}finally{this._runningTick=!1}}attachView(e){const t=e;this._views.push(t),t.attachToAppRef(this)}detachView(e){const t=e;wl(this._views,t),t.detachFromAppRef()}_loadComponent(e){this.attachView(e.hostView),this.tick(),this.components.push(e),this._injector.get(Mc,[]).concat(this._bootstrapListeners).forEach(t=>t(e))}ngOnDestroy(){this._views.slice().forEach(e=>e.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return e.\u0275fac=function(t){return new(t||e)(kn(Qc),kn(Es),kn(Tr),kn(ea),kn(Nc))},e.\u0275prov=w({token:e,factory:e.\u0275fac}),e})();function wl(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}class bl{}class Il{}const Cl={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Tl=(()=>{class e{constructor(e,t){this._compiler=e,this._config=t||Cl}load(e){return this.loadAndCompile(e)}loadAndCompile(e){let[t,r]=e.split("#");return void 0===r&&(r="default"),n(8255)(t).then(e=>e[r]).then(e=>El(e,t,r)).then(e=>this._compiler.compileModuleAsync(e))}loadFactory(e){let[t,r]=e.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n(8255)(this._config.factoryPathPrefix+t+this._config.factoryPathSuffix).then(e=>e[r+i]).then(e=>El(e,t,r))}}return e.\u0275fac=function(t){return new(t||e)(kn(Wc),kn(Il,8))},e.\u0275prov=w({token:e,factory:e.\u0275fac}),e})();function El(e,t,n){if(!e)throw new Error(`Cannot find '${n}' in '${t}'`);return e}const Sl=function(e){return null},kl=gl(null,"core",[{provide:Lc,useValue:"unknown"},{provide:yl,deps:[Es]},{provide:il,deps:[]},{provide:Fc,deps:[]}]),Al=[{provide:_l,useClass:_l,deps:[Qc,Es,Tr,ea,Nc]},{provide:Xa,deps:[Qc],useFactory:function(e){let t=[];return e.onStable.subscribe(()=>{for(;t.length;)t.pop()()}),function(e){t.push(e)}}},{provide:Nc,useClass:Nc,deps:[[new On,xc]]},{provide:Wc,useClass:Wc,deps:[]},Pc,{provide:Ca,useFactory:function(){return Pa},deps:[]},{provide:Ea,useFactory:function(){return Ra},deps:[]},{provide:$c,useFactory:function(e){return Bo(e=e||"undefined"!=typeof $localize&&$localize.locale||jo),e},deps:[[new Nn($c),new On,new Pn]]},{provide:Vc,useValue:"USD"}];let xl=(()=>{class e{constructor(e){}}return e.\u0275fac=function(t){return new(t||e)(kn(_l))},e.\u0275mod=te({type:e}),e.\u0275inj=b({providers:Al}),e})()},7955:(e,t,n)=>{"use strict";n.d(t,{nm:()=>k});var r=n(6507),i=(n(2741),n(4309),n(1665),n(5871)),s=n(9171),o=n(9870),a=n(4560);const c=new Map,l={activated:!1,tokenObservers:[]},u={initialized:!1,enabled:!1};function h(e){return c.get(e)||l}function d(e,t){c.set(e,t)}function p(){return u}class f{constructor(e,t,n,r,i){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=i,this.pending=null,this.nextErrorWaitInterval=r,r>i)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(e){this.stop();try{this.pending=new o.BH,await(t=this.getNextRun(e),new Promise(e=>{setTimeout(e,t)})),this.pending.resolve(),await this.pending.promise,this.pending=new o.BH,await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}var t}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}}const g=new o.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"}),m="firebase-app-check-store";let y=null;const v=new a.Yd("@firebase/app-check");function _(e,t){return(0,o.hl)()?function(e,t){return async function(e,t){const n=(await(y||(y=new Promise((e,t)=>{try{const n=indexedDB.open("firebase-app-check-database",1);n.onsuccess=t=>{e(t.target.result)},n.onerror=e=>{var n;t(g.create("storage-open",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))},n.onupgradeneeded=e=>{const t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(m,{keyPath:"compositeKey"})}}}catch(n){t(g.create("storage-open",{originalErrorMessage:n.message}))}}),y))).transaction(m,"readwrite"),r=n.objectStore(m).put({compositeKey:e,value:t});return new Promise((e,t)=>{r.onsuccess=t=>{e()},n.onerror=e=>{var n;t(g.create("storage-set",{originalErrorMessage:null===(n=e.target.error)||void 0===n?void 0:n.message}))}})}(function(e){return`${e.options.appId}-${e.name}`}(e),t)}(e,t).catch(e=>{v.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}const w={error:"UNKNOWN_ERROR"};async function b(e,t=!1){const n=e.app;!function(e){if(!h(e).activated)throw g.create("use-before-activation",{appName:e.name})}(n);const r=h(n);let i,s=r.token;if(!s){const e=await r.cachedTokenPromise;e&&T(e)&&(s=e)}if(!t&&s&&T(s))return{token:s.token};let a,c=!1;if(p().enabled){r.exchangeTokenPromise||(r.exchangeTokenPromise=async function({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});i&&(r["X-Firebase-Client"]=i.getPlatformInfoString());const s={method:"POST",body:JSON.stringify(t),headers:r};let o,a;try{o=await fetch(e,s)}catch(h){throw g.create("fetch-network-error",{originalErrorMessage:h.message})}if(200!==o.status)throw g.create("fetch-status-error",{httpStatus:o.status});try{a=await o.json()}catch(h){throw g.create("fetch-parse-error",{originalErrorMessage:h.message})}const c=a.ttl.match(/^([\d.]+)(s)$/);if(!c||!c[2]||isNaN(Number(c[1])))throw g.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=1e3*Number(c[1]),u=Date.now();return{token:a.attestationToken,expireTimeMillis:u+l,issuedAtTimeMillis:u}}(function(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${n}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:t}}}(n,await async function(){const e=p();if(e.enabled&&e.token)return e.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}()),e.platformLoggerProvider).then(e=>(r.exchangeTokenPromise=void 0,e)),c=!0);const t=await r.exchangeTokenPromise;return await _(n,t),d(n,Object.assign(Object.assign({},r),{token:t})),{token:t.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(e=>(r.exchangeTokenPromise=void 0,e)),c=!0),s=await r.exchangeTokenPromise}catch(l){"appCheck/throttled"===l.code?v.warn(l.message):v.error(l),i=l}return s?(a={token:s.token},d(n,Object.assign(Object.assign({},r),{token:s})),await _(n,s)):a=function(e){return{token:(t=w,o.US.encodeString(JSON.stringify(t),!1)),error:e};var t}(i),c&&function(e,t){const n=h(e).tokenObservers;for(const r of n)try{"EXTERNAL"===r.type&&null!=t.error?r.error(t.error):r.next(t)}catch(l){}}(n,a),a}function I(e,t){const n=h(e),r=n.tokenObservers.filter(e=>e.next!==t);0===r.length&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),d(e,Object.assign(Object.assign({},n),{tokenObservers:r}))}function C(e){const{app:t}=e,n=h(t);let r=n.tokenRefresher;r||(r=function(e){const{app:t}=e;return new f(async()=>{let n;if(n=h(t).token?await b(e,!0):await b(e),n.error)throw n.error},()=>!0,()=>{const e=h(t);if(e.token){let t=e.token.issuedAtTimeMillis+.5*(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)+3e5;return t=Math.min(t,e.token.expireTimeMillis-3e5),Math.max(0,t-Date.now())}return 0},3e4,96e4)}(e),d(t,Object.assign(Object.assign({},n),{tokenRefresher:r}))),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function T(e){return e.expireTimeMillis-Date.now()>0}class E{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=h(this.app);for(const t of e)I(this.app,t.next);return Promise.resolve()}}const S="app-check-internal";(0,i._registerComponent)(new s.wA("app-check",e=>{return t=e.getProvider("app").getImmediate(),n=e.getProvider("platform-logger"),new E(t,n);var t,n},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(S).initialize()})),(0,i._registerComponent)(new s.wA(S,e=>{return t=e.getProvider("app-check").getImmediate(),{getToken:e=>b(t,e),addTokenListener:e=>function(e,t,n,r){const{app:i}=e,s=h(i),o={next:n,error:void 0,type:"INTERNAL"};if(d(i,Object.assign(Object.assign({},s),{tokenObservers:[...s.tokenObservers,o]})),s.token&&T(s.token)){const t=s.token;Promise.resolve().then(()=>{n({token:t.token}),C(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>C(e))}(t,0,e),removeTokenListener:e=>I(t.app,e)};var t},"PUBLIC").setInstantiationMode("EXPLICIT")),(0,i.registerVersion)("@firebase/app-check","0.5.2");class k{constructor(){return(0,r.vb)("app-check")}}"undefined"!=typeof window&&window},4309:(e,t,n)=>{"use strict";n.d(t,{Ot:()=>o,z6:()=>a,ZF:()=>f,hX:()=>p});var r=n(1665),i=n(2741),s=n(6507);class o{constructor(e){return e}}class a{constructor(){return(0,r.C6)()}}const c=new i.OlP("angularfire2._apps"),l={provide:o,useFactory:function(e){return e&&1===e.length?e[0]:new o((0,r.Mq)())},deps:[[new i.FiY,c]]},u={provide:a,deps:[[new i.FiY,c]]};function h(e){return(t,n)=>{const r=t.runOutsideAngular(()=>e(n));return new o(r)}}let d=(()=>{class e{constructor(e){(0,r.KN)("angularfire",s.q4.full,"core"),(0,r.KN)("angularfire",s.q4.full,"app"),(0,r.KN)("angular",i.q4F.full,e.toString())}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(i.Lbi))},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[l,u]}),e})();function p(e,...t){return{ngModule:d,providers:[{provide:c,useFactory:h(e),multi:!0,deps:[i.R0b,i.zs3,s.HU,...t]}]}}const f=(0,s.u3)(r.ZF,!0)},4259:(e,t,n)=>{"use strict";n.d(t,{zQ:()=>L,ww:()=>M,rT:()=>O,f7:()=>R,L6:()=>x,_Q:()=>N,lh:()=>P,Qv:()=>A,nw:()=>D});var r=n(2741),i=n(6006),s=n(267),o=n(3948),a=n(2850),c=n(636),l=n(6511),u=n(9734),h=n(7338),d=n(7078),p=n(2417);class f extends i.xQ{constructor(e=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=e<1?1:e,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(e){if(!this.isStopped){const t=this._events;t.push(e),t.length>this._bufferSize&&t.shift()}super.next(e)}nextTimeWindow(e){this.isStopped||(this._events.push(new g(this._getNow(),e)),this._trimBufferThenGetEvents()),super.next(e)}_subscribe(e){const t=this._infiniteTimeWindow,n=t?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let s;if(this.closed)throw new d.N;if(this.isStopped||this.hasError?s=u.w.EMPTY:(this.observers.push(e),s=new p.W(this,e)),r&&e.add(e=new h.ht(e,r)),t)for(let o=0;o<i&&!e.closed;o++)e.next(n[o]);else for(let o=0;o<i&&!e.closed;o++)e.next(n[o].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),s}_getNow(){return(this.scheduler||l.c).now()}_trimBufferThenGetEvents(){const e=this._getNow(),t=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let s=0;for(;s<i&&!(e-r[s].time<n);)s++;return i>t&&(s=Math.max(s,i-t)),s>0&&r.splice(0,s),r}}class g{constructor(e,t){this.time=e,this.value=t}}function m(e,t,n){let r;return r=e&&"object"==typeof e?e:{bufferSize:e,windowTime:t,refCount:!1,scheduler:n},e=>e.lift(function({bufferSize:e=Number.POSITIVE_INFINITY,windowTime:t=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,s,o=0,a=!1,c=!1;return function(l){let u;o++,!i||a?(a=!1,i=new f(e,t,r),u=i.subscribe(this),s=l.subscribe({next(e){i.next(e)},error(e){a=!0,i.error(e)},complete(){c=!0,s=void 0,i.complete()}}),c&&(s=void 0)):u=i.subscribe(this),this.add(()=>{o--,u.unsubscribe(),u=void 0,s&&!c&&n&&0===o&&(s.unsubscribe(),s=void 0,i=void 0)})}}(r))}var y=n(2812);function v(e,t){return t?(0,y.w)(()=>e,t):(0,y.w)(()=>e)}var _=n(8561),w=n(3987),b=n(6515),I=n(3305),C=n(6507),T=n(9106),E=n(6274),S=n(7955),k=n(2837);const A=new r.OlP("angularfire2.auth.use-emulator"),x=new r.OlP("angularfire2.auth.settings"),N=new r.OlP("angularfire2.auth.tenant-id"),O=new r.OlP("angularfire2.auth.langugage-code"),P=new r.OlP("angularfire2.auth.use-device-language"),R=new r.OlP("angularfire.auth.persistence"),D=(e,t,n,r,i,s,o,a)=>(0,T.cc)(`${e.name}.auth`,"AngularFireAuth",e.name,()=>{const c=t.runOutsideAngular(()=>e.auth());if(n&&c.useEmulator(...n),r&&(c.tenantId=r),c.languageCode=i,s&&c.useDeviceLanguage(),o)for(const[e,t]of Object.entries(o))c.settings[e]=t;return a&&c.setPersistence(a),c},[n,r,i,s,o,a]);let L=(()=>{class e{constructor(e,t,r,l,u,d,p,f,g,S,k,A){const x=new i.xQ,N=(0,s.of)(void 0).pipe((0,h.QV)(u.outsideAngular),(0,y.w)(()=>l.runOutsideAngular(()=>Promise.resolve().then(n.bind(n,2604)))),(0,_.U)(()=>(0,T.on)(e,l,t)),(0,_.U)(e=>D(e,l,d,f,g,S,p,k)),m({bufferSize:1,refCount:!1}));if((0,E.PM)(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,s.of)(null);else{N.pipe((0,w.P)()).subscribe();const e=N.pipe((0,y.w)(e=>e.getRedirectResult().then(e=>e,()=>null)),C.iC,m({bufferSize:1,refCount:!1})),t=N.pipe((0,y.w)(e=>new o.y(t=>({unsubscribe:l.runOutsideAngular(()=>e.onAuthStateChanged(e=>t.next(e),e=>t.error(e),()=>t.complete()))})))),n=N.pipe((0,y.w)(e=>new o.y(t=>({unsubscribe:l.runOutsideAngular(()=>e.onIdTokenChanged(e=>t.next(e),e=>t.error(e),()=>t.complete()))}))));this.authState=e.pipe(v(t),(0,b.R)(u.outsideAngular),(0,h.QV)(u.insideAngular)),this.user=e.pipe(v(n),(0,b.R)(u.outsideAngular),(0,h.QV)(u.insideAngular)),this.idToken=this.user.pipe((0,y.w)(e=>e?(0,a.D)(e.getIdToken()):(0,s.of)(null))),this.idTokenResult=this.user.pipe((0,y.w)(e=>e?(0,a.D)(e.getIdTokenResult()):(0,s.of)(null))),this.credential=(0,c.T)(e,x,this.authState.pipe((0,I.h)(e=>!e))).pipe((0,_.U)(e=>(null==e?void 0:e.user)?e:null),(0,b.R)(u.outsideAngular),(0,h.QV)(u.insideAngular))}return(0,T.pX)(this,N,l,{spy:{apply:(e,t,n)=>{(e.startsWith("signIn")||e.startsWith("createUser"))&&n.then(e=>x.next(e))}}})}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(T.Dh),r.LFG(T.xv,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(C.HU),r.LFG(A,8),r.LFG(x,8),r.LFG(N,8),r.LFG(O,8),r.LFG(P,8),r.LFG(R,8),r.LFG(S.nm,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})(),M=(()=>{class e{constructor(){k.Z.registerVersion("angularfire",C.q4.full,"auth-compat")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[L]}),e})()},4587:(e,t,n)=>{"use strict";n.d(t,{KQ:()=>ee,JS:()=>te});var r=n(2741),i=n(8846),s=n(3948),o=n(267),a=n(636),c=n(2167),l=n(5500);class u{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new h(e,this.observables,this.project))}}class h extends c.L{constructor(e,t,n){super(e),this.observables=t,this.project=n,this.toRespond=[];const r=t.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add((0,l.D)(this,t[i],void 0,i))}notifyNext(e,t,n){this.values[n]=t;const r=this.toRespond;if(r.length>0){const e=r.indexOf(n);-1!==e&&r.splice(e,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}var d=n(8744);class p{constructor(e){this.predicate=e}call(e,t){return t.subscribe(new f(e,this.predicate))}}class f extends d.L{constructor(e,t){super(e),this.predicate=t,this.skipping=!0,this.index=0}_next(e){const t=this.destination;this.skipping&&this.tryCallPredicate(e),this.skipping||t.next(e)}tryCallPredicate(e){try{const t=this.predicate(e,this.index++);this.skipping=Boolean(t)}catch(t){this.destination.error(t)}}}var g=n(8561),m=n(2564),y=n(2812),v=n(1310),_=n(7689),w=n(6507),b=n(9106),I=(n(2604),n(159)),C=n(9171),T=n(7211),E=n(9870);const S=new(n(4560).Yd)("@firebase/database-compat"),k=function(e){S.warn("FIREBASE WARNING: "+e)};class A{constructor(e){this._delegate=e}cancel(e){(0,E.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,E.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),t=>e(t)),t}remove(e){(0,E.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,E.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),t=>e(t)),t}set(e,t){(0,E.Dv)("OnDisconnect.set",1,2,arguments.length),(0,E.Wj)("OnDisconnect.set","onComplete",t,!0);const n=this._delegate.set(e);return t&&n.then(()=>t(null),e=>t(e)),n}setWithPriority(e,t,n){(0,E.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,E.Wj)("OnDisconnect.setWithPriority","onComplete",n,!0);const r=this._delegate.setWithPriority(e,t);return n&&r.then(()=>n(null),e=>n(e)),r}update(e,t){if((0,E.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,k("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,E.Wj)("OnDisconnect.update","onComplete",t,!0);const n=this._delegate.update(e);return t&&n.then(()=>t(null),e=>t(e)),n}}class x{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,E.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class N{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,E.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,E.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,E.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,E.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,E.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),(0,T.FQ)("DataSnapshot.child","path",e,!1),new N(this._database,this._delegate.child(e))}hasChild(e){return(0,E.Dv)("DataSnapshot.hasChild",1,1,arguments.length),(0,T.FQ)("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,E.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,E.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,E.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new N(this._database,t)))}hasChildren(){return(0,E.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,E.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,E.Dv)("DataSnapshot.ref",0,0,arguments.length),new P(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class O{constructor(e,t){this.database=e,this._delegate=t}on(e,t,n,r){var i;(0,E.Dv)("Query.on",2,4,arguments.length),(0,E.Wj)("Query.on","callback",t,!1);const s=O.getCancelAndContextArgs_("Query.on",n,r),o=(e,n)=>{t.call(s.context,new N(this.database,e),n)};o.userCallback=t,o.context=s.context;const a=null===(i=s.cancel)||void 0===i?void 0:i.bind(s.context);switch(e){case"value":return(0,T.jM)(this._delegate,o,a),t;case"child_added":return(0,T.yv)(this._delegate,o,a),t;case"child_removed":return(0,T.MQ)(this._delegate,o,a),t;case"child_changed":return(0,T.Jr)(this._delegate,o,a),t;case"child_moved":return(0,T.Vt)(this._delegate,o,a),t;default:throw new Error((0,E.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,n){if((0,E.Dv)("Query.off",0,3,arguments.length),function(e,t,n){if(void 0!==t)switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,E.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,E.Wj)("Query.off","callback",t,!0),(0,E.lb)("Query.off","context",n,!0),t){const r=()=>{};r.userCallback=t,r.context=n,(0,T.S1)(this._delegate,e,r)}else(0,T.S1)(this._delegate,e)}get(){return(0,T.U2)(this._delegate).then(e=>new N(this.database,e))}once(e,t,n,r){(0,E.Dv)("Query.once",1,4,arguments.length),(0,E.Wj)("Query.once","callback",t,!0);const i=O.getCancelAndContextArgs_("Query.once",n,r),s=new E.BH,o=(e,n)=>{const r=new N(this.database,e);t&&t.call(i.context,r,n),s.resolve(r)};o.userCallback=t,o.context=i.context;const a=e=>{i.cancel&&i.cancel.call(i.context,e),s.reject(e)};switch(e){case"value":(0,T.jM)(this._delegate,o,a,{onlyOnce:!0});break;case"child_added":(0,T.yv)(this._delegate,o,a,{onlyOnce:!0});break;case"child_removed":(0,T.MQ)(this._delegate,o,a,{onlyOnce:!0});break;case"child_changed":(0,T.Jr)(this._delegate,o,a,{onlyOnce:!0});break;case"child_moved":(0,T.Vt)(this._delegate,o,a,{onlyOnce:!0});break;default:throw new Error((0,E.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return s.promise}limitToFirst(e){return(0,E.Dv)("Query.limitToFirst",1,1,arguments.length),new O(this.database,(0,T.IO)(this._delegate,(0,T.Kk)(e)))}limitToLast(e){return(0,E.Dv)("Query.limitToLast",1,1,arguments.length),new O(this.database,(0,T.IO)(this._delegate,(0,T.vh)(e)))}orderByChild(e){return(0,E.Dv)("Query.orderByChild",1,1,arguments.length),new O(this.database,(0,T.IO)(this._delegate,(0,T.g2)(e)))}orderByKey(){return(0,E.Dv)("Query.orderByKey",0,0,arguments.length),new O(this.database,(0,T.IO)(this._delegate,(0,T.R)()))}orderByPriority(){return(0,E.Dv)("Query.orderByPriority",0,0,arguments.length),new O(this.database,(0,T.IO)(this._delegate,(0,T.HE)()))}orderByValue(){return(0,E.Dv)("Query.orderByValue",0,0,arguments.length),new O(this.database,(0,T.IO)(this._delegate,(0,T.Bd)()))}startAt(e=null,t){return(0,E.Dv)("Query.startAt",0,2,arguments.length),new O(this.database,(0,T.IO)(this._delegate,(0,T.e0)(e,t)))}startAfter(e=null,t){return(0,E.Dv)("Query.startAfter",0,2,arguments.length),new O(this.database,(0,T.IO)(this._delegate,(0,T.TQ)(e,t)))}endAt(e=null,t){return(0,E.Dv)("Query.endAt",0,2,arguments.length),new O(this.database,(0,T.IO)(this._delegate,(0,T.Wu)(e,t)))}endBefore(e=null,t){return(0,E.Dv)("Query.endBefore",0,2,arguments.length),new O(this.database,(0,T.IO)(this._delegate,(0,T.Lx)(e,t)))}equalTo(e,t){return(0,E.Dv)("Query.equalTo",1,2,arguments.length),new O(this.database,(0,T.IO)(this._delegate,(0,T.EW)(e,t)))}toString(){return(0,E.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,E.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,E.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof O))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,n){const r={cancel:void 0,context:void 0};if(t&&n)r.cancel=t,(0,E.Wj)(e,"cancel",r.cancel,!0),r.context=n,(0,E.lb)(e,"context",r.context,!0);else if(t)if("object"==typeof t&&null!==t)r.context=t;else{if("function"!=typeof t)throw new Error((0,E.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=t}return r}get ref(){return new P(this.database,new T.tn(this._delegate._repo,this._delegate._path))}}class P extends O{constructor(e,t){super(e,new T.JH(t._repo,t._path,new T.G$,!1)),this.database=e,this._delegate=t}getKey(){return(0,E.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,E.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new P(this.database,(0,T.iU)(this._delegate,e))}getParent(){(0,E.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new P(this.database,e):null}getRoot(){return(0,E.Dv)("Reference.root",0,0,arguments.length),new P(this.database,this._delegate.root)}set(e,t){(0,E.Dv)("Reference.set",1,2,arguments.length),(0,E.Wj)("Reference.set","onComplete",t,!0);const n=(0,T.t8)(this._delegate,e);return t&&n.then(()=>t(null),e=>t(e)),n}update(e,t){if((0,E.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const t={};for(let n=0;n<e.length;++n)t[""+n]=e[n];e=t,k("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,T.mI)("Reference.update",this._delegate._path),(0,E.Wj)("Reference.update","onComplete",t,!0);const n=(0,T.Vx)(this._delegate,e);return t&&n.then(()=>t(null),e=>t(e)),n}setWithPriority(e,t,n){(0,E.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,E.Wj)("Reference.setWithPriority","onComplete",n,!0);const r=(0,T.cy)(this._delegate,e,t);return n&&r.then(()=>n(null),e=>n(e)),r}remove(e){(0,E.Dv)("Reference.remove",0,1,arguments.length),(0,E.Wj)("Reference.remove","onComplete",e,!0);const t=(0,T.Od)(this._delegate);return e&&t.then(()=>e(null),t=>e(t)),t}transaction(e,t,n){(0,E.Dv)("Reference.transaction",1,3,arguments.length),(0,E.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,E.Wj)("Reference.transaction","onComplete",t,!0),function(e,t,n,r){if(void 0!==n&&"boolean"!=typeof n)throw new Error((0,E.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,n);const r=(0,T.i3)(this._delegate,e,{applyLocally:n}).then(e=>new x(e.committed,new N(this.database,e.snapshot)));return t&&r.then(e=>t(null,e.committed,e.snapshot),e=>t(e,!1,null)),r}setPriority(e,t){(0,E.Dv)("Reference.setPriority",1,2,arguments.length),(0,E.Wj)("Reference.setPriority","onComplete",t,!0);const n=(0,T.Sl)(this._delegate,e);return t&&n.then(()=>t(null),e=>t(e)),n}push(e,t){(0,E.Dv)("Reference.push",0,2,arguments.length),(0,E.Wj)("Reference.push","onComplete",t,!0);const n=(0,T.VF)(this._delegate,e),r=n.then(e=>new P(this.database,e));t&&r.then(()=>t(null),e=>t(e));const i=new P(this.database,n);return i.then=r.then.bind(r),i.catch=r.catch.bind(r,void 0),i}onDisconnect(){return(0,T.mI)("Reference.onDisconnect",this._delegate._path),new A(new T.vA(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class R{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,n={}){(0,T.dH)(this._delegate,e,t,n)}ref(e){if((0,E.Dv)("database.ref",0,1,arguments.length),e instanceof P){const t=(0,T.qT)(this._delegate,e.toString());return new P(this,t)}{const t=(0,T.iH)(this._delegate,e);return new P(this,t)}}refFromURL(e){(0,E.Dv)("database.refFromURL",1,1,arguments.length);const t=(0,T.qT)(this._delegate,e);return new P(this,t)}goOffline(){return(0,E.Dv)("database.goOffline",0,0,arguments.length),(0,T.Sb)(this._delegate)}goOnline(){return(0,E.Dv)("database.goOnline",0,0,arguments.length),(0,T.$o)(this._delegate)}}R.ServerValue={TIMESTAMP:(0,T.Bt)(),increment:e=>(0,T.nP)(e)};var D=Object.freeze({__proto__:null,initStandalone:function({app:e,url:t,version:n,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){(0,T.AM)(n);const o=new C.zt("auth-internal",new C.H0("database-standalone"));return o.setComponent(new C.wA("auth-internal",()=>r,"PRIVATE")),{instance:new R((0,T.wj)(e,o,void 0,t,s),e),namespace:i}}});const L=R.ServerValue;var M;(M=I.Z).INTERNAL.registerComponent(new C.wA("database-compat",(e,{instanceIdentifier:t})=>{const n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("database").getImmediate({identifier:t});return new R(r,n)},"PUBLIC").setServiceProps({Reference:P,Query:O,Database:R,DataSnapshot:N,enableLogging:T.U7,INTERNAL:D,ServerValue:L}).setMultipleInstances(!0)),M.registerVersion("@firebase/database-compat","0.1.4");var F=n(4259),$=n(7955),V=n(2837);function U(e){return null==e}function j(e){return"function"==typeof e.set}function q(e,t){return j(t)?t:e.ref(t)}function B(e,t){if("string"==typeof e)return t.stringCase();if(j(e))return t.firebaseCase();if("function"==typeof e.exportVal)return t.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof e)}function z(e,t,n="on",r=i.z){return new s.y(i=>{let s=null;return s=e[n](t,(e,t)=>{r.schedule(()=>{i.next({snapshot:e,prevKey:t})}),"once"===n&&r.schedule(()=>i.complete())},e=>{r.schedule(()=>i.error(e))}),"on"===n?{unsubscribe(){null!=s&&e.off(t,s)}}:{unsubscribe(){}}}).pipe((0,g.U)(e=>{const{snapshot:n,prevKey:r}=e;let i=null;return n.exists()&&(i=n.key),{type:t,payload:n,prevKey:r,key:i}}),(0,m.B)())}function H(e,t){const n=e.length;for(let r=0;r<n;r++)if(e[r].payload.key===t)return r;return-1}function G(e,t){const{payload:n,prevKey:r,key:i}=t,s=H(e,i),o=function(e,t){if(U(t))return 0;{const n=H(e,t);return-1===n?e.length:n+1}}(e,r);switch(t.type){case"value":if(t.payload&&t.payload.exists()){let n=null;t.payload.forEach(t=>{const r={payload:t,type:"value",prevKey:n,key:t.key};return n=t.key,e=[...e,r],!1})}return e;case"child_added":if(s>-1){const i=e[s-1];(i&&i.key||null)!==r&&(e=e.filter(e=>e.payload.key!==n.key)).splice(o,0,t)}else{if(null==r)return[t,...e];(e=e.slice()).splice(o,0,t)}return e;case"child_removed":return e.filter(e=>e.payload.key!==n.key);case"child_changed":return e.map(e=>e.payload.key===i?t:e);case"child_moved":if(s>-1){const t=e.splice(s,1)[0];return(e=e.slice()).splice(o,0,t),e}return e;default:return e}}function W(e){return(U(e)||0===e.length)&&(e=["child_added","child_removed","child_changed","child_moved"]),e}function K(e,t,n){return function(e,t,n){return z(e,"value","once",n).pipe((0,y.w)(r=>{const i=[(0,o.of)(r)];return t.forEach(t=>i.push(z(e,t,"on",n))),(0,a.T)(...i).pipe((0,v.R)(G,[]))}),(0,_.x)())}(e,t=W(t),n)}function Y(e,t,n){const r=(t=W(t)).map(t=>z(e,t,"on",n));return(0,a.T)(...r)}function Q(e,t){return function(n,r){return B(n,{stringCase:()=>e.child(n)[t](r),firebaseCase:()=>n[t](r),snapshotCase:()=>n.ref[t](r)})}}function X(e,t){return function(){return z(e,"value","on",t)}}const J=new r.OlP("angularfire2.realtimeDatabaseURL"),Z=new r.OlP("angularfire2.database.use-emulator");let ee=(()=>{class e{constructor(e,t,n,r,i,s,o,a,c,l,u,h,d,p,f){this.schedulers=s;const g=o,m=(0,b.on)(e,i,t);a&&(0,F.nw)(m,i,c,u,h,d,l,p),this.database=(0,b.cc)(`${m.name}.database.${n}`,"AngularFireDatabase",m.name,()=>{const e=i.runOutsideAngular(()=>m.database(n||void 0));return g&&e.useEmulator(...g),e},[g])}list(e,t){const n=this.schedulers.ngZone.runOutsideAngular(()=>q(this.database,e));let r=n;return t&&(r=t(n)),function(e,t){const n=t.schedulers.outsideAngular,r=t.schedulers.ngZone.run(()=>e.ref);return{query:e,update:Q(r,"update"),set:Q(r,"set"),push:e=>r.push(e),remove:(i=r,function(e){return e?B(e,{stringCase:()=>i.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):i.remove()}),snapshotChanges:t=>K(e,t,n).pipe(w.iC),stateChanges:t=>Y(e,t,n).pipe(w.iC),auditTrail:t=>function(e,t,n){return function(e,t,n){return function(e,t){return z(e,"value","on",t).pipe((0,g.U)(e=>{let t;return e.payload.forEach(e=>(t=e.key,!1)),{data:e,lastKeyToLoad:t}}))}(e,n).pipe(function(...e){return t=>{let n;return"function"==typeof e[e.length-1]&&(n=e.pop()),t.lift(new u(e,n))}}(t),(0,g.U)(([e,t])=>{const n=e.lastKeyToLoad,r=t.map(e=>e.key);return{actions:t,lastKeyToLoad:n,loadedKeys:r}}),(r=e=>-1===e.loadedKeys.indexOf(e.lastKeyToLoad),e=>e.lift(new p(r))),(0,g.U)(e=>e.actions));var r}(e,Y(e,t).pipe((0,v.R)((e,t)=>[...e,t],[])),n)}(e,t,n).pipe(w.iC),valueChanges:(t,r)=>K(e,t,n).pipe((0,g.U)(e=>e.map(e=>r&&r.idField?Object.assign(Object.assign({},e.payload.val()),{[r.idField]:e.key}):e.payload.val())),w.iC)};var i}(r,this)}object(e){const t=this.schedulers.ngZone.runOutsideAngular(()=>q(this.database,e));return r=this,{query:n=t,snapshotChanges:()=>X(n,r.schedulers.outsideAngular)().pipe(w.iC),update:e=>n.ref.update(e),set:e=>n.ref.set(e),remove:()=>n.ref.remove(),valueChanges:()=>X(n,r.schedulers.outsideAngular)().pipe(w.iC,(0,g.U)(e=>e.payload.exists()?e.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(b.Dh),r.LFG(b.xv,8),r.LFG(J,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(w.HU),r.LFG(Z,8),r.LFG(F.zQ,8),r.LFG(F.Qv,8),r.LFG(F.L6,8),r.LFG(F._Q,8),r.LFG(F.rT,8),r.LFG(F.lh,8),r.LFG(F.f7,8),r.LFG($.nm,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})(),te=(()=>{class e{constructor(){V.Z.registerVersion("angularfire",w.q4.full,"rtdb-compat")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[ee]}),e})()},9805:(e,t,n)=>{"use strict";n.d(t,{ST:()=>fe,yb:()=>ge});var r=n(2741),i=n(8846),s=n(3948),o=n(2850),a=n(267),c=n(6507),l=n(8744);function u(){return e=>e.lift(new h)}class h{call(e,t){return t.subscribe(new d(e))}}class d extends l.L{constructor(e){super(e),this.hasPrev=!1}_next(e){let t;this.hasPrev?t=[this.prev,e]:this.hasPrev=!0,this.prev=e,t&&this.destination.next(t)}}var p=n(3543),f=n(8561),g=n(1310),m=n(7689),y=n(3305),v=n(9106),_=n(6274),w=(n(2604),n(159)),b=n(9665),I=n(9870),C=n(9171);function T(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new b.WA("invalid-argument",`Invalid options passed to function ${e}(): You cannot specify both "merge" and "mergeFields".`);return t}function E(){if("undefined"==typeof Uint8Array)throw new b.WA("unimplemented","Uint8Arrays are not available in this environment.")}function S(){if(!(0,b.Me)())throw new b.WA("unimplemented","Blobs are unavailable in Firestore in this environment.")}class k{constructor(e){this._delegate=e}static fromBase64String(e){return S(),new k(b.Jj.fromBase64String(e))}static fromUint8Array(e){return E(),new k(b.Jj.fromUint8Array(e))}toBase64(){return S(),this._delegate.toBase64()}toUint8Array(){return E(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function A(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class x{enableIndexedDbPersistence(e,t){return(0,b.ST)(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return(0,b.fH)(e._delegate)}clearIndexedDbPersistence(e){return(0,b.Fc)(e._delegate)}}class N{constructor(e,t,n){this._delegate=t,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},e instanceof b.l7||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();e.merge||t.host===e.host||(0,b.yq)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,n={}){(0,b.at)(this._delegate,e,t,n)}enableNetwork(){return(0,b.Ix)(this._delegate)}disableNetwork(){return(0,b.TF)(this._delegate)}enablePersistence(e){let t=!1,n=!1;return e&&(t=!!e.synchronizeTabs,n=!!e.experimentalForceOwningTab,(0,b.Wi)("synchronizeTabs",t,"experimentalForceOwningTab",n)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return(0,b.Mx)(this._delegate)}onSnapshotsInSync(e){return(0,b.sc)(this._delegate,e)}get app(){if(!this._appCompat)throw new b.WA("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new z(this,(0,b.hJ)(this._delegate,e))}catch(t){throw M(t,"collection()","Firestore.collection()")}}doc(e){try{return new L(this,(0,b.JU)(this._delegate,e))}catch(t){throw M(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new j(this,(0,b.B$)(this._delegate,e))}catch(t){throw M(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return(0,b.i3)(this._delegate,t=>e(new P(this,t)))}batch(){return(0,b.qY)(this._delegate),new R(new b.PU(this._delegate,e=>(0,b.GL)(this._delegate,e)))}loadBundle(e){return(0,b.Pb)(this._delegate,e)}namedQuery(e){return(0,b.L$)(this._delegate,e).then(e=>e?new j(this,e):null)}}class O extends b.u7{constructor(e){super(),this.firestore=e}convertBytes(e){return new k(new b.Jj(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return L.forKey(t,this.firestore,null)}}class P{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new O(e)}get(e){const t=H(e);return this._delegate.get(t).then(e=>new V(this._firestore,new b.xU(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,t.converter)))}set(e,t,n){const r=H(e);return n?(T("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=H(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=H(e);return this._delegate.delete(t),this}}class R{constructor(e){this._delegate=e}set(e,t,n){const r=H(e);return n?(T("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}update(e,t,n,...r){const i=H(e);return 2===arguments.length?this._delegate.update(i,t):this._delegate.update(i,t,n,...r),this}delete(e){const t=H(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class D{constructor(e,t,n){this._firestore=e,this._userDataWriter=t,this._delegate=n}fromFirestore(e,t){const n=new b.$q(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new U(this._firestore,n),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const n=D.INSTANCES;let r=n.get(e);r||(r=new WeakMap,n.set(e,r));let i=r.get(t);return i||(i=new D(e,new O(e),t),r.set(t,i)),i}}D.INSTANCES=new WeakMap;class L{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new O(e)}static forPath(e,t,n){if(e.length%2!=0)throw new b.WA("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new L(t,new b.my(t._delegate,n,new b.Ky(e)))}static forKey(e,t,n){return new L(t,new b.my(t._delegate,n,e))}get id(){return this._delegate.id}get parent(){return new z(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new z(this.firestore,(0,b.hJ)(this._delegate,e))}catch(t){throw M(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,I.m9)(e))instanceof b.my&&(0,b.Eo)(this._delegate,e)}set(e,t){t=T("DocumentReference.set",t);try{return t?(0,b.pl)(this._delegate,e,t):(0,b.pl)(this._delegate,e)}catch(n){throw M(n,"setDoc()","DocumentReference.set()")}}update(e,t,...n){try{return 1===arguments.length?(0,b.r7)(this._delegate,e):(0,b.r7)(this._delegate,e,t,...n)}catch(r){throw M(r,"updateDoc()","DocumentReference.update()")}}delete(){return(0,b.oe)(this._delegate)}onSnapshot(...e){const t=F(e),n=$(e,e=>new V(this.firestore,new b.xU(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)));return(0,b.cf)(this._delegate,t,n)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?(0,b.kl)(this._delegate):"server"===(null==e?void 0:e.source)?(0,b.Xk)(this._delegate):(0,b.QT)(this._delegate),t.then(e=>new V(this.firestore,new b.xU(this.firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,this._delegate.converter)))}withConverter(e){return new L(this.firestore,this._delegate.withConverter(e?D.getInstance(this.firestore,e):null))}}function M(e,t,n){return e.message=e.message.replace(t,n),e}function F(e){for(const t of e)if("object"==typeof t&&!A(t))return t;return{}}function $(e,t){var n,r;let i;return i=A(e[0])?e[0]:A(e[1])?e[1]:"function"==typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]},{next:e=>{i.next&&i.next(t(e))},error:null===(n=i.error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class V{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new L(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return(0,b.qK)(this._delegate,e._delegate)}}class U extends V{data(e){const t=this._delegate.data(e);return(0,b.K9)(void 0!==t,"Document in a QueryDocumentSnapshot should exist"),t}}class j{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new O(e)}where(e,t,n){try{return new j(this.firestore,(0,b.IO)(this._delegate,(0,b.ar)(e,t,n)))}catch(r){throw M(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new j(this.firestore,(0,b.IO)(this._delegate,(0,b.Xo)(e,t)))}catch(n){throw M(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new j(this.firestore,(0,b.IO)(this._delegate,(0,b.b9)(e)))}catch(t){throw M(t,"limit()","Query.limit()")}}limitToLast(e){try{return new j(this.firestore,(0,b.IO)(this._delegate,(0,b.vh)(e)))}catch(t){throw M(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new j(this.firestore,(0,b.IO)(this._delegate,(0,b.e0)(...e)))}catch(t){throw M(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new j(this.firestore,(0,b.IO)(this._delegate,(0,b.TQ)(...e)))}catch(t){throw M(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new j(this.firestore,(0,b.IO)(this._delegate,(0,b.Lx)(...e)))}catch(t){throw M(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new j(this.firestore,(0,b.IO)(this._delegate,(0,b.Wu)(...e)))}catch(t){throw M(t,"endAt()","Query.endAt()")}}isEqual(e){return(0,b.iE)(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?(0,b.UQ)(this._delegate):"server"===(null==e?void 0:e.source)?(0,b.zN)(this._delegate):(0,b.PL)(this._delegate),t.then(e=>new B(this.firestore,new b.W(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)))}onSnapshot(...e){const t=F(e),n=$(e,e=>new B(this.firestore,new b.W(this.firestore._delegate,this._userDataWriter,this._delegate,e._snapshot)));return(0,b.cf)(this._delegate,t,n)}withConverter(e){return new j(this.firestore,this._delegate.withConverter(e?D.getInstance(this.firestore,e):null))}}class q{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new U(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class B{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new j(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new U(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(e=>new q(this._firestore,e))}forEach(e,t){this._delegate.forEach(n=>{e.call(t,new U(this._firestore,n))})}isEqual(e){return(0,b.qK)(this._delegate,e._delegate)}}class z extends j{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new L(this.firestore,e):null}doc(e){try{return new L(this.firestore,void 0===e?(0,b.JU)(this._delegate):(0,b.JU)(this._delegate,e))}catch(t){throw M(t,"doc()","CollectionReference.doc()")}}add(e){return(0,b.ET)(this._delegate,e).then(e=>new L(this.firestore,e))}isEqual(e){return(0,b.Eo)(this._delegate,e._delegate)}withConverter(e){return new z(this.firestore,this._delegate.withConverter(e?D.getInstance(this.firestore,e):null))}}function H(e){return(0,b.Cf)(e,b.my)}class G{constructor(...e){this._delegate=new b.Lz(...e)}static documentId(){return new G(b.Xb.keyField().canonicalString())}isEqual(e){return(e=(0,I.m9)(e))instanceof b.Lz&&this._delegate._internalPath.isEqual(e._internalPath)}}class W{constructor(e){this._delegate=e}static serverTimestamp(){const e=(0,b.Bt)();return e._methodName="FieldValue.serverTimestamp",new W(e)}static delete(){const e=(0,b.AK)();return e._methodName="FieldValue.delete",new W(e)}static arrayUnion(...e){const t=(0,b.vr)(...e);return t._methodName="FieldValue.arrayUnion",new W(t)}static arrayRemove(...e){const t=(0,b.Ab)(...e);return t._methodName="FieldValue.arrayRemove",new W(t)}static increment(e){const t=(0,b.nP)(e);return t._methodName="FieldValue.increment",new W(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const K={Firestore:N,GeoPoint:b.F8,Timestamp:b.EK,Blob:k,Transaction:P,WriteBatch:R,DocumentReference:L,DocumentSnapshot:V,Query:j,QueryDocumentSnapshot:U,QuerySnapshot:B,CollectionReference:z,FieldPath:G,FieldValue:W,setLogLevel:function(e){(0,b.Ub)(e)},CACHE_SIZE_UNLIMITED:b.IX};var Y,Q;Q=(e,t)=>new N(e,t,new x),(Y=w.Z).INTERNAL.registerComponent(new C.wA("firestore-compat",e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("firestore").getImmediate();return Q(t,n)},"PUBLIC").setServiceProps(Object.assign({},K))),Y.registerVersion("@firebase/firestore-compat","0.1.8");var X=n(4259),J=n(7955),Z=n(2837);function ee(e,t){return function(e,t=i.z){return new s.y(n=>{let r;return null!=t?t.schedule(()=>{r=e.onSnapshot({includeMetadataChanges:!0},n)}):r=e.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(e,t)}function te(e,t){return ee(e,t).pipe((0,f.U)(e=>({payload:e,type:"query"})))}function ne(e,t){return te(e,t).pipe((0,p.O)(void 0),u(),(0,f.U)(([e,t])=>{const n=t.payload.docChanges(),r=n.map(e=>({type:e.type,payload:e}));return e&&JSON.stringify(e.payload.metadata)!==JSON.stringify(t.payload.metadata)&&t.payload.docs.forEach((t,i)=>{const s=n.find(e=>e.doc.ref.isEqual(t.ref)),o=null==e?void 0:e.payload.docs.find(e=>e.ref.isEqual(t.ref));s&&JSON.stringify(s.doc.metadata)===JSON.stringify(t.metadata)||!s&&o&&JSON.stringify(o.metadata)===JSON.stringify(t.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:t}})}),r}))}function re(e,t,n){return ne(e,n).pipe((0,g.R)((e,n)=>function(e,t,n){return t.forEach(t=>{n.indexOf(t.type)>-1&&(e=function(e,t){switch(t.type){case"added":if(!e[t.newIndex]||!e[t.newIndex].doc.ref.isEqual(t.doc.ref))return ie(e,t.newIndex,0,t);break;case"modified":if(null==e[t.oldIndex]||e[t.oldIndex].doc.ref.isEqual(t.doc.ref)){if(t.oldIndex!==t.newIndex){const n=e.slice();return n.splice(t.oldIndex,1),n.splice(t.newIndex,0,t),n}return ie(e,t.newIndex,1,t)}break;case"removed":if(e[t.oldIndex]&&e[t.oldIndex].doc.ref.isEqual(t.doc.ref))return ie(e,t.oldIndex,1)}return e}(e,t))}),e}(e,n.map(e=>e.payload),t),[]),(0,m.x)(),(0,f.U)(e=>e.map(e=>({type:e.type,payload:e}))))}function ie(e,t,n,...r){const i=e.slice();return i.splice(t,n,...r),i}function se(e){return e&&0!==e.length||(e=["added","removed","modified"]),e}class oe{constructor(e,t,n){this.ref=e,this.query=t,this.afs=n}stateChanges(e){let t=ne(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,f.U)(t=>t.filter(t=>e.indexOf(t.type)>-1)))),t.pipe((0,p.O)(void 0),u(),(0,y.h)(([e,t])=>t.length>0||!e),(0,f.U)(([e,t])=>t),c.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,g.R)((e,t)=>[...e,...t],[]))}snapshotChanges(e){const t=se(e);return re(this.query,t,this.afs.schedulers.outsideAngular).pipe(c.iC)}valueChanges(e={}){return te(this.query,this.afs.schedulers.outsideAngular).pipe((0,f.U)(t=>t.payload.docs.map(t=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data())),c.iC)}get(e){return(0,o.D)(this.query.get(e)).pipe(c.iC)}add(e){return this.ref.add(e)}doc(e){return new ae(this.ref.doc(e),this.afs)}}class ae{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const n=this.ref.collection(e),{ref:r,query:i}=pe(n,t);return new oe(r,i,this.afs)}snapshotChanges(){return ee(this.ref,this.afs.schedulers.outsideAngular).pipe((0,p.O)(void 0),u(),(0,f.U)(([e,t])=>t.exists?(null==e?void 0:e.exists)?{payload:t,type:"modified"}:{payload:t,type:"added"}:{payload:t,type:"removed"})).pipe(c.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,f.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,o.D)(this.ref.get(e)).pipe(c.iC)}}class ce{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?ne(this.query,this.afs.schedulers.outsideAngular).pipe((0,f.U)(t=>t.filter(t=>e.indexOf(t.type)>-1)),(0,y.h)(e=>e.length>0),c.iC):ne(this.query,this.afs.schedulers.outsideAngular).pipe(c.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,g.R)((e,t)=>[...e,...t],[]))}snapshotChanges(e){const t=se(e);return re(this.query,t,this.afs.schedulers.outsideAngular).pipe(c.iC)}valueChanges(e={}){return te(this.query,this.afs.schedulers.outsideAngular).pipe((0,f.U)(t=>t.payload.docs.map(t=>e.idField?Object.assign({[e.idField]:t.id},t.data()):t.data())),c.iC)}get(e){return(0,o.D)(this.query.get(e)).pipe(c.iC)}}const le=new r.OlP("angularfire2.enableFirestorePersistence"),ue=new r.OlP("angularfire2.firestore.persistenceSettings"),he=new r.OlP("angularfire2.firestore.settings"),de=new r.OlP("angularfire2.firestore.use-emulator");function pe(e,t=(e=>e)){return{query:t(e),ref:e}}let fe=(()=>{class e{constructor(e,t,n,r,i,s,c,l,u,h,d,p,f,g,m,y,w){this.schedulers=c;const b=(0,v.on)(e,s,t),I=u;h&&(0,X.nw)(b,s,d,f,g,m,p,y),[this.firestore,this.persistenceEnabled$]=(0,v.cc)(`${b.name}.firestore`,"AngularFirestore",b.name,()=>{const e=s.runOutsideAngular(()=>b.firestore());if(r&&e.settings(r),I&&e.useEmulator(...I),n&&!(0,_.PM)(i)){const t=()=>{try{return(0,o.D)(e.enablePersistence(l||void 0).then(()=>!0,()=>!1))}catch(t){return"undefined"!=typeof console&&console.warn(t),(0,a.of)(!1)}};return[e,s.runOutsideAngular(t)]}return[e,(0,a.of)(!1)]},[r,I,n])}collection(e,t){let n;n="string"==typeof e?this.firestore.collection(e):e;const{ref:r,query:i}=pe(n,t),s=this.schedulers.ngZone.run(()=>r);return new oe(s,i,this)}collectionGroup(e,t){const n=t||(e=>e),r=this.firestore.collectionGroup(e);return new ce(n(r),this)}doc(e){let t;t="string"==typeof e?this.firestore.doc(e):e;const n=this.schedulers.ngZone.run(()=>t);return new ae(n,this)}createId(){return this.firestore.collection("_").doc().id}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(v.Dh),r.LFG(v.xv,8),r.LFG(le,8),r.LFG(he,8),r.LFG(r.Lbi),r.LFG(r.R0b),r.LFG(c.HU),r.LFG(ue,8),r.LFG(de,8),r.LFG(X.zQ,8),r.LFG(X.Qv,8),r.LFG(X.L6,8),r.LFG(X._Q,8),r.LFG(X.rT,8),r.LFG(X.lh,8),r.LFG(X.f7,8),r.LFG(J.nm,8))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"any"}),e})(),ge=(()=>{class e{constructor(){Z.Z.registerVersion("angularfire",c.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:e,providers:[{provide:le,useValue:!0},{provide:ue,useValue:t}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[fe]}),e})()},9106:(e,t,n)=>{"use strict";n.d(t,{hO:()=>g,xv:()=>h,Dh:()=>u,GT:()=>c,cc:()=>m,on:()=>d,pX:()=>a});var r=n(2741),i=n(2837),s=n(6507);e=n.hmd(e);const o=["ngOnDestroy"],a=(e,t,n,r={})=>new Proxy(e,{get:(i,s)=>n.runOutsideAngular(()=>{var i;if(e[s])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(s,e[s]),e[s];if(o.indexOf(s)>-1)return()=>{};const a=t.toPromise().then(e=>{const t=e&&e[s];return"function"==typeof t?t.bind(e):t&&t.then?t.then(e=>n.run(()=>e)):n.run(()=>t)});return new Proxy(()=>{},{get:(e,t)=>a[t],apply:(e,t,n)=>a.then(e=>{var t;const i=e&&e(...n);return(null===(t=null==r?void 0:r.spy)||void 0===t?void 0:t.apply)&&r.spy.apply(s,n,i),i})})})}),c=(e,t)=>{t.forEach(t=>{Object.getOwnPropertyNames(t.prototype||t).forEach(n=>{Object.defineProperty(e.prototype,n,Object.getOwnPropertyDescriptor(t.prototype||t,n))})})};class l{constructor(e){return e}}const u=new r.OlP("angularfire2.app.options"),h=new r.OlP("angularfire2.app.name");function d(t,n,r){const s="object"==typeof r&&r||{};s.name=s.name||"string"==typeof r&&r||"[DEFAULT]";const o=i.Z.apps.filter(e=>e&&e.name===s.name)[0]||n.runOutsideAngular(()=>i.Z.initializeApp(t,s));try{JSON.stringify(t)!==JSON.stringify(o.options)&&p("error",`${o.name} Firebase App already initialized with different options${e.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(a){}return new l(o)}const p=(e,...t)=>{(0,r.X6Q)()&&"undefined"!=typeof console&&console[e](...t)},f={provide:l,useFactory:d,deps:[u,r.R0b,[new r.FiY,h]]};let g=(()=>{class e{constructor(e){i.Z.registerVersion("angularfire",s.q4.full,"core"),i.Z.registerVersion("angularfire",s.q4.full,"app-compat"),i.Z.registerVersion("angular",r.q4F.full,e.toString())}static initializeApp(t,n){return{ngModule:e,providers:[{provide:u,useValue:t},{provide:h,useValue:n}]}}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.Lbi))},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({providers:[f]}),e})();function m(e,t,n,r,i){const[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(t=>t[0]===e)||[];if(s)return function(e,t){try{return e.toString()===t.toString()}catch(n){return e===t}}(i,o)||(v("error",`${t} was already initialized on the ${n} Firebase App with different settings.${y?" You may need to reload as Firebase is not HMR aware.":""}`),v("warn",{is:i,was:o})),s;{const t=r();return globalThis.\u0275AngularfireInstanceCache.push([e,t,i]),t}}const y=!!e.hot,v=(e,...t)=>{(0,r.X6Q)()&&"undefined"!=typeof console&&console[e](...t)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},6507:(e,t,n)=>{"use strict";n.d(t,{q4:()=>et,iC:()=>ft,fc:()=>pt,HU:()=>lt,vb:()=>st,JM:()=>it,u3:()=>mt});var r=n(2741),i=n(1665),s=n(5871),o=n(9870),a=n(9171),c=n(4560),l=n(2842);const u="@firebase/installations",h="0.5.4",d="w:0.5.4",p=new o.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function f(e){return e instanceof o.ZR&&e.code.includes("request-failed")}function g({projectId:e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${e}/installations`}function m(e){return{token:e.token,requestStatus:2,expiresIn:(t=e.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()};var t}async function y(e,t){const n=(await t.json()).error;return p.create("request-failed",{requestName:e,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function v({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}async function _(e){const t=await e();return t.status>=500&&t.status<600?e():t}function w(e){return new Promise(t=>{setTimeout(t,e)})}const b=/^[cdef][\w-]{21}$/;function I(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const t=function(e){return(t=e,btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")).substr(0,22);var t}(e);return b.test(t)?t:""}catch(e){return""}}function C(e){return`${e.appName}!${e.appId}`}const T=new Map;function E(e,t){const n=C(e);S(n,t),function(e,t){const n=(!k&&"BroadcastChannel"in self&&(k=new BroadcastChannel("[Firebase] FID Change"),k.onmessage=e=>{S(e.data.key,e.data.fid)}),k);n&&n.postMessage({key:e,fid:t}),0===T.size&&k&&(k.close(),k=null)}(n,t)}function S(e,t){const n=T.get(e);if(n)for(const r of n)r(t)}let k=null;const A="firebase-installations-store";let x=null;function N(){return x||(x=(0,l.openDb)("firebase-installations-database",1,e=>{switch(e.oldVersion){case 0:e.createObjectStore(A)}})),x}async function O(e,t){const n=C(e),r=(await N()).transaction(A,"readwrite"),i=r.objectStore(A),s=await i.get(n);return await i.put(t,n),await r.complete,s&&s.fid===t.fid||E(e,t.fid),t}async function P(e){const t=C(e),n=(await N()).transaction(A,"readwrite");await n.objectStore(A).delete(t),await n.complete}async function R(e,t){const n=C(e),r=(await N()).transaction(A,"readwrite"),i=r.objectStore(A),s=await i.get(n),o=t(s);return void 0===o?await i.delete(n):await i.put(o,n),await r.complete,!o||s&&s.fid===o.fid||E(e,o.fid),o}async function D(e){let t;const n=await R(e,n=>{const r=function(e){return F(e||{fid:I(),registrationStatus:0})}(n),i=function(e,t){if(0===t.registrationStatus){if(!navigator.onLine)return{installationEntry:t,registrationPromise:Promise.reject(p.create("app-offline"))};const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()};return{installationEntry:n,registrationPromise:async function(e,t){try{return O(e,await async function(e,{fid:t}){const n=g(e),r={method:"POST",headers:v(e),body:JSON.stringify({fid:t,authVersion:"FIS_v2",appId:e.appId,sdkVersion:d})},i=await _(()=>fetch(n,r));if(i.ok){const e=await i.json();return{fid:e.fid||t,registrationStatus:2,refreshToken:e.refreshToken,authToken:m(e.authToken)}}throw await y("Create Installation",i)}(e,t))}catch(n){throw f(n)&&409===n.customData.serverCode?await P(e):await O(e,{fid:t.fid,registrationStatus:0}),n}}(e,n)}}return 1===t.registrationStatus?{installationEntry:t,registrationPromise:L(e)}:{installationEntry:t}}(e,r);return t=i.registrationPromise,i.installationEntry});return""===n.fid?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}async function L(e){let t=await M(e);for(;1===t.registrationStatus;)await w(100),t=await M(e);if(0===t.registrationStatus){const{installationEntry:t,registrationPromise:n}=await D(e);return n||t}return t}function M(e){return R(e,e=>{if(!e)throw p.create("installation-not-found");return F(e)})}function F(e){return 1===(t=e).registrationStatus&&t.registrationTime+1e4<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}async function $(e,t=!1){let n;const r=await R(e.appConfig,r=>{if(!U(r))throw p.create("not-registered");const i=r.authToken;if(!t&&2===(s=i).requestStatus&&!function(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+36e5}(s))return r;var s;if(1===i.requestStatus)return n=async function(e,t){let n=await V(e.appConfig);for(;1===n.authToken.requestStatus;)await w(100),n=await V(e.appConfig);const r=n.authToken;return 0===r.requestStatus?$(e,t):r}(e,t),r;{if(!navigator.onLine)throw p.create("app-offline");const t=function(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}(r);return n=async function(e,t){try{const n=await async function({appConfig:e,platformLoggerProvider:t},n){const r=function(e,{fid:t}){return`${g(e)}/${t}/authTokens:generate`}(e,n),i=function(e,{refreshToken:t}){const n=v(e);return n.append("Authorization",function(e){return`FIS_v2 ${e}`}(t)),n}(e,n),s=t.getImmediate({optional:!0});s&&i.append("x-firebase-client",s.getPlatformInfoString());const o={method:"POST",headers:i,body:JSON.stringify({installation:{sdkVersion:d}})},a=await _(()=>fetch(r,o));if(a.ok)return m(await a.json());throw await y("Generate Auth Token",a)}(e,t),r=Object.assign(Object.assign({},t),{authToken:n});return await O(e.appConfig,r),n}catch(n){if(!f(n)||401!==n.customData.serverCode&&404!==n.customData.serverCode){const n=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await O(e.appConfig,n)}else await P(e.appConfig);throw n}}(e,t),t}});return n?await n:r.authToken}function V(e){return R(e,e=>{if(!U(e))throw p.create("not-registered");return 1===(t=e.authToken).requestStatus&&t.requestTime+1e4<Date.now()?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e;var t})}function U(e){return void 0!==e&&2===e.registrationStatus}function j(e){return p.create("missing-app-config-values",{valueName:e})}const q="installations";(0,s._registerComponent)(new a.wA(q,e=>{const t=e.getProvider("app").getImmediate();return{app:t,appConfig:function(e){if(!e||!e.options)throw j("App Configuration");if(!e.name)throw j("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw j(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),platformLoggerProvider:(0,s._getProvider)(t,"platform-logger"),_delete:()=>Promise.resolve()}},"PUBLIC")),(0,s._registerComponent)(new a.wA("installations-internal",e=>{const t=e.getProvider("app").getImmediate(),n=(0,s._getProvider)(t,q).getImmediate();return{getId:()=>async function(e){const t=e,{installationEntry:n,registrationPromise:r}=await D(t.appConfig);return r?r.catch(console.error):$(t).catch(console.error),n.fid}(n),getToken:e=>async function(e,t=!1){const n=e;return await async function(e){const{registrationPromise:t}=await D(e);t&&await t}(n.appConfig),(await $(n,t)).token}(n,e)}},"PRIVATE")),(0,s.registerVersion)(u,h),(0,s.registerVersion)(u,h,"esm2017");const B="@firebase/remote-config",z="0.3.3",H=new o.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class G{constructor(e,t,n,r){this.client=e,this.storage=t,this.storageCache=n,this.logger=r}isCachedDataFresh(e,t){if(!t)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const n=Date.now()-t,r=n<=e;return this.logger.debug(`Config fetch cache check. Cache age millis: ${n}. Cache max age millis (minimumFetchIntervalMillis setting): ${e}. Is cache hit: ${r}.`),r}async fetch(e){const[t,n]=await Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()]);if(n&&this.isCachedDataFresh(e.cacheMaxAgeMillis,t))return n;e.eTag=n&&n.eTag;const r=await this.client.fetch(e),i=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===r.status&&i.push(this.storage.setLastSuccessfulFetchResponse(r)),await Promise.all(i),r}}function W(e=navigator){return e.languages&&e.languages[0]||e.language}class K{constructor(e,t,n,r,i,s){this.firebaseInstallations=e,this.sdkVersion=t,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=s}async fetch(e){const[t,n]=await Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()]),r=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${this.projectId}/namespaces/${this.namespace}:fetch?key=${this.apiKey}`,i={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":e.eTag||"*"},s={sdk_version:this.sdkVersion,app_instance_id:t,app_instance_id_token:n,app_id:this.appId,language_code:W()},o={method:"POST",headers:i,body:JSON.stringify(s)},a=fetch(r,o),c=new Promise((t,n)=>{e.signal.addEventListener(()=>{const e=new Error("The operation was aborted.");e.name="AbortError",n(e)})});let l;try{await Promise.race([a,c]),l=await a}catch(f){let e="fetch-client-network";throw"AbortError"===f.name&&(e="fetch-timeout"),H.create(e,{originalErrorMessage:f.message})}let u=l.status;const h=l.headers.get("ETag")||void 0;let d,p;if(200===l.status){let e;try{e=await l.json()}catch(f){throw H.create("fetch-client-parse",{originalErrorMessage:f.message})}d=e.entries,p=e.state}if("INSTANCE_STATE_UNSPECIFIED"===p?u=500:"NO_CHANGE"===p?u=304:"NO_TEMPLATE"!==p&&"EMPTY_CONFIG"!==p||(d={}),304!==u&&200!==u)throw H.create("fetch-status",{httpStatus:u});return{status:u,eTag:h,config:d}}}class Y{constructor(e,t){this.client=e,this.storage=t}async fetch(e){const t=await this.storage.getThrottleMetadata()||{backoffCount:0,throttleEndTimeMillis:Date.now()};return this.attemptFetch(e,t)}async attemptFetch(e,{throttleEndTimeMillis:t,backoffCount:n}){await function(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(s),r(H.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(e.signal,t);try{const t=await this.client.fetch(e);return await this.storage.deleteThrottleMetadata(),t}catch(r){if(!function(e){if(!(e instanceof o.ZR&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(r))throw r;const t={throttleEndTimeMillis:Date.now()+(0,o.$s)(n),backoffCount:n+1};return await this.storage.setThrottleMetadata(t),this.attemptFetch(e,t)}}}class Q{constructor(e,t,n,r,i){this.app=e,this._client=t,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function X(e,t){const n=e.target.error||void 0;return H.create(t,{originalErrorMessage:n&&n.message})}const J="app_namespace_store";class Z{constructor(e,t,n,r=function(){return new Promise((e,t)=>{try{const n=indexedDB.open("firebase_remote_config",1);n.onerror=e=>{t(X(e,"storage-open"))},n.onsuccess=t=>{e(t.target.result)},n.onupgradeneeded=e=>{const t=e.target.result;switch(e.oldVersion){case 0:t.createObjectStore(J,{keyPath:"compositeKey"})}}}catch(n){t(H.create("storage-open",{originalErrorMessage:n}))}})}()){this.appId=e,this.appName=t,this.namespace=n,this.openDbPromise=r}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(e){return this.set("last_fetch_status",e)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(e){return this.set("last_successful_fetch_timestamp_millis",e)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(e){return this.set("last_successful_fetch_response",e)}getActiveConfig(){return this.get("active_config")}setActiveConfig(e){return this.set("active_config",e)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(e){return this.set("active_config_etag",e)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(e){return this.set("throttle_metadata",e)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}async get(e){const t=await this.openDbPromise;return new Promise((n,r)=>{const i=t.transaction([J],"readonly").objectStore(J),s=this.createCompositeKey(e);try{const e=i.get(s);e.onerror=e=>{r(X(e,"storage-get"))},e.onsuccess=e=>{const t=e.target.result;n(t?t.value:void 0)}}catch(o){r(H.create("storage-get",{originalErrorMessage:o&&o.message}))}})}async set(e,t){const n=await this.openDbPromise;return new Promise((r,i)=>{const s=n.transaction([J],"readwrite").objectStore(J),o=this.createCompositeKey(e);try{const e=s.put({compositeKey:o,value:t});e.onerror=e=>{i(X(e,"storage-set"))},e.onsuccess=()=>{r()}}catch(a){i(H.create("storage-set",{originalErrorMessage:a&&a.message}))}})}async delete(e){const t=await this.openDbPromise;return new Promise((n,r)=>{const i=t.transaction([J],"readwrite").objectStore(J),s=this.createCompositeKey(e);try{const e=i.delete(s);e.onerror=e=>{r(X(e,"storage-delete"))},e.onsuccess=()=>{n()}}catch(o){r(H.create("storage-delete",{originalErrorMessage:o&&o.message}))}})}createCompositeKey(e){return[this.appId,this.appName,this.namespace,e].join()}}class ee{constructor(e){this.storage=e}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}async loadFromStorage(){const e=this.storage.getLastFetchStatus(),t=this.storage.getLastSuccessfulFetchTimestampMillis(),n=this.storage.getActiveConfig(),r=await e;r&&(this.lastFetchStatus=r);const i=await t;i&&(this.lastSuccessfulFetchTimestampMillis=i);const s=await n;s&&(this.activeConfig=s)}setLastFetchStatus(e){return this.lastFetchStatus=e,this.storage.setLastFetchStatus(e)}setLastSuccessfulFetchTimestampMillis(e){return this.lastSuccessfulFetchTimestampMillis=e,this.storage.setLastSuccessfulFetchTimestampMillis(e)}setActiveConfig(e){return this.activeConfig=e,this.storage.setActiveConfig(e)}}async function te(){if(!(0,o.hl)())return!1;try{return await(0,o.eu)()}catch(e){return!1}}(0,s._registerComponent)(new a.wA("remote-config",function(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw H.create("registration-window");if(!(0,o.hl)())throw H.create("indexed-db-unavailable");const{projectId:i,apiKey:a,appId:l}=n.options;if(!i)throw H.create("registration-project-id");if(!a)throw H.create("registration-api-key");if(!l)throw H.create("registration-app-id");const u=new Z(l,n.name,t=t||"firebase"),h=new ee(u),d=new c.Yd(B);d.logLevel=c.in.ERROR;const p=new K(r,s.SDK_VERSION,t,i,a,l),f=new Y(p,u),g=new G(f,u,h,d),m=new Q(n,g,h,u,d);return function(e){const t=(0,o.m9)(e);t._initializePromise||(t._initializePromise=t._storageCache.loadFromStorage().then(()=>{t._isInitializationComplete=!0}))}(m),m},"PUBLIC").setMultipleInstances(!0)),(0,s.registerVersion)(B,z),(0,s.registerVersion)(B,z,"esm2017");const ne="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4";var re=(()=>(function(e){e.PUSH_RECEIVED="push-received",e.NOTIFICATION_CLICKED="notification-clicked"}(re||(re={})),re))();function ie(e){const t=new Uint8Array(e);return btoa(String.fromCharCode(...t)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function se(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(t),r=new Uint8Array(n.length);for(let i=0;i<n.length;++i)r[i]=n.charCodeAt(i);return r}const oe="fcm_token_details_db",ae="fcm_token_object_Store",ce="firebase-messaging-store";let le=null;function ue(){return le||(le=(0,l.openDb)("firebase-messaging-database",1,e=>{switch(e.oldVersion){case 0:e.createObjectStore(ce)}})),le}async function he(e){const t=pe(e),n=await ue(),r=await n.transaction(ce).objectStore(ce).get(t);if(r)return r;{const t=await async function(e){if("databases"in indexedDB&&!(await indexedDB.databases()).map(e=>e.name).includes(oe))return null;let t=null;return(await(0,l.openDb)(oe,5,async n=>{var r;if(n.oldVersion<2)return;if(!n.objectStoreNames.contains(ae))return;const i=n.transaction.objectStore(ae),s=await i.index("fcmSenderId").get(e);if(await i.clear(),s)if(2===n.oldVersion){const e=s;if(!e.auth||!e.p256dh||!e.endpoint)return;t={token:e.fcmToken,createTime:null!==(r=e.createTime)&&void 0!==r?r:Date.now(),subscriptionOptions:{auth:e.auth,p256dh:e.p256dh,endpoint:e.endpoint,swScope:e.swScope,vapidKey:"string"==typeof e.vapidKey?e.vapidKey:ie(e.vapidKey)}}}else if(3===n.oldVersion){const e=s;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:ie(e.auth),p256dh:ie(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:ie(e.vapidKey)}}}else if(4===n.oldVersion){const e=s;t={token:e.fcmToken,createTime:e.createTime,subscriptionOptions:{auth:ie(e.auth),p256dh:ie(e.p256dh),endpoint:e.endpoint,swScope:e.swScope,vapidKey:ie(e.vapidKey)}}}})).close(),await(0,l.deleteDb)(oe),await(0,l.deleteDb)("fcm_vapid_details_db"),await(0,l.deleteDb)("undefined"),function(e){if(!e||!e.subscriptionOptions)return!1;const{subscriptionOptions:t}=e;return"number"==typeof e.createTime&&e.createTime>0&&"string"==typeof e.token&&e.token.length>0&&"string"==typeof t.auth&&t.auth.length>0&&"string"==typeof t.p256dh&&t.p256dh.length>0&&"string"==typeof t.endpoint&&t.endpoint.length>0&&"string"==typeof t.swScope&&t.swScope.length>0&&"string"==typeof t.vapidKey&&t.vapidKey.length>0}(t)?t:null}(e.appConfig.senderId);if(t)return await de(e,t),t}}async function de(e,t){const n=pe(e),r=(await ue()).transaction(ce,"readwrite");return await r.objectStore(ce).put(t,n),await r.complete,t}function pe({appConfig:e}){return e.appId}const fe=new o.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});async function ge(e,t){const n={method:"DELETE",headers:await ye(e)};try{const r=await fetch(`${me(e.appConfig)}/${t}`,n),i=await r.json();if(i.error)throw fe.create("token-unsubscribe-failed",{errorInfo:i.error.message})}catch(r){throw fe.create("token-unsubscribe-failed",{errorInfo:r})}}function me({projectId:e}){return`https://fcmregistrations.googleapis.com/v1/projects/${e}/registrations`}async function ye({appConfig:e,installations:t}){const n=await t.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function ve({p256dh:e,auth:t,endpoint:n,vapidKey:r}){const i={web:{endpoint:n,auth:t,p256dh:e}};return r!==ne&&(i.web.applicationPubKey=r),i}async function _e(e,t){const n={token:await async function(e,t){const n=await ye(e),r=ve(t),i={method:"POST",headers:n,body:JSON.stringify(r)};let s;try{const t=await fetch(me(e.appConfig),i);s=await t.json()}catch(o){throw fe.create("token-subscribe-failed",{errorInfo:o})}if(s.error)throw fe.create("token-subscribe-failed",{errorInfo:s.error.message});if(!s.token)throw fe.create("token-subscribe-no-token");return s.token}(e,t),createTime:Date.now(),subscriptionOptions:t};return await de(e,n),n.token}function we(e){const t={from:e.from,collapseKey:e.collapse_key,messageId:e.fcm_message_id};return function(e,t){if(!t.notification)return;e.notification={};const n=t.notification.title;n&&(e.notification.title=n);const r=t.notification.body;r&&(e.notification.body=r);const i=t.notification.image;i&&(e.notification.image=i)}(t,e),function(e,t){t.data&&(e.data=t.data)}(t,e),function(e,t){if(!t.fcmOptions)return;e.fcmOptions={};const n=t.fcmOptions.link;n&&(e.fcmOptions.link=n);const r=t.fcmOptions.analytics_label;r&&(e.fcmOptions.analyticsLabel=r)}(t,e),t}function be(e,t){const n=[];for(let r=0;r<e.length;r++)n.push(e.charAt(r)),r<t.length&&n.push(t.charAt(r));return n.join("")}function Ie(e){return fe.create("missing-app-config-values",{valueName:e})}be("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),be("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Ce{constructor(e,t,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const r=function(e){if(!e||!e.options)throw Ie("App Configuration Object");if(!e.name)throw Ie("App Name");const t=["projectId","apiKey","appId","messagingSenderId"],{options:n}=e;for(const r of t)if(!n[r])throw Ie(r);return{appName:e.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}(e);this.firebaseDependencies={app:e,appConfig:r,installations:t,analyticsProvider:n}}_delete(){return Promise.resolve()}}async function Te(e,t){if(!navigator)throw fe.create("only-available-in-window");if("default"===Notification.permission&&await Notification.requestPermission(),"granted"!==Notification.permission)throw fe.create("permission-blocked");return await async function(e,t){t?e.vapidKey=t:e.vapidKey||(e.vapidKey=ne)}(e,null==t?void 0:t.vapidKey),await async function(e,t){if(t||e.swRegistration||await async function(e){try{e.swRegistration=await navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"}),e.swRegistration.update().catch(()=>{})}catch(t){throw fe.create("failed-service-worker-registration",{browserErrorMessage:t.message})}}(e),t||!e.swRegistration){if(!(t instanceof ServiceWorkerRegistration))throw fe.create("invalid-sw-registration");e.swRegistration=t}}(e,null==t?void 0:t.serviceWorkerRegistration),async function(e){const t=await async function(e,t){return await e.pushManager.getSubscription()||e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:se(t)})}(e.swRegistration,e.vapidKey),n={vapidKey:e.vapidKey,swScope:e.swRegistration.scope,endpoint:t.endpoint,auth:ie(t.getKey("auth")),p256dh:ie(t.getKey("p256dh"))},r=await he(e.firebaseDependencies);if(r){if((s=n).vapidKey===(i=r.subscriptionOptions).vapidKey&&s.endpoint===i.endpoint&&s.auth===i.auth&&s.p256dh===i.p256dh)return Date.now()>=r.createTime+6048e5?async function(e,t){try{const n=await async function(e,t){const n=await ye(e),r=ve(t.subscriptionOptions),i={method:"PATCH",headers:n,body:JSON.stringify(r)};let s;try{const n=await fetch(`${me(e.appConfig)}/${t.token}`,i);s=await n.json()}catch(o){throw fe.create("token-update-failed",{errorInfo:o})}if(s.error)throw fe.create("token-update-failed",{errorInfo:s.error.message});if(!s.token)throw fe.create("token-update-no-token");return s.token}(e.firebaseDependencies,t),r=Object.assign(Object.assign({},t),{token:n,createTime:Date.now()});return await de(e.firebaseDependencies,r),n}catch(n){throw await async function(e){const t=await he(e.firebaseDependencies);t&&(await ge(e.firebaseDependencies,t.token),await async function(e){const t=pe(e),n=(await ue()).transaction(ce,"readwrite");await n.objectStore(ce).delete(t),await n.complete}(e.firebaseDependencies));const n=await e.swRegistration.pushManager.getSubscription();return!n||n.unsubscribe()}(e),n}}(e,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await ge(e.firebaseDependencies,r.token)}catch(o){console.warn(o)}return _e(e.firebaseDependencies,n)}var i,s;return _e(e.firebaseDependencies,n)}(e)}const Ee="@firebase/messaging",Se="0.9.4";async function ke(){return"undefined"!=typeof window&&(0,o.hl)()&&await(0,o.eu)()&&(0,o.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}(0,s._registerComponent)(new a.wA("messaging",e=>{const t=new Ce(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",e=>async function(e,t){const n=t.data;if(!n.isFirebaseMessaging)return;e.onMessageHandler&&n.messageType===re.PUSH_RECEIVED&&("function"==typeof e.onMessageHandler?e.onMessageHandler(we(n)):e.onMessageHandler.next(we(n)));const r=n.data;var i;"object"==typeof(i=r)&&i&&"google.c.a.c_id"in i&&"1"===r["google.c.a.e"]&&await async function(e,t,n){const r=function(e){switch(e){case re.NOTIFICATION_CLICKED:return"notification_open";case re.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(t);(await e.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n["google.c.a.c_id"],message_name:n["google.c.a.c_l"],message_time:n["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)})}(e,n.messageType,r)}(t,e)),t},"PUBLIC")),(0,s._registerComponent)(new a.wA("messaging-internal",e=>{const t=e.getProvider("messaging").getImmediate();return{getToken:e=>Te(t,e)}},"PRIVATE")),(0,s.registerVersion)(Ee,Se),(0,s.registerVersion)(Ee,Se,"esm2017");const Ae="analytics",xe="https://www.googletagmanager.com/gtag/js",Ne=new c.Yd("@firebase/analytics");function Oe(e){return Promise.all(e.map(e=>e.catch(e=>e)))}const Pe=new o.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),Re=new class{constructor(e={},t=1e3){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}};function De(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function Le(e,t=Re,n){const{appId:r,apiKey:i,measurementId:s}=e.options;if(!r)throw Pe.create("no-app-id");if(!i){if(s)return{measurementId:s,appId:r};throw Pe.create("no-api-key")}const o=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},a=new Fe;return setTimeout(async()=>{a.abort()},void 0!==n?n:6e4),Me({appId:r,apiKey:i,measurementId:s},o,a,t)}async function Me(e,{throttleEndTimeMillis:t,backoffCount:n},r,i=Re){const{appId:s,measurementId:a}=e;try{await function(e,t){return new Promise((n,r)=>{const i=Math.max(t-Date.now(),0),s=setTimeout(n,i);e.addEventListener(()=>{clearTimeout(s),r(Pe.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}(r,t)}catch(c){if(a)return Ne.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c.message}]`),{appId:s,measurementId:a};throw c}try{const t=await async function(e){var t;const{appId:n,apiKey:r}=e,i={method:"GET",headers:De(r)},s="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig".replace("{app-id}",n),o=await fetch(s,i);if(200!==o.status&&304!==o.status){let e="";try{const n=await o.json();(null===(t=n.error)||void 0===t?void 0:t.message)&&(e=n.error.message)}catch(a){}throw Pe.create("config-fetch-failed",{httpStatus:o.status,responseMessage:e})}return o.json()}(e);return i.deleteThrottleMetadata(s),t}catch(c){if(!function(e){if(!(e instanceof o.ZR&&e.customData))return!1;const t=Number(e.customData.httpStatus);return 429===t||500===t||503===t||504===t}(c)){if(i.deleteThrottleMetadata(s),a)return Ne.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${a} provided in the "measurementId" field in the local Firebase config. [${c.message}]`),{appId:s,measurementId:a};throw c}const t=503===Number(c.customData.httpStatus)?(0,o.$s)(n,i.intervalMillis,30):(0,o.$s)(n,i.intervalMillis),l={throttleEndTimeMillis:Date.now()+t,backoffCount:n+1};return i.setThrottleMetadata(s,l),Ne.debug(`Calling attemptFetch again in ${t} millis`),Me(e,l,r,i)}}class Fe{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}class $e{constructor(e){this.app=e}_delete(){return delete Ve[this.app.options.appId],Promise.resolve()}}let Ve={},Ue=[];const je={};let qe,Be,ze=!1;async function He(){if((0,o.ru)())return!1;if(!(0,o.zI)())return!1;if(!(0,o.hl)())return!1;try{return await(0,o.eu)()}catch(e){return!1}}const Ge="@firebase/analytics",We="0.7.4";(0,s._registerComponent)(new a.wA(Ae,(e,{options:t})=>function(e,t,n){!function(){const e=[];if((0,o.ru)()&&e.push("This is a browser extension environment."),(0,o.zI)()||e.push("Cookies are not available."),e.length>0){const t=e.map((e,t)=>`(${t+1}) ${e}`).join(" "),n=Pe.create("invalid-analytics-context",{errorInfo:t});Ne.warn(n.message)}}();const r=e.options.appId;if(!r)throw Pe.create("no-app-id");if(!e.options.apiKey){if(!e.options.measurementId)throw Pe.create("no-api-key");Ne.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ve[r])throw Pe.create("already-exists",{id:r});if(!ze){!function(e){let t=[];Array.isArray(window.dataLayer)?t=window.dataLayer:window.dataLayer=t}();const{wrappedGtag:e,gtagCore:t}=function(e,t,n,r,i){let s=function(...e){window.dataLayer.push(arguments)};return window.gtag&&"function"==typeof window.gtag&&(s=window.gtag),window.gtag=function(e,t,n,r){return async function(i,s,o){try{"event"===i?await async function(e,t,n,r,i){try{let s=[];if(i&&i.send_to){let e=i.send_to;Array.isArray(e)||(e=[e]);const r=await Oe(n);for(const n of e){const e=r.find(e=>e.measurementId===n),i=e&&t[e.appId];if(!i){s=[];break}s.push(i)}}0===s.length&&(s=Object.values(t)),await Promise.all(s),e("event",r,i||{})}catch(s){Ne.error(s)}}(e,t,n,s,o):"config"===i?await async function(e,t,n,r,i,s){const o=r[i];try{if(o)await t[o];else{const e=(await Oe(n)).find(e=>e.measurementId===i);e&&await t[e.appId]}}catch(a){Ne.error(a)}e("config",i,s)}(e,t,n,r,s,o):e("set",s)}catch(a){Ne.error(a)}}}(s,e,t,n),{gtagCore:s,wrappedGtag:window.gtag}}(Ve,Ue,je);Be=e,qe=t,ze=!0}return Ve[r]=async function(e,t,n,r,i,s,a){var c;const l=Le(e);l.then(t=>{n[t.measurementId]=t.appId,e.options.measurementId&&t.measurementId!==e.options.measurementId&&Ne.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${t.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(e=>Ne.error(e)),t.push(l);const u=async function(){if(!(0,o.hl)())return Ne.warn(Pe.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{await(0,o.eu)()}catch(e){return Ne.warn(Pe.create("indexeddb-unavailable",{errorInfo:e}).message),!1}return!0}().then(e=>e?r.getId():void 0),[h,d]=await Promise.all([l,u]);(function(){const e=window.document.getElementsByTagName("script");for(const t of Object.values(e))if(t.src&&t.src.includes(xe))return t;return null})()||function(e,t){const n=document.createElement("script");n.src=`${xe}?l=dataLayer&id=${t}`,n.async=!0,document.head.appendChild(n)}(0,h.measurementId),i("js",new Date);const p=null!==(c=null==a?void 0:a.config)&&void 0!==c?c:{};return p.origin="firebase",p.update=!0,null!=d&&(p.firebase_id=d),i("config",h.measurementId,p),h.measurementId}(e,Ue,je,t,qe,0,n),new $e(e)}(e.getProvider("app").getImmediate(),e.getProvider("installations-internal").getImmediate(),t),"PUBLIC")),(0,s._registerComponent)(new a.wA("analytics-internal",function(e){try{const t=e.getProvider(Ae).getImmediate();return{logEvent:(e,n,r)=>function(e,t,n,r){e=(0,o.m9)(e),async function(e,t,n,r,i){if(i&&i.global)e("event",n,r);else{const i=await t;e("event",n,Object.assign(Object.assign({},r),{send_to:i}))}}(Be,Ve[e.app.options.appId],t,n,r).catch(e=>Ne.error(e))}(t,e,n,r)}}catch(t){throw Pe.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),(0,s.registerVersion)(Ge,We),(0,s.registerVersion)(Ge,We,"esm2017");var Ke=n(6511),Ye=n(8846),Qe=n(3948),Xe=n(6286),Je=n(7338),Ze=n(6515);const et=new r.GfV("7.2.0"),tt="__angularfire_symbol__analyticsIsSupported",nt="__angularfire_symbol__remoteConfigIsSupported",rt="__angularfire_symbol__messagingIsSupported";function it(e,t,n){if(t){if(1===t.length)return t[0];const e=t.filter(e=>e.app===n);if(1===e.length)return e[0]}return n.container.getProvider(e).getImmediate({optional:!0})}globalThis[tt]||(globalThis[tt]=He().then(e=>globalThis.__angularfire_symbol__analyticsIsSupportedValue=e)),globalThis[rt]||(globalThis[rt]=ke().then(e=>globalThis.__angularfire_symbol__messagingIsSupportedValue=e)),globalThis[nt]||(globalThis[nt]=te().then(e=>globalThis.__angularfire_symbol__remoteConfigIsSupportedValue=e));const st=(e,t)=>{const n=t?[t]:(0,i.C6)(),r=[];return n.forEach(t=>{t.container.getProvider(e).instances.forEach(e=>{r.includes(e)||r.push(e)})}),r};function ot(){}class at{constructor(e,t=Ke.N){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,n){const r=this.zone;return this.delegate.schedule(function(t){r.runGuarded(()=>{e.apply(this,[t])})},t,n)}}class ct{constructor(e){this.zone=e,this.task=null}call(e,t){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ot,{},ot,ot)),t.pipe((0,Xe.b)({next:n,complete:n,error:n})).subscribe(e).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let lt=(()=>{class e{constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new at(Zone.current)),this.insideAngular=e.run(()=>new at(Zone.current,Ye.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return e.\u0275fac=function(t){return new(t||e)(r.LFG(r.R0b))},e.\u0275prov=r.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();function ut(){const e=globalThis.\u0275AngularFireScheduler;if(!e)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return e}function ht(e){return ut().ngZone.runOutsideAngular(()=>e())}function dt(e){return ut().ngZone.run(()=>e())}function pt(e){return e.pipe((0,Je.QV)(ut().outsideAngular))}function ft(e){return ut(),(t=ut(),function(e){return(e=e.lift(new ct(t.ngZone))).pipe((0,Ze.R)(t.outsideAngular),(0,Je.QV)(t.insideAngular))})(e);var t}const gt=(e,t)=>{const n=void 0;return function(){return t&&setTimeout(()=>{"scheduled"===t.state&&t.invoke()},10),dt(()=>e.apply(n,arguments))}},mt=(e,t)=>function(){let n;for(let e=0;e<arguments.length;e++)"function"==typeof arguments[e]&&(t&&(n||(n=dt(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ot,{},ot,ot)))),arguments[e]=gt(arguments[e],n));const r=ht(()=>e.apply(this,arguments));if(!t){if(r instanceof Qe.y){const e=ut();return r.pipe((0,Ze.R)(e.outsideAngular),(0,Je.QV)(e.insideAngular))}return dt(()=>r)}return r instanceof Qe.y?r.pipe(ft):r instanceof Promise?dt(()=>new Promise((e,t)=>r.then(t=>dt(()=>e(t)),e=>dt(()=>t(e))))):"function"==typeof r&&n?function(){return setTimeout(()=>{n&&"scheduled"===n.state&&n.invoke()},10),r.apply(this,arguments)}:dt(()=>r)}},4988:(e,t,n)=>{"use strict";n.d(t,{Fj:()=>m,qu:()=>Pe,u:()=>Se,sg:()=>Te,u5:()=>Ne,nD:()=>Ae,JU:()=>p,a5:()=>V,JJ:()=>j,JL:()=>q,F:()=>me,On:()=>_e,UX:()=>Oe,kI:()=>I,_Y:()=>we});var r=n(2741),i=n(6274),s=n(3948),o=n(9622),a=n(8561),c=n(153),l=n(2850);function u(e,t){return new s.y(n=>{const r=e.length;if(0===r)return void n.complete();const i=new Array(r);let s=0,o=0;for(let a=0;a<r;a++){const c=(0,l.D)(e[a]);let u=!1;n.add(c.subscribe({next:e=>{u||(u=!0,o++),i[a]=e},error:e=>n.error(e),complete:()=>{s++,s!==r&&u||(o===r&&n.next(t?t.reduce((e,t,n)=>(e[t]=i[n],e),{}):i),n.complete())}}))}})}let h=(()=>{class e{constructor(e,t){this._renderer=e,this._elementRef=t,this.onChange=e=>{},this.onTouched=()=>{}}setProperty(e,t){this._renderer.setProperty(this._elementRef.nativeElement,e,t)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.Qsj),r.Y36(r.SBq))},e.\u0275dir=r.lG2({type:e}),e})(),d=(()=>{class e extends h{}return e.\u0275fac=function(){let t;return function(n){return(t||(t=r.n5z(e)))(n||e)}}(),e.\u0275dir=r.lG2({type:e,features:[r.qOj]}),e})();const p=new r.OlP("NgValueAccessor"),f={provide:p,useExisting:(0,r.Gpc)(()=>m),multi:!0},g=new r.OlP("CompositionEventMode");let m=(()=>{class e extends h{constructor(e,t,n){super(e,t),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const e=(0,i.q)()?(0,i.q)().getUserAgent():"";return/android (\d+)/.test(e.toLowerCase())}())}writeValue(e){this.setProperty("value",null==e?"":e)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(r.Qsj),r.Y36(r.SBq),r.Y36(g,8))},e.\u0275dir=r.lG2({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(e,t){1&e&&r.NdJ("input",function(e){return t._handleInput(e.target.value)})("blur",function(){return t.onTouched()})("compositionstart",function(){return t._compositionStart()})("compositionend",function(e){return t._compositionEnd(e.target.value)})},features:[r._Bn([f]),r.qOj]}),e})();function y(e){return null==e||0===e.length}function v(e){return null!=e&&"number"==typeof e.length}const _=new r.OlP("NgValidators"),w=new r.OlP("NgAsyncValidators"),b=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class I{static min(e){return function(e){return t=>{if(y(t.value)||y(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n<e?{min:{min:e,actual:t.value}}:null}}(e)}static max(e){return function(e){return t=>{if(y(t.value)||y(e))return null;const n=parseFloat(t.value);return!isNaN(n)&&n>e?{max:{max:e,actual:t.value}}:null}}(e)}static required(e){return function(e){return y(e.value)?{required:!0}:null}(e)}static requiredTrue(e){return function(e){return!0===e.value?null:{required:!0}}(e)}static email(e){return function(e){return y(e.value)||b.test(e.value)?null:{email:!0}}(e)}static minLength(e){return function(e){return t=>y(t.value)||!v(t.value)?null:t.value.length<e?{minlength:{requiredLength:e,actualLength:t.value.length}}:null}(e)}static maxLength(e){return C(e)}static pattern(e){return function(e){if(!e)return T;let t,n;return"string"==typeof e?(n="","^"!==e.charAt(0)&&(n+="^"),n+=e,"$"!==e.charAt(e.length-1)&&(n+="$"),t=new RegExp(n)):(n=e.toString(),t=e),e=>{if(y(e.value))return null;const r=e.value;return t.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}(e)}static nullValidator(e){return null}static compose(e){return N(e)}static composeAsync(e){return P(e)}}function C(e){return t=>v(t.value)&&t.value.length>e?{maxlength:{requiredLength:e,actualLength:t.value.length}}:null}function T(e){return null}function E(e){return null!=e}function S(e){const t=(0,r.QGY)(e)?(0,l.D)(e):e;return(0,r.CqO)(t),t}function k(e){let t={};return e.forEach(e=>{t=null!=e?Object.assign(Object.assign({},t),e):t}),0===Object.keys(t).length?null:t}function A(e,t){return t.map(t=>t(e))}function x(e){return e.map(e=>function(e){return!e.validate}(e)?e:t=>e.validate(t))}function N(e){if(!e)return null;const t=e.filter(E);return 0==t.length?null:function(e){return k(A(e,t))}}function O(e){return null!=e?N(x(e)):null}function P(e){if(!e)return null;const t=e.filter(E);return 0==t.length?null:function(e){return function(...e){if(1===e.length){const t=e[0];if((0,o.k)(t))return u(t,null);if((0,c.K)(t)&&Object.getPrototypeOf(t)===Object.prototype){const e=Object.keys(t);return u(e.map(e=>t[e]),e)}}if("function"==typeof e[e.length-1]){const t=e.pop();return u(e=1===e.length&&(0,o.k)(e[0])?e[0]:e,null).pipe((0,a.U)(e=>t(...e)))}return u(e,null)}(A(e,t).map(S)).pipe((0,a.U)(k))}}function R(e){return null!=e?P(x(e)):null}function D(e,t){return null===e?[t]:Array.isArray(e)?[...e,t]:[e,t]}function L(e){return e._rawValidators}function M(e){return e._rawAsyncValidators}let F=(()=>{class e{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=O(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=R(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.lG2({type:e}),e})(),$=(()=>{class e extends F{get formDirective(){return null}get path(){return null}}return e.\u0275fac=function(){let t;return function(n){return(t||(t=r.n5z(e)))(n||e)}}(),e.\u0275dir=r.lG2({type:e,features:[r.qOj]}),e})();class V extends F{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class U{constructor(e){this._cd=e}is(e){var t,n,r;return"submitted"===e?!!(null===(t=this._cd)||void 0===t?void 0:t.submitted):!!(null===(r=null===(n=this._cd)||void 0===n?void 0:n.control)||void 0===r?void 0:r[e])}}let j=(()=>{class e extends U{constructor(e){super(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(V,2))},e.\u0275dir=r.lG2({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(e,t){2&e&&r.ekj("ng-untouched",t.is("untouched"))("ng-touched",t.is("touched"))("ng-pristine",t.is("pristine"))("ng-dirty",t.is("dirty"))("ng-valid",t.is("valid"))("ng-invalid",t.is("invalid"))("ng-pending",t.is("pending"))},features:[r.qOj]}),e})(),q=(()=>{class e extends U{constructor(e){super(e)}}return e.\u0275fac=function(t){return new(t||e)(r.Y36($,10))},e.\u0275dir=r.lG2({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(e,t){2&e&&r.ekj("ng-untouched",t.is("untouched"))("ng-touched",t.is("touched"))("ng-pristine",t.is("pristine"))("ng-dirty",t.is("dirty"))("ng-valid",t.is("valid"))("ng-invalid",t.is("invalid"))("ng-pending",t.is("pending"))("ng-submitted",t.is("submitted"))},features:[r.qOj]}),e})();function B(e,t){return[...t.path,e]}function z(e,t){W(e,t),t.valueAccessor.writeValue(e.value),function(e,t){t.valueAccessor.registerOnChange(n=>{e._pendingValue=n,e._pendingChange=!0,e._pendingDirty=!0,"change"===e.updateOn&&Y(e,t)})}(e,t),function(e,t){const n=(e,n)=>{t.valueAccessor.writeValue(e),n&&t.viewToModelUpdate(e)};e.registerOnChange(n),t._registerOnDestroy(()=>{e._unregisterOnChange(n)})}(e,t),function(e,t){t.valueAccessor.registerOnTouched(()=>{e._pendingTouched=!0,"blur"===e.updateOn&&e._pendingChange&&Y(e,t),"submit"!==e.updateOn&&e.markAsTouched()})}(e,t),function(e,t){if(t.valueAccessor.setDisabledState){const n=e=>{t.valueAccessor.setDisabledState(e)};e.registerOnDisabledChange(n),t._registerOnDestroy(()=>{e._unregisterOnDisabledChange(n)})}}(e,t)}function H(e,t,n=!0){const r=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(r),t.valueAccessor.registerOnTouched(r)),K(e,t),e&&(t._invokeOnDestroyCallbacks(),e._registerOnCollectionChange(()=>{}))}function G(e,t){e.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function W(e,t){const n=L(e);null!==t.validator?e.setValidators(D(n,t.validator)):"function"==typeof n&&e.setValidators([n]);const r=M(e);null!==t.asyncValidator?e.setAsyncValidators(D(r,t.asyncValidator)):"function"==typeof r&&e.setAsyncValidators([r]);const i=()=>e.updateValueAndValidity();G(t._rawValidators,i),G(t._rawAsyncValidators,i)}function K(e,t){let n=!1;if(null!==e){if(null!==t.validator){const r=L(e);if(Array.isArray(r)&&r.length>0){const i=r.filter(e=>e!==t.validator);i.length!==r.length&&(n=!0,e.setValidators(i))}}if(null!==t.asyncValidator){const r=M(e);if(Array.isArray(r)&&r.length>0){const i=r.filter(e=>e!==t.asyncValidator);i.length!==r.length&&(n=!0,e.setAsyncValidators(i))}}}const r=()=>{};return G(t._rawValidators,r),G(t._rawAsyncValidators,r),n}function Y(e,t){e._pendingDirty&&e.markAsDirty(),e.setValue(e._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1}function Q(e,t){W(e,t)}function X(e,t){if(!e.hasOwnProperty("model"))return!1;const n=e.model;return!!n.isFirstChange()||!Object.is(t,n.currentValue)}function J(e,t){e._syncPendingControls(),t.forEach(e=>{const t=e.control;"submit"===t.updateOn&&t._pendingChange&&(e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1)})}function Z(e,t){if(!t)return null;let n,r,i;return Array.isArray(t),t.forEach(e=>{e.constructor===m?n=e:Object.getPrototypeOf(e.constructor)===d?r=e:i=e}),i||r||n||null}function ee(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const te="VALID",ne="INVALID",re="PENDING",ie="DISABLED";function se(e){return(le(e)?e.validators:e)||null}function oe(e){return Array.isArray(e)?O(e):e||null}function ae(e,t){return(le(t)?t.asyncValidators:e)||null}function ce(e){return Array.isArray(e)?R(e):e||null}function le(e){return null!=e&&!Array.isArray(e)&&"object"==typeof e}class ue{constructor(e,t){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=oe(this._rawValidators),this._composedAsyncValidatorFn=ce(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===te}get invalid(){return this.status===ne}get pending(){return this.status==re}get disabled(){return this.status===ie}get enabled(){return this.status!==ie}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=oe(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=ce(e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=re,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=ie,this.errors=null,this._forEachChild(t=>{t.disable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=te,this._forEachChild(t=>{t.enable(Object.assign(Object.assign({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(e=>e(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==te&&this.status!==re||this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ie:te}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=re,this._hasOwnPendingAsyncValidator=!0;const t=S(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(t=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(t,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){return function(e,t,n){if(null==t)return null;if(Array.isArray(t)||(t=t.split(".")),Array.isArray(t)&&0===t.length)return null;let r=e;return t.forEach(e=>{r=r instanceof de?r.controls.hasOwnProperty(e)?r.controls[e]:null:r instanceof pe&&r.at(e)||null}),r}(this,e)}getError(e,t){const n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new r.vpe,this.statusChanges=new r.vpe}_calculateStatus(){return this._allControlsDisabled()?ie:this.errors?ne:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(re)?re:this._anyControlsHaveStatus(ne)?ne:te}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_isBoxedValue(e){return"object"==typeof e&&null!==e&&2===Object.keys(e).length&&"value"in e&&"disabled"in e}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){le(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class he extends ue{constructor(e=null,t,n){super(se(t),ae(n,t)),this._onChange=[],this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(e=>e(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=null,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){ee(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){ee(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){this._isBoxedValue(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}}class de extends ue{constructor(e,t,n){super(se(t),ae(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,n={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){this._checkAllValuesPresent(e),Object.keys(e).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(e[n],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,n)=>(e[n]=t instanceof he?t.value:t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(e,t)=>!!t._syncPendingControls()||e);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[e])throw new Error(`Cannot find form control with name: ${e}.`)}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const n=this.controls[t];n&&e(n,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const t of Object.keys(this.controls)){const n=this.controls[t];if(this.contains(t)&&e(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(e,t,n)=>((t.enabled||this.disabled)&&(e[n]=t.value),e))}_reduceChildren(e,t){let n=e;return this._forEachChild((e,r)=>{n=t(n,e,r)}),n}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class pe extends ue{constructor(e,t,n){super(se(t),ae(n,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[e]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,n={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),this.controls.splice(e,1),t&&(this.controls.splice(e,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){this._checkAllValuesPresent(e),e.forEach((e,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((e,n)=>{this.at(n)&&this.at(n).patchValue(e,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((n,r)=>{n.reset(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e instanceof he?e.value:e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_syncPendingControls(){let e=this.controls.reduce((e,t)=>!!t._syncPendingControls()||e,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_throwIfControlMissing(e){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(e))throw new Error(`Cannot find form control at index ${e}`)}_forEachChild(e){this.controls.forEach((t,n)=>{e(t,n)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_checkAllValuesPresent(e){this._forEachChild((t,n)=>{if(void 0===e[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}}const fe={provide:$,useExisting:(0,r.Gpc)(()=>me)},ge=(()=>Promise.resolve(null))();let me=(()=>{class e extends ${constructor(e,t){super(),this.submitted=!1,this._directives=[],this.ngSubmit=new r.vpe,this.form=new de({},O(e),R(t))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){ge.then(()=>{const t=this._findContainer(e.path);e.control=t.registerControl(e.name,e.control),z(e.control,e),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.push(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){ge.then(()=>{const t=this._findContainer(e.path);t&&t.removeControl(e.name),ee(this._directives,e)})}addFormGroup(e){ge.then(()=>{const t=this._findContainer(e.path),n=new de({});Q(n,e),t.registerControl(e.name,n),n.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){ge.then(()=>{const t=this._findContainer(e.path);t&&t.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,t){ge.then(()=>{this.form.get(e.path).setValue(t)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,J(this.form,this._directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(_,10),r.Y36(w,10))},e.\u0275dir=r.lG2({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(e,t){1&e&&r.NdJ("submit",function(e){return t.onSubmit(e)})("reset",function(){return t.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r._Bn([fe]),r.qOj]}),e})();const ye={provide:V,useExisting:(0,r.Gpc)(()=>_e)},ve=(()=>Promise.resolve(null))();let _e=(()=>{class e extends V{constructor(e,t,n,i){super(),this.control=new he,this._registered=!1,this.update=new r.vpe,this._parent=e,this._setValidators(t),this._setAsyncValidators(n),this.valueAccessor=Z(0,i)}ngOnChanges(e){this._checkForErrors(),this._registered||this._setUpControl(),"isDisabled"in e&&this._updateDisabled(e),X(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._parent?B(this.name,this._parent):[this.name]}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){z(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(e){ve.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1})})}_updateDisabled(e){const t=e.isDisabled.currentValue,n=""===t||t&&"false"!==t;ve.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable()})}}return e.\u0275fac=function(t){return new(t||e)(r.Y36($,9),r.Y36(_,10),r.Y36(w,10),r.Y36(p,10))},e.\u0275dir=r.lG2({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[r._Bn([ye]),r.qOj,r.TTD]}),e})(),we=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.lG2({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),e})(),be=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({}),e})();const Ie=new r.OlP("NgModelWithFormControlWarning"),Ce={provide:$,useExisting:(0,r.Gpc)(()=>Te)};let Te=(()=>{class e extends ${constructor(e,t){super(),this.validators=e,this.asyncValidators=t,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new r.vpe,this._setValidators(e),this._setAsyncValidators(t)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(K(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){const t=this.form.get(e.path);return z(t,e),t.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),t}getControl(e){return this.form.get(e.path)}removeControl(e){H(e.control||null,e,!1),ee(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,t){this.form.get(e.path).setValue(t)}onSubmit(e){return this.submitted=!0,J(this.form,this.directives),this.ngSubmit.emit(e),!1}onReset(){this.resetForm()}resetForm(e){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{const t=e.control,n=this.form.get(e.path);t!==n&&(H(t||null,e),n instanceof he&&(z(n,e),e.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){const t=this.form.get(e.path);Q(t,e),t.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){const t=this.form.get(e.path);t&&function(e,t){return K(e,t)}(t,e)&&t.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){W(this.form,this),this._oldForm&&K(this._oldForm,this)}_checkFormPresent(){}}return e.\u0275fac=function(t){return new(t||e)(r.Y36(_,10),r.Y36(w,10))},e.\u0275dir=r.lG2({type:e,selectors:[["","formGroup",""]],hostBindings:function(e,t){1&e&&r.NdJ("submit",function(e){return t.onSubmit(e)})("reset",function(){return t.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r._Bn([Ce]),r.qOj,r.TTD]}),e})();const Ee={provide:V,useExisting:(0,r.Gpc)(()=>Se)};let Se=(()=>{class e extends V{constructor(e,t,n,i,s){super(),this._ngModelWarningConfig=s,this._added=!1,this.update=new r.vpe,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(t),this._setAsyncValidators(n),this.valueAccessor=Z(0,i)}set isDisabled(e){}ngOnChanges(e){this._added||this._setUpControl(),X(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return B(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return e.\u0275fac=function(t){return new(t||e)(r.Y36($,13),r.Y36(_,10),r.Y36(w,10),r.Y36(p,10),r.Y36(Ie,8))},e.\u0275dir=r.lG2({type:e,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r._Bn([Ee]),r.qOj,r.TTD]}),e._ngModelWarningSentOnce=!1,e})();const ke={provide:_,useExisting:(0,r.Gpc)(()=>Ae),multi:!0};let Ae=(()=>{class e{constructor(){this._validator=T}ngOnChanges(e){"maxlength"in e&&(this._createValidator(),this._onChange&&this._onChange())}validate(e){return null!=this.maxlength?this._validator(e):null}registerOnValidatorChange(e){this._onChange=e}_createValidator(){this._validator=C("number"==typeof this.maxlength?this.maxlength:parseInt(this.maxlength,10))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275dir=r.lG2({type:e,selectors:[["","maxlength","","formControlName",""],["","maxlength","","formControl",""],["","maxlength","","ngModel",""]],hostVars:1,hostBindings:function(e,t){2&e&&r.uIk("maxlength",t.maxlength?t.maxlength:null)},inputs:{maxlength:"maxlength"},features:[r._Bn([ke]),r.TTD]}),e})(),xe=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[[be]]}),e})(),Ne=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[xe]}),e})(),Oe=(()=>{class e{static withConfig(t){return{ngModule:e,providers:[{provide:Ie,useValue:t.warnOnNgModelWithFormControl}]}}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.oAB({type:e}),e.\u0275inj=r.cJS({imports:[xe]}),e})(),Pe=(()=>{class e{group(e,t=null){const n=this._reduceControls(e);let r,i=null,s=null;return null!=t&&(function(e){return void 0!==e.asyncValidators||void 0!==e.validators||void 0!==e.updateOn}(t)?(i=null!=t.validators?t.validators:null,s=null!=t.asyncValidators?t.asyncValidators:null,r=null!=t.updateOn?t.updateOn:void 0):(i=null!=t.validator?t.validator:null,s=null!=t.asyncValidator?t.asyncValidator:null)),new de(n,{asyncValidators:s,updateOn:r,validators:i})}control(e,t,n){return new he(e,t,n)}array(e,t,n){const r=e.map(e=>this._createControl(e));return new pe(r,t,n)}_reduceControls(e){const t={};return Object.keys(e).forEach(n=>{t[n]=this._createControl(e[n])}),t}_createControl(e){return e instanceof he||e instanceof de||e instanceof pe?e:Array.isArray(e)?this.control(e[0],e.length>1?e[1]:null,e.length>2?e[2]:null):this.control(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=(0,r.Yz7)({factory:function(){return new e},token:e,providedIn:Oe}),e})()},1626:(e,t,n)=>{"use strict";n.d(t,{gz:()=>tt,y6:()=>vn,OD:()=>Y,eC:()=>he,wm:()=>Pn,wN:()=>pn,F0:()=>En,rH:()=>Sn,yS:()=>kn,Bz:()=>Un,Hx:()=>Pe});var r=n(6274),i=n(2741),s=n(7204),o=n(9622),a=n(2167),c=n(5500),l=n(6431);const u={};class h{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new d(e,this.resultSelector))}}class d extends a.L{constructor(e,t){super(e),this.resultSelector=t,this.active=0,this.values=[],this.observables=[]}_next(e){this.values.push(u),this.observables.push(e)}_complete(){const e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(let n=0;n<t;n++)this.add((0,c.D)(this,e[n],void 0,n))}}notifyComplete(e){0==(this.active-=1)&&this.destination.complete()}notifyNext(e,t,n){const r=this.values,i=this.toRespond?r[n]===u?--this.toRespond:this.toRespond:0;r[n]=t,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}var p=n(3948),f=n(2850),g=n(3974);function m(e){return new p.y(t=>{let n;try{n=e()}catch(r){return void t.error(r)}return(n?(0,f.D)(n):(0,g.c)()).subscribe(t)})}var y=n(267),v=n(9923),_=n(3066),w=n(8895),b=n(955),I=n(6006),C=n(6790);function T(e){return function(t){const n=new E(e),r=t.lift(n);return n.caught=r}}class E{constructor(e){this.selector=e}call(e,t){return t.subscribe(new S(e,this.selector,this.caught))}}class S extends C.Ds{constructor(e,t,n){super(e),this.selector=t,this.caught=n}error(e){if(!this.isStopped){let n;try{n=this.selector(e,this.caught)}catch(t){return void super.error(t)}this._unsubscribeAndRecycle();const r=new C.IY(this);this.add(r);const i=(0,C.ft)(n,r);i!==r&&this.add(i)}}}var k=n(6513);function A(e,t){return(0,k.zg)(e,t,1)}var x=n(3305),N=n(8744),O=n(9862);function P(e){return function(t){return 0===e?(0,g.c)():t.lift(new R(e))}}class R{constructor(e){if(this.total=e,this.total<0)throw new O.W}call(e,t){return t.subscribe(new D(e,this.total))}}class D extends N.L{constructor(e,t){super(e),this.total=t,this.ring=new Array,this.count=0}_next(e){const t=this.ring,n=this.total,r=this.count++;t.length<n?t.push(e):t[r%n]=e}_complete(){const e=this.destination;let t=this.count;if(t>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=t++%n;e.next(r[i])}}e.complete()}}var L=n(3369),M=n(395),F=n(7846),$=n(8561),V=n(2812),U=n(9917),j=n(3543),q=n(1310),B=n(3987),z=n(6286),H=n(5290),G=n(7813),W=n(4540);class K{constructor(e,t){this.id=e,this.url=t}}class Y extends K{constructor(e,t,n="imperative",r=null){super(e,t),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Q extends K{constructor(e,t,n){super(e,t),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class X extends K{constructor(e,t,n){super(e,t),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class J extends K{constructor(e,t,n){super(e,t),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Z extends K{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ee extends K{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class te extends K{constructor(e,t,n,r,i){super(e,t),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class ne extends K{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class re extends K{constructor(e,t,n,r){super(e,t),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ie{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class se{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class oe{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ae{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ce{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class le{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ue{constructor(e,t,n){this.routerEvent=e,this.position=t,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const he="primary";class de{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function pe(e){return new de(e)}function fe(e){const t=Error("NavigationCancelingError: "+e);return t.ngNavigationCancelingError=!0,t}function ge(e,t,n){const r=n.path.split("/");if(r.length>e.length)return null;if("full"===n.pathMatch&&(t.hasChildren()||r.length<e.length))return null;const i={};for(let s=0;s<r.length;s++){const t=r[s],n=e[s];if(t.startsWith(":"))i[t.substring(1)]=n;else if(t!==n.path)return null}return{consumed:e.slice(0,r.length),posParams:i}}function me(e,t){const n=e?Object.keys(e):void 0,r=t?Object.keys(t):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let s=0;s<n.length;s++)if(i=n[s],!ye(e[i],t[i]))return!1;return!0}function ye(e,t){if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;const n=[...e].sort(),r=[...t].sort();return n.every((e,t)=>r[t]===e)}return e===t}function ve(e){return Array.prototype.concat.apply([],e)}function _e(e){return e.length>0?e[e.length-1]:null}function we(e,t){for(const n in e)e.hasOwnProperty(n)&&t(e[n],n)}function be(e){return(0,i.CqO)(e)?e:(0,i.QGY)(e)?(0,f.D)(Promise.resolve(e)):(0,y.of)(e)}const Ie={exact:function e(t,n,r){if(!Oe(t.segments,n.segments))return!1;if(!ke(t.segments,n.segments,r))return!1;if(t.numberOfChildren!==n.numberOfChildren)return!1;for(const i in n.children){if(!t.children[i])return!1;if(!e(t.children[i],n.children[i],r))return!1}return!0},subset:Ee},Ce={exact:function(e,t){return me(e,t)},subset:function(e,t){return Object.keys(t).length<=Object.keys(e).length&&Object.keys(t).every(n=>ye(e[n],t[n]))},ignored:()=>!0};function Te(e,t,n){return Ie[n.paths](e.root,t.root,n.matrixParams)&&Ce[n.queryParams](e.queryParams,t.queryParams)&&!("exact"===n.fragment&&e.fragment!==t.fragment)}function Ee(e,t,n){return Se(e,t,t.segments,n)}function Se(e,t,n,r){if(e.segments.length>n.length){const i=e.segments.slice(0,n.length);return!!Oe(i,n)&&!t.hasChildren()&&!!ke(i,n,r)}if(e.segments.length===n.length){if(!Oe(e.segments,n))return!1;if(!ke(e.segments,n,r))return!1;for(const n in t.children){if(!e.children[n])return!1;if(!Ee(e.children[n],t.children[n],r))return!1}return!0}{const i=n.slice(0,e.segments.length),s=n.slice(e.segments.length);return!!Oe(e.segments,i)&&!!ke(e.segments,i,r)&&!!e.children[he]&&Se(e.children[he],t,s,r)}}function ke(e,t,n){return t.every((t,r)=>Ce[n](e[r].parameters,t.parameters))}class Ae{constructor(e,t,n){this.root=e,this.queryParams=t,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=pe(this.queryParams)),this._queryParamMap}toString(){return De.serialize(this)}}class xe{constructor(e,t){this.segments=e,this.children=t,this.parent=null,we(t,(e,t)=>e.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Le(this)}}class Ne{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=pe(this.parameters)),this._parameterMap}toString(){return qe(this)}}function Oe(e,t){return e.length===t.length&&e.every((e,n)=>e.path===t[n].path)}class Pe{}class Re{parse(e){const t=new We(e);return new Ae(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){var t;return`/${Me(e.root,!0)}${function(e){const t=Object.keys(e).map(t=>{const n=e[t];return Array.isArray(n)?n.map(e=>`${$e(t)}=${$e(e)}`).join("&"):`${$e(t)}=${$e(n)}`}).filter(e=>!!e);return t.length?`?${t.join("&")}`:""}(e.queryParams)}${"string"==typeof e.fragment?`#${t=e.fragment,encodeURI(t)}`:""}`}}const De=new Re;function Le(e){return e.segments.map(e=>qe(e)).join("/")}function Me(e,t){if(!e.hasChildren())return Le(e);if(t){const t=e.children[he]?Me(e.children[he],!1):"",n=[];return we(e.children,(e,t)=>{t!==he&&n.push(`${t}:${Me(e,!1)}`)}),n.length>0?`${t}(${n.join("//")})`:t}{const t=function(e,t){let n=[];return we(e.children,(e,r)=>{r===he&&(n=n.concat(t(e,r)))}),we(e.children,(e,r)=>{r!==he&&(n=n.concat(t(e,r)))}),n}(e,(t,n)=>n===he?[Me(e.children[he],!1)]:[`${n}:${Me(t,!1)}`]);return 1===Object.keys(e.children).length&&null!=e.children[he]?`${Le(e)}/${t[0]}`:`${Le(e)}/(${t.join("//")})`}}function Fe(e){return encodeURIComponent(e).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $e(e){return Fe(e).replace(/%3B/gi,";")}function Ve(e){return Fe(e).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ue(e){return decodeURIComponent(e)}function je(e){return Ue(e.replace(/\+/g,"%20"))}function qe(e){return`${Ve(e.path)}${t=e.parameters,Object.keys(t).map(e=>`;${Ve(e)}=${Ve(t[e])}`).join("")}`;var t}const Be=/^[^\/()?;=#]+/;function ze(e){const t=e.match(Be);return t?t[0]:""}const He=/^[^=?&#]+/,Ge=/^[^?&#]+/;class We{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new xe([],{}):new xe([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(n[he]=new xe(e,t)),n}parseSegment(){const e=ze(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Ne(Ue(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=ze(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=ze(this.remaining);e&&(n=e,this.capture(n))}e[Ue(t)]=Ue(n)}parseQueryParam(e){const t=function(e){const t=e.match(He);return t?t[0]:""}(this.remaining);if(!t)return;this.capture(t);let n="";if(this.consumeOptional("=")){const e=function(e){const t=e.match(Ge);return t?t[0]:""}(this.remaining);e&&(n=e,this.capture(n))}const r=je(t),i=je(n);if(e.hasOwnProperty(r)){let t=e[r];Array.isArray(t)||(t=[t],e[r]=t),t.push(i)}else e[r]=i}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=ze(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=he);const s=this.parseChildren();t[i]=1===Object.keys(s).length?s[he]:new xe([],s),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class Ke{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Ye(e,this._root);return t?t.children.map(e=>e.value):[]}firstChild(e){const t=Ye(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Qe(e,this._root);return t.length<2?[]:t[t.length-2].children.map(e=>e.value).filter(t=>t!==e)}pathFromRoot(e){return Qe(e,this._root).map(e=>e.value)}}function Ye(e,t){if(e===t.value)return t;for(const n of t.children){const t=Ye(e,n);if(t)return t}return null}function Qe(e,t){if(e===t.value)return[t];for(const n of t.children){const r=Qe(e,n);if(r.length)return r.unshift(t),r}return[]}class Xe{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Je(e){const t={};return e&&e.children.forEach(e=>t[e.value.outlet]=e),t}class Ze extends Ke{constructor(e,t){super(e),this.snapshot=t,st(this,e)}toString(){return this.snapshot.toString()}}function et(e,t){const n=function(e,t){const n=new rt([],{},{},"",{},he,t,null,e.root,-1,{});return new it("",new Xe(n,[]))}(e,t),r=new v.X([new Ne("",{})]),i=new v.X({}),s=new v.X({}),o=new v.X({}),a=new v.X(""),c=new tt(r,i,o,a,s,he,t,n.root);return c.snapshot=n.root,new Ze(new Xe(c,[]),n)}class tt{constructor(e,t,n,r,i,s,o,a){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,$.U)(e=>pe(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,$.U)(e=>pe(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function nt(e,t="emptyOnly"){const n=e.pathFromRoot;let r=0;if("always"!==t)for(r=n.length-1;r>=1;){const e=n[r],t=n[r-1];if(e.routeConfig&&""===e.routeConfig.path)r--;else{if(t.component)break;r--}}return function(e){return e.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class rt{constructor(e,t,n,r,i,s,o,a,c,l,u){this.url=e,this.params=t,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=s,this.component=o,this.routeConfig=a,this._urlSegment=c,this._lastPathIndex=l,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=pe(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=pe(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(e=>e.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class it extends Ke{constructor(e,t){super(t),this.url=e,st(this,t)}toString(){return ot(this._root)}}function st(e,t){t.value._routerState=e,t.children.forEach(t=>st(e,t))}function ot(e){const t=e.children.length>0?` { ${e.children.map(ot).join(", ")} } `:"";return`${e.value}${t}`}function at(e){if(e.snapshot){const t=e.snapshot,n=e._futureSnapshot;e.snapshot=n,me(t.queryParams,n.queryParams)||e.queryParams.next(n.queryParams),t.fragment!==n.fragment&&e.fragment.next(n.fragment),me(t.params,n.params)||e.params.next(n.params),function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(!me(e[n],t[n]))return!1;return!0}(t.url,n.url)||e.url.next(n.url),me(t.data,n.data)||e.data.next(n.data)}else e.snapshot=e._futureSnapshot,e.data.next(e._futureSnapshot.data)}function ct(e,t){var n,r;return me(e.params,t.params)&&Oe(n=e.url,r=t.url)&&n.every((e,t)=>me(e.parameters,r[t].parameters))&&!(!e.parent!=!t.parent)&&(!e.parent||ct(e.parent,t.parent))}function lt(e,t,n){if(n&&e.shouldReuseRoute(t.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=t.value;const i=function(e,t,n){return t.children.map(t=>{for(const r of n.children)if(e.shouldReuseRoute(t.value,r.value.snapshot))return lt(e,t,r);return lt(e,t)})}(e,t,n);return new Xe(r,i)}{if(e.shouldAttach(t.value)){const n=e.retrieve(t.value);if(null!==n){const e=n.route;return ut(t,e),e}}const n=new tt(new v.X((r=t.value).url),new v.X(r.params),new v.X(r.queryParams),new v.X(r.fragment),new v.X(r.data),r.outlet,r.component,r),i=t.children.map(t=>lt(e,t));return new Xe(n,i)}var r}function ut(e,t){if(e.value.routeConfig!==t.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(e.children.length!==t.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");t.value._futureSnapshot=e.value;for(let n=0;n<e.children.length;++n)ut(e.children[n],t.children[n])}function ht(e){return"object"==typeof e&&null!=e&&!e.outlets&&!e.segmentPath}function dt(e){return"object"==typeof e&&null!=e&&e.outlets}function pt(e,t,n,r,i){let s={};return r&&we(r,(e,t)=>{s[t]=Array.isArray(e)?e.map(e=>`${e}`):`${e}`}),new Ae(n.root===e?t:ft(n.root,e,t),s,i)}function ft(e,t,n){const r={};return we(e.children,(e,i)=>{r[i]=e===t?n:ft(e,t,n)}),new xe(e.segments,r)}class gt{constructor(e,t,n){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=n,e&&n.length>0&&ht(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(dt);if(r&&r!==_e(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class mt{constructor(e,t,n){this.segmentGroup=e,this.processChildren=t,this.index=n}}function yt(e,t,n){if(e||(e=new xe([],{})),0===e.segments.length&&e.hasChildren())return vt(e,t,n);const r=function(e,t,n){let r=0,i=t;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<e.segments.length;){if(r>=n.length)return s;const t=e.segments[i],o=n[r];if(dt(o))break;const a=`${o}`,c=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&c&&"object"==typeof c&&void 0===c.outlets){if(!It(a,c,t))return s;r+=2}else{if(!It(a,{},t))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(e,t,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<e.segments.length){const t=new xe(e.segments.slice(0,r.pathIndex),{});return t.children[he]=new xe(e.segments.slice(r.pathIndex),e.children),vt(t,0,i)}return r.match&&0===i.length?new xe(e.segments,{}):r.match&&!e.hasChildren()?_t(e,t,n):r.match?vt(e,0,i):_t(e,t,n)}function vt(e,t,n){if(0===n.length)return new xe(e.segments,{});{const r=function(e){return dt(e[0])?e[0].outlets:{[he]:e}}(n),i={};return we(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=yt(e.children[r],t,n))}),we(e.children,(e,t)=>{void 0===r[t]&&(i[t]=e)}),new xe(e.segments,i)}}function _t(e,t,n){const r=e.segments.slice(0,t);let i=0;for(;i<n.length;){const s=n[i];if(dt(s)){const e=wt(s.outlets);return new xe(r,e)}if(0===i&&ht(n[0])){r.push(new Ne(e.segments[t].path,bt(n[0]))),i++;continue}const o=dt(s)?s.outlets[he]:`${s}`,a=i<n.length-1?n[i+1]:null;o&&a&&ht(a)?(r.push(new Ne(o,bt(a))),i+=2):(r.push(new Ne(o,{})),i++)}return new xe(r,{})}function wt(e){const t={};return we(e,(e,n)=>{"string"==typeof e&&(e=[e]),null!==e&&(t[n]=_t(new xe([],{}),0,e))}),t}function bt(e){const t={};return we(e,(e,n)=>t[n]=`${e}`),t}function It(e,t,n){return e==n.path&&me(t,n.parameters)}class Ct{constructor(e,t,n,r){this.routeReuseStrategy=e,this.futureState=t,this.currState=n,this.forwardEvent=r}activate(e){const t=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,n,e),at(this.futureState.root),this.activateChildRoutes(t,n,e)}deactivateChildRoutes(e,t,n){const r=Je(t);e.children.forEach(e=>{const t=e.value.outlet;this.deactivateRoutes(e,r[t],n),delete r[t]}),we(r,(e,t)=>{this.deactivateRouteAndItsChildren(e,n)})}deactivateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(e,t,i.children)}else this.deactivateChildRoutes(e,t,n);else i&&this.deactivateRouteAndItsChildren(t,n)}deactivateRouteAndItsChildren(e,t){this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const n=t.getContext(e.value.outlet);if(n&&n.outlet){const t=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:t,route:e,contexts:r})}}deactivateRouteAndOutlet(e,t){const n=t.getContext(e.value.outlet),r=n&&e.value.component?n.children:t,i=Je(e);for(const s of Object.keys(i))this.deactivateRouteAndItsChildren(i[s],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(e,t,n){const r=Je(t);e.children.forEach(e=>{this.activateRoutes(e,r[e.value.outlet],n),this.forwardEvent(new le(e.value.snapshot))}),e.children.length&&this.forwardEvent(new ae(e.value.snapshot))}activateRoutes(e,t,n){const r=e.value,i=t?t.value:null;if(at(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,i.children)}else this.activateChildRoutes(e,t,n);else if(r.component){const t=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const e=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),t.children.onOutletReAttached(e.contexts),t.attachRef=e.componentRef,t.route=e.route.value,t.outlet&&t.outlet.attach(e.componentRef,e.route.value),Tt(e.route)}else{const n=function(e){for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig;if(e&&e.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;t.attachRef=null,t.route=r,t.resolver=i,t.outlet&&t.outlet.activateWith(r,i),this.activateChildRoutes(e,null,t.children)}}else this.activateChildRoutes(e,null,n)}}function Tt(e){at(e.value),e.children.forEach(Tt)}class Et{constructor(e,t){this.routes=e,this.module=t}}function St(e){return"function"==typeof e}function kt(e){return e instanceof Ae}const At=Symbol("INITIAL_VALUE");function xt(){return(0,V.w)(e=>function(...e){let t,n;return(0,s.K)(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&(0,o.k)(e[0])&&(e=e[0]),(0,l.n)(e,n).lift(new h(t))}(e.map(e=>e.pipe((0,U.q)(1),(0,j.O)(At)))).pipe((0,q.R)((e,t)=>{let n=!1;return t.reduce((e,r,i)=>{if(e!==At)return e;if(r===At&&(n=!0),!n){if(!1===r)return r;if(i===t.length-1||kt(r))return r}return e},e)},At),(0,x.h)(e=>e!==At),(0,$.U)(e=>kt(e)?e:!0===e),(0,U.q)(1)))}let Nt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Xpm({type:e,selectors:[["ng-component"]],decls:1,vars:0,template:function(e,t){1&e&&i._UZ(0,"router-outlet")},directives:function(){return[xn]},encapsulation:2}),e})();function Ot(e,t=""){for(let n=0;n<e.length;n++){const r=e[n];Pt(r,Rt(t,r))}}function Pt(e,t){e.children&&Ot(e.children,t)}function Rt(e,t){return t?e||t.path?e&&!t.path?`${e}/`:!e&&t.path?t.path:`${e}/${t.path}`:"":e}function Dt(e){const t=e.children&&e.children.map(Dt),n=t?Object.assign(Object.assign({},e),{children:t}):Object.assign({},e);return!n.component&&(t||n.loadChildren)&&n.outlet&&n.outlet!==he&&(n.component=Nt),n}function Lt(e){return e.outlet||he}function Mt(e,t){const n=e.filter(e=>Lt(e)===t);return n.push(...e.filter(e=>Lt(e)!==t)),n}const Ft={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function $t(e,t,n){var r;if(""===t.path)return"full"===t.pathMatch&&(e.hasChildren()||n.length>0)?Object.assign({},Ft):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(t.matcher||ge)(n,e,t);if(!i)return Object.assign({},Ft);const s={};we(i.posParams,(e,t)=>{s[t]=e.path});const o=i.consumed.length>0?Object.assign(Object.assign({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:o,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function Vt(e,t,n,r,i="corrected"){if(n.length>0&&function(e,t,n){return n.some(n=>Ut(e,t,n)&&Lt(n)!==he)}(e,n,r)){const i=new xe(t,function(e,t,n,r){const i={};i[he]=r,r._sourceSegment=e,r._segmentIndexShift=t.length;for(const s of n)if(""===s.path&&Lt(s)!==he){const n=new xe([],{});n._sourceSegment=e,n._segmentIndexShift=t.length,i[Lt(s)]=n}return i}(e,t,r,new xe(n,e.children)));return i._sourceSegment=e,i._segmentIndexShift=t.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(e,t,n){return n.some(n=>Ut(e,t,n))}(e,n,r)){const s=new xe(e.segments,function(e,t,n,r,i,s){const o={};for(const a of r)if(Ut(e,n,a)&&!i[Lt(a)]){const n=new xe([],{});n._sourceSegment=e,n._segmentIndexShift="legacy"===s?e.segments.length:t.length,o[Lt(a)]=n}return Object.assign(Object.assign({},i),o)}(e,t,n,r,e.children,i));return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}const s=new xe(e.segments,e.children);return s._sourceSegment=e,s._segmentIndexShift=t.length,{segmentGroup:s,slicedSegments:n}}function Ut(e,t,n){return(!(e.hasChildren()||t.length>0)||"full"!==n.pathMatch)&&""===n.path}function jt(e,t,n,r){return!!(Lt(e)===r||r!==he&&Ut(t,n,e))&&("**"===e.path||$t(t,e,n).matched)}function qt(e,t,n){return 0===t.length&&!e.children[n]}class Bt{constructor(e){this.segmentGroup=e||null}}class zt{constructor(e){this.urlTree=e}}function Ht(e){return new p.y(t=>t.error(new Bt(e)))}function Gt(e){return new p.y(t=>t.error(new zt(e)))}function Wt(e){return new p.y(t=>t.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${e}'`)))}class Kt{constructor(e,t,n,r,s){this.configLoader=t,this.urlSerializer=n,this.urlTree=r,this.config=s,this.allowRedirects=!0,this.ngModule=e.get(i.h0i)}apply(){const e=Vt(this.urlTree.root,[],[],this.config).segmentGroup,t=new xe(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,he).pipe((0,$.U)(e=>this.createUrlTree(Yt(e),this.urlTree.queryParams,this.urlTree.fragment))).pipe(T(e=>{if(e instanceof zt)return this.allowRedirects=!1,this.match(e.urlTree);if(e instanceof Bt)throw this.noMatchError(e);throw e}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,he).pipe((0,$.U)(t=>this.createUrlTree(Yt(t),e.queryParams,e.fragment))).pipe(T(e=>{if(e instanceof Bt)throw this.noMatchError(e);throw e}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,n){const r=e.segments.length>0?new xe([],{[he]:e}):e;return new Ae(r,t,n)}expandSegmentGroup(e,t,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(e,t,n).pipe((0,$.U)(e=>new xe([],e))):this.expandSegment(e,n,t,n.segments,r,!0)}expandChildren(e,t,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return(0,f.D)(r).pipe(A(r=>{const i=n.children[r],s=Mt(t,r);return this.expandSegmentGroup(e,s,i,r).pipe((0,$.U)(e=>({segment:e,outlet:r})))}),(0,q.R)((e,t)=>(e[t.outlet]=t.segment,e),{}),function(e,t){const n=arguments.length>=2;return r=>r.pipe(e?(0,x.h)((t,n)=>e(t,n,r)):F.y,P(1),n?(0,M.d)(t):(0,L.T)(()=>new _.K))}())}expandSegment(e,t,n,r,i,s){return(0,f.D)(n).pipe(A(o=>this.expandSegmentAgainstRoute(e,t,n,o,r,i,s).pipe(T(e=>{if(e instanceof Bt)return(0,y.of)(null);throw e}))),(0,B.P)(e=>!!e),T((e,n)=>{if(e instanceof _.K||"EmptyError"===e.name){if(qt(t,r,i))return(0,y.of)(new xe([],{}));throw new Bt(t)}throw e}))}expandSegmentAgainstRoute(e,t,n,r,i,s,o){return jt(r,t,i,s)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(e,t,r,i,s):o&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s):Ht(t):Ht(t)}expandSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,n,r,s):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Gt(i):this.lineralizeSegments(n,i).pipe((0,k.zg)(n=>{const i=new xe(n,{});return this.expandSegment(e,i,t,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,n,r,i,s){const{matched:o,consumedSegments:a,lastChild:c,positionalParamSegments:l}=$t(t,r,i);if(!o)return Ht(t);const u=this.applyRedirectCommands(a,r.redirectTo,l);return r.redirectTo.startsWith("/")?Gt(u):this.lineralizeSegments(r,u).pipe((0,k.zg)(r=>this.expandSegment(e,t,n,r.concat(i.slice(c)),s,!1)))}matchSegmentAgainstRoute(e,t,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?(0,y.of)(n._loadedConfig):this.configLoader.load(e.injector,n)).pipe((0,$.U)(e=>(n._loadedConfig=e,new xe(r,{})))):(0,y.of)(new xe(r,{}));const{matched:s,consumedSegments:o,lastChild:a}=$t(t,n,r);if(!s)return Ht(t);const c=r.slice(a);return this.getChildConfig(e,n,r).pipe((0,k.zg)(e=>{const r=e.module,s=e.routes,{segmentGroup:a,slicedSegments:l}=Vt(t,o,c,s),u=new xe(a.segments,a.children);if(0===l.length&&u.hasChildren())return this.expandChildren(r,s,u).pipe((0,$.U)(e=>new xe(o,e)));if(0===s.length&&0===l.length)return(0,y.of)(new xe(o,{}));const h=Lt(n)===i;return this.expandSegment(r,u,s,l,h?he:i,!0).pipe((0,$.U)(e=>new xe(o.concat(e.segments),e.children)))}))}getChildConfig(e,t,n){return t.children?(0,y.of)(new Et(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?(0,y.of)(t._loadedConfig):this.runCanLoadGuards(e.injector,t,n).pipe((0,k.zg)(n=>n?this.configLoader.load(e.injector,t).pipe((0,$.U)(e=>(t._loadedConfig=e,e))):function(e){return new p.y(t=>t.error(fe(`Cannot load children because the guard of the route "path: '${e.path}'" returned false`)))}(t))):(0,y.of)(new Et([],e))}runCanLoadGuards(e,t,n){const r=t.canLoad;if(!r||0===r.length)return(0,y.of)(!0);const i=r.map(r=>{const i=e.get(r);let s;if(function(e){return e&&St(e.canLoad)}(i))s=i.canLoad(t,n);else{if(!St(i))throw new Error("Invalid CanLoad guard");s=i(t,n)}return be(s)});return(0,y.of)(i).pipe(xt(),(0,z.b)(e=>{if(!kt(e))return;const t=fe(`Redirecting to "${this.urlSerializer.serialize(e)}"`);throw t.url=e,t}),(0,$.U)(e=>!0===e))}lineralizeSegments(e,t){let n=[],r=t.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return(0,y.of)(n);if(r.numberOfChildren>1||!r.children[he])return Wt(e.redirectTo);r=r.children[he]}}applyRedirectCommands(e,t,n){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,n)}applyRedirectCreatreUrlTree(e,t,n,r){const i=this.createSegmentGroup(e,t.root,n,r);return new Ae(i,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const n={};return we(e,(e,r)=>{if("string"==typeof e&&e.startsWith(":")){const i=e.substring(1);n[r]=t[i]}else n[r]=e}),n}createSegmentGroup(e,t,n,r){const i=this.createSegments(e,t.segments,n,r);let s={};return we(t.children,(t,i)=>{s[i]=this.createSegmentGroup(e,t,n,r)}),new xe(i,s)}createSegments(e,t,n,r){return t.map(t=>t.path.startsWith(":")?this.findPosParam(e,t,r):this.findOrReturn(t,n))}findPosParam(e,t,n){const r=n[t.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return r}findOrReturn(e,t){let n=0;for(const r of t){if(r.path===e.path)return t.splice(n),r;n++}return e}}function Yt(e){const t={};for(const n of Object.keys(e.children)){const r=Yt(e.children[n]);(r.segments.length>0||r.hasChildren())&&(t[n]=r)}return function(e){if(1===e.numberOfChildren&&e.children[he]){const t=e.children[he];return new xe(e.segments.concat(t.segments),t.children)}return e}(new xe(e.segments,t))}class Qt{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Xt{constructor(e,t){this.component=e,this.route=t}}function Jt(e,t,n){const r=e._root;return en(r,t?t._root:null,n,[r.value])}function Zt(e,t,n){const r=function(e){if(!e)return null;for(let t=e.parent;t;t=t.parent){const e=t.routeConfig;if(e&&e._loadedConfig)return e._loadedConfig}return null}(t);return(r?r.module.injector:n).get(e)}function en(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=Je(t);return e.children.forEach(e=>{!function(e,t,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=e.value,o=t?t.value:null,a=n?n.getContext(e.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){const c=function(e,t,n){if("function"==typeof n)return n(e,t);switch(n){case"pathParamsChange":return!Oe(e.url,t.url);case"pathParamsOrQueryParamsChange":return!Oe(e.url,t.url)||!me(e.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ct(e,t)||!me(e.queryParams,t.queryParams);case"paramsChange":default:return!ct(e,t)}}(o,s,s.routeConfig.runGuardsAndResolvers);c?i.canActivateChecks.push(new Qt(r)):(s.data=o.data,s._resolvedData=o._resolvedData),en(e,t,s.component?a?a.children:null:n,r,i),c&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Xt(a.outlet.component,o))}else o&&tn(t,a,i),i.canActivateChecks.push(new Qt(r)),en(e,null,s.component?a?a.children:null:n,r,i)}(e,s[e.value.outlet],n,r.concat([e.value]),i),delete s[e.value.outlet]}),we(s,(e,t)=>tn(e,n.getContext(t),i)),i}function tn(e,t,n){const r=Je(e),i=e.value;we(r,(e,r)=>{tn(e,i.component?t?t.children.getContext(r):null:t,n)}),n.canDeactivateChecks.push(new Xt(i.component&&t&&t.outlet&&t.outlet.isActivated?t.outlet.component:null,i))}class nn{}function rn(e){return new p.y(t=>t.error(e))}class sn{constructor(e,t,n,r,i,s){this.rootComponentType=e,this.config=t,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=s}recognize(){const e=Vt(this.urlTree.root,[],[],this.config.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,he);if(null===t)return null;const n=new rt([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},he,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Xe(n,t),i=new it(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(e){const t=e.value,n=nt(t,this.paramsInheritanceStrategy);t.params=Object.freeze(n.params),t.data=Object.freeze(n.data),e.children.forEach(e=>this.inheritParamsAndData(e))}processSegmentGroup(e,t,n){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,n)}processChildren(e,t){const n=[];for(const i of Object.keys(t.children)){const r=t.children[i],s=Mt(e,i),o=this.processSegmentGroup(s,r,i);if(null===o)return null;n.push(...o)}const r=an(n);return r.sort((e,t)=>e.value.outlet===he?-1:t.value.outlet===he?1:e.value.outlet.localeCompare(t.value.outlet)),r}processSegment(e,t,n,r){for(const i of e){const e=this.processSegmentAgainstRoute(i,t,n,r);if(null!==e)return e}return qt(t,n,r)?[]:null}processSegmentAgainstRoute(e,t,n,r){if(e.redirectTo||!jt(e,t,n,r))return null;let i,s=[],o=[];if("**"===e.path){const r=n.length>0?_e(n).parameters:{};i=new rt(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,un(e),Lt(e),e.component,e,cn(t),ln(t)+n.length,hn(e))}else{const r=$t(t,e,n);if(!r.matched)return null;s=r.consumedSegments,o=n.slice(r.lastChild),i=new rt(s,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,un(e),Lt(e),e.component,e,cn(t),ln(t)+s.length,hn(e))}const a=function(e){return e.children?e.children:e.loadChildren?e._loadedConfig.routes:[]}(e),{segmentGroup:c,slicedSegments:l}=Vt(t,s,o,a.filter(e=>void 0===e.redirectTo),this.relativeLinkResolution);if(0===l.length&&c.hasChildren()){const e=this.processChildren(a,c);return null===e?null:[new Xe(i,e)]}if(0===a.length&&0===l.length)return[new Xe(i,[])];const u=Lt(e)===r,h=this.processSegment(a,c,l,u?he:r);return null===h?null:[new Xe(i,h)]}}function on(e){const t=e.value.routeConfig;return t&&""===t.path&&void 0===t.redirectTo}function an(e){const t=[],n=new Set;for(const r of e){if(!on(r)){t.push(r);continue}const e=t.find(e=>r.value.routeConfig===e.value.routeConfig);void 0!==e?(e.children.push(...r.children),n.add(e)):t.push(r)}for(const r of n){const e=an(r.children);t.push(new Xe(r.value,e))}return t.filter(e=>!n.has(e))}function cn(e){let t=e;for(;t._sourceSegment;)t=t._sourceSegment;return t}function ln(e){let t=e,n=t._segmentIndexShift?t._segmentIndexShift:0;for(;t._sourceSegment;)t=t._sourceSegment,n+=t._segmentIndexShift?t._segmentIndexShift:0;return n-1}function un(e){return e.data||{}}function hn(e){return e.resolve||{}}function dn(e){return(0,V.w)(t=>{const n=e(t);return n?(0,f.D)(n).pipe((0,$.U)(()=>t)):(0,y.of)(t)})}class pn{}class fn extends class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const gn=new i.OlP("ROUTES");class mn{constructor(e,t,n,r){this.loader=e,this.compiler=t,this.onLoadStartListener=n,this.onLoadEndListener=r}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const n=this.loadModuleFactory(t.loadChildren).pipe((0,$.U)(n=>{this.onLoadEndListener&&this.onLoadEndListener(t);const r=n.create(e);return new Et(ve(r.injector.get(gn,void 0,i.XFs.Self|i.XFs.Optional)).map(Dt),r)}),T(e=>{throw t._loader$=void 0,e}));return t._loader$=new b.c(n,()=>new I.xQ).pipe((0,H.x)()),t._loader$}loadModuleFactory(e){return"string"==typeof e?(0,f.D)(this.loader.load(e)):be(e()).pipe((0,k.zg)(e=>e instanceof i.YKP?(0,y.of)(e):(0,f.D)(this.compiler.compileModuleAsync(e))))}}class yn{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new vn,this.attachRef=null}}class vn{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const n=this.getOrCreateContext(e);n.outlet=t,this.contexts.set(e,n)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new yn,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}class _n{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function wn(e){throw e}function bn(e,t,n){return t.parse("/")}function In(e,t){return(0,y.of)(null)}const Cn={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Tn={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let En=(()=>{class e{constructor(e,t,n,r,s,o,a,c){this.rootComponentType=e,this.urlSerializer=t,this.rootContexts=n,this.location=r,this.config=c,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new I.xQ,this.errorHandler=wn,this.malformedUriErrorHandler=bn,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:In,afterPreactivation:In},this.urlHandlingStrategy=new _n,this.routeReuseStrategy=new fn,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=s.get(i.h0i),this.console=s.get(i.c2e);const l=s.get(i.R0b);this.isNgZoneEnabled=l instanceof i.R0b&&i.R0b.isInAngularZone(),this.resetConfig(c),this.currentUrlTree=new Ae(new xe([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new mn(o,a,e=>this.triggerEvent(new ie(e)),e=>this.triggerEvent(new se(e))),this.routerState=et(this.currentUrlTree,this.rootComponentType),this.transitions=new v.X({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var e;return null===(e=this.location.getState())||void 0===e?void 0:e.\u0275routerPageId}setupNavigations(e){const t=this.events;return e.pipe((0,x.h)(e=>0!==e.id),(0,$.U)(e=>Object.assign(Object.assign({},e),{extractedUrl:this.urlHandlingStrategy.extract(e.rawUrl)})),(0,V.w)(e=>{let n=!1,r=!1;return(0,y.of)(e).pipe((0,z.b)(e=>{this.currentNavigation={id:e.id,initialUrl:e.currentRawUrl,extractedUrl:e.extractedUrl,trigger:e.source,extras:e.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,V.w)(e=>{const n=!this.navigated||e.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(e.rawUrl))return(0,y.of)(e).pipe((0,V.w)(e=>{const n=this.transitions.getValue();return t.next(new Y(e.id,this.serializeUrl(e.extractedUrl),e.source,e.restoredState)),n!==this.transitions.getValue()?g.E:Promise.resolve(e)}),(r=this.ngModule.injector,i=this.configLoader,s=this.urlSerializer,o=this.config,(0,V.w)(e=>function(e,t,n,r,i){return new Kt(e,t,n,r,i).apply()}(r,i,s,e.extractedUrl,o).pipe((0,$.U)(t=>Object.assign(Object.assign({},e),{urlAfterRedirects:t}))))),(0,z.b)(e=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:e.urlAfterRedirects})}),function(e,t,n,r,i){return(0,k.zg)(s=>function(e,t,n,r,i="emptyOnly",s="legacy"){try{const o=new sn(e,t,n,r,i,s).recognize();return null===o?rn(new nn):(0,y.of)(o)}catch(o){return rn(o)}}(e,t,s.urlAfterRedirects,n(s.urlAfterRedirects),r,i).pipe((0,$.U)(e=>Object.assign(Object.assign({},s),{targetSnapshot:e}))))}(this.rootComponentType,this.config,e=>this.serializeUrl(e),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,z.b)(e=>{"eager"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(e.urlAfterRedirects,e),this.browserUrlTree=e.urlAfterRedirects);const n=new Z(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);t.next(n)}));var r,i,s,o;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:s,extras:o}=e,a=new Y(n,this.serializeUrl(r),i,s);t.next(a);const c=et(r,this.rootComponentType).snapshot;return(0,y.of)(Object.assign(Object.assign({},e),{targetSnapshot:c,urlAfterRedirects:r,extras:Object.assign(Object.assign({},o),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=e.rawUrl,this.browserUrlTree=e.urlAfterRedirects,e.resolve(null),g.E}),dn(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=e;return this.hooks.beforePreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,z.b)(e=>{const t=new ee(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),(0,$.U)(e=>Object.assign(Object.assign({},e),{guards:Jt(e.targetSnapshot,e.currentSnapshot,this.rootContexts)})),function(e,t){return(0,k.zg)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=n;return 0===o.length&&0===s.length?(0,y.of)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(e,t,n,r){return(0,f.D)(e).pipe((0,k.zg)(e=>function(e,t,n,r,i){const s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||0===s.length)return(0,y.of)(!0);const o=s.map(s=>{const o=Zt(s,t,i);let a;if(function(e){return e&&St(e.canDeactivate)}(o))a=be(o.canDeactivate(e,t,n,r));else{if(!St(o))throw new Error("Invalid CanDeactivate guard");a=be(o(e,t,n,r))}return a.pipe((0,B.P)())});return(0,y.of)(o).pipe(xt())}(e.component,e.route,n,t,r)),(0,B.P)(e=>!0!==e,!0))}(o,r,i,e).pipe((0,k.zg)(n=>n&&"boolean"==typeof n?function(e,t,n,r){return(0,f.D)(t).pipe(A(t=>(0,w.z)(function(e,t){return null!==e&&t&&t(new oe(e)),(0,y.of)(!0)}(t.route.parent,r),function(e,t){return null!==e&&t&&t(new ce(e)),(0,y.of)(!0)}(t.route,r),function(e,t,n){const r=t[t.length-1],i=t.slice(0,t.length-1).reverse().map(e=>function(e){const t=e.routeConfig?e.routeConfig.canActivateChild:null;return t&&0!==t.length?{node:e,guards:t}:null}(e)).filter(e=>null!==e).map(t=>m(()=>{const i=t.guards.map(i=>{const s=Zt(i,t.node,n);let o;if(function(e){return e&&St(e.canActivateChild)}(s))o=be(s.canActivateChild(r,e));else{if(!St(s))throw new Error("Invalid CanActivateChild guard");o=be(s(r,e))}return o.pipe((0,B.P)())});return(0,y.of)(i).pipe(xt())}));return(0,y.of)(i).pipe(xt())}(e,t.path,n),function(e,t,n){const r=t.routeConfig?t.routeConfig.canActivate:null;if(!r||0===r.length)return(0,y.of)(!0);const i=r.map(r=>m(()=>{const i=Zt(r,t,n);let s;if(function(e){return e&&St(e.canActivate)}(i))s=be(i.canActivate(t,e));else{if(!St(i))throw new Error("Invalid CanActivate guard");s=be(i(t,e))}return s.pipe((0,B.P)())}));return(0,y.of)(i).pipe(xt())}(e,t.route,n))),(0,B.P)(e=>!0!==e,!0))}(r,s,e,t):(0,y.of)(n)),(0,$.U)(e=>Object.assign(Object.assign({},n),{guardsResult:e})))})}(this.ngModule.injector,e=>this.triggerEvent(e)),(0,z.b)(e=>{if(kt(e.guardsResult)){const t=fe(`Redirecting to "${this.serializeUrl(e.guardsResult)}"`);throw t.url=e.guardsResult,t}const t=new te(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot,!!e.guardsResult);this.triggerEvent(t)}),(0,x.h)(e=>!!e.guardsResult||(this.restoreHistory(e),this.cancelNavigationTransition(e,""),!1)),dn(e=>{if(e.guards.canActivateChecks.length)return(0,y.of)(e).pipe((0,z.b)(e=>{const t=new ne(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}),(0,V.w)(e=>{let t=!1;return(0,y.of)(e).pipe((n=this.paramsInheritanceStrategy,r=this.ngModule.injector,(0,k.zg)(e=>{const{targetSnapshot:t,guards:{canActivateChecks:i}}=e;if(!i.length)return(0,y.of)(e);let s=0;return(0,f.D)(i).pipe(A(e=>function(e,t,n,r){return function(e,t,n,r){const i=Object.keys(e);if(0===i.length)return(0,y.of)({});const s={};return(0,f.D)(i).pipe((0,k.zg)(i=>function(e,t,n,r){const i=Zt(e,t,r);return be(i.resolve?i.resolve(t,n):i(t,n))}(e[i],t,n,r).pipe((0,z.b)(e=>{s[i]=e}))),P(1),(0,k.zg)(()=>Object.keys(s).length===i.length?(0,y.of)(s):g.E))}(e._resolve,e,t,r).pipe((0,$.U)(t=>(e._resolvedData=t,e.data=Object.assign(Object.assign({},e.data),nt(e,n).resolve),null)))}(e.route,t,n,r)),(0,z.b)(()=>s++),P(1),(0,k.zg)(t=>s===i.length?(0,y.of)(e):g.E))})),(0,z.b)({next:()=>t=!0,complete:()=>{t||(this.restoreHistory(e),this.cancelNavigationTransition(e,"At least one route resolver didn't emit any value."))}}));var n,r}),(0,z.b)(e=>{const t=new re(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(e.urlAfterRedirects),e.targetSnapshot);this.triggerEvent(t)}))}),dn(e=>{const{targetSnapshot:t,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:s,replaceUrl:o}}=e;return this.hooks.afterPreactivation(t,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!s,replaceUrl:!!o})}),(0,$.U)(e=>{const t=function(e,t,n){const r=lt(e,t._root,n?n._root:void 0);return new Ze(r,t)}(this.routeReuseStrategy,e.targetSnapshot,e.currentRouterState);return Object.assign(Object.assign({},e),{targetRouterState:t})}),(0,z.b)(e=>{this.currentUrlTree=e.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl),this.routerState=e.targetRouterState,"deferred"===this.urlUpdateStrategy&&(e.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,e),this.browserUrlTree=e.urlAfterRedirects)}),(i=this.rootContexts,s=this.routeReuseStrategy,o=e=>this.triggerEvent(e),(0,$.U)(e=>(new Ct(s,e.targetRouterState,e.currentRouterState,o).activate(i),e))),(0,z.b)({next(){n=!0},complete(){n=!0}}),(0,G.x)(()=>{if(!n&&!r){const t=`Navigation ID ${e.id} is not equal to the current navigation id ${this.navigationId}`;"replace"===this.canceledNavigationResolution?(this.restoreHistory(e),this.cancelNavigationTransition(e,t)):this.cancelNavigationTransition(e,t)}this.currentNavigation=null}),T(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=kt(n.url);r||(this.navigated=!0,this.restoreHistory(e,!0));const i=new X(e.id,this.serializeUrl(e.extractedUrl),n.message);t.next(i),r?setTimeout(()=>{const t=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(t,"imperative",null,{skipLocationChange:e.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:e.resolve,reject:e.reject,promise:e.promise})},0):e.resolve(!1)}else{this.restoreHistory(e,!0);const r=new J(e.id,this.serializeUrl(e.extractedUrl),n);t.next(r);try{e.resolve(this.errorHandler(n))}catch(s){e.reject(s)}}var i;return g.E}));var i,s,o}))}resetRootComponentType(e){this.rootComponentType=e,this.routerState.root.component=this.rootComponentType}getTransition(){const e=this.transitions.value;return e.urlAfterRedirects=this.browserUrlTree,e}setTransition(e){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),e))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(e=>{const t=this.extractLocationChangeInfoFromEvent(e);this.shouldScheduleNavigation(this.lastLocationChangeInfo,t)&&setTimeout(()=>{const{source:e,state:n,urlTree:r}=t,i={replaceUrl:!0};if(n){const e=Object.assign({},n);delete e.navigationId,delete e.\u0275routerPageId,0!==Object.keys(e).length&&(i.state=e)}this.scheduleNavigation(r,e,n,i)},0),this.lastLocationChangeInfo=t}))}extractLocationChangeInfoFromEvent(e){var t;return{source:"popstate"===e.type?"popstate":"hashchange",urlTree:this.parseUrl(e.url),state:(null===(t=e.state)||void 0===t?void 0:t.navigationId)?e.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(e,t){if(!e)return!0;const n=t.urlTree.toString()===e.urlTree.toString();return!(t.transitionId===e.transitionId&&n&&("hashchange"===t.source&&"popstate"===e.source||"popstate"===t.source&&"hashchange"===e.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(e){this.events.next(e)}resetConfig(e){Ot(e),this.config=e.map(Dt),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(e,t={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:s,preserveFragment:o}=t,a=n||this.routerState.root,c=o?this.currentUrlTree.fragment:i;let l=null;switch(s){case"merge":l=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=r||null}return null!==l&&(l=this.removeEmptyProps(l)),function(e,t,n,r,i){if(0===n.length)return pt(t.root,t.root,t,r,i);const s=function(e){if("string"==typeof e[0]&&1===e.length&&"/"===e[0])return new gt(!0,0,e);let t=0,n=!1;const r=e.reduce((e,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const t={};return we(r.outlets,(e,n)=>{t[n]="string"==typeof e?e.split("/"):e}),[...e,{outlets:t}]}if(r.segmentPath)return[...e,r.segmentPath]}return"string"!=typeof r?[...e,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?t++:""!=r&&e.push(r))}),e):[...e,r]},[]);return new gt(n,t,r)}(n);if(s.toRoot())return pt(t.root,new xe([],{}),t,r,i);const o=function(e,t,n){if(e.isAbsolute)return new mt(t.root,!0,0);if(-1===n.snapshot._lastPathIndex){const e=n.snapshot._urlSegment;return new mt(e,e===t.root,0)}const r=ht(e.commands[0])?0:1;return function(e,t,n){let r=e,i=t,s=n;for(;s>i;){if(s-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new mt(r,!1,i-s)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,e.numberOfDoubleDots)}(s,t,e),a=o.processChildren?vt(o.segmentGroup,o.index,s.commands):yt(o.segmentGroup,o.index,s.commands);return pt(o.segmentGroup,a,t,r,i)}(a,this.currentUrlTree,e,l,null!=c?c:null)}navigateByUrl(e,t={skipLocationChange:!1}){const n=kt(e)?e:this.parseUrl(e),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,t)}navigate(e,t={skipLocationChange:!1}){return function(e){for(let t=0;t<e.length;t++){const n=e[t];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${t}`)}}(e),this.navigateByUrl(this.createUrlTree(e,t),t)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){let t;try{t=this.urlSerializer.parse(e)}catch(n){t=this.malformedUriErrorHandler(n,this.urlSerializer,e)}return t}isActive(e,t){let n;if(n=!0===t?Object.assign({},Cn):!1===t?Object.assign({},Tn):t,kt(e))return Te(this.currentUrlTree,e,n);const r=this.parseUrl(e);return Te(this.currentUrlTree,r,n)}removeEmptyProps(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return null!=r&&(t[n]=r),t},{})}processNavigations(){this.navigations.subscribe(e=>{this.navigated=!0,this.lastSuccessfulId=e.id,this.currentPageId=e.targetPageId,this.events.next(new Q(e.id,this.serializeUrl(e.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,e.resolve(!0)},e=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(e,t,n,r,i){var s,o;if(this.disposed)return Promise.resolve(!1);const a=this.getTransition(),c="imperative"!==t&&"imperative"===(null==a?void 0:a.source),l=(this.lastSuccessfulId===a.id||this.currentNavigation?a.rawUrl:a.urlAfterRedirects).toString()===e.toString();if(c&&l)return Promise.resolve(!0);let u,h,d;i?(u=i.resolve,h=i.reject,d=i.promise):d=new Promise((e,t)=>{u=e,h=t});const p=++this.navigationId;let f;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(n=this.location.getState()),f=n&&n.\u0275routerPageId?n.\u0275routerPageId:r.replaceUrl||r.skipLocationChange?null!==(s=this.browserPageId)&&void 0!==s?s:0:(null!==(o=this.browserPageId)&&void 0!==o?o:0)+1):f=0,this.setTransition({id:p,targetPageId:f,source:t,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:e,extras:r,resolve:u,reject:h,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(e=>Promise.reject(e))}setBrowserUrl(e,t){const n=this.urlSerializer.serialize(e),r=Object.assign(Object.assign({},t.extras.state),this.generateNgRouterState(t.id,t.targetPageId));this.location.isCurrentPathEqualTo(n)||t.extras.replaceUrl?this.location.replaceState(n,"",r):this.location.go(n,"",r)}restoreHistory(e,t=!1){var n,r;if("computed"===this.canceledNavigationResolution){const t=this.currentPageId-e.targetPageId;"popstate"!==e.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(n=this.currentNavigation)||void 0===n?void 0:n.finalUrl)||0===t?this.currentUrlTree===(null===(r=this.currentNavigation)||void 0===r?void 0:r.finalUrl)&&0===t&&(this.resetState(e),this.browserUrlTree=e.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(t)}else"replace"===this.canceledNavigationResolution&&(t&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=e.currentRouterState,this.currentUrlTree=e.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(e,t){const n=new X(e.id,this.serializeUrl(e.extractedUrl),t);this.triggerEvent(n),e.resolve(!1)}generateNgRouterState(e,t){return"computed"===this.canceledNavigationResolution?{navigationId:e,"\u0275routerPageId":t}:{navigationId:e}}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(i.DyG),i.LFG(Pe),i.LFG(vn),i.LFG(r.Ye),i.LFG(i.zs3),i.LFG(i.v3s),i.LFG(i.Sil),i.LFG(void 0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),Sn=(()=>{class e{constructor(e,t,n,r,i){this.router=e,this.route=t,this.commands=[],this.onChanges=new I.xQ,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(e){this.onChanges.next(this)}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}onClick(){const e={skipLocationChange:An(this.skipLocationChange),replaceUrl:An(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,e),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:An(this.preserveFragment)})}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(En),i.Y36(tt),i.$8M("tabindex"),i.Y36(i.Qsj),i.Y36(i.SBq))},e.\u0275dir=i.lG2({type:e,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(e,t){1&e&&i.NdJ("click",function(){return t.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[i.TTD]}),e})(),kn=(()=>{class e{constructor(e,t,n){this.router=e,this.route=t,this.locationStrategy=n,this.commands=[],this.onChanges=new I.xQ,this.subscription=e.events.subscribe(e=>{e instanceof Q&&this.updateTargetUrlAndHref()})}set routerLink(e){this.commands=null!=e?Array.isArray(e)?e:[e]:[]}ngOnChanges(e){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(e,t,n,r,i){if(0!==e||t||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const s={skipLocationChange:An(this.skipLocationChange),replaceUrl:An(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,s),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:An(this.preserveFragment)})}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(En),i.Y36(tt),i.Y36(r.S$))},e.\u0275dir=i.lG2({type:e,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(e,t){1&e&&i.NdJ("click",function(e){return t.onClick(e.button,e.ctrlKey,e.shiftKey,e.altKey,e.metaKey)}),2&e&&(i.Ikx("href",t.href,i.LSH),i.uIk("target",t.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[i.TTD]}),e})();function An(e){return""===e||!!e}let xn=(()=>{class e{constructor(e,t,n,r,s){this.parentContexts=e,this.location=t,this.resolver=n,this.changeDetector=s,this.activated=null,this._activatedRoute=null,this.activateEvents=new i.vpe,this.deactivateEvents=new i.vpe,this.name=r||he,e.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const e=this.parentContexts.getContext(this.name);e&&e.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const e=this.activated;return this.activated=null,this._activatedRoute=null,e}attach(e,t){this.activated=e,this._activatedRoute=t,this.location.insert(e.hostView)}deactivate(){if(this.activated){const e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=e;const n=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new Nn(e,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return e.\u0275fac=function(t){return new(t||e)(i.Y36(vn),i.Y36(i.s_b),i.Y36(i._Vd),i.$8M("name"),i.Y36(i.sBO))},e.\u0275dir=i.lG2({type:e,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),e})();class Nn{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===tt?this.route:e===vn?this.childContexts:this.parent.get(e,t)}}class On{}class Pn{preload(e,t){return t().pipe(T(()=>(0,y.of)(null)))}}class Rn{preload(e,t){return(0,y.of)(null)}}let Dn=(()=>{class e{constructor(e,t,n,r,i){this.router=e,this.injector=r,this.preloadingStrategy=i,this.loader=new mn(t,n,t=>e.triggerEvent(new ie(t)),t=>e.triggerEvent(new se(t)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,x.h)(e=>e instanceof Q),A(()=>this.preload())).subscribe(()=>{})}preload(){const e=this.injector.get(i.h0i);return this.processRoutes(e,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,t){const n=[];for(const r of t)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const e=r._loadedConfig;n.push(this.processRoutes(e.module,e.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(e,r)):r.children&&n.push(this.processRoutes(e,r.children));return(0,f.D)(n).pipe((0,W.J)(),(0,$.U)(e=>{}))}preloadConfig(e,t){return this.preloadingStrategy.preload(t,()=>(t._loadedConfig?(0,y.of)(t._loadedConfig):this.loader.load(e.injector,t)).pipe((0,k.zg)(e=>(t._loadedConfig=e,this.processRoutes(e.module,e.routes)))))}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(En),i.LFG(i.v3s),i.LFG(i.Sil),i.LFG(i.zs3),i.LFG(On))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),Ln=(()=>{class e{constructor(e,t,n={}){this.router=e,this.viewportScroller=t,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(e=>{e instanceof Y?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof Q&&(this.lastId=e.id,this.scheduleScrollEvent(e,this.router.parseUrl(e.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(e=>{e instanceof ue&&(e.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(e.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,t){this.router.triggerEvent(new ue(e,"popstate"===this.lastSource?this.store[this.restoredId]:null,t))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(En),i.LFG(r.EM),i.LFG(void 0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();const Mn=new i.OlP("ROUTER_CONFIGURATION"),Fn=new i.OlP("ROUTER_FORROOT_GUARD"),$n=[r.Ye,{provide:Pe,useClass:Re},{provide:En,useFactory:function(e,t,n,r,i,s,o,a={},c,l){const u=new En(null,e,t,n,r,i,s,ve(o));return c&&(u.urlHandlingStrategy=c),l&&(u.routeReuseStrategy=l),function(e,t){e.errorHandler&&(t.errorHandler=e.errorHandler),e.malformedUriErrorHandler&&(t.malformedUriErrorHandler=e.malformedUriErrorHandler),e.onSameUrlNavigation&&(t.onSameUrlNavigation=e.onSameUrlNavigation),e.paramsInheritanceStrategy&&(t.paramsInheritanceStrategy=e.paramsInheritanceStrategy),e.relativeLinkResolution&&(t.relativeLinkResolution=e.relativeLinkResolution),e.urlUpdateStrategy&&(t.urlUpdateStrategy=e.urlUpdateStrategy)}(a,u),a.enableTracing&&u.events.subscribe(e=>{var t,n;null===(t=console.group)||void 0===t||t.call(console,`Router Event: ${e.constructor.name}`),console.log(e.toString()),console.log(e),null===(n=console.groupEnd)||void 0===n||n.call(console)}),u},deps:[Pe,vn,r.Ye,i.zs3,i.v3s,i.Sil,gn,Mn,[class{},new i.FiY],[pn,new i.FiY]]},vn,{provide:tt,useFactory:function(e){return e.routerState.root},deps:[En]},{provide:i.v3s,useClass:i.EAV},Dn,Rn,Pn,{provide:Mn,useValue:{enableTracing:!1}}];function Vn(){return new i.PXZ("Router",En)}let Un=(()=>{class e{constructor(e,t){}static forRoot(t,n){return{ngModule:e,providers:[$n,zn(t),{provide:Fn,useFactory:Bn,deps:[[En,new i.FiY,new i.tp0]]},{provide:Mn,useValue:n||{}},{provide:r.S$,useFactory:qn,deps:[r.lw,[new i.tBr(r.mr),new i.FiY],Mn]},{provide:Ln,useFactory:jn,deps:[En,r.EM,Mn]},{provide:On,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Rn},{provide:i.PXZ,multi:!0,useFactory:Vn},[Hn,{provide:i.ip1,multi:!0,useFactory:Gn,deps:[Hn]},{provide:Kn,useFactory:Wn,deps:[Hn]},{provide:i.tb,multi:!0,useExisting:Kn}]]}}static forChild(t){return{ngModule:e,providers:[zn(t)]}}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(Fn,8),i.LFG(En,8))},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({}),e})();function jn(e,t,n){return n.scrollOffset&&t.setOffset(n.scrollOffset),new Ln(e,t,n)}function qn(e,t,n={}){return n.useHash?new r.Do(e,t):new r.b0(e,t)}function Bn(e){return"guarded"}function zn(e){return[{provide:i.deG,multi:!0,useValue:e},{provide:gn,multi:!0,useValue:e}]}let Hn=(()=>{class e{constructor(e){this.injector=e,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new I.xQ}appInitializer(){return this.injector.get(r.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let e=null;const t=new Promise(t=>e=t),n=this.injector.get(En),r=this.injector.get(Mn);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),e(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?(0,y.of)(null):(this.initNavigation=!0,e(!0),this.resultOfPreactivationDone),n.initialNavigation()):e(!0),t})}bootstrapListener(e){const t=this.injector.get(Mn),n=this.injector.get(Dn),r=this.injector.get(Ln),s=this.injector.get(En),o=this.injector.get(i.z2F);e===o.components[0]&&("enabledNonBlocking"!==t.initialNavigation&&void 0!==t.initialNavigation||s.initialNavigation(),n.setUpPreloading(),r.init(),s.resetRootComponentType(o.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(i.zs3))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();function Gn(e){return e.appInitializer.bind(e)}function Wn(e){return e.bootstrapListener.bind(e)}const Kn=new i.OlP("Router Initializer")},159:(e,t,n)=>{"use strict";n.d(t,{Z:()=>h});var r=n(9870),i=n(9171),s=n(5871),o=n(4560);class a{constructor(e,t){this._delegate=e,this.firebase=t,(0,s._addComponent)(e,new i.wA("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,s.deleteApp)(this._delegate)))}_getService(e,t=s._DEFAULT_ENTRY_NAME){var n;this._delegate.checkDestroyed();const r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:t})}_removeServiceInstance(e,t=s._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){(0,s._addComponent)(this._delegate,e)}_addOrOverwriteComponent(e){(0,s._addOrOverwriteComponent)(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const c=new r.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),l=function e(){const t=function(e){const t={},n={__esModule:!0,initializeApp:function(i,o={}){const a=s.initializeApp(i,o);if((0,r.r3)(t,a.name))return t[a.name];const c=new e(a,n);return t[a.name]=c,c},app:i,registerVersion:s.registerVersion,setLogLevel:s.setLogLevel,onLog:s.onLog,apps:null,SDK_VERSION:s.SDK_VERSION,INTERNAL:{registerComponent:function(t){const o=t.name,a=o.replace("-compat","");if(s._registerComponent(t)&&"PUBLIC"===t.type){const s=(e=i())=>{if("function"!=typeof e[a])throw c.create("invalid-app-argument",{appName:o});return e[a]()};void 0!==t.serviceProps&&(0,r.ZB)(s,t.serviceProps),n[a]=s,e.prototype[a]=function(...e){return this._getService.bind(this,o).apply(this,t.multipleInstances?e:[])}}return"PUBLIC"===t.type?n[a]:null},removeApp:function(e){delete t[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:s}};function i(e){if(!(0,r.r3)(t,e=e||s._DEFAULT_ENTRY_NAME))throw c.create("no-app",{appName:e});return t[e]}return n.default=n,Object.defineProperty(n,"apps",{get:function(){return Object.keys(t).map(e=>t[e])}}),i.App=e,n}(a);return t.INTERNAL=Object.assign(Object.assign({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){(0,r.ZB)(t,e)},createSubscribe:r.ne,ErrorFactory:r.LL,deepExtend:r.ZB}),t}(),u=new o.Yd("@firebase/app-compat");if((0,r.jU)()&&void 0!==self.firebase){u.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const e=self.firebase.SDK_VERSION;e&&e.indexOf("LITE")>=0&&u.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const h=l;(0,s.registerVersion)("@firebase/app-compat","0.1.10",void 0)},5871:(e,t,n)=>{"use strict";n.r(t),n.d(t,{FirebaseError:()=>s.ZR,SDK_VERSION:()=>I,_DEFAULT_ENTRY_NAME:()=>u,_addComponent:()=>f,_addOrOverwriteComponent:()=>g,_apps:()=>d,_clearComponents:()=>_,_components:()=>p,_getProvider:()=>y,_registerComponent:()=>m,_removeServiceInstance:()=>v,deleteApp:()=>S,getApp:()=>T,getApps:()=>E,initializeApp:()=>C,onLog:()=>A,registerVersion:()=>k,setLogLevel:()=>x});var r=n(9171),i=n(4560),s=n(9870);class o{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null==t?void 0:t.type)}(e)){const t=e.getImmediate();return`${t.library}/${t.version}`}return null}).filter(e=>e).join(" ")}}const a="@firebase/app",c="0.7.9",l=new i.Yd("@firebase/app"),u="[DEFAULT]",h={[a]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},d=new Map,p=new Map;function f(e,t){try{e.container.addComponent(t)}catch(n){l.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function g(e,t){e.container.addOrOverwriteComponent(t)}function m(e){const t=e.name;if(p.has(t))return l.debug(`There were multiple attempts to register component ${t}.`),!1;p.set(t,e);for(const n of d.values())f(n,e);return!0}function y(e,t){return e.container.getProvider(t)}function v(e,t,n=u){y(e,t).clearInstance(n)}function _(){p.clear()}const w=new s.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class b{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw w.create("app-deleted",{appName:this._name})}}const I="9.5.0";function C(e,t={}){"object"!=typeof t&&(t={name:t});const n=Object.assign({name:u,automaticDataCollectionEnabled:!1},t),i=n.name;if("string"!=typeof i||!i)throw w.create("bad-app-name",{appName:String(i)});const o=d.get(i);if(o){if((0,s.vZ)(e,o.options)&&(0,s.vZ)(n,o.config))return o;throw w.create("duplicate-app",{appName:i})}const a=new r.H0(i);for(const r of p.values())a.addComponent(r);const c=new b(e,n,a);return d.set(i,c),c}function T(e=u){const t=d.get(e);if(!t)throw w.create("no-app",{appName:e});return t}function E(){return Array.from(d.values())}async function S(e){const t=e.name;d.has(t)&&(d.delete(t),await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function k(e,t,n){var i;let s=null!==(i=h[e])&&void 0!==i?i:e;n&&(s+=`-${n}`);const o=s.match(/\s|\//),a=t.match(/\s|\//);if(o||a){const e=[`Unable to register library "${s}" with version "${t}":`];return o&&e.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&e.push("and"),a&&e.push(`version name "${t}" contains illegal characters (whitespace or "/")`),void l.warn(e.join(" "))}m(new r.wA(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}function A(e,t){if(null!==e&&"function"!=typeof e)throw w.create("invalid-log-argument");(0,i.Am)(e,t)}function x(e){(0,i.Ub)(e)}m(new r.wA("platform-logger",e=>new o(e),"PRIVATE")),k(a,c,""),k(a,c,"esm2017"),k("fire-js","")},8:(e,t,n)=>{"use strict";n.d(t,{$:()=>tt,A:()=>l,E:()=>pe,G:()=>me,I:()=>Ie,K:()=>Y,L:()=>Se,M:()=>Ne,N:()=>Oe,P:()=>fn,Q:()=>Pe,R:()=>an,T:()=>xe,U:()=>De,V:()=>Le,W:()=>Ve,X:()=>Ke,Y:()=>Ye,Z:()=>Qe,_:()=>Xe,a:()=>Dt,a0:()=>nt,a1:()=>rt,a2:()=>it,a3:()=>st,a4:()=>ot,a5:()=>at,a6:()=>ct,a7:()=>lt,a8:()=>ut,a9:()=>ht,aA:()=>Mn,aB:()=>xn,aC:()=>he,aG:()=>Mt,aJ:()=>Re,aa:()=>dt,ab:()=>pt,ae:()=>ft,af:()=>gt,ag:()=>mt,aj:()=>Be,ak:()=>Tt,am:()=>kt,an:()=>Nt,ao:()=>ae,ap:()=>b,aq:()=>oe,ar:()=>re,as:()=>f,at:()=>tr,au:()=>jn,av:()=>g,aw:()=>_,ax:()=>C,ay:()=>Q,az:()=>$n,b:()=>Rt,c:()=>In,d:()=>Tn,e:()=>Cn,f:()=>Pn,g:()=>Dn,h:()=>Rn,i:()=>Kt,j:()=>Ln,k:()=>rr,l:()=>un,m:()=>sr,n:()=>ur,o:()=>c,r:()=>hn,s:()=>ln,u:()=>pn,z:()=>u});var r=n(9870),i=n(5871),s=n(1855),o=n(4560),a=n(9171);const c={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},l={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"},u=function(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},h=new r.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),d=new o.Yd("@firebase/auth");function p(e,...t){d.logLevel<=o.in.ERROR&&d.error(`Auth (${i.SDK_VERSION}): ${e}`,...t)}function f(e,...t){throw v(e,...t)}function g(e,...t){return v(e,...t)}function m(e,t,n){const i=Object.assign(Object.assign({},{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),{[t]:n});return new r.LL("auth","Firebase",i).create(t,{appName:e.name})}function y(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&f(e,"argument-error"),m(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function v(e,...t){if("string"!=typeof e){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return h.create(e,...t)}function _(e,t,...n){if(!e)throw v(t,...n)}function w(e){const t="INTERNAL ASSERTION FAILED: "+e;throw p(t),new Error(t)}function b(e,t){e||w(t)}const I=new Map;function C(e){b(e instanceof Function,"Expected a class definition");let t=I.get(e);return t?(b(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,I.set(e,t),t)}function T(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function E(){return"http:"===S()||"https:"===S()}function S(){var e;return"undefined"!=typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class k{constructor(e,t){this.shortDelay=e,this.longDelay=t,b(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,r.uI)()||(0,r.b$)()}get(){return"undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(E()||(0,r.ru)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function A(e,t){b(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}class x{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void w("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void w("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void w("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const N={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},O=new k(3e4,6e4);function P(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function R(e,t,n,i,s={}){return D(e,s,()=>{let s={},o={};i&&("GET"===t?o=i:s={body:JSON.stringify(i)});const a=(0,r.xO)(Object.assign({key:e.config.apiKey},o)).slice(1),c=new(x.headers());return c.set("Content-Type","application/json"),c.set("X-Client-Version",e._getSdkClientVersion()),e.languageCode&&c.set("X-Firebase-Locale",e.languageCode),x.fetch()(M(e,e.config.apiHost,n,a),Object.assign({method:t,headers:c,referrerPolicy:"no-referrer"},s))})}async function D(e,t,n){e._canInitEmulator=!1;const i=Object.assign(Object.assign({},N),t);try{const t=new F(e),r=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await r.json();if("needConfirmation"in s)throw $(e,"account-exists-with-different-credential",s);if(r.ok&&!("errorMessage"in s))return s;{const t=r.ok?s.errorMessage:s.error.message,[n,o]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw $(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw $(e,"email-already-in-use",s);const a=i[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw m(e,a,o);f(e,a)}}catch(s){if(s instanceof r.ZR)throw s;f(e,"network-request-failed")}}async function L(e,t,n,r,i={}){const s=await R(e,t,n,r,i);return"mfaPendingCredential"in s&&f(e,"multi-factor-auth-required",{_serverResponse:s}),s}function M(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?A(e.config,i):`${e.config.apiScheme}://${i}`}class F{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(g(this.auth,"timeout")),O.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function $(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=g(e,t,r);return i.customData._tokenResponse=n,i}function V(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function U(e){return 1e3*Number(e)}function j(e){const[t,n,i]=e.split(".");if(void 0===t||void 0===n||void 0===i)return p("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,r.tV)(n);return e?JSON.parse(e):(p("Failed to decode base64 JWT payload"),null)}catch(s){return p("Caught error parsing JWT payload as JSON",s),null}}async function q(e,t,n=!1){if(n)return t;try{return await t}catch(i){throw i instanceof r.ZR&&function({code:e}){return"auth/user-disabled"===e||"auth/user-token-expired"===e}(i)&&e.auth.currentUser===e&&await e.auth.signOut(),i}}class B{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void("auth/network-request-failed"===e.code&&this.schedule(!0))}this.schedule()}}class z{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=V(this.lastLoginAt),this.creationTime=V(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function H(e){var t;const n=e.auth,r=await e.getIdToken(),i=await q(e,async function(e,t){return R(e,"POST","/v1/accounts:lookup",t)}(n,{idToken:r}));_(null==i?void 0:i.users.length,n,"internal-error");const o=i.users[0];e._notifyReloadListener(o);const a=(null===(t=o.providerUserInfo)||void 0===t?void 0:t.length)?o.providerUserInfo.map(e=>{var{providerId:t}=e,n=(0,s._T)(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}):[],c=(l=a,[...e.providerData.filter(e=>!l.some(t=>t.providerId===e.providerId)),...l]);var l;const u=!!e.isAnonymous&&!(e.email&&o.passwordHash||(null==c?void 0:c.length)),h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new z(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(e,h)}class G{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){_(e.idToken,"internal-error"),_(void 0!==e.idToken,"internal-error"),_(void 0!==e.refreshToken,"internal-error");const t="expiresIn"in e&&void 0!==e.expiresIn?Number(e.expiresIn):function(e){const t=j(e);return _(t,"internal-error"),_(void 0!==t.exp,"internal-error"),_(void 0!==t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}async getToken(e,t=!1){return _(!this.accessToken||this.refreshToken,e,"user-token-expired"),t||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:i,expiresIn:s}=await async function(e,t){const n=await D(e,{},()=>{const n=(0,r.xO)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=M(e,i,"/v1/token",`key=${s}`);return x.fetch()(o,{method:"POST",headers:{"X-Client-Version":e._getSdkClientVersion(),"Content-Type":"application/x-www-form-urlencoded"},body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,i,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new G;return n&&(_("string"==typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(_("string"==typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(_("number"==typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new G,this.toJSON())}_performRefresh(){return w("not implemented")}}function W(e,t){_("string"==typeof e||void 0===e,"internal-error",{appName:t})}class K{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=(0,s._T)(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.emailVerified=!1,this.isAnonymous=!1,this.tenantId=null,this.providerData=[],this.proactiveRefresh=new B(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.metadata=new z(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await q(this,this.stsTokenManager.getToken(this.auth,e));return _(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e,t=!1){const n=(0,r.m9)(e),i=await n.getIdToken(t),s=j(i);_(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o="object"==typeof s.firebase?s.firebase:void 0,a=null==o?void 0:o.sign_in_provider;return{claims:s,token:i,authTime:V(U(s.auth_time)),issuedAtTime:V(U(s.iat)),expirationTime:V(U(s.exp)),signInProvider:a||null,signInSecondFactor:(null==o?void 0:o.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,r.m9)(e);await H(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(_(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){return new K(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(e){_(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await H(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await q(this,async function(e,t){return R(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,o,a,c,l;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,p=null!==(s=t.photoURL)&&void 0!==s?s:void 0,f=null!==(o=t.tenantId)&&void 0!==o?o:void 0,g=null!==(a=t._redirectEventId)&&void 0!==a?a:void 0,m=null!==(c=t.createdAt)&&void 0!==c?c:void 0,y=null!==(l=t.lastLoginAt)&&void 0!==l?l:void 0,{uid:v,emailVerified:w,isAnonymous:b,providerData:I,stsTokenManager:C}=t;_(v&&C,e,"internal-error");const T=G.fromJSON(this.name,C);_("string"==typeof v,e,"internal-error"),W(u,e.name),W(h,e.name),_("boolean"==typeof w,e,"internal-error"),_("boolean"==typeof b,e,"internal-error"),W(d,e.name),W(p,e.name),W(f,e.name),W(g,e.name),W(m,e.name),W(y,e.name);const E=new K({uid:v,auth:e,email:h,emailVerified:w,displayName:u,isAnonymous:b,photoURL:p,phoneNumber:d,tenantId:f,stsTokenManager:T,createdAt:m,lastLoginAt:y});return I&&Array.isArray(I)&&(E.providerData=I.map(e=>Object.assign({},e))),g&&(E._redirectEventId=g),E}static async _fromIdTokenResponse(e,t,n=!1){const r=new G;r.updateFromServerResponse(t);const i=new K({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await H(i),i}}const Y=(()=>{class e{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}return e.type="NONE",e})();function Q(e,t,n){return`firebase:${e}:${t}:${n}`}class X{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=Q(this.userKey,r.apiKey,i),this.fullPersistenceKey=Q("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?K._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,n="authUser"){if(!t.length)return new X(C(Y),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||C(Y);const s=Q(n,e.config.apiKey,e.name);let o=null;for(const l of t)try{const t=await l._get(s);if(t){const n=K._fromJSON(e,t);l!==i&&(o=n),i=l;break}}catch(c){}const a=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&a.length?(i=a[0],o&&await i._set(s,o.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(c){}})),new X(i,e,n)):new X(i,e,n)}}function J(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(ne(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Z(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(ie(t))return"Blackberry";if(se(t))return"Webos";if(ee(t))return"Safari";if((t.includes("chrome/")||te(t))&&!t.includes("edge/"))return"Chrome";if(re(t))return"Android";{const t=e.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==t?void 0:t.length))return t[1]}return"Other"}function Z(e=(0,r.z$)()){return/firefox\//i.test(e)}function ee(e=(0,r.z$)()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function te(e=(0,r.z$)()){return/crios\//i.test(e)}function ne(e=(0,r.z$)()){return/iemobile/i.test(e)}function re(e=(0,r.z$)()){return/android/i.test(e)}function ie(e=(0,r.z$)()){return/blackberry/i.test(e)}function se(e=(0,r.z$)()){return/webos/i.test(e)}function oe(e=(0,r.z$)()){return/iphone|ipad|ipod/i.test(e)}function ae(e=(0,r.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(e)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(e)}function ce(e=(0,r.z$)()){return oe(e)||re(e)||se(e)||ie(e)||/windows phone/i.test(e)||ne(e)}function le(e,t=[]){let n;switch(e){case"Browser":n=J((0,r.z$)());break;case"Worker":n=`${J((0,r.z$)())}-${e}`;break;default:n=e}const s=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${i.SDK_VERSION}/${s}`}class ue{constructor(e,t){this.app=e,this.config=t,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new de(this),this.idTokenSubscription=new de(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=h,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=t.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=C(t)),this._initializationPromise=this.queue(async()=>{var n,r;this._deleted||(this.persistenceManager=await X.create(this,e),this._deleted||((null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)&&await this._popupRedirectResolver._initialize(this),await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)))}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void(await this.currentUser.getIdToken())):void(await this._updateCurrentUser(e)):void 0}async initializeCurrentUser(e){var t;let n=await this.assertedPersistence.getCurrentUser();if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const r=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,i=null==n?void 0:n._redirectEventId,s=await this.tryRedirectSignIn(e);r&&r!==i||!(null==s?void 0:s.user)||(n=s.user)}return n?n._redirectEventId?(_(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)):this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await H(e)}catch(t){if("auth/network-request-failed"!==t.code)return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"==typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const t=e?(0,r.m9)(e):null;return t&&_(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){if(!this._deleted)return e&&_(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(C(e))})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new r.LL("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&C(e)||this._popupRedirectResolver;_(t,this,"argument-error"),this.redirectPersistenceManager=await X.create(this,[C(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"==typeof t?t:t.next.bind(t),s=this._isInitialized?Promise.resolve():this._initializationPromise;return _(s,this,"internal-error"),s.then(()=>i(this.currentUser)),"function"==typeof t?e.addObserver(t,n,r):e.addObserver(t)}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&(this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh()),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return _(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=le(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getSdkClientVersion(){return this.clientVersion}}function he(e){return(0,r.m9)(e)}class de{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,r.ne)(e=>this.observer=e)}get next(){return _(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function pe(e,t,n){const r=he(e);_(r._canInitEmulator,r,"emulator-config-failed"),_(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null==n?void 0:n.disableWarnings),s=fe(t),{host:o,port:a}=function(e){const t=fe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:ge(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:ge(t)}}}(t);r.config.emulator={url:`${s}//${o}${null===a?"":`:${a}`}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function fe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function ge(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class me{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return w("not implemented")}_getIdTokenResponse(e){return w("not implemented")}_linkToIdToken(e,t){return w("not implemented")}_getReauthenticationResolver(e){return w("not implemented")}}async function ye(e,t){return R(e,"POST","/v1/accounts:resetPassword",P(e,t))}async function ve(e,t){return R(e,"POST","/v1/accounts:update",t)}async function _e(e,t){return R(e,"POST","/v1/accounts:sendOobCode",P(e,t))}class we extends me{constructor(e,t,n,r=null){super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new we(e,t,"password")}static _fromEmailAndCode(e,t,n=null){return new we(e,t,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e;if((null==t?void 0:t.email)&&(null==t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return async function(e,t){return L(e,"POST","/v1/accounts:signInWithPassword",P(e,t))}(e,{returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return L(e,"POST","/v1/accounts:signInWithEmailLink",P(e,t))}(e,{email:this._email,oobCode:this._password});default:f(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return ve(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return async function(e,t){return L(e,"POST","/v1/accounts:signInWithEmailLink",P(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:f(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function be(e,t){return L(e,"POST","/v1/accounts:signInWithIdp",P(e,t))}class Ie extends me{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Ie(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):f("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=(0,s._T)(t,["providerId","signInMethod"]);if(!n||!r)return null;const o=new Ie(n,r);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){return be(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,be(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,be(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,r.xO)(t)}return e}}const Ce={USER_NOT_FOUND:"user-not-found"};class Te extends me{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new Te({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new Te({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return L(e,"POST","/v1/accounts:signInWithPhoneNumber",P(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await L(e,"POST","/v1/accounts:signInWithPhoneNumber",P(e,t));if(n.temporaryProof)throw $(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return L(e,"POST","/v1/accounts:signInWithPhoneNumber",P(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),Ce)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"==typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new Te({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class Ee{constructor(e){var t,n,i,s,o,a;const c=(0,r.zd)((0,r.pd)(e)),l=null!==(t=c.apiKey)&&void 0!==t?t:null,u=null!==(n=c.oobCode)&&void 0!==n?n:null,h=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(i=c.mode)&&void 0!==i?i:null);_(l&&u&&h,"argument-error"),this.apiKey=l,this.operation=h,this.code=u,this.continueUrl=null!==(s=c.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(o=c.languageCode)&&void 0!==o?o:null,this.tenantId=null!==(a=c.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=(0,r.zd)((0,r.pd)(e)).link,n=t?(0,r.zd)((0,r.pd)(t)).deep_link_id:null,i=(0,r.zd)((0,r.pd)(e)).deep_link_id;return(i?(0,r.zd)((0,r.pd)(i)).link:null)||i||n||t||e}(e);try{return new Ee(t)}catch(n){return null}}}let Se=(()=>{class e{constructor(){this.providerId=e.PROVIDER_ID}static credential(e,t){return we._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=Ee.parseLink(t);return _(n,"argument-error"),we._fromEmailAndCode(e,n.code,n.tenantId)}}return e.PROVIDER_ID="password",e.EMAIL_PASSWORD_SIGN_IN_METHOD="password",e.EMAIL_LINK_SIGN_IN_METHOD="emailLink",e})();class ke{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class Ae extends ke{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class xe extends Ae{static credentialFromJSON(e){const t="string"==typeof e?JSON.parse(e):e;return _("providerId"in t&&"signInMethod"in t,"argument-error"),Ie._fromParams(t)}credential(e){return this._credential(Object.assign(Object.assign({},e),{nonce:e.rawNonce}))}_credential(e){return _(e.idToken||e.accessToken,"argument-error"),Ie._fromParams(Object.assign(Object.assign({},e),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(e){return xe.oauthCredentialFromTaggedObject(e)}static credentialFromError(e){return xe.oauthCredentialFromTaggedObject(e.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:n,oauthTokenSecret:r,pendingToken:i,nonce:s,providerId:o}=e;if(!(n||r||t||i))return null;if(!o)return null;try{return new xe(o)._credential({idToken:t,accessToken:n,nonce:s,pendingToken:i})}catch(a){return null}}}let Ne=(()=>{class e extends Ae{constructor(){super("facebook.com")}static credential(t){return Ie._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch(n){return null}}}return e.FACEBOOK_SIGN_IN_METHOD="facebook.com",e.PROVIDER_ID="facebook.com",e})(),Oe=(()=>{class e extends Ae{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Ie._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return e.credential(n,r)}catch(i){return null}}}return e.GOOGLE_SIGN_IN_METHOD="google.com",e.PROVIDER_ID="google.com",e})(),Pe=(()=>{class e extends Ae{constructor(){super("github.com")}static credential(t){return Ie._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return e.credential(t.oauthAccessToken)}catch(n){return null}}}return e.GITHUB_SIGN_IN_METHOD="github.com",e.PROVIDER_ID="github.com",e})();class Re extends me{constructor(e,t){super(e,e),this.pendingToken=t}_getIdTokenResponse(e){return be(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,be(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,be(e,t)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(e){const t="string"==typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r,pendingToken:i}=t;return n&&r&&i&&n===r?new Re(n,i):null}static _create(e,t){return new Re(e,t)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class De extends ke{constructor(e){_(e.startsWith("saml."),"argument-error"),super(e)}static credentialFromResult(e){return De.samlCredentialFromTaggedObject(e)}static credentialFromError(e){return De.samlCredentialFromTaggedObject(e.customData||{})}static credentialFromJSON(e){const t=Re.fromJSON(e);return _(t,"argument-error"),t}static samlCredentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{pendingToken:t,providerId:n}=e;if(!t||!n)return null;try{return Re._create(n,t)}catch(r){return null}}}let Le=(()=>{class e extends Ae{constructor(){super("twitter.com")}static credential(t,n){return Ie._fromParams({providerId:e.PROVIDER_ID,signInMethod:e.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return e.credential(n,r)}catch(i){return null}}}return e.TWITTER_SIGN_IN_METHOD="twitter.com",e.PROVIDER_ID="twitter.com",e})();async function Me(e,t){return L(e,"POST","/v1/accounts:signUp",P(e,t))}class Fe{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n,r=!1){const i=await K._fromIdTokenResponse(e,n,r),s=$e(n);return new Fe({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=$e(n);return new Fe({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function $e(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}async function Ve(e){var t;const n=he(e);if(await n._initializationPromise,null===(t=n.currentUser)||void 0===t?void 0:t.isAnonymous)return new Fe({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await Me(n,{returnSecureToken:!0}),i=await Fe._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}class Ue extends r.ZR{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Ue.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Ue(e,t,n,r)}}function je(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if("auth/multi-factor-auth-required"===n.code)throw Ue._fromErrorAndOperation(e,n,t,r);throw n})}function qe(e){return new Set(e.map(({providerId:e})=>e).filter(e=>!!e))}async function Be(e,t){const n=(0,r.m9)(e);await He(!0,n,t);const{providerUserInfo:i}=await async function(e,t){return R(e,"POST","/v1/accounts:update",t)}(n.auth,{idToken:await n.getIdToken(),deleteProvider:[t]}),s=qe(i||[]);return n.providerData=n.providerData.filter(e=>s.has(e.providerId)),s.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function ze(e,t,n=!1){const r=await q(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Fe._forOperation(e,"link",r)}async function He(e,t,n){await H(t);const r=!1===e?"provider-already-linked":"no-such-provider";_(qe(t.providerData).has(n)===e,t.auth,r)}async function Ge(e,t,n=!1){const{auth:r}=e,i="reauthenticate";try{const s=await q(e,je(r,i,t,e),n);_(s.idToken,r,"internal-error");const o=j(s.idToken);_(o,r,"internal-error");const{sub:a}=o;return _(e.uid===a,r,"user-mismatch"),Fe._forOperation(e,i,s)}catch(s){throw"auth/user-not-found"===(null==s?void 0:s.code)&&f(r,"user-mismatch"),s}}async function We(e,t,n=!1){const r="signIn",i=await je(e,r,t),s=await Fe._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Ke(e,t){return We(he(e),t)}async function Ye(e,t){const n=(0,r.m9)(e);return await He(!1,n,t.providerId),ze(n,t)}async function Qe(e,t){return Ge((0,r.m9)(e),t)}async function Xe(e,t){const n=he(e),r=await async function(e,t){return L(e,"POST","/v1/accounts:signInWithCustomToken",P(e,t))}(n,{token:t,returnSecureToken:!0}),i=await Fe._fromIdTokenResponse(n,"signIn",r);return await n._updateCurrentUser(i.user),i}class Je{constructor(e,t){this.factorId=e,this.uid=t.mfaEnrollmentId,this.enrollmentTime=new Date(t.enrolledAt).toUTCString(),this.displayName=t.displayName}static _fromServerResponse(e,t){return"phoneInfo"in t?Ze._fromServerResponse(e,t):f(e,"internal-error")}}class Ze extends Je{constructor(e){super("phone",e),this.phoneNumber=e.phoneInfo}static _fromServerResponse(e,t){return new Ze(t)}}function et(e,t,n){var r;_((null===(r=n.url)||void 0===r?void 0:r.length)>0,e,"invalid-continue-uri"),_(void 0===n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,e,"invalid-dynamic-link-domain"),t.continueUrl=n.url,t.dynamicLinkDomain=n.dynamicLinkDomain,t.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(_(n.iOS.bundleId.length>0,e,"missing-ios-bundle-id"),t.iOSBundleId=n.iOS.bundleId),n.android&&(_(n.android.packageName.length>0,e,"missing-android-pkg-name"),t.androidInstallApp=n.android.installApp,t.androidMinimumVersionCode=n.android.minimumVersion,t.androidPackageName=n.android.packageName)}async function tt(e,t,n){const i=(0,r.m9)(e),s={requestType:"PASSWORD_RESET",email:t};n&&et(i,s,n),await async function(e,t){return _e(e,t)}(i,s)}async function nt(e,t,n){await ye((0,r.m9)(e),{oobCode:t,newPassword:n})}async function rt(e,t){await async function(e,t){return R(e,"POST","/v1/accounts:update",P(e,t))}((0,r.m9)(e),{oobCode:t})}async function it(e,t){const n=(0,r.m9)(e),i=await ye(n,{oobCode:t}),s=i.requestType;switch(_(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":_(i.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":_(i.mfaInfo,n,"internal-error");default:_(i.email,n,"internal-error")}let o=null;return i.mfaInfo&&(o=Je._fromServerResponse(he(n),i.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.newEmail:i.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===i.requestType?i.email:i.newEmail)||null,multiFactorInfo:o},operation:s}}async function st(e,t){const{data:n}=await it((0,r.m9)(e),t);return n.email}async function ot(e,t,n){const r=he(e),i=await Me(r,{returnSecureToken:!0,email:t,password:n}),s=await Fe._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(s.user),s}function at(e,t,n){return Ke((0,r.m9)(e),Se.credential(t,n))}async function ct(e,t,n){const i=(0,r.m9)(e),s={requestType:"EMAIL_SIGNIN",email:t};_(n.handleCodeInApp,i,"argument-error"),n&&et(i,s,n),await async function(e,t){return _e(e,t)}(i,s)}function lt(e,t){const n=Ee.parseLink(t);return"EMAIL_SIGNIN"===(null==n?void 0:n.operation)}async function ut(e,t,n){const i=(0,r.m9)(e),s=Se.credentialWithLink(t,n||T());return _(s._tenantId===(i.tenantId||null),i,"tenant-id-mismatch"),Ke(i,s)}async function ht(e,t){const n={identifier:t,continueUri:E()?T():"http://localhost"},{signinMethods:i}=await async function(e,t){return R(e,"POST","/v1/accounts:createAuthUri",P(e,t))}((0,r.m9)(e),n);return i||[]}async function dt(e,t){const n=(0,r.m9)(e),i={requestType:"VERIFY_EMAIL",idToken:await e.getIdToken()};t&&et(n.auth,i,t);const{email:s}=await async function(e,t){return _e(e,t)}(n.auth,i);s!==e.email&&await e.reload()}async function pt(e,t,n){const i=(0,r.m9)(e),s={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:await e.getIdToken(),newEmail:t};n&&et(i.auth,s,n);const{email:o}=await async function(e,t){return _e(e,t)}(i.auth,s);o!==e.email&&await e.reload()}async function ft(e,{displayName:t,photoURL:n}){if(void 0===t&&void 0===n)return;const i=(0,r.m9)(e),s={idToken:await i.getIdToken(),displayName:t,photoUrl:n,returnSecureToken:!0},o=await q(i,async function(e,t){return R(e,"POST","/v1/accounts:update",t)}(i.auth,s));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find(({providerId:e})=>"password"===e);a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}function gt(e,t){return yt((0,r.m9)(e),t,null)}function mt(e,t){return yt((0,r.m9)(e),null,t)}async function yt(e,t,n){const{auth:r}=e,i={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(i.email=t),n&&(i.password=n);const s=await q(e,ve(r,i));await e._updateTokensIfNecessary(s,!0)}class vt{constructor(e,t,n={}){this.isNewUser=e,this.providerId=t,this.profile=n}}class _t extends vt{constructor(e,t,n,r){super(e,t,n),this.username=r}}class wt extends vt{constructor(e,t){super(e,"facebook.com",t)}}class bt extends _t{constructor(e,t){super(e,"github.com",t,"string"==typeof(null==t?void 0:t.login)?null==t?void 0:t.login:null)}}class It extends vt{constructor(e,t){super(e,"google.com",t)}}class Ct extends _t{constructor(e,t,n){super(e,"twitter.com",t,n)}}function Tt(e){const{user:t,_tokenResponse:n}=e;return t.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:function(e){var t,n;if(!e)return null;const{providerId:r}=e,i=e.rawUserInfo?JSON.parse(e.rawUserInfo):{},s=e.isNewUser||"identitytoolkit#SignupNewUserResponse"===e.kind;if(!r&&(null==e?void 0:e.idToken)){const r=null===(n=null===(t=j(e.idToken))||void 0===t?void 0:t.firebase)||void 0===n?void 0:n.sign_in_provider;if(r)return new vt(s,"anonymous"!==r&&"custom"!==r?r:null)}if(!r)return null;switch(r){case"facebook.com":return new wt(s,i);case"github.com":return new bt(s,i);case"google.com":return new It(s,i);case"twitter.com":return new Ct(s,i,e.screenName||null);case"custom":case"anonymous":return new vt(s,null);default:return new vt(s,r,i)}}(n)}class Et{constructor(e,t){this.type=e,this.credential=t}static _fromIdtoken(e){return new Et("enroll",e)}static _fromMfaPendingCredential(e){return new Et("signin",e)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(e){var t,n;if(null==e?void 0:e.multiFactorSession){if(null===(t=e.multiFactorSession)||void 0===t?void 0:t.pendingCredential)return Et._fromMfaPendingCredential(e.multiFactorSession.pendingCredential);if(null===(n=e.multiFactorSession)||void 0===n?void 0:n.idToken)return Et._fromIdtoken(e.multiFactorSession.idToken)}return null}}class St{constructor(e,t,n){this.session=e,this.hints=t,this.signInResolver=n}static _fromError(e,t){const n=he(e),r=t.customData._serverResponse,i=(r.mfaInfo||[]).map(e=>Je._fromServerResponse(n,e));_(r.mfaPendingCredential,n,"internal-error");const s=Et._fromMfaPendingCredential(r.mfaPendingCredential);return new St(s,i,async e=>{const i=await e._process(n,s);delete r.mfaInfo,delete r.mfaPendingCredential;const o=Object.assign(Object.assign({},r),{idToken:i.idToken,refreshToken:i.refreshToken});switch(t.operationType){case"signIn":const e=await Fe._fromIdTokenResponse(n,t.operationType,o);return await n._updateCurrentUser(e.user),e;case"reauthenticate":return _(t.user,n,"internal-error"),Fe._forOperation(t.user,t.operationType,o);default:f(n,"internal-error")}})}async resolveSignIn(e){return this.signInResolver(e)}}function kt(e,t){var n;const i=(0,r.m9)(e),s=t;return _(t.customData.operationType,i,"argument-error"),_(null===(n=s.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,i,"argument-error"),St._fromError(i,s)}class At{constructor(e){this.user=e,this.enrolledFactors=[],e._onReload(t=>{t.mfaInfo&&(this.enrolledFactors=t.mfaInfo.map(t=>Je._fromServerResponse(e.auth,t)))})}static _fromUser(e){return new At(e)}async getSession(){return Et._fromIdtoken(await this.user.getIdToken())}async enroll(e,t){const n=e,r=await this.getSession(),i=await q(this.user,n._process(this.user.auth,r,t));return await this.user._updateTokensIfNecessary(i),this.user.reload()}async unenroll(e){const t="string"==typeof e?e:e.uid,n=await this.user.getIdToken(),r=await q(this.user,(i=this.user.auth,s={idToken:n,mfaEnrollmentId:t},R(i,"POST","/v2/accounts/mfaEnrollment:withdraw",P(i,s))));var i,s;this.enrolledFactors=this.enrolledFactors.filter(({uid:e})=>e!==t),await this.user._updateTokensIfNecessary(r);try{await this.user.reload()}catch(o){if("auth/user-token-expired"!==o.code)throw o}}}const xt=new WeakMap;function Nt(e){const t=(0,r.m9)(e);return xt.has(t)||xt.set(t,At._fromUser(t)),xt.get(t)}const Ot="__sak";class Pt{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ot,"1"),this.storage.removeItem(Ot),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}const Rt=(()=>{class e extends Pt{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function(){const e=(0,r.z$)();return ee(e)||oe(e)}()&&function(){try{return!(!window||window===window.top)}catch(e){return!1}}(),this.fallbackToPolling=ce(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e,t=!1){if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;if(t?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const r=this.storage.getItem(n);if(e.newValue!==r)null!==e.newValue?this.storage.setItem(n,e.newValue):this.storage.removeItem(n);else if(this.localCache[n]===e.newValue&&!t)return}const i=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);(0,r.w1)()&&10===document.documentMode&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,10):i()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}return e.type="LOCAL",e})(),Dt=(()=>{class e extends Pt{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}return e.type="SESSION",e})();let Lt=(()=>{class e{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(e=>e.isListeningto(t));if(n)return n;const r=new e(t);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null==s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const o=Array.from(s).map(async e=>e(t.origin,i)),a=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(o);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:a})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return e.receivers=[],e})();function Mt(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}class Ft{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,n=50){const r="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((o,a)=>{const c=Mt("",20);r.port1.start();const l=setTimeout(()=>{a(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===c)switch(t.data.status){case"ack":clearTimeout(l),i=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),o(t.data.response);break;default:clearTimeout(l),clearTimeout(i),a(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function $t(){return window}function Vt(){return void 0!==$t().WorkerGlobalScope&&"function"==typeof $t().importScripts}const Ut="firebaseLocalStorageDb",jt="firebaseLocalStorage",qt="fbase_key";class Bt{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function zt(e,t){return e.transaction([jt],t?"readwrite":"readonly").objectStore(jt)}function Ht(){const e=indexedDB.open(Ut,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(jt,{keyPath:qt})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(jt)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Ut);return new Bt(e).toPromise()}(),t(await Ht()))})})}async function Gt(e,t,n){const r=zt(e,!0).put({[qt]:t,value:n});return new Bt(r).toPromise()}function Wt(e,t){const n=zt(e,!0).delete(t);return new Bt(n).toPromise()}const Kt=(()=>{class e{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Ht()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Vt()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Lt._getInstance(Vt()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Ft(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){var t;if(this.sender&&this.activeServiceWorker&&((null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null)===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Ht();return await Gt(e,Ot,"1"),await Wt(e,Ot),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Gt(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=zt(e,!1).get(t),r=await new Bt(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Wt(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=zt(e,!1).getAll();return new Bt(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return e.type="LOCAL",e})();function Yt(e){return new Promise((t,n)=>{const r=document.createElement("script");var i,s;r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=g("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",(null!==(s=null===(i=document.getElementsByTagName("head"))||void 0===i?void 0:i[0])&&void 0!==s?s:document).appendChild(r)})}function Qt(e){return`__${e}${Math.floor(1e6*Math.random())}`}const Xt=1e12;class Jt{constructor(e){this.auth=e,this.counter=Xt,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Zt(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||Xt;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;return(null===(t=this._widgets.get(e||Xt))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;return null===(t=this._widgets.get(e||Xt))||void 0===t||t.execute(),""}}class Zt{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"==typeof e?document.getElementById(e):e;_(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<50;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}();const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const en=Qt("rcb"),tn=new k(3e4,6e4);class nn{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!$t().grecaptcha}load(e,t=""){return _(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)?Promise.resolve($t().grecaptcha):new Promise((n,i)=>{const s=$t().setTimeout(()=>{i(g(e,"network-request-failed"))},tn.get());$t()[en]=()=>{$t().clearTimeout(s),delete $t()[en];const r=$t().grecaptcha;if(!r)return void i(g(e,"internal-error"));const o=r.render;r.render=(e,t)=>{const n=o(e,t);return this.counter++,n},this.hostLanguage=t,n(r)},Yt(`https://www.google.com/recaptcha/api.js??${(0,r.xO)({onload:en,render:"explicit",hl:t})}`).catch(()=>{clearTimeout(s),i(g(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){return!!$t().grecaptcha&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class rn{async load(e){return new Jt(e)}clearedOneInstance(){}}const sn="recaptcha",on={theme:"light",type:"image"};class an{constructor(e,t=Object.assign({},on),n){this.parameters=t,this.type=sn,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=he(n),this.isInvisible="invisible"===this.parameters.size,_("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"==typeof e?document.getElementById(e):e;_(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new rn:new nn,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha();return t.getResponse(e)||new Promise(n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){_(!this.parameters.sitekey,this.auth,"argument-error"),_(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),_("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(e=>e(t)),"function"==typeof e)e(t);else if("string"==typeof e){const n=$t()[e];"function"==typeof n&&n(t)}}}assertNotDestroyed(){_(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){_(E()&&!Vt(),this.auth,"internal-error"),await function(){let e=null;return new Promise(t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()}).catch(t=>{throw e&&window.removeEventListener("load",e),t})}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await R(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);_(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return _(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class cn{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=Te._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function ln(e,t,n){const i=he(e),s=await dn(i,t,(0,r.m9)(n));return new cn(s,e=>Ke(i,e))}async function un(e,t,n){const i=(0,r.m9)(e);await He(!1,i,"phone");const s=await dn(i.auth,t,(0,r.m9)(n));return new cn(s,e=>Ye(i,e))}async function hn(e,t,n){const i=(0,r.m9)(e),s=await dn(i.auth,t,(0,r.m9)(n));return new cn(s,e=>Qe(i,e))}async function dn(e,t,n){var r;const i=await n.verify();try{let s;if(_("string"==typeof i,e,"argument-error"),_(n.type===sn,e,"argument-error"),s="string"==typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s)return _("enroll"===t.type,e,"internal-error"),(await function(e,t){return R(e,"POST","/v2/accounts/mfaEnrollment:start",P(e,t))}(e,{idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:i}})).phoneSessionInfo.sessionInfo;{_("signin"===t.type,e,"internal-error");const n=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;return _(n,e,"missing-multi-factor-info"),(await function(e,t){return R(e,"POST","/v2/accounts/mfaSignIn:start",P(e,t))}(e,{mfaPendingCredential:t.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:i}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:t}=await async function(e,t){return R(e,"POST","/v1/accounts:sendVerificationCode",P(e,t))}(e,{phoneNumber:s.phoneNumber,recaptchaToken:i});return t}}finally{n._reset()}}async function pn(e,t){await ze((0,r.m9)(e),t)}let fn=(()=>{class e{constructor(t){this.providerId=e.PROVIDER_ID,this.auth=he(t)}verifyPhoneNumber(e,t){return dn(this.auth,e,(0,r.m9)(t))}static credential(e,t){return Te._fromVerification(e,t)}static credentialFromResult(t){return e.credentialFromTaggedObject(t)}static credentialFromError(t){return e.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{phoneNumber:t,temporaryProof:n}=e;return t&&n?Te._fromTokenResponse(t,n):null}}return e.PROVIDER_ID="phone",e.PHONE_SIGN_IN_METHOD="phone",e})();function gn(e,t){return t?C(t):(_(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}class mn extends me{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return be(e,this._buildIdpRequest())}_linkToIdToken(e,t){return be(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return be(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function yn(e){return We(e.auth,new mn(e),e.bypassAuthState)}function vn(e){const{auth:t,user:n}=e;return _(n,t,"internal-error"),Ge(n,new mn(e),e.bypassAuthState)}async function _n(e){const{auth:t,user:n}=e;return _(n,t,"internal-error"),ze(n,new mn(e),e.bypassAuthState)}class wn{constructor(e,t,n,r,i=!1){this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:o}=e;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yn;case"linkViaPopup":case"linkViaRedirect":return _n;case"reauthViaPopup":case"reauthViaRedirect":return vn;default:f(this.auth,"internal-error")}}resolve(e){b(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){b(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const bn=new k(2e3,1e4);async function In(e,t,n){const r=he(e);y(e,t,ke);const i=gn(r,n);return new En(r,"signInViaPopup",t,i).executeNotNull()}async function Cn(e,t,n){const i=(0,r.m9)(e);y(i.auth,t,ke);const s=gn(i.auth,n);return new En(i.auth,"reauthViaPopup",t,s,i).executeNotNull()}async function Tn(e,t,n){const i=(0,r.m9)(e);y(i.auth,t,ke);const s=gn(i.auth,n);return new En(i.auth,"linkViaPopup",t,s,i).executeNotNull()}let En=(()=>{class e extends wn{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,e.currentPopupAction&&e.currentPopupAction.cancel(),e.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return _(e,this.auth,"internal-error"),e}async onExecution(){b(1===this.filter.length,"Popup operations only handle one event");const e=Mt();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(g(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(g(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,e.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;this.pollId=(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(g(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(e,bn.get())};e()}}return e.currentPopupAction=null,e})();const Sn=new Map;class kn extends wn{constructor(e,t,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,n),this.eventId=null}async execute(){let e=Sn.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=On(t),r=Nn(e);if(!(await r._isAvailable()))return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(t){e=()=>Promise.reject(t)}Sn.set(this.auth._key(),e)}return this.bypassAuthState||Sn.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function An(e,t){return Nn(e)._set(On(t),"true")}function xn(){Sn.clear()}function Nn(e){return C(e._redirectPersistence)}function On(e){return Q("pendingRedirect",e.config.apiKey,e.name)}function Pn(e,t,n){return async function(e,t,n){const r=he(e);y(e,t,ke);const i=gn(r,n);return await An(i,r),i._openRedirect(r,t,"signInViaRedirect")}(e,t,n)}function Rn(e,t,n){return async function(e,t,n){const i=(0,r.m9)(e);y(i.auth,t,ke);const s=gn(i.auth,n);await An(s,i.auth);const o=await Fn(i);return s._openRedirect(i.auth,t,"reauthViaRedirect",o)}(e,t,n)}function Dn(e,t,n){return async function(e,t,n){const i=(0,r.m9)(e);y(i.auth,t,ke);const s=gn(i.auth,n);await He(!1,i,t.providerId),await An(s,i.auth);const o=await Fn(i);return s._openRedirect(i.auth,t,"linkViaRedirect",o)}(e,t,n)}async function Ln(e,t){return await he(e)._initializationPromise,Mn(e,t,!1)}async function Mn(e,t,n=!1){const r=he(e),i=gn(r,t),s=new kn(r,i,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}async function Fn(e){const t=Mt(`${e.uid}:::`);return e._redirectEventId=t,await e.auth._setRedirectUser(e),await e.auth._persistUserIfCurrent(e),t}class $n{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Un(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Un(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(g(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Vn(e))}saveEventToCache(e){this.cachedEventUids.add(Vn(e)),this.lastProcessedEventTime=Date.now()}}function Vn(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Un({type:e,error:t}){return"unknown"===e&&"auth/no-auth-event"===(null==t?void 0:t.code)}async function jn(e,t={}){return R(e,"GET","/v1/projects",t)}const qn=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Bn=/^https?/;function zn(e){const t=T(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Bn.test(n))return!1;if(qn.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Hn=new k(3e4,6e4);function Gn(){const e=$t().___jsl;if(null==e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}let Wn=null;function Kn(e){return Wn=Wn||function(e){return new Promise((t,n)=>{var r,i,s;function o(){Gn(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Gn(),n(g(e,"network-request-failed"))},timeout:Hn.get()})}if(null===(i=null===(r=$t().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=$t().gapi)||void 0===s?void 0:s.load)){const t=Qt("iframefcb");return $t()[t]=()=>{gapi.load?o():n(g(e,"network-request-failed"))},Yt(`https://apis.google.com/js/api.js?onload=${t}`)}o()}}).catch(e=>{throw Wn=null,e})}(e),Wn}const Yn=new k(5e3,15e3),Qn={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Xn=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Jn(e){const t=e.config;_(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?A(t,"emulator/auth/iframe"):`https://${e.config.authDomain}/__/auth/iframe`,s={apiKey:t.apiKey,appName:e.name,v:i.SDK_VERSION},o=Xn.get(e.config.apiHost);o&&(s.eid=o);const a=e._getFrameworks();return a.length&&(s.fw=a.join(",")),`${n}?${(0,r.xO)(s).slice(1)}`}const Zn={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class er{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function tr(e,t,n,s,o,a){_(e.config.authDomain,e,"auth-domain-config-required"),_(e.config.apiKey,e,"invalid-api-key");const c={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:s,v:i.SDK_VERSION,eventId:o};if(t instanceof ke){t.setDefaultLanguage(e.languageCode),c.providerId=t.providerId||"",(0,r.xb)(t.getCustomParameters())||(c.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(a||{}))c[e]=t}if(t instanceof Ae){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(c.scopes=e.join(","))}e.tenantId&&(c.tid=e.tenantId);const l=c;for(const r of Object.keys(l))void 0===l[r]&&delete l[r];return`${function({config:e}){return e.emulator?A(e,"emulator/auth/handler"):`https://${e.authDomain}/__/auth/handler`}(e)}?${(0,r.xO)(l).slice(1)}`}const nr="webStorageSupport",rr=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Dt,this._completeRedirectFn=Mn}async _openPopup(e,t,n,i){var s;return b(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()"),function(e,t,n,i=500,s=600){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-i)/2,0).toString();let c="";const l=Object.assign(Object.assign({},Zn),{width:i.toString(),height:s.toString(),top:o,left:a}),u=(0,r.z$)().toLowerCase();n&&(c=te(u)?"_blank":n),Z(u)&&(t=t||"http://localhost",l.scrollbars="yes");const h=Object.entries(l).reduce((e,[t,n])=>`${e}${t}=${n},`,"");if(function(e=(0,r.z$)()){var t;return oe(e)&&!!(null===(t=window.navigator)||void 0===t?void 0:t.standalone)}(u)&&"_self"!==c)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",c),new er(null);const d=window.open(t||"",c,h);_(d,e,"popup-blocked");try{d.focus()}catch(p){}return new er(d)}(e,tr(e,t,n,T(),i),Mt())}async _openRedirect(e,t,n,r){var i;return await this._originValidation(e),i=tr(e,t,n,T(),r),$t().location.href=i,new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(b(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n}async initAndGetManager(e){const t=await async function(e){const t=await Kn(e),n=$t().gapi;return _(n,e,"internal-error"),t.open({where:document.body,url:Jn(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Qn,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=g(e,"network-request-failed"),s=$t().setTimeout(()=>{r(i)},Yn.get());function o(){$t().clearTimeout(s),n(t)}t.ping(o).then(o,()=>{r(i)})}))}(e),n=new $n(e);return t.register("authEvent",t=>(_(null==t?void 0:t.authEvent,e,"invalid-auth-event"),{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(nr,{type:nr},n=>{var r;const i=null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.webStorageSupport;void 0!==i&&t(!!i),f(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){if(e.config.emulator)return;const{authorizedDomains:t}=await jn(e);for(const r of t)try{if(zn(r))return}catch(n){}f(e,"unauthorized-domain")}(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return ce()||ee()||oe()}};class ir extends class{constructor(e){this.factorId=e}_process(e,t,n){switch(t.type){case"enroll":return this._finalizeEnroll(e,t.credential,n);case"signin":return this._finalizeSignIn(e,t.credential);default:return w("unexpected MultiFactorSessionType")}}}{constructor(e){super("phone"),this.credential=e}static _fromCredential(e){return new ir(e)}_finalizeEnroll(e,t,n){return function(e,t){return R(e,"POST","/v2/accounts/mfaEnrollment:finalize",P(e,t))}(e,{idToken:t,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(e,t){return function(e,t){return R(e,"POST","/v2/accounts/mfaSignIn:finalize",P(e,t))}(e,{mfaPendingCredential:t,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let sr=(()=>{class e{constructor(){}static assertion(e){return ir._fromCredential(e)}}return e.FACTOR_ID="phone",e})();var or,ar="@firebase/auth",cr="0.19.3";class lr{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{var n;e((null===(n=t)||void 0===n?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){_(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function ur(e=(0,i.getApp)()){const t=(0,i._getProvider)(e,"auth");return t.isInitialized()?t.getImmediate():function(e,t){const n=(0,i._getProvider)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),i=n.getOptions();if((0,r.vZ)(i,null!=t?t:{}))return e;f(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:rr,persistence:[Kt,Rt,Dt]})}or="Browser",(0,i._registerComponent)(new a.wA("auth",(e,{options:t})=>{const n=e.getProvider("app").getImmediate(),{apiKey:r,authDomain:i}=n.options;return(e=>{_(r&&!r.includes(":"),"invalid-api-key",{appName:e.name}),_(!(null==i?void 0:i.includes(":")),"argument-error",{appName:e.name});const n={apiKey:r,authDomain:i,clientPlatform:or,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:le(or)},s=new ue(e,n);return function(e,t){const n=(null==t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(C);(null==t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null==t?void 0:t.popupRedirectResolver)}(s,t),s})(n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,i._registerComponent)(new a.wA("auth-internal",e=>{return t=he(e.getProvider("auth").getImmediate()),new lr(t);var t},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,i.registerVersion)(ar,cr,void 0),(0,i.registerVersion)(ar,cr,"esm2017")},9171:(e,t,n)=>{"use strict";n.d(t,{wA:()=>i,H0:()=>a,zt:()=>o});var r=n(9870);class i{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const s="[DEFAULT]";class o{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.BH;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(t=null==e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:s})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(e="[DEFAULT]"){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(e="[DEFAULT]"){return this.instances.has(e)}getOptions(e="[DEFAULT]"){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries())n===this.normalizeInstanceIdentifier(i)&&s.resolve(r);return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:(r=e,r===s?void 0:r),options:t}),this.instances.set(e,n),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch(i){}var r;return n||null}normalizeInstanceIdentifier(e="[DEFAULT]"){return this.component?this.component.multipleInstances?e:s:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class a{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new o(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},7211:(e,t,n)=>{"use strict";n.d(t,{vA:()=>_i,JH:()=>wi,G$:()=>yt,tn:()=>Ti,wj:()=>ms,AM:()=>u,FQ:()=>Lr,mI:()=>Mr,iU:()=>Ai,dH:()=>_s,U7:()=>Is,Wu:()=>Wi,Lx:()=>Yi,EW:()=>ps,U2:()=>Li,N8:()=>vs,Sb:()=>ws,$o:()=>bs,nP:()=>Es,Kk:()=>ts,vh:()=>rs,S1:()=>zi,yv:()=>Ui,Jr:()=>ji,Vt:()=>qi,MQ:()=>Bi,jM:()=>Vi,g2:()=>ss,R:()=>as,HE:()=>ls,Bd:()=>hs,VF:()=>xi,IO:()=>fs,iH:()=>Si,qT:()=>ki,Od:()=>Ni,i3:()=>ks,Bt:()=>Ts,t8:()=>Oi,Sl:()=>Pi,cy:()=>Ri,TQ:()=>Zi,e0:()=>Xi,Vx:()=>Di});var r=n(5871),i=n(9171),s=n(9870),o=n(4560);const a="@firebase/database",c="0.12.4";let l="";function u(e){l=e}class h{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,s.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,s.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class d{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,s.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const p=function(e){try{if("undefined"!=typeof window&&void 0!==window[e]){const t=window[e];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new h(t)}}catch(t){}return new d},f=p("localStorage"),g=p("sessionStorage"),m=new o.Yd("@firebase/database"),y=function(){let e=1;return function(){return e++}}(),v=function(e){const t=(0,s.dS)(e),n=new s.gQ;n.update(t);const r=n.digest();return s.US.encodeByteArray(r)},_=function(...e){let t="";for(let n=0;n<e.length;n++){const r=e[n];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?t+=_.apply(null,r):t+="object"==typeof r?(0,s.Pz)(r):r,t+=" "}return t};let w=null,b=!0;const I=function(e,t){(0,s.hu)(!t||!0===e||!1===e,"Can't turn on custom loggers persistently."),!0===e?(m.logLevel=o.in.VERBOSE,w=m.log.bind(m),t&&g.set("logging_enabled",!0)):"function"==typeof e?w=e:(w=null,g.remove("logging_enabled"))},C=function(...e){if(!0===b&&(b=!1,null===w&&!0===g.get("logging_enabled")&&I(!0)),w){const t=_.apply(null,e);w(t)}},T=function(e){return function(...t){C(e,...t)}},E=function(...e){const t="FIREBASE INTERNAL ERROR: "+_(...e);m.error(t)},S=function(...e){const t=`FIREBASE FATAL ERROR: ${_(...e)}`;throw m.error(t),new Error(t)},k=function(...e){const t="FIREBASE WARNING: "+_(...e);m.warn(t)},A=function(e){return"number"==typeof e&&(e!=e||e===Number.POSITIVE_INFINITY||e===Number.NEGATIVE_INFINITY)},x="[MIN_NAME]",N="[MAX_NAME]",O=function(e,t){if(e===t)return 0;if(e===x||t===N)return-1;if(t===x||e===N)return 1;{const n=V(e),r=V(t);return null!==n?null!==r?n-r==0?e.length-t.length:n-r:-1:null!==r?1:e<t?-1:1}},P=function(e,t){return e===t?0:e<t?-1:1},R=function(e,t){if(t&&e in t)return t[e];throw new Error("Missing required key ("+e+") in object: "+(0,s.Pz)(t))},D=function(e){if("object"!=typeof e||null===e)return(0,s.Pz)(e);const t=[];for(const r in e)t.push(r);t.sort();let n="{";for(let r=0;r<t.length;r++)0!==r&&(n+=","),n+=(0,s.Pz)(t[r]),n+=":",n+=D(e[t[r]]);return n+="}",n},L=function(e,t){const n=e.length;if(n<=t)return[e];const r=[];for(let i=0;i<n;i+=t)r.push(e.substring(i,i+t>n?n:i+t));return r};function M(e,t){for(const n in e)e.hasOwnProperty(n)&&t(n,e[n])}const F=function(e){let t,n,r,i,o;(0,s.hu)(!A(e),"Invalid JSON number"),0===e?(n=0,r=0,t=1/e==-1/0?1:0):(t=e<0,(e=Math.abs(e))>=Math.pow(2,-1022)?(i=Math.min(Math.floor(Math.log(e)/Math.LN2),1023),n=i+1023,r=Math.round(e*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,r=Math.round(e/Math.pow(2,-1074))));const a=[];for(o=52;o;o-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;o-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(t?1:0),a.reverse();const c=a.join("");let l="";for(o=0;o<64;o+=8){let e=parseInt(c.substr(o,8),2).toString(16);1===e.length&&(e="0"+e),l+=e}return l.toLowerCase()},$=new RegExp("^-?(0*)\\d{1,10}$"),V=function(e){if($.test(e)){const t=Number(e);if(t>=-2147483648&&t<=2147483647)return t}return null},U=function(e){try{e()}catch(t){setTimeout(()=>{throw k("Exception was thrown by user callback.",t.stack||""),t},Math.floor(0))}},j=function(e,t){const n=setTimeout(e,t);return"object"==typeof n&&n.unref&&n.unref(),n};class q{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(e=>this.appCheck=e)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,n)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(t=>t.addTokenListener(e))}notifyForInvalidToken(){k(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class B{constructor(e,t,n){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(e=>this.auth_=e)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(e=>e&&"auth/token-not-initialized"===e.code?(C("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((t,n)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,n):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',k(e)}}let z=(()=>{class e{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}return e.OWNER="owner",e})();const H=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,G="websocket",W="long_polling";class K{constructor(e,t,n,r,i=!1,s="",o=!1){this.secure=t,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=s,this.includeNamespaceInQueryParams=o,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=f.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&f.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Y(e,t,n){let r;if((0,s.hu)("string"==typeof t,"typeof type must == string"),(0,s.hu)("object"==typeof n,"typeof params must == object"),t===G)r=(e.secure?"wss://":"ws://")+e.internalHost+"/.ws?";else{if(t!==W)throw new Error("Unknown connection type: "+t);r=(e.secure?"https://":"http://")+e.internalHost+"/.lp?"}(function(e){return e.host!==e.internalHost||e.isCustomHost()||e.includeNamespaceInQueryParams})(e)&&(n.ns=e.namespace);const i=[];return M(n,(e,t)=>{i.push(e+"="+t)}),r+i.join("&")}class Q{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,s.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,s.p$)(this.counters_)}}const X={},J={};function Z(e){const t=e.toString();return X[t]||(X[t]=new Q),X[t]}class ee{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const e=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let t=0;t<e.length;++t)e[t]&&U(()=>{this.onMessage_(e[t])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class te{constructor(e,t,n,r,i,s,o){this.connId=e,this.repoInfo=t,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=s,this.lastSessionId=o,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=T(e),this.stats_=Z(t),this.urlFn=e=>(this.appCheckToken&&(e.ac=this.appCheckToken),Y(t,W,e))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new ee(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(e){if((0,s.Yr)()||"complete"===document.readyState)e();else{let t=!1;const n=function(){document.body?t||(t=!0,e()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new ne((...e)=>{const[t,n,r,i,s]=e;if(this.incrementIncomingBytes_(e),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===t)this.id=n,this.password=r;else{if("close"!==t)throw new Error("Unrecognized command received: "+t);n?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(n,()=>{this.onClosed_()})):this.onClosed_()}},(...e)=>{const[t,n]=e;this.incrementIncomingBytes_(e),this.myPacketOrderer.handleResponse(t,n)},()=>{this.onClosed_()},this.urlFn);const e={start:"t"};e.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(e.cb=this.scriptTagHolder.uniqueCallbackIdentifier),e.v="5",this.transportSessionId&&(e.s=this.transportSessionId),this.lastSessionId&&(e.ls=this.lastSessionId),this.applicationId&&(e.p=this.applicationId),this.appCheckToken&&(e.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&H.test(location.hostname)&&(e.r="f");const t=this.urlFn(e);this.log_("Connecting via long-poll to "+t),this.scriptTagHolder.addTag(t,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){te.forceAllow_=!0}static forceDisallow(){te.forceDisallow_=!0}static isAvailable(){return!((0,s.Yr)()||!te.forceAllow_&&(te.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,s.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=(0,s.h$)(t),r=L(n,1840);for(let i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,s.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const n={dframe:"t"};n.id=e,n.pw=t,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,s.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class ne{constructor(e,t,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,s.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=y(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=ne.createIFrame_();let n="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(n='<script>document.domain="'+document.domain+'";<\/script>');const r="<html><body>"+n+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(r),this.myIFrame.doc.close()}catch(i){C("frame writing exception"),i.stack&&C(i.stack),C(i)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||C("No IE domain setting required")}catch(t){const n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),n="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){const e=this.pendingSegs.shift();n=n+"&seg"+r+"="+e.seg+"&ts"+r+"="+e.ts+"&d"+r+"="+e.d,r++}return t+=n,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,n){this.pendingSegs.push({seg:e,ts:t,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const n=()=>{this.outstandingRequests.delete(t),this.newRequest_()},r=setTimeout(n,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(r),n()})}addTag(e,t){(0,s.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=e,n.onload=n.onreadystatechange=function(){const e=n.readyState;e&&"loaded"!==e&&"complete"!==e||(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),t())},n.onerror=()=>{C("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch(n){}},Math.floor(1))}}let re=null;"undefined"!=typeof MozWebSocket?re=MozWebSocket:"undefined"!=typeof WebSocket&&(re=WebSocket);let ie=(()=>{class e{constructor(t,n,r,i,s,o,a){this.connId=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=T(this.connId),this.stats_=Z(n),this.connURL=e.connectionURL_(n,o,a,i),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,t,n,r){const i={v:"5"};return!(0,s.Yr)()&&"undefined"!=typeof location&&location.hostname&&H.test(location.hostname)&&(i.r="f"),t&&(i.s=t),n&&(i.ls=n),r&&(i.ac=r),Y(e,G,i)}open(e,t){this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,f.set("previous_websocket_failure",!0);try{if((0,s.Yr)()){const e={headers:{"User-Agent":`Firebase/5/${l}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(e.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(e.headers["X-Firebase-AppCheck"]=this.appCheckToken);const t=process.env,n=0===this.connURL.indexOf("wss://")?t.HTTPS_PROXY||t.https_proxy:t.HTTP_PROXY||t.http_proxy;n&&(e.proxy={origin:n}),this.mySock=new re(this.connURL,[],e)}else this.mySock=new re(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(n){this.log_("Error instantiating WebSocket.");const e=n.message||n.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=e=>{this.handleIncomingFrame(e)},this.mySock.onerror=e=>{this.log_("WebSocket error.  Closing connection.");const t=e.message||e.data;t&&this.log_(t),this.onClosed_()}}start(){}static forceDisallow(){e.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const e=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);e&&e.length>1&&parseFloat(e[1])<4.4&&(t=!0)}return!t&&null!==re&&!e.forceDisallow_}static previouslyFailed(){return f.isInMemoryStorage||!0===f.get("previous_websocket_failure")}markConnectionHealthy(){f.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const e=this.frames.join("");this.frames=null;const t=(0,s.cI)(e);this.onMessage(t)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if((0,s.hu)(null===this.frames,"We already have a frame buffer"),e.length<=6){const t=Number(e);if(!isNaN(t))return this.handleNewFrameCount_(t),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(null===this.mySock)return;const t=e.data;if(this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(t);else{const e=this.extractFrameCount_(t);null!==e&&this.appendFrame_(e)}}send(e){this.resetKeepAlive();const t=(0,s.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const n=L(t,16384);n.length>1&&this.sendString_(String(n.length));for(let r=0;r<n.length;r++)this.sendString_(n[r])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(e){try{this.mySock.send(e)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return e.responsesRequiredToBeHealthy=2,e.healthyTimeout=3e4,e})();class se{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[te,ie]}initTransports_(e){const t=ie&&ie.isAvailable();let n=t&&!ie.previouslyFailed();if(e.webSocketOnly&&(t||k("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),n=!0),n)this.transports_=[ie];else{const e=this.transports_=[];for(const t of se.ALL_TRANSPORTS)t&&t.isAvailable()&&e.push(t)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class oe{constructor(e,t,n,r,i,s,o,a,c,l){this.id=e,this.repoInfo_=t,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=s,this.onReady_=o,this.onDisconnect_=a,this.onKill_=c,this.lastSessionId=l,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=T("c:"+this.id+":"),this.transportManager_=new se(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,n)},Math.floor(0));const r=e.healthyTimeout||0;r>0&&(this.healthyTimeout_=j(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=R("t",e),n=R("d",e);if("c"===t)this.onSecondaryControl_(n);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(n)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=R("t",e),n=R("d",e);"c"===t?this.onControl_(n):"d"===t&&this.onDataMessage_(n)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=R("t",e);if("d"in e){const n=e.d;if("h"===t)this.onHandshake_(n);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let e=0;e<this.pendingDataMessages.length;++e)this.onDataMessage_(this.pendingDataMessages[e]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(n):"r"===t?this.onReset_(n):"e"===t?E("Server Error: "+n):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):E("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,n=e.v,r=e.h;this.sessionId=e.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==n&&k("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,n),j(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):j(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==e&&this.rx_!==e||this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(f.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class ae{put(e,t,n,r){}merge(e,t,n,r){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,n){}onDisconnectMerge(e,t,n){}onDisconnectCancel(e,t){}reportStats(e){}}class ce{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,s.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const n=[...this.listeners_[e]];for(let e=0;e<n.length;e++)n[e].callback.apply(n[e].context,t)}}on(e,t,n){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:n});const r=this.getInitialEvent(e);r&&t.apply(n,r)}off(e,t,n){this.validateEventType_(e);const r=this.listeners_[e]||[];for(let i=0;i<r.length;i++)if(r[i].callback===t&&(!n||n===r[i].context))return void r.splice(i,1)}validateEventType_(e){(0,s.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class le extends ce{constructor(){super(["online"]),this.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||(0,s.uI)()||(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new le}getInitialEvent(e){return(0,s.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class ue{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let t=0;for(let e=0;e<this.pieces_.length;e++)this.pieces_[e].length>0&&(this.pieces_[t]=this.pieces_[e],t++);this.pieces_.length=t,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function he(){return new ue("")}function de(e){return e.pieceNum_>=e.pieces_.length?null:e.pieces_[e.pieceNum_]}function pe(e){return e.pieces_.length-e.pieceNum_}function fe(e){let t=e.pieceNum_;return t<e.pieces_.length&&t++,new ue(e.pieces_,t)}function ge(e){return e.pieceNum_<e.pieces_.length?e.pieces_[e.pieces_.length-1]:null}function me(e,t=0){return e.pieces_.slice(e.pieceNum_+t)}function ye(e){if(e.pieceNum_>=e.pieces_.length)return null;const t=[];for(let n=e.pieceNum_;n<e.pieces_.length-1;n++)t.push(e.pieces_[n]);return new ue(t,0)}function ve(e,t){const n=[];for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);if(t instanceof ue)for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);else{const e=t.split("/");for(let t=0;t<e.length;t++)e[t].length>0&&n.push(e[t])}return new ue(n,0)}function _e(e){return e.pieceNum_>=e.pieces_.length}function we(e,t){const n=de(e),r=de(t);if(null===n)return t;if(n===r)return we(fe(e),fe(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+e+")")}function be(e,t){const n=me(e,0),r=me(t,0);for(let i=0;i<n.length&&i<r.length;i++){const e=O(n[i],r[i]);if(0!==e)return e}return n.length===r.length?0:n.length<r.length?-1:1}function Ie(e,t){if(pe(e)!==pe(t))return!1;for(let n=e.pieceNum_,r=t.pieceNum_;n<=e.pieces_.length;n++,r++)if(e.pieces_[n]!==t.pieces_[r])return!1;return!0}function Ce(e,t){let n=e.pieceNum_,r=t.pieceNum_;if(pe(e)>pe(t))return!1;for(;n<e.pieces_.length;){if(e.pieces_[n]!==t.pieces_[r])return!1;++n,++r}return!0}class Te{constructor(e,t){this.errorPrefix_=t,this.parts_=me(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=(0,s.ug)(this.parts_[n]);Ee(this)}}function Ee(e){if(e.byteLength_>768)throw new Error(e.errorPrefix_+"has a key path longer than 768 bytes ("+e.byteLength_+").");if(e.parts_.length>32)throw new Error(e.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Se(e))}function Se(e){return 0===e.parts_.length?"":"in property '"+e.parts_.join(".")+"'"}class ke extends ce{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const t=!document[e];t!==this.visible_&&(this.visible_=t,this.trigger("visible",t))},!1)}static getInstance(){return new ke}getInitialEvent(e){return(0,s.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Ae=1e3;let xe,Ne=(()=>{class e extends ae{constructor(t,n,r,i,o,a,c,l){if(super(),this.repoInfo_=t,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=c,this.authOverride_=l,this.id=e.nextPersistentConnectionId_++,this.log_=T("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ae,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,l&&!(0,s.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");ke.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&le.getInstance().on("online",this.onOnline_,this)}sendRequest(e,t,n){const r=++this.requestNumber_,i={r:r,a:e,b:t};this.log_((0,s.Pz)(i)),(0,s.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)}get(e){this.initConnection_();const t=new s.BH,n={p:e._path.toString(),q:e._queryObject},r={action:"g",request:n,onComplete:e=>{const r=e.d;"ok"===e.s?(this.onDataUpdate_(n.p,r,!1,null),t.resolve(r)):t.reject(r)}};this.outstandingGets_.push(r),this.outstandingGetCount_++;const i=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const e=this.outstandingGets_[i];void 0!==e&&r===e&&(delete this.outstandingGets_[i],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+i+" timed out on connection"),t.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(i),t.promise}listen(e,t,n,r){this.initConnection_();const i=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),(0,s.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,s.hu)(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");const a={onComplete:r,hashFn:t,query:e,tag:n};this.listens.get(o).set(i,a),this.connected_&&this.sendListen_(a)}sendGet_(e){const t=this.outstandingGets_[e];this.sendRequest("g",t.request,n=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),t.onComplete&&t.onComplete(n)})}sendListen_(t){const n=t.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r};t.tag&&(s.q=n._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,s=>{const o=s.d,a=s.s;e.warnOnListenWarnings_(o,n),(this.listens.get(r)&&this.listens.get(r).get(i))===t&&(this.log_("listen response",s),"ok"!==a&&this.removeListen_(r,i),t.onComplete&&t.onComplete(a,o))})}static warnOnListenWarnings_(e,t){if(e&&"object"==typeof e&&(0,s.r3)(e,"w")){const n=(0,s.DV)(e,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){const e='".indexOn": "'+t._queryParams.getIndex().toString()+'"',n=t._path.toString();k(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${e} at ${n} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&40===e.length||(0,s.GJ)(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,t=(0,s.w9)(e)?"auth":"gauth",n={cred:e};null===this.authOverride_?n.noauth=!0:"object"==typeof this.authOverride_&&(n.authvar=this.authOverride_),this.sendRequest(t,n,t=>{const n=t.s,r=t.d||"error";this.authToken_===e&&("ok"===n?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(n,r))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const t=e.s,n=e.d||"error";"ok"===t?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(t,n)})}unlisten(e,t){const n=e._path.toString(),r=e._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),(0,s.hu)(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,e._queryObject,t)}sendUnlisten_(e,t,n,r){this.log_("Unlisten on "+e+" for "+t);const i={p:e};r&&(i.q=n,i.t=r),this.sendRequest("n",i)}onDisconnectPut(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:t,onComplete:n})}onDisconnectMerge(e,t,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,t,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:t,onComplete:n})}onDisconnectCancel(e,t){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,t):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:t})}sendOnDisconnect_(e,t,n,r){const i={p:t,d:n};this.log_("onDisconnect "+e,i),this.sendRequest(e,i,e=>{r&&setTimeout(()=>{r(e.s,e.d)},Math.floor(0))})}put(e,t,n,r){this.putInternal("p",e,t,n,r)}merge(e,t,n,r){this.putInternal("m",e,t,n,r)}putInternal(e,t,n,r,i){this.initConnection_();const s={p:t,d:n};void 0!==i&&(s.h=i),this.outstandingPuts_.push({action:e,request:s,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+t)}sendPut_(e){const t=this.outstandingPuts_[e].action,n=this.outstandingPuts_[e].request,r=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(t,n,n=>{this.log_(t+" response",n),delete this.outstandingPuts_[e],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),r&&r(n.s,n.d)})}reportStats(e){if(this.connected_){const t={c:e};this.log_("reportStats",t),this.sendRequest("s",t,e=>{"ok"!==e.s&&this.log_("reportStats","Error sending stats: "+e.d)})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+(0,s.Pz)(e));const t=e.r,n=this.requestCBHash_[t];n&&(delete this.requestCBHash_[t],n(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,t){this.log_("handleServerMessage",e,t),"d"===e?this.onDataUpdate_(t.p,t.d,!1,t.t):"m"===e?this.onDataUpdate_(t.p,t.d,!0,t.t):"c"===e?this.onListenRevoked_(t.p,t.q):"ac"===e?this.onAuthRevoked_(t.s,t.d):"apc"===e?this.onAppCheckRevoked_(t.s,t.d):"sd"===e?this.onSecurityDebugPacket_(t):E("Unrecognized action received from server: "+(0,s.Pz)(e)+"\nAre you using the latest client?")}onReady_(e,t){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(e),this.lastSessionId=t,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){(0,s.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ae,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ae,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ae),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const e=(new Date).getTime()-this.lastConnectionAttemptTime_;let t=Math.max(0,this.reconnectDelay_-e);t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;const t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+e.nextConnectionId_++,o=this.lastSessionId;let a=!1,c=null;const l=function(){c?c.close():(a=!0,r())};this.realtime_={close:l,sendRequest:function(e){(0,s.hu)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(e)}};const u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[e,s]=await Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);a?C("getToken() completed but was canceled"):(C("getToken() completed. Creating connection."),this.authToken_=e&&e.accessToken,this.appCheckToken_=s&&s.token,c=new oe(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,e=>{k(e+" ("+this.repoInfo_.toString()+")"),this.interrupt("server_kill")},o))}catch(E){this.log_("Failed to get token: "+E),a||(this.repoInfo_.nodeAdmin&&k(E),l())}}}interrupt(e){C("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){C("Resuming connection for reason: "+e),delete this.interruptReasons_[e],(0,s.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Ae,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const t=e-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const t=this.outstandingPuts_[e];t&&"h"in t.request&&t.queued&&(t.onComplete&&t.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(e,t){let n;n=t?t.map(e=>D(e)).join("$"):"default";const r=this.removeListen_(e,n);r&&r.onComplete&&r.onComplete("permission_denied")}removeListen_(e,t){const n=new ue(e).toString();let r;if(this.listens.has(n)){const e=this.listens.get(n);r=e.get(t),e.delete(t),0===e.size&&this.listens.delete(n)}else r=void 0;return r}onAuthRevoked_(e,t){C("Auth token revoked: "+e+"/"+t),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,t){C("App check token revoked: "+e+"/"+t),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==e&&"permission_denied"!==e||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const t of e.values())this.sendListen_(t);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let t="js";(0,s.Yr)()&&(t=this.repoInfo_.nodeAdmin?"admin_node":"node"),e["sdk."+t+"."+l.replace(/\./g,"-")]=1,(0,s.uI)()?e["framework.cordova"]=1:(0,s.b$)()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=le.getInstance().currentlyOnline();return(0,s.xb)(this.interruptReasons_)&&e}}return e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e})();class Oe{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Oe(e,t)}}class Pe{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const n=new Oe(x,e),r=new Oe(x,t);return 0!==this.compare(n,r)}minPost(){return Oe.MIN}}class Re extends Pe{static get __EMPTY_NODE(){return xe}static set __EMPTY_NODE(e){xe=e}compare(e,t){return O(e.name,t.name)}isDefinedOn(e){throw(0,s.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Oe.MIN}maxPost(){return new Oe(N,xe)}makePost(e,t){return(0,s.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Oe(e,xe)}toString(){return".key"}}const De=new Re;class Le{constructor(e,t,n,r,i=null){this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];let s=1;for(;!e.isEmpty();)if(e=e,s=t?n(e.key,t):1,r&&(s*=-1),s<0)e=this.isReverse_?e.left:e.right;else{if(0===s){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let e,t=this.nodeStack_.pop();if(e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Me,Fe=(()=>{class e{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:$e.EMPTY_NODE,this.right=null!=s?s:$e.EMPTY_NODE}copy(t,n,r,i,s){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=s?s:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp_()}removeMin_(){if(this.left.isEmpty())return $e.EMPTY_NODE;let e=this;return e.left.isRed_()||e.left.left.isRed_()||(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,t){let n,r;if(n=this,t(e,n.key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(e,t),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===t(e,n.key)){if(n.right.isEmpty())return $e.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(e,t))}return n.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return e.RED=!0,e.BLACK=!1,e})();class $e{constructor(e,t=$e.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new $e(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Fe.BLACK,null,null))}remove(e){return new $e(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Fe.BLACK,null,null))}get(e){let t,n=this.root_;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t)return n.value;t<0?n=n.left:t>0&&(n=n.right)}return null}getPredecessorKey(e){let t,n=this.root_,r=null;for(;!n.isEmpty();){if(t=this.comparator_(e,n.key),0===t){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}t<0?n=n.left:t>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Le(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Le(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Le(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Le(this.root_,null,this.comparator_,!0,e)}}function Ve(e,t){return O(e.name,t.name)}function Ue(e,t){return O(e,t)}$e.EMPTY_NODE=new class{copy(e,t,n,r,i){return this}insert(e,t,n){return new Fe(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const je=function(e){return"number"==typeof e?"number:"+F(e):"string:"+e},qe=function(e){if(e.isLeafNode()){const t=e.val();(0,s.hu)("string"==typeof t||"number"==typeof t||"object"==typeof t&&(0,s.r3)(t,".sv"),"Priority must be a string or number.")}else(0,s.hu)(e===Me||e.isEmpty(),"priority of unexpected type.");(0,s.hu)(e===Me||e.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Be,ze,He,Ge=(()=>{class e{constructor(t,n=e.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=n,this.lazyHash_=null,(0,s.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),qe(this.priorityNode_)}static set __childrenNodeConstructor(e){Be=e}static get __childrenNodeConstructor(){return Be}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new e(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return _e(t)?this:".priority"===de(t)?this.priorityNode_:e.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,t){return null}updateImmediateChild(t,n){return".priority"===t?this.updatePriority(n):n.isEmpty()&&".priority"!==t?this:e.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,n).updatePriority(this.priorityNode_)}updateChild(t,n){const r=de(t);return null===r?n:n.isEmpty()&&".priority"!==r?this:((0,s.hu)(".priority"!==r||1===pe(t),".priority must be the last token in a path"),this.updateImmediateChild(r,e.__childrenNodeConstructor.EMPTY_NODE.updateChild(fe(t),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,t){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+je(this.priorityNode_.val())+":");const t=typeof this.value_;e+=t+":",e+="number"===t?F(this.value_):this.value_,this.lazyHash_=v(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===e.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof e.__childrenNodeConstructor?-1:((0,s.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const n=typeof t.value_,r=typeof this.value_,i=e.VALUE_TYPE_ORDER.indexOf(n),o=e.VALUE_TYPE_ORDER.indexOf(r);return(0,s.hu)(i>=0,"Unknown leaf type: "+n),(0,s.hu)(o>=0,"Unknown leaf type: "+r),i===o?"object"===r?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:o-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const t=e;return this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)}return!1}}return e.VALUE_TYPE_ORDER=["object","boolean","number","string"],e})();const We=new class extends Pe{compare(e,t){const n=e.node.getPriority(),r=t.node.getPriority(),i=n.compareTo(r);return 0===i?O(e.name,t.name):i}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Oe.MIN}maxPost(){return new Oe(N,new Ge("[PRIORITY-POST]",He))}makePost(e,t){const n=ze(e);return new Oe(t,new Ge("[PRIORITY-POST]",n))}toString(){return".priority"}},Ke=Math.log(2);class Ye{constructor(e){this.count=parseInt(Math.log(e+1)/Ke,10),this.current_=this.count-1;const t=parseInt(Array(this.count+1).join("1"),2);this.bits_=e+1&t}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Qe=function(e,t,n,r){e.sort(t);const i=function(t,r){const s=r-t;let o,a;if(0===s)return null;if(1===s)return o=e[t],a=n?n(o):o,new Fe(a,o.node,Fe.BLACK,null,null);{const c=parseInt(s/2,10)+t,l=i(t,c),u=i(c+1,r);return o=e[c],a=n?n(o):o,new Fe(a,o.node,Fe.BLACK,l,u)}},s=function(t){let r=null,s=null,o=e.length;const a=function(t,r){const s=o-t,a=o;o-=t;const l=i(s+1,a),u=e[s],h=n?n(u):u;c(new Fe(h,u.node,r,null,l))},c=function(e){r?(r.left=e,r=e):(s=e,r=e)};for(let e=0;e<t.count;++e){const n=t.nextBitIsOne(),r=Math.pow(2,t.count-(e+1));n?a(r,Fe.BLACK):(a(r,Fe.BLACK),a(r,Fe.RED))}return s}(new Ye(e.length));return new $e(r||t,s)};let Xe;const Je={};class Ze{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,s.hu)(Je&&We,"ChildrenNode.ts has not been loaded"),Xe=Xe||new Ze({".priority":Je},{".priority":We}),Xe}get(e){const t=(0,s.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof $e?t:null}hasIndex(e){return(0,s.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,s.hu)(e!==De,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const n=[];let r=!1;const i=t.getIterator(Oe.Wrap);let o,a=i.getNext();for(;a;)r=r||e.isDefinedOn(a.node),n.push(a),a=i.getNext();o=r?Qe(n,e.getCompare()):Je;const c=e.toString(),l=Object.assign({},this.indexSet_);l[c]=e;const u=Object.assign({},this.indexes_);return u[c]=o,new Ze(u,l)}addToIndexes(e,t){const n=(0,s.UI)(this.indexes_,(n,r)=>{const i=(0,s.DV)(this.indexSet_,r);if((0,s.hu)(i,"Missing index implementation for "+r),n===Je){if(i.isDefinedOn(e.node)){const n=[],r=t.getIterator(Oe.Wrap);let s=r.getNext();for(;s;)s.name!==e.name&&n.push(s),s=r.getNext();return n.push(e),Qe(n,i.getCompare())}return Je}{const r=t.get(e.name);let i=n;return r&&(i=i.remove(new Oe(e.name,r))),i.insert(e,e.node)}});return new Ze(n,this.indexSet_)}removeFromIndexes(e,t){const n=(0,s.UI)(this.indexes_,n=>{if(n===Je)return n;{const r=t.get(e.name);return r?n.remove(new Oe(e.name,r)):n}});return new Ze(n,this.indexSet_)}}let et,tt=(()=>{class e{constructor(e,t,n){this.children_=e,this.priorityNode_=t,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&qe(this.priorityNode_),this.children_.isEmpty()&&(0,s.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return et||(et=new e(new $e(Ue),null,Ze.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||et}updatePriority(t){return this.children_.isEmpty()?this:new e(this.children_,t,this.indexMap_)}getImmediateChild(e){if(".priority"===e)return this.getPriority();{const t=this.children_.get(e);return null===t?et:t}}getChild(e){const t=de(e);return null===t?this:this.getImmediateChild(t).getChild(fe(e))}hasChild(e){return null!==this.children_.get(e)}updateImmediateChild(t,n){if((0,s.hu)(n,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(n);{const r=new Oe(t,n);let i,s;n.isEmpty()?(i=this.children_.remove(t),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(t,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?et:this.priorityNode_;return new e(i,o,s)}}updateChild(e,t){const n=de(e);if(null===n)return t;{(0,s.hu)(".priority"!==de(e)||1===pe(e),".priority must be the last token in a path");const r=this.getImmediateChild(n).updateChild(fe(e),t);return this.updateImmediateChild(n,r)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(We,(o,a)=>{n[o]=a.val(t),r++,s&&e.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!t&&s&&i<2*r){const e=[];for(const t in n)e[t]=n[t];return e}return t&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(null===this.lazyHash_){let e="";this.getPriority().isEmpty()||(e+="priority:"+je(this.getPriority().val())+":"),this.forEachChild(We,(t,n)=>{const r=n.hash();""!==r&&(e+=":"+t+":"+r)}),this.lazyHash_=""===e?"":v(e)}return this.lazyHash_}getPredecessorChildName(e,t,n){const r=this.resolveIndex_(n);if(r){const n=r.getPredecessorKey(new Oe(e,t));return n?n.name:null}return this.children_.getPredecessorKey(e)}getFirstChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.minKey();return e&&e.name}return this.children_.minKey()}getFirstChild(e){const t=this.getFirstChildName(e);return t?new Oe(t,this.children_.get(t)):null}getLastChildName(e){const t=this.resolveIndex_(e);if(t){const e=t.maxKey();return e&&e.name}return this.children_.maxKey()}getLastChild(e){const t=this.getLastChildName(e);return t?new Oe(t,this.children_.get(t)):null}forEachChild(e,t){const n=this.resolveIndex_(e);return n?n.inorderTraversal(e=>t(e.name,e.node)):this.children_.inorderTraversal(t)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getIteratorFrom(e,e=>e);{const n=this.children_.getIteratorFrom(e.name,Oe.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)<0;)n.getNext(),r=n.peek();return n}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,t){const n=this.resolveIndex_(t);if(n)return n.getReverseIteratorFrom(e,e=>e);{const n=this.children_.getReverseIteratorFrom(e.name,Oe.Wrap);let r=n.peek();for(;null!=r&&t.compare(r,e)>0;)n.getNext(),r=n.peek();return n}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===nt?-1:0}withIndex(t){if(t===De||this.indexMap_.hasIndex(t))return this;{const n=this.indexMap_.addIndex(t,this.children_);return new e(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===De||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const t=e;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()===t.children_.count()){const e=this.getIterator(We),n=t.getIterator(We);let r=e.getNext(),i=n.getNext();for(;r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1}return!1}}resolveIndex_(e){return e===De?null:this.indexMap_.get(e.toString())}}return e.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,e})();const nt=new class extends tt{constructor(){super(new $e(Ue),tt.EMPTY_NODE,Ze.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return tt.EMPTY_NODE}isEmpty(){return!1}};function rt(e,t=null){if(null===e)return tt.EMPTY_NODE;if("object"==typeof e&&".priority"in e&&(t=e[".priority"]),(0,s.hu)(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof e&&".value"in e&&null!==e[".value"]&&(e=e[".value"]),"object"!=typeof e||".sv"in e)return new Ge(e,rt(t));if(e instanceof Array){let n=tt.EMPTY_NODE;return M(e,(t,r)=>{if((0,s.r3)(e,t)&&"."!==t.substring(0,1)){const e=rt(r);!e.isLeafNode()&&e.isEmpty()||(n=n.updateImmediateChild(t,e))}}),n.updatePriority(rt(t))}{const n=[];let r=!1;if(M(e,(e,t)=>{if("."!==e.substring(0,1)){const i=rt(t);i.isEmpty()||(r=r||!i.getPriority().isEmpty(),n.push(new Oe(e,i)))}}),0===n.length)return tt.EMPTY_NODE;const i=Qe(n,Ve,e=>e.name,Ue);if(r){const e=Qe(n,We.getCompare());return new tt(i,rt(t),new Ze({".priority":e},{".priority":We}))}return new tt(i,rt(t),Ze.Default)}}Object.defineProperties(Oe,{MIN:{value:new Oe(x,tt.EMPTY_NODE)},MAX:{value:new Oe(N,nt)}}),Re.__EMPTY_NODE=tt.EMPTY_NODE,Ge.__childrenNodeConstructor=tt,Me=nt,He=nt,ze=rt;class it extends Pe{constructor(e){super(),this.indexPath_=e,(0,s.hu)(!_e(e)&&".priority"!==de(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const n=this.extractChild(e.node),r=this.extractChild(t.node),i=n.compareTo(r);return 0===i?O(e.name,t.name):i}makePost(e,t){const n=rt(e),r=tt.EMPTY_NODE.updateChild(this.indexPath_,n);return new Oe(t,r)}maxPost(){const e=tt.EMPTY_NODE.updateChild(this.indexPath_,nt);return new Oe(N,e)}toString(){return me(this.indexPath_,0).join("/")}}const st=new class extends Pe{compare(e,t){const n=e.node.compareTo(t.node);return 0===n?O(e.name,t.name):n}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Oe.MIN}maxPost(){return Oe.MAX}makePost(e,t){const n=rt(e);return new Oe(t,n)}toString(){return".value"}},ot="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",at=function(){let e=0;const t=[];return function(n){const r=n===e;let i;e=n;const o=new Array(8);for(i=7;i>=0;i--)o[i]=ot.charAt(n%64),n=Math.floor(n/64);(0,s.hu)(0===n,"Cannot push at time == 0");let a=o.join("");if(r){for(i=11;i>=0&&63===t[i];i--)t[i]=0;t[i]++}else for(i=0;i<12;i++)t[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)a+=ot.charAt(t[i]);return(0,s.hu)(20===a.length,"nextPushId: Length should be 20."),a}}(),ct=function(e){if("2147483647"===e)return"-";const t=V(e);if(null!=t)return""+(t+1);const n=new Array(e.length);for(let s=0;s<n.length;s++)n[s]=e.charAt(s);if(n.length<786)return n.push("-"),n.join("");let r=n.length-1;for(;r>=0&&"z"===n[r];)r--;if(-1===r)return N;const i=ot.charAt(ot.indexOf(n[r])+1);return n[r]=i,n.slice(0,r+1).join("")},lt=function(e){if("-2147483648"===e)return x;const t=V(e);if(null!=t)return""+(t-1);const n=new Array(e.length);for(let r=0;r<n.length;r++)n[r]=e.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=ot.charAt(ot.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function ut(e){return{type:"value",snapshotNode:e}}function ht(e,t){return{type:"child_added",snapshotNode:t,childName:e}}function dt(e,t){return{type:"child_removed",snapshotNode:t,childName:e}}function pt(e,t,n){return{type:"child_changed",snapshotNode:t,childName:e,oldSnap:n}}class ft{constructor(e){this.index_=e}updateChild(e,t,n,r,i,o){(0,s.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const a=e.getImmediateChild(t);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?e:(null!=o&&(n.isEmpty()?e.hasChild(t)?o.trackChildChange(dt(t,a)):(0,s.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(ht(t,n)):o.trackChildChange(pt(t,n,a))),e.isLeafNode()&&n.isEmpty()?e:e.updateImmediateChild(t,n).withIndex(this.index_))}updateFullNode(e,t,n){return null!=n&&(e.isLeafNode()||e.forEachChild(We,(e,r)=>{t.hasChild(e)||n.trackChildChange(dt(e,r))}),t.isLeafNode()||t.forEachChild(We,(t,r)=>{if(e.hasChild(t)){const i=e.getImmediateChild(t);i.equals(r)||n.trackChildChange(pt(t,r,i))}else n.trackChildChange(ht(t,r))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?tt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class gt{constructor(e){this.indexedFilter_=new ft(e.getIndex()),this.index_=e.getIndex(),this.startPost_=gt.getStartPost_(e),this.endPost_=gt.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,n,r,i,s){return this.matches(new Oe(t,n))||(n=tt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,n,r,i,s)}updateFullNode(e,t,n){t.isLeafNode()&&(t=tt.EMPTY_NODE);let r=t.withIndex(this.index_);r=r.updatePriority(tt.EMPTY_NODE);const i=this;return t.forEachChild(We,(e,t)=>{i.matches(new Oe(e,t))||(r=r.updateImmediateChild(e,tt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class mt{constructor(e){this.rangedFilter_=new gt(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,n,r,i,s){return this.rangedFilter_.matches(new Oe(t,n))||(n=tt.EMPTY_NODE),e.getImmediateChild(t).equals(n)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,n,r,i,s):this.fullLimitUpdateChild_(e,t,n,i,s)}updateFullNode(e,t,n){let r;if(t.isLeafNode()||t.isEmpty())r=tt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let e;r=tt.EMPTY_NODE.withIndex(this.index_),e=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let n=0;for(;e.hasNext()&&n<this.limit_;){const t=e.getNext();let i;if(i=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),t)<=0:this.index_.compare(t,this.rangedFilter_.getEndPost())<=0,!i)break;r=r.updateImmediateChild(t.name,t.node),n++}}else{let e,n,i,s;if(r=t.withIndex(this.index_),r=r.updatePriority(tt.EMPTY_NODE),this.reverse_){s=r.getReverseIterator(this.index_),e=this.rangedFilter_.getEndPost(),n=this.rangedFilter_.getStartPost();const t=this.index_.getCompare();i=(e,n)=>t(n,e)}else s=r.getIterator(this.index_),e=this.rangedFilter_.getStartPost(),n=this.rangedFilter_.getEndPost(),i=this.index_.getCompare();let o=0,a=!1;for(;s.hasNext();){const t=s.getNext();!a&&i(e,t)<=0&&(a=!0),a&&o<this.limit_&&i(t,n)<=0?o++:r=r.updateImmediateChild(t.name,tt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,r,n)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,n,r,i){let o;if(this.reverse_){const e=this.index_.getCompare();o=(t,n)=>e(n,t)}else o=this.index_.getCompare();const a=e;(0,s.hu)(a.numChildren()===this.limit_,"");const c=new Oe(t,n),l=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),u=this.rangedFilter_.matches(c);if(a.hasChild(t)){const e=a.getImmediateChild(t);let s=r.getChildAfterChild(this.index_,l,this.reverse_);for(;null!=s&&(s.name===t||a.hasChild(s.name));)s=r.getChildAfterChild(this.index_,s,this.reverse_);const h=null==s?1:o(s,c);if(u&&!n.isEmpty()&&h>=0)return null!=i&&i.trackChildChange(pt(t,n,e)),a.updateImmediateChild(t,n);{null!=i&&i.trackChildChange(dt(t,e));const n=a.updateImmediateChild(t,tt.EMPTY_NODE);return null!=s&&this.rangedFilter_.matches(s)?(null!=i&&i.trackChildChange(ht(s.name,s.node)),n.updateImmediateChild(s.name,s.node)):n}}return n.isEmpty()?e:u&&o(l,c)>=0?(null!=i&&(i.trackChildChange(dt(l.name,l.node)),i.trackChildChange(ht(t,n))),a.updateImmediateChild(t,n).updateImmediateChild(l.name,tt.EMPTY_NODE)):e}}class yt{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=We}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,s.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,s.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:x}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,s.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,s.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:N}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,s.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===We}copy(){const e=new yt;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function vt(e,t,n){const r=e.copy();return r.startSet_=!0,void 0===t&&(t=null),r.indexStartValue_=t,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function _t(e,t,n){const r=e.copy();return r.endSet_=!0,void 0===t&&(t=null),r.indexEndValue_=t,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function wt(e,t){const n=e.copy();return n.index_=t,n}function bt(e){const t={};if(e.isDefault())return t;let n;return e.index_===We?n="$priority":e.index_===st?n="$value":e.index_===De?n="$key":((0,s.hu)(e.index_ instanceof it,"Unrecognized index type!"),n=e.index_.toString()),t.orderBy=(0,s.Pz)(n),e.startSet_&&(t.startAt=(0,s.Pz)(e.indexStartValue_),e.startNameSet_&&(t.startAt+=","+(0,s.Pz)(e.indexStartName_))),e.endSet_&&(t.endAt=(0,s.Pz)(e.indexEndValue_),e.endNameSet_&&(t.endAt+=","+(0,s.Pz)(e.indexEndName_))),e.limitSet_&&(e.isViewFromLeft()?t.limitToFirst=e.limit_:t.limitToLast=e.limit_),t}function It(e){const t={};if(e.startSet_&&(t.sp=e.indexStartValue_,e.startNameSet_&&(t.sn=e.indexStartName_)),e.endSet_&&(t.ep=e.indexEndValue_,e.endNameSet_&&(t.en=e.indexEndName_)),e.limitSet_){t.l=e.limit_;let n=e.viewFrom_;""===n&&(n=e.isViewFromLeft()?"l":"r"),t.vf=n}return e.index_!==We&&(t.i=e.index_.toString()),t}class Ct extends ae{constructor(e,t,n,r){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=T("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,s.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,n,r){const i=e._path.toString();this.log_("Listen called for "+i+" "+e._queryIdentifier);const o=Ct.getListenId_(e,n),a={};this.listens_[o]=a;const c=bt(e._queryParams);this.restRequest_(i+".json",c,(e,t)=>{let c=t;if(404===e&&(c=null,e=null),null===e&&this.onDataUpdate_(i,c,!1,n),(0,s.DV)(this.listens_,o)===a){let t;t=e?401===e?"permission_denied":"rest_error:"+e:"ok",r(t,null)}})}unlisten(e,t){const n=Ct.getListenId_(e,t);delete this.listens_[n]}get(e){const t=bt(e._queryParams),n=e._path.toString(),r=new s.BH;return this.restRequest_(n+".json",t,(e,t)=>{let i=t;404===e&&(i=null,e=null),null===e?(this.onDataUpdate_(n,i,!1,null),r.resolve(i)):r.reject(new Error(i))}),r.promise}refreshAuthToken(e){}restRequest_(e,t={},n){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,i])=>{r&&r.accessToken&&(t.auth=r.accessToken),i&&i.token&&(t.ac=i.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,s.xO)(t);this.log_("Sending REST request for "+o);const a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&4===a.readyState){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let t=null;if(a.status>=200&&a.status<300){try{t=(0,s.cI)(a.responseText)}catch(e){k("Failed to parse JSON response for "+o+": "+a.responseText)}n(null,t)}else 401!==a.status&&404!==a.status&&k("Got unsuccessful REST response for "+o+" Status: "+a.status),n(a.status);n=null}},a.open("GET",o,!0),a.send()})}}class Tt{constructor(){this.rootNode_=tt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Et(){return{value:null,children:new Map}}function St(e,t,n){if(_e(t))e.value=n,e.children.clear();else if(null!==e.value)e.value=e.value.updateChild(t,n);else{const r=de(t);e.children.has(r)||e.children.set(r,Et()),St(e.children.get(r),t=fe(t),n)}}function kt(e,t){if(_e(t))return e.value=null,e.children.clear(),!0;if(null!==e.value){if(e.value.isLeafNode())return!1;{const n=e.value;return e.value=null,n.forEachChild(We,(t,n)=>{St(e,new ue(t),n)}),kt(e,t)}}if(e.children.size>0){const n=de(t);return t=fe(t),e.children.has(n)&&kt(e.children.get(n),t)&&e.children.delete(n),0===e.children.size}return!0}function At(e,t,n){null!==e.value?n(t,e.value):function(e,t){e.children.forEach((e,n)=>{t(n,e)})}(e,(e,r)=>{At(r,new ue(t.toString()+"/"+e),n)})}class xt{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&M(this.last_,(e,n)=>{t[e]=t[e]-n}),this.last_=e,t}}class Nt{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new xt(e);const n=1e4+2e4*Math.random();j(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){const e=this.statsListener_.get(),t={};let n=!1;M(e,(e,r)=>{r>0&&(0,s.r3)(this.statsToReport_,e)&&(t[e]=r,n=!0)}),n&&this.server_.reportStats(t),j(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Ot=(()=>(function(e){e[e.OVERWRITE=0]="OVERWRITE",e[e.MERGE=1]="MERGE",e[e.ACK_USER_WRITE=2]="ACK_USER_WRITE",e[e.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(Ot||(Ot={})),Ot))();function Pt(e){return{fromUser:!1,fromServer:!0,queryId:e,tagged:!0}}class Rt{constructor(e,t,n){this.path=e,this.affectedTree=t,this.revert=n,this.type=Ot.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(_e(this.path)){if(null!=this.affectedTree.value)return(0,s.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new ue(e));return new Rt(he(),t,this.revert)}}return(0,s.hu)(de(this.path)===e,"operationForChild called for unrelated child."),new Rt(fe(this.path),this.affectedTree,this.revert)}}class Dt{constructor(e,t){this.source=e,this.path=t,this.type=Ot.LISTEN_COMPLETE}operationForChild(e){return _e(this.path)?new Dt(this.source,he()):new Dt(this.source,fe(this.path))}}class Lt{constructor(e,t,n){this.source=e,this.path=t,this.snap=n,this.type=Ot.OVERWRITE}operationForChild(e){return _e(this.path)?new Lt(this.source,he(),this.snap.getImmediateChild(e)):new Lt(this.source,fe(this.path),this.snap)}}class Mt{constructor(e,t,n){this.source=e,this.path=t,this.children=n,this.type=Ot.MERGE}operationForChild(e){if(_e(this.path)){const t=this.children.subtree(new ue(e));return t.isEmpty()?null:t.value?new Lt(this.source,he(),t.value):new Mt(this.source,he(),t)}return(0,s.hu)(de(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Mt(this.source,fe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Ft{constructor(e,t,n){this.node_=e,this.fullyInitialized_=t,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(_e(e))return this.isFullyInitialized()&&!this.filtered_;const t=de(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class $t{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Vt(e,t,n,r,i,o){const a=r.filter(e=>e.type===n);a.sort((t,n)=>function(e,t,n){if(null==t.childName||null==n.childName)throw(0,s.g5)("Should only compare child_ events.");const r=new Oe(t.childName,t.snapshotNode),i=new Oe(n.childName,n.snapshotNode);return e.index_.compare(r,i)}(e,t,n)),a.forEach(n=>{const r=function(e,t,n){return"value"===t.type||"child_removed"===t.type||(t.prevName=n.getPredecessorChildName(t.childName,t.snapshotNode,e.index_)),t}(e,n,o);i.forEach(i=>{i.respondsTo(n.type)&&t.push(i.createEvent(r,e.query_))})})}function Ut(e,t){return{eventCache:e,serverCache:t}}function jt(e,t,n,r){return Ut(new Ft(t,n,r),e.serverCache)}function qt(e,t,n,r){return Ut(e.eventCache,new Ft(t,n,r))}function Bt(e){return e.eventCache.isFullyInitialized()?e.eventCache.getNode():null}function zt(e){return e.serverCache.isFullyInitialized()?e.serverCache.getNode():null}let Ht;class Gt{constructor(e,t=(()=>(Ht||(Ht=new $e(P)),Ht))()){this.value=e,this.children=t}static fromObject(e){let t=new Gt(null);return M(e,(e,n)=>{t=t.set(new ue(e),n)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:he(),value:this.value};if(_e(e))return null;{const n=de(e),r=this.children.get(n);if(null!==r){const i=r.findRootMostMatchingPathAndValue(fe(e),t);return null!=i?{path:ve(new ue(n),i.path),value:i.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(_e(e))return this;{const t=de(e),n=this.children.get(t);return null!==n?n.subtree(fe(e)):new Gt(null)}}set(e,t){if(_e(e))return new Gt(t,this.children);{const n=de(e),r=(this.children.get(n)||new Gt(null)).set(fe(e),t),i=this.children.insert(n,r);return new Gt(this.value,i)}}remove(e){if(_e(e))return this.children.isEmpty()?new Gt(null):new Gt(null,this.children);{const t=de(e),n=this.children.get(t);if(n){const r=n.remove(fe(e));let i;return i=r.isEmpty()?this.children.remove(t):this.children.insert(t,r),null===this.value&&i.isEmpty()?new Gt(null):new Gt(this.value,i)}return this}}get(e){if(_e(e))return this.value;{const t=de(e),n=this.children.get(t);return n?n.get(fe(e)):null}}setTree(e,t){if(_e(e))return t;{const n=de(e),r=(this.children.get(n)||new Gt(null)).setTree(fe(e),t);let i;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new Gt(this.value,i)}}fold(e){return this.fold_(he(),e)}fold_(e,t){const n={};return this.children.inorderTraversal((r,i)=>{n[r]=i.fold_(ve(e,r),t)}),t(e,this.value,n)}findOnPath(e,t){return this.findOnPath_(e,he(),t)}findOnPath_(e,t,n){const r=!!this.value&&n(t,this.value);if(r)return r;if(_e(e))return null;{const r=de(e),i=this.children.get(r);return i?i.findOnPath_(fe(e),ve(t,r),n):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,he(),t)}foreachOnPath_(e,t,n){if(_e(e))return this;{this.value&&n(t,this.value);const r=de(e),i=this.children.get(r);return i?i.foreachOnPath_(fe(e),ve(t,r),n):new Gt(null)}}foreach(e){this.foreach_(he(),e)}foreach_(e,t){this.children.inorderTraversal((n,r)=>{r.foreach_(ve(e,n),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,n)=>{n.value&&e(t,n.value)})}}class Wt{constructor(e){this.writeTree_=e}static empty(){return new Wt(new Gt(null))}}function Kt(e,t,n){if(_e(t))return new Wt(new Gt(n));{const r=e.writeTree_.findRootMostValueAndPath(t);if(null!=r){const i=r.path;let s=r.value;const o=we(i,t);return s=s.updateChild(o,n),new Wt(e.writeTree_.set(i,s))}{const r=new Gt(n),i=e.writeTree_.setTree(t,r);return new Wt(i)}}}function Yt(e,t,n){let r=e;return M(n,(e,n)=>{r=Kt(r,ve(t,e),n)}),r}function Qt(e,t){if(_e(t))return Wt.empty();{const n=e.writeTree_.setTree(t,new Gt(null));return new Wt(n)}}function Xt(e,t){return null!=Jt(e,t)}function Jt(e,t){const n=e.writeTree_.findRootMostValueAndPath(t);return null!=n?e.writeTree_.get(n.path).getChild(we(n.path,t)):null}function Zt(e){const t=[],n=e.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(We,(e,n)=>{t.push(new Oe(e,n))}):e.writeTree_.children.inorderTraversal((e,n)=>{null!=n.value&&t.push(new Oe(e,n.value))}),t}function en(e,t){if(_e(t))return e;{const n=Jt(e,t);return new Wt(null!=n?new Gt(n):e.writeTree_.subtree(t))}}function tn(e){return e.writeTree_.isEmpty()}function nn(e,t){return rn(he(),e.writeTree_,t)}function rn(e,t,n){if(null!=t.value)return n.updateChild(e,t.value);{let r=null;return t.children.inorderTraversal((t,i)=>{".priority"===t?((0,s.hu)(null!==i.value,"Priority writes must always be leaf nodes"),r=i.value):n=rn(ve(e,t),i,n)}),n.getChild(e).isEmpty()||null===r||(n=n.updateChild(ve(e,".priority"),r)),n}}function sn(e,t){return mn(t,e)}function on(e,t){if(e.snap)return Ce(e.path,t);for(const n in e.children)if(e.children.hasOwnProperty(n)&&Ce(ve(e.path,n),t))return!0;return!1}function an(e){return e.visible}function cn(e,t,n){let r=Wt.empty();for(let i=0;i<e.length;++i){const o=e[i];if(t(o)){const e=o.path;let t;if(o.snap)Ce(n,e)?(t=we(n,e),r=Kt(r,t,o.snap)):Ce(e,n)&&(t=we(e,n),r=Kt(r,he(),o.snap.getChild(t)));else{if(!o.children)throw(0,s.g5)("WriteRecord should have .snap or .children");if(Ce(n,e))t=we(n,e),r=Yt(r,t,o.children);else if(Ce(e,n))if(t=we(e,n),_e(t))r=Yt(r,he(),o.children);else{const e=(0,s.DV)(o.children,de(t));if(e){const n=e.getChild(fe(t));r=Kt(r,he(),n)}}}}}return r}function ln(e,t,n,r,i){if(r||i){const s=en(e.visibleWrites,t);return!i&&tn(s)?n:i||null!=n||Xt(s,he())?nn(cn(e.allWrites,function(e){return(e.visible||i)&&(!r||!~r.indexOf(e.writeId))&&(Ce(e.path,t)||Ce(t,e.path))},t),n||tt.EMPTY_NODE):null}{const r=Jt(e.visibleWrites,t);if(null!=r)return r;{const r=en(e.visibleWrites,t);return tn(r)?n:null!=n||Xt(r,he())?nn(r,n||tt.EMPTY_NODE):null}}}function un(e,t,n,r){return ln(e.writeTree,e.treePath,t,n,r)}function hn(e,t){return function(e,t,n){let r=tt.EMPTY_NODE;const i=Jt(e.visibleWrites,t);if(i)return i.isLeafNode()||i.forEachChild(We,(e,t)=>{r=r.updateImmediateChild(e,t)}),r;if(n){const i=en(e.visibleWrites,t);return n.forEachChild(We,(e,t)=>{const n=nn(en(i,new ue(e)),t);r=r.updateImmediateChild(e,n)}),Zt(i).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)}),r}return Zt(en(e.visibleWrites,t)).forEach(e=>{r=r.updateImmediateChild(e.name,e.node)}),r}(e.writeTree,e.treePath,t)}function dn(e,t,n,r){return function(e,t,n,r,i){(0,s.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const o=ve(t,n);if(Xt(e.visibleWrites,o))return null;{const t=en(e.visibleWrites,o);return tn(t)?i.getChild(n):nn(t,i.getChild(n))}}(e.writeTree,e.treePath,t,n,r)}function pn(e,t){return function(e,t){return Jt(e.visibleWrites,t)}(e.writeTree,ve(e.treePath,t))}function fn(e,t,n){return function(e,t,n,r){const i=ve(t,n),s=Jt(e.visibleWrites,i);return null!=s?s:r.isCompleteForChild(n)?nn(en(e.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(e.writeTree,e.treePath,t,n)}function gn(e,t){return mn(ve(e.treePath,t),e.writeTree)}function mn(e,t){return{treePath:e,writeTree:t}}class yn{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,n=e.childName;(0,s.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,s.hu)(".priority"!==n,"Only non-priority child changes can be tracked.");const r=this.changeMap.get(n);if(r){const i=r.type;if("child_added"===t&&"child_removed"===i)this.changeMap.set(n,pt(n,e.snapshotNode,r.snapshotNode));else if("child_removed"===t&&"child_added"===i)this.changeMap.delete(n);else if("child_removed"===t&&"child_changed"===i)this.changeMap.set(n,dt(n,r.oldSnap));else if("child_changed"===t&&"child_added"===i)this.changeMap.set(n,ht(n,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==i)throw(0,s.g5)("Illegal combination of changes: "+e+" occurred after "+r);this.changeMap.set(n,pt(n,e.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,e)}getChanges(){return Array.from(this.changeMap.values())}}const vn=new class{getCompleteChild(e){return null}getChildAfterChild(e,t,n){return null}};class _n{constructor(e,t,n=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=n}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const t=null!=this.optCompleteServerCache_?new Ft(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return fn(this.writes_,e,t)}}getChildAfterChild(e,t,n){const r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:zt(this.viewCache_),i=function(e,t,n,r,i,s){return function(e,t,n,r,i,s,o){let a;const c=en(e.visibleWrites,t),l=Jt(c,he());if(null!=l)a=l;else{if(null==n)return[];a=nn(c,n)}if(a=a.withIndex(o),a.isEmpty()||a.isLeafNode())return[];{const e=[],t=o.getCompare(),n=s?a.getReverseIteratorFrom(r,o):a.getIteratorFrom(r,o);let i=n.getNext();for(;i&&e.length<1;)0!==t(i,r)&&e.push(i),i=n.getNext();return e}}(e.writeTree,e.treePath,t,n,0,i,s)}(this.writes_,r,t,0,n,e);return 0===i.length?null:i[0]}}function wn(e,t,n,r,i,o){const a=t.eventCache;if(null!=pn(r,n))return t;{let c,l;if(_e(n))if((0,s.hu)(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){const n=zt(t),i=hn(r,n instanceof tt?n:tt.EMPTY_NODE);c=e.filter.updateFullNode(t.eventCache.getNode(),i,o)}else{const n=un(r,zt(t));c=e.filter.updateFullNode(t.eventCache.getNode(),n,o)}else{const u=de(n);if(".priority"===u){(0,s.hu)(1===pe(n),"Can't have a priority with additional path components");const i=a.getNode();l=t.serverCache.getNode();const o=dn(r,n,i,l);c=null!=o?e.filter.updatePriority(i,o):a.getNode()}else{const s=fe(n);let h;if(a.isCompleteForChild(u)){l=t.serverCache.getNode();const e=dn(r,n,a.getNode(),l);h=null!=e?a.getNode().getImmediateChild(u).updateChild(s,e):a.getNode().getImmediateChild(u)}else h=fn(r,u,t.serverCache);c=null!=h?e.filter.updateChild(a.getNode(),u,h,s,i,o):a.getNode()}}return jt(t,c,a.isFullyInitialized()||_e(n),e.filter.filtersNodes())}}function bn(e,t,n,r,i,s,o,a){const c=t.serverCache;let l;const u=o?e.filter:e.filter.getIndexedFilter();if(_e(n))l=u.updateFullNode(c.getNode(),r,null);else if(u.filtersNodes()&&!c.isFiltered()){const e=c.getNode().updateChild(n,r);l=u.updateFullNode(c.getNode(),e,null)}else{const e=de(n);if(!c.isCompleteForPath(n)&&pe(n)>1)return t;const i=fe(n),s=c.getNode().getImmediateChild(e).updateChild(i,r);l=".priority"===e?u.updatePriority(c.getNode(),s):u.updateChild(c.getNode(),e,s,i,vn,null)}const h=qt(t,l,c.isFullyInitialized()||_e(n),u.filtersNodes());return wn(e,h,n,i,new _n(i,h,s),a)}function In(e,t,n,r,i,s,o){const a=t.eventCache;let c,l;const u=new _n(i,t,s);if(_e(n))l=e.filter.updateFullNode(t.eventCache.getNode(),r,o),c=jt(t,l,!0,e.filter.filtersNodes());else{const i=de(n);if(".priority"===i)l=e.filter.updatePriority(t.eventCache.getNode(),r),c=jt(t,l,a.isFullyInitialized(),a.isFiltered());else{const s=fe(n),l=a.getNode().getImmediateChild(i);let h;if(_e(s))h=r;else{const e=u.getCompleteChild(i);h=null!=e?".priority"===ge(s)&&e.getChild(ye(s)).isEmpty()?e:e.updateChild(s,r):tt.EMPTY_NODE}c=l.equals(h)?t:jt(t,e.filter.updateChild(a.getNode(),i,h,s,u,o),a.isFullyInitialized(),e.filter.filtersNodes())}}return c}function Cn(e,t){return e.eventCache.isCompleteForChild(t)}function Tn(e,t,n){return n.foreach((e,n)=>{t=t.updateChild(e,n)}),t}function En(e,t,n,r,i,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let c,l=t;c=_e(n)?r:new Gt(null).setTree(n,r);const u=t.serverCache.getNode();return c.children.inorderTraversal((n,r)=>{if(u.hasChild(n)){const c=Tn(0,t.serverCache.getNode().getImmediateChild(n),r);l=bn(e,l,new ue(n),c,i,s,o,a)}}),c.children.inorderTraversal((n,r)=>{const c=!t.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!u.hasChild(n)&&!c){const c=Tn(0,t.serverCache.getNode().getImmediateChild(n),r);l=bn(e,l,new ue(n),c,i,s,o,a)}}),l}class Sn{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const n=this.query_._queryParams,r=new ft(n.getIndex()),i=(s=n).loadsAllData()?new ft(s.getIndex()):s.hasLimit()?new mt(s):new gt(s);var s;this.processor_=function(e){return{filter:e}}(i);const o=t.serverCache,a=t.eventCache,c=r.updateFullNode(tt.EMPTY_NODE,o.getNode(),null),l=i.updateFullNode(tt.EMPTY_NODE,a.getNode(),null),u=new Ft(c,o.isFullyInitialized(),r.filtersNodes()),h=new Ft(l,a.isFullyInitialized(),i.filtersNodes());this.viewCache_=Ut(h,u),this.eventGenerator_=new $t(this.query_)}get query(){return this.query_}}function kn(e,t){const n=zt(e.viewCache_);return n&&(e.query._queryParams.loadsAllData()||!_e(t)&&!n.getImmediateChild(de(t)).isEmpty())?n.getChild(t):null}function An(e){return 0===e.eventRegistrations_.length}function xn(e,t,n){const r=[];if(n){(0,s.hu)(null==t,"A cancel should cancel all event registrations.");const i=e.query._path;e.eventRegistrations_.forEach(e=>{const t=e.createCancelEvent(n,i);t&&r.push(t)})}if(t){let n=[];for(let r=0;r<e.eventRegistrations_.length;++r){const i=e.eventRegistrations_[r];if(i.matches(t)){if(t.hasAnyCallback()){n=n.concat(e.eventRegistrations_.slice(r+1));break}}else n.push(i)}e.eventRegistrations_=n}else e.eventRegistrations_=[];return r}function Nn(e,t,n,r){t.type===Ot.MERGE&&null!==t.source.queryId&&((0,s.hu)(zt(e.viewCache_),"We should always have a full cache before handling merges"),(0,s.hu)(Bt(e.viewCache_),"Missing event cache, even though we have a server cache"));const i=e.viewCache_,o=function(e,t,n,r,i){const o=new yn;let a,c;if(n.type===Ot.OVERWRITE){const l=n;l.source.fromUser?a=In(e,t,l.path,l.snap,r,i,o):((0,s.hu)(l.source.fromServer,"Unknown source."),c=l.source.tagged||t.serverCache.isFiltered()&&!_e(l.path),a=bn(e,t,l.path,l.snap,r,i,c,o))}else if(n.type===Ot.MERGE){const l=n;l.source.fromUser?a=function(e,t,n,r,i,s,o){let a=t;return r.foreach((r,c)=>{const l=ve(n,r);Cn(t,de(l))&&(a=In(e,a,l,c,i,s,o))}),r.foreach((r,c)=>{const l=ve(n,r);Cn(t,de(l))||(a=In(e,a,l,c,i,s,o))}),a}(e,t,l.path,l.children,r,i,o):((0,s.hu)(l.source.fromServer,"Unknown source."),c=l.source.tagged||t.serverCache.isFiltered(),a=En(e,t,l.path,l.children,r,i,c,o))}else if(n.type===Ot.ACK_USER_WRITE){const c=n;a=c.revert?function(e,t,n,r,i,o){let a;if(null!=pn(r,n))return t;{const c=new _n(r,t,i),l=t.eventCache.getNode();let u;if(_e(n)||".priority"===de(n)){let n;if(t.serverCache.isFullyInitialized())n=un(r,zt(t));else{const e=t.serverCache.getNode();(0,s.hu)(e instanceof tt,"serverChildren would be complete if leaf node"),n=hn(r,e)}n=n,u=e.filter.updateFullNode(l,n,o)}else{const i=de(n);let s=fn(r,i,t.serverCache);null==s&&t.serverCache.isCompleteForChild(i)&&(s=l.getImmediateChild(i)),u=null!=s?e.filter.updateChild(l,i,s,fe(n),c,o):t.eventCache.getNode().hasChild(i)?e.filter.updateChild(l,i,tt.EMPTY_NODE,fe(n),c,o):l,u.isEmpty()&&t.serverCache.isFullyInitialized()&&(a=un(r,zt(t)),a.isLeafNode()&&(u=e.filter.updateFullNode(u,a,o)))}return a=t.serverCache.isFullyInitialized()||null!=pn(r,he()),jt(t,u,a,e.filter.filtersNodes())}}(e,t,c.path,r,i,o):function(e,t,n,r,i,s,o){if(null!=pn(i,n))return t;const a=t.serverCache.isFiltered(),c=t.serverCache;if(null!=r.value){if(_e(n)&&c.isFullyInitialized()||c.isCompleteForPath(n))return bn(e,t,n,c.getNode().getChild(n),i,s,a,o);if(_e(n)){let r=new Gt(null);return c.getNode().forEachChild(De,(e,t)=>{r=r.set(new ue(e),t)}),En(e,t,n,r,i,s,a,o)}return t}{let l=new Gt(null);return r.foreach((e,t)=>{const r=ve(n,e);c.isCompleteForPath(r)&&(l=l.set(e,c.getNode().getChild(r)))}),En(e,t,n,l,i,s,a,o)}}(e,t,c.path,c.affectedTree,r,i,o)}else{if(n.type!==Ot.LISTEN_COMPLETE)throw(0,s.g5)("Unknown operation type: "+n.type);a=function(e,t,n,r,i){const s=t.serverCache;return wn(e,qt(t,s.getNode(),s.isFullyInitialized()||_e(n),s.isFiltered()),n,r,vn,i)}(e,t,n.path,r,o)}const l=o.getChanges();return function(e,t,n){const r=t.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Bt(e);(n.length>0||!e.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(ut(Bt(t)))}}(t,a,l),{viewCache:a,changes:l}}(e.processor_,i,t,n,r);var a,c;return a=e.processor_,(0,s.hu)((c=o.viewCache).eventCache.getNode().isIndexed(a.filter.getIndex()),"Event snap not indexed"),(0,s.hu)(c.serverCache.getNode().isIndexed(a.filter.getIndex()),"Server snap not indexed"),(0,s.hu)(o.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),e.viewCache_=o.viewCache,On(e,o.changes,o.viewCache.eventCache.getNode(),null)}function On(e,t,n,r){return function(e,t,n,r){const i=[],s=[];return t.forEach(t=>{"child_changed"===t.type&&e.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&s.push({type:"child_moved",snapshotNode:t.snapshotNode,childName:t.childName})}),Vt(e,i,"child_removed",t,r,n),Vt(e,i,"child_added",t,r,n),Vt(e,i,"child_moved",s,r,n),Vt(e,i,"child_changed",t,r,n),Vt(e,i,"value",t,r,n),i}(e.eventGenerator_,t,n,r?[r]:e.eventRegistrations_)}let Pn,Rn;class Dn{constructor(){this.views=new Map}}function Ln(e,t,n,r){const i=t.source.queryId;if(null!==i){const o=e.views.get(i);return(0,s.hu)(null!=o,"SyncTree gave us an op for an invalid query."),Nn(o,t,n,r)}{let i=[];for(const s of e.views.values())i=i.concat(Nn(s,t,n,r));return i}}function Mn(e,t,n,r,i){const s=e.views.get(t._queryIdentifier);if(!s){let e=un(n,i?r:null),s=!1;e?s=!0:r instanceof tt?(e=hn(n,r),s=!1):(e=tt.EMPTY_NODE,s=!1);const o=Ut(new Ft(e,s,!1),new Ft(r,i,!1));return new Sn(t,o)}return s}function Fn(e){const t=[];for(const n of e.views.values())n.query._queryParams.loadsAllData()||t.push(n);return t}function $n(e,t){let n=null;for(const r of e.views.values())n=n||kn(r,t);return n}function Vn(e,t){return t._queryParams.loadsAllData()?qn(e):e.views.get(t._queryIdentifier)}function Un(e,t){return null!=Vn(e,t)}function jn(e){return null!=qn(e)}function qn(e){for(const t of e.views.values())if(t.query._queryParams.loadsAllData())return t;return null}let Bn=1;class zn{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Gt(null),this.pendingWriteTree_={visibleWrites:Wt.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Hn(e,t,n,r,i){return function(e,t,n,r,i){(0,s.hu)(r>e.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),e.allWrites.push({path:t,snap:n,writeId:r,visible:i}),i&&(e.visibleWrites=Kt(e.visibleWrites,t,n)),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r,i),i?Xn(e,new Lt({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,n)):[]}function Gn(e,t,n=!1){const r=function(e,t){for(let n=0;n<e.allWrites.length;n++){const r=e.allWrites[n];if(r.writeId===t)return r}return null}(e.pendingWriteTree_,t);if(function(e,t){const n=e.allWrites.findIndex(e=>e.writeId===t);(0,s.hu)(n>=0,"removeWrite called with nonexistent writeId.");const r=e.allWrites[n];e.allWrites.splice(n,1);let i=r.visible,o=!1,a=e.allWrites.length-1;for(;i&&a>=0;){const t=e.allWrites[a];t.visible&&(a>=n&&on(t,r.path)?i=!1:Ce(r.path,t.path)&&(o=!0)),a--}return!!i&&(o?(function(e){e.visibleWrites=cn(e.allWrites,an,he()),e.lastWriteId=e.allWrites.length>0?e.allWrites[e.allWrites.length-1].writeId:-1}(e),!0):(r.snap?e.visibleWrites=Qt(e.visibleWrites,r.path):M(r.children,t=>{e.visibleWrites=Qt(e.visibleWrites,ve(r.path,t))}),!0))}(e.pendingWriteTree_,t)){let t=new Gt(null);return null!=r.snap?t=t.set(he(),!0):M(r.children,e=>{t=t.set(new ue(e),!0)}),Xn(e,new Rt(r.path,t,n))}return[]}function Wn(e,t,n){return Xn(e,new Lt({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,n))}function Kn(e,t,n,r){const i=t._path,o=e.syncPointTree_.get(i);let a=[];if(o&&("default"===t._queryIdentifier||Un(o,t))){const c=function(e,t,n,r){const i=t._queryIdentifier,o=[];let a=[];const c=jn(e);if("default"===i)for(const[s,l]of e.views.entries())a=a.concat(xn(l,n,r)),An(l)&&(e.views.delete(s),l.query._queryParams.loadsAllData()||o.push(l.query));else{const t=e.views.get(i);t&&(a=a.concat(xn(t,n,r)),An(t)&&(e.views.delete(i),t.query._queryParams.loadsAllData()||o.push(t.query)))}return c&&!jn(e)&&o.push(new((0,s.hu)(Pn,"Reference.ts has not been loaded"),Pn)(t._repo,t._path)),{removed:o,events:a}}(o,t,n,r);0===o.views.size&&(e.syncPointTree_=e.syncPointTree_.remove(i));const l=c.removed;a=c.events;const u=-1!==l.findIndex(e=>e._queryParams.loadsAllData()),h=e.syncPointTree_.findOnPath(i,(e,t)=>jn(t));if(u&&!h){const t=e.syncPointTree_.subtree(i);if(!t.isEmpty()){const n=function(e){return e.fold((e,t,n)=>{if(t&&jn(t))return[qn(t)];{let e=[];return t&&(e=Fn(t)),M(n,(t,n)=>{e=e.concat(n)}),e}})}(t);for(let t=0;t<n.length;++t){const r=n[t],i=r.query,s=er(e,r);e.listenProvider_.startListening(or(i),tr(e,i),s.hashFn,s.onComplete)}}}if(!h&&l.length>0&&!r)if(u){const n=null;e.listenProvider_.stopListening(or(t),n)}else l.forEach(t=>{const n=e.queryToTagMap.get(nr(t));e.listenProvider_.stopListening(or(t),n)});!function(e,t){for(let n=0;n<t.length;++n){const r=t[n];if(!r._queryParams.loadsAllData()){const t=nr(r),n=e.queryToTagMap.get(t);e.queryToTagMap.delete(t),e.tagToQueryMap.delete(n)}}}(e,l)}return a}function Yn(e,t,n){const r=t._path;let i=null,o=!1;e.syncPointTree_.foreachOnPath(r,(e,t)=>{const n=we(e,r);i=i||$n(t,n),o=o||jn(t)});let a,c=e.syncPointTree_.get(r);c?(o=o||jn(c),i=i||$n(c,he())):(c=new Dn,e.syncPointTree_=e.syncPointTree_.set(r,c)),null!=i?a=!0:(a=!1,i=tt.EMPTY_NODE,e.syncPointTree_.subtree(r).foreachChild((e,t)=>{const n=$n(t,he());n&&(i=i.updateImmediateChild(e,n))}));const l=Un(c,t);if(!l&&!t._queryParams.loadsAllData()){const n=nr(t);(0,s.hu)(!e.queryToTagMap.has(n),"View does not exist, but we have a tag");const r=Bn++;e.queryToTagMap.set(n,r),e.tagToQueryMap.set(r,n)}let u=function(e,t,n,r,i,s){const o=Mn(e,t,r,i,s);return e.views.has(t._queryIdentifier)||e.views.set(t._queryIdentifier,o),function(e,t){e.eventRegistrations_.push(t)}(o,n),function(e,t){const n=e.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(We,(e,t)=>{r.push(ht(e,t))}),n.isFullyInitialized()&&r.push(ut(n.getNode())),On(e,r,n.getNode(),t)}(o,n)}(c,t,n,sn(e.pendingWriteTree_,r),i,a);if(!l&&!o){const n=Vn(c,t);u=u.concat(function(e,t,n){const r=t._path,i=tr(e,t),o=er(e,n),a=e.listenProvider_.startListening(or(t),i,o.hashFn,o.onComplete),c=e.syncPointTree_.subtree(r);if(i)(0,s.hu)(!jn(c.value),"If we're adding a query, it shouldn't be shadowed");else{const t=c.fold((e,t,n)=>{if(!_e(e)&&t&&jn(t))return[qn(t).query];{let e=[];return t&&(e=e.concat(Fn(t).map(e=>e.query))),M(n,(t,n)=>{e=e.concat(n)}),e}});for(let n=0;n<t.length;++n){const r=t[n];e.listenProvider_.stopListening(or(r),tr(e,r))}}return a}(e,t,n))}return u}function Qn(e,t,n){const r=e.pendingWriteTree_,i=e.syncPointTree_.findOnPath(t,(e,n)=>{const r=$n(n,we(e,t));if(r)return r});return ln(r,t,i,n,!0)}function Xn(e,t){return Jn(t,e.syncPointTree_,null,sn(e.pendingWriteTree_,he()))}function Jn(e,t,n,r){if(_e(e.path))return Zn(e,t,n,r);{const i=t.get(he());null==n&&null!=i&&(n=$n(i,he()));let s=[];const o=de(e.path),a=e.operationForChild(o),c=t.children.get(o);if(c&&a){const e=n?n.getImmediateChild(o):null,t=gn(r,o);s=s.concat(Jn(a,c,e,t))}return i&&(s=s.concat(Ln(i,e,r,n))),s}}function Zn(e,t,n,r){const i=t.get(he());null==n&&null!=i&&(n=$n(i,he()));let s=[];return t.children.inorderTraversal((t,i)=>{const o=n?n.getImmediateChild(t):null,a=gn(r,t),c=e.operationForChild(t);c&&(s=s.concat(Zn(c,i,o,a)))}),i&&(s=s.concat(Ln(i,e,r,n))),s}function er(e,t){const n=t.query,r=tr(e,n);return{hashFn:()=>(function(e){return e.viewCache_.serverCache.getNode()}(t)||tt.EMPTY_NODE).hash(),onComplete:t=>{if("ok"===t)return r?function(e,t,n){const r=rr(e,n);if(r){const n=ir(r),i=n.path,s=n.queryId,o=we(i,t);return sr(e,i,new Dt(Pt(s),o))}return[]}(e,n._path,r):function(e,t){return Xn(e,new Dt({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t))}(e,n._path);{const r=function(e,t){let n="Unknown Error";"too_big"===e?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===e?n="Client doesn't have permission to access the desired data.":"unavailable"===e&&(n="The service is unavailable");const r=new Error(e+" at "+t._path.toString()+": "+n);return r.code=e.toUpperCase(),r}(t,n);return Kn(e,n,null,r)}}}}function tr(e,t){const n=nr(t);return e.queryToTagMap.get(n)}function nr(e){return e._path.toString()+"$"+e._queryIdentifier}function rr(e,t){return e.tagToQueryMap.get(t)}function ir(e){const t=e.indexOf("$");return(0,s.hu)(-1!==t&&t<e.length-1,"Bad queryKey."),{queryId:e.substr(t+1),path:new ue(e.substr(0,t))}}function sr(e,t,n){const r=e.syncPointTree_.get(t);return(0,s.hu)(r,"Missing sync point for query tag that we're tracking"),Ln(r,n,sn(e.pendingWriteTree_,t),null)}function or(e){return e._queryParams.loadsAllData()&&!e._queryParams.isDefault()?new((0,s.hu)(Rn,"Reference.ts has not been loaded"),Rn)(e._repo,e._path):e}class ar{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new ar(t)}node(){return this.node_}}class cr{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=ve(this.path_,e);return new cr(this.syncTree_,t)}node(){return Qn(this.syncTree_,this.path_)}}const lr=function(e,t,n){return e&&"object"==typeof e?((0,s.hu)(".sv"in e,"Unexpected leaf node or priority contents"),"string"==typeof e[".sv"]?ur(e[".sv"],t,n):"object"==typeof e[".sv"]?hr(e[".sv"],t):void(0,s.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2))):e},ur=function(e,t,n){switch(e){case"timestamp":return n.timestamp;default:(0,s.hu)(!1,"Unexpected server value: "+e)}},hr=function(e,t,n){e.hasOwnProperty("increment")||(0,s.hu)(!1,"Unexpected server value: "+JSON.stringify(e,null,2));const r=e.increment;"number"!=typeof r&&(0,s.hu)(!1,"Unexpected increment value: "+r);const i=t.node();if((0,s.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return"number"!=typeof o?r:o+r},dr=function(e,t,n,r){return fr(t,new cr(n,e),r)},pr=function(e,t,n){return fr(e,new ar(t),n)};function fr(e,t,n){const r=e.getPriority().val(),i=lr(r,t.getImmediateChild(".priority"),n);let s;if(e.isLeafNode()){const r=e,s=lr(r.getValue(),t,n);return s!==r.getValue()||i!==r.getPriority().val()?new Ge(s,rt(i)):e}{const r=e;return s=r,i!==r.getPriority().val()&&(s=s.updatePriority(new Ge(i))),r.forEachChild(We,(e,r)=>{const i=fr(r,t.getImmediateChild(e),n);i!==r&&(s=s.updateImmediateChild(e,i))}),s}}class gr{constructor(e="",t=null,n={children:{},childCount:0}){this.name=e,this.parent=t,this.node=n}}function mr(e,t){let n=t instanceof ue?t:new ue(t),r=e,i=de(n);for(;null!==i;){const e=(0,s.DV)(r.node.children,i)||{children:{},childCount:0};r=new gr(i,r,e),n=fe(n),i=de(n)}return r}function yr(e){return e.node.value}function vr(e,t){e.node.value=t,Cr(e)}function _r(e){return e.node.childCount>0}function wr(e,t){M(e.node.children,(n,r)=>{t(new gr(n,e,r))})}function br(e,t,n,r){n&&!r&&t(e),wr(e,e=>{br(e,t,!0,r)}),n&&r&&t(e)}function Ir(e){return new ue(null===e.parent?e.name:Ir(e.parent)+"/"+e.name)}function Cr(e){null!==e.parent&&function(e,t,n){const r=function(e){return void 0===yr(e)&&!_r(e)}(n),i=(0,s.r3)(e.node.children,t);r&&i?(delete e.node.children[t],e.node.childCount--,Cr(e)):r||i||(e.node.children[t]=n.node,e.node.childCount++,Cr(e))}(e.parent,e.name,e)}const Tr=/[\[\].#$\/\u0000-\u001F\u007F]/,Er=/[\[\].#$\u0000-\u001F\u007F]/,Sr=10485760,kr=function(e){return"string"==typeof e&&0!==e.length&&!Tr.test(e)},Ar=function(e){return"string"==typeof e&&0!==e.length&&!Er.test(e)},xr=function(e){return null===e||"string"==typeof e||"number"==typeof e&&!A(e)||e&&"object"==typeof e&&(0,s.r3)(e,".sv")},Nr=function(e,t,n,r){r&&void 0===t||Or((0,s.gK)(e,"value"),t,n)},Or=function(e,t,n){const r=n instanceof ue?new Te(n,e):n;if(void 0===t)throw new Error(e+"contains undefined "+Se(r));if("function"==typeof t)throw new Error(e+"contains a function "+Se(r)+" with contents = "+t.toString());if(A(t))throw new Error(e+"contains "+t.toString()+" "+Se(r));if("string"==typeof t&&t.length>Sr/3&&(0,s.ug)(t)>Sr)throw new Error(e+"contains a string greater than 10485760 utf8 bytes "+Se(r)+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){let n=!1,i=!1;if(M(t,(t,o)=>{if(".value"===t)n=!0;else if(".priority"!==t&&".sv"!==t&&(i=!0,!kr(t)))throw new Error(e+" contains an invalid key ("+t+") "+Se(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');!function(e,t){e.parts_.length>0&&(e.byteLength_+=1),e.parts_.push(t),e.byteLength_+=(0,s.ug)(t),Ee(e)}(r,t),Or(e,o,r),function(e){const t=e.parts_.pop();e.byteLength_-=(0,s.ug)(t),e.parts_.length>0&&(e.byteLength_-=1)}(r)}),n&&i)throw new Error(e+' contains ".value" child '+Se(r)+" in addition to actual children.")}},Pr=function(e,t,n,r){if(r&&void 0===t)return;const i=(0,s.gK)(e,"values");if(!t||"object"!=typeof t||Array.isArray(t))throw new Error(i+" must be an object containing the children to replace.");const o=[];M(t,(e,t)=>{const r=new ue(e);if(Or(i,t,ve(n,r)),".priority"===ge(r)&&!xr(t))throw new Error(i+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");o.push(r)}),function(e,t){let n,r;for(n=0;n<t.length;n++){r=t[n];const i=me(r);for(let t=0;t<i.length;t++)if(".priority"===i[t]&&t===i.length-1);else if(!kr(i[t]))throw new Error(e+"contains an invalid key ("+i[t]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}t.sort(be);let i=null;for(n=0;n<t.length;n++){if(r=t[n],null!==i&&Ce(i,r))throw new Error(e+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,o)},Rr=function(e,t,n){if(!n||void 0!==t){if(A(t))throw new Error((0,s.gK)(e,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!xr(t))throw new Error((0,s.gK)(e,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Dr=function(e,t,n,r){if(!(r&&void 0===n||kr(n)))throw new Error((0,s.gK)(e,t)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Lr=function(e,t,n,r){if(!(r&&void 0===n||Ar(n)))throw new Error((0,s.gK)(e,t)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Mr=function(e,t){if(".info"===de(t))throw new Error(e+" failed = Can't modify data under /.info/")},Fr=function(e,t){const n=t.path.toString();if("string"!=typeof t.repoInfo.host||0===t.repoInfo.host.length||!kr(t.repoInfo.namespace)&&"localhost"!==t.repoInfo.host.split(":")[0]||0!==n.length&&!function(e){return e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Ar(e)}(n))throw new Error((0,s.gK)(e,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class $r{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Vr(e,t){let n=null;for(let r=0;r<t.length;r++){const i=t[r],s=i.getPath();null===n||Ie(s,n.path)||(e.eventLists_.push(n),n=null),null===n&&(n={events:[],path:s}),n.events.push(i)}n&&e.eventLists_.push(n)}function Ur(e,t,n){Vr(e,n),qr(e,e=>Ie(e,t))}function jr(e,t,n){Vr(e,n),qr(e,e=>Ce(e,t)||Ce(t,e))}function qr(e,t){e.recursionDepth_++;let n=!0;for(let r=0;r<e.eventLists_.length;r++){const i=e.eventLists_[r];i&&(t(i.path)?(Br(e.eventLists_[r]),e.eventLists_[r]=null):n=!1)}n&&(e.eventLists_=[]),e.recursionDepth_--}function Br(e){for(let t=0;t<e.events.length;t++){const n=e.events[t];if(null!==n){e.events[t]=null;const r=n.getEventRunner();w&&C("event: "+n.toString()),U(r)}}}const zr="repo_interrupt";class Hr{constructor(e,t,n,r){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new $r,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Et(),this.transactionQueueTree_=new gr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Gr(e){const t=e.infoData_.getNode(new ue(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function Wr(e){return(t=(t={timestamp:Gr(e)})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t}function Kr(e,t,n,r,i){e.dataUpdateCount++;const o=new ue(t);n=e.interceptServerDataCallback_?e.interceptServerDataCallback_(t,n):n;let a=[];if(i)if(r){const t=(0,s.UI)(n,e=>rt(e));a=function(e,t,n,r){const i=rr(e,r);if(i){const r=ir(i),s=r.path,o=r.queryId,a=we(s,t),c=Gt.fromObject(n);return sr(e,s,new Mt(Pt(o),a,c))}return[]}(e.serverSyncTree_,o,t,i)}else{const t=rt(n);a=function(e,t,n,r){const i=rr(e,r);if(null!=i){const r=ir(i),s=r.path,o=r.queryId,a=we(s,t);return sr(e,s,new Lt(Pt(o),a,n))}return[]}(e.serverSyncTree_,o,t,i)}else if(r){const t=(0,s.UI)(n,e=>rt(e));a=function(e,t,n){const r=Gt.fromObject(n);return Xn(e,new Mt({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},t,r))}(e.serverSyncTree_,o,t)}else{const t=rt(n);a=Wn(e.serverSyncTree_,o,t)}let c=o;a.length>0&&(c=ai(e,o)),jr(e.eventQueue_,c,a)}function Yr(e,t){Qr(e,"connected",t),!1===t&&function(e){ri(e,"onDisconnectEvents");const t=Wr(e),n=Et();At(e.onDisconnect_,he(),(r,i)=>{const s=dr(r,i,e.serverSyncTree_,t);St(n,r,s)});let r=[];At(n,he(),(t,n)=>{r=r.concat(Wn(e.serverSyncTree_,t,n));const i=di(e,t);ai(e,i)}),e.onDisconnect_=Et(),jr(e.eventQueue_,he(),r)}(e)}function Qr(e,t,n){const r=new ue("/.info/"+t),i=rt(n);e.infoData_.updateSnapshot(r,i);const s=Wn(e.infoSyncTree_,r,i);jr(e.eventQueue_,r,s)}function Xr(e){return e.nextWriteId_++}function Jr(e,t,n,r,i){ri(e,"set",{path:t.toString(),value:n,priority:r});const s=Wr(e),o=rt(n,r),a=Qn(e.serverSyncTree_,t),c=pr(o,a,s),l=Xr(e),u=Hn(e.serverSyncTree_,t,c,l,!0);Vr(e.eventQueue_,u),e.server_.put(t.toString(),o.val(!0),(n,r)=>{const s="ok"===n;s||k("set at "+t+" failed: "+n);const o=Gn(e.serverSyncTree_,l,!s);jr(e.eventQueue_,t,o),ii(0,i,n,r)});const h=di(e,t);ai(e,h),jr(e.eventQueue_,h,[])}function Zr(e,t,n){e.server_.onDisconnectCancel(t.toString(),(r,i)=>{"ok"===r&&kt(e.onDisconnect_,t),ii(0,n,r,i)})}function ei(e,t,n,r){const i=rt(n);e.server_.onDisconnectPut(t.toString(),i.val(!0),(n,s)=>{"ok"===n&&St(e.onDisconnect_,t,i),ii(0,r,n,s)})}function ti(e,t,n){let r;r=".info"===de(t._path)?Kn(e.infoSyncTree_,t,n):Kn(e.serverSyncTree_,t,n),Ur(e.eventQueue_,t._path,r)}function ni(e){e.persistentConnection_&&e.persistentConnection_.interrupt(zr)}function ri(e,...t){let n="";e.persistentConnection_&&(n=e.persistentConnection_.id+":"),C(n,...t)}function ii(e,t,n,r){t&&U(()=>{if("ok"===n)t(null);else{const e=(n||"error").toUpperCase();let i=e;r&&(i+=": "+r);const s=new Error(i);s.code=e,t(s)}})}function si(e,t,n){return Qn(e.serverSyncTree_,t,n)||tt.EMPTY_NODE}function oi(e,t=e.transactionQueueTree_){if(t||hi(e,t),yr(t)){const n=li(e,t);(0,s.hu)(n.length>0,"Sending zero length transaction queue"),n.every(e=>0===e.status)&&function(e,t,n){const r=n.map(e=>e.currentWriteId),i=si(e,t,r);let o=i;const a=i.hash();for(let u=0;u<n.length;u++){const e=n[u];(0,s.hu)(0===e.status,"tryToSendTransactionQueue_: items in queue should all be run."),e.status=1,e.retryCount++;const r=we(t,e.path);o=o.updateChild(r,e.currentOutputSnapshotRaw)}const c=o.val(!0),l=t;e.server_.put(l.toString(),c,r=>{ri(e,"transaction put response",{path:l.toString(),status:r});let i=[];if("ok"===r){const r=[];for(let t=0;t<n.length;t++)n[t].status=2,i=i.concat(Gn(e.serverSyncTree_,n[t].currentWriteId)),n[t].onComplete&&r.push(()=>n[t].onComplete(null,!0,n[t].currentOutputSnapshotResolved)),n[t].unwatcher();hi(e,mr(e.transactionQueueTree_,t)),oi(e,e.transactionQueueTree_),jr(e.eventQueue_,t,i);for(let e=0;e<r.length;e++)U(r[e])}else{if("datastale"===r)for(let e=0;e<n.length;e++)n[e].status=3===n[e].status?4:0;else{k("transaction at "+l.toString()+" failed: "+r);for(let e=0;e<n.length;e++)n[e].status=4,n[e].abortReason=r}ai(e,t)}},a)}(e,Ir(t),n)}else _r(t)&&wr(t,t=>{oi(e,t)})}function ai(e,t){const n=ci(e,t),r=Ir(n);return function(e,t,n){if(0===t.length)return;const r=[];let i=[];const o=t.filter(e=>0===e.status).map(e=>e.currentWriteId);for(let a=0;a<t.length;a++){const c=t[a],l=we(n,c.path);let u,h=!1;if((0,s.hu)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,i=i.concat(Gn(e.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,u="maxretry",i=i.concat(Gn(e.serverSyncTree_,c.currentWriteId,!0));else{const n=si(e,c.path,o);c.currentInputSnapshot=n;const r=t[a].update(n.val());if(void 0!==r){Or("transaction failed: Data returned ",r,c.path);let t=rt(r);"object"==typeof r&&null!=r&&(0,s.r3)(r,".priority")||(t=t.updatePriority(n.getPriority()));const a=c.currentWriteId,l=Wr(e),u=pr(t,n,l);c.currentOutputSnapshotRaw=t,c.currentOutputSnapshotResolved=u,c.currentWriteId=Xr(e),o.splice(o.indexOf(a),1),i=i.concat(Hn(e.serverSyncTree_,c.path,u,c.currentWriteId,c.applyLocally)),i=i.concat(Gn(e.serverSyncTree_,a,!0))}else h=!0,u="nodata",i=i.concat(Gn(e.serverSyncTree_,c.currentWriteId,!0))}jr(e.eventQueue_,n,i),i=[],h&&(t[a].status=2,setTimeout(t[a].unwatcher,Math.floor(0)),t[a].onComplete&&r.push("nodata"===u?()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot):()=>t[a].onComplete(new Error(u),!1,null)))}hi(e,e.transactionQueueTree_);for(let s=0;s<r.length;s++)U(r[s]);oi(e,e.transactionQueueTree_)}(e,li(e,n),r),r}function ci(e,t){let n,r=e.transactionQueueTree_;for(n=de(t);null!==n&&void 0===yr(r);)r=mr(r,n),n=de(t=fe(t));return r}function li(e,t){const n=[];return ui(e,t,n),n.sort((e,t)=>e.order-t.order),n}function ui(e,t,n){const r=yr(t);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);wr(t,t=>{ui(e,t,n)})}function hi(e,t){const n=yr(t);if(n){let e=0;for(let t=0;t<n.length;t++)2!==n[t].status&&(n[e]=n[t],e++);n.length=e,vr(t,n.length>0?n:void 0)}wr(t,t=>{hi(e,t)})}function di(e,t){const n=Ir(ci(e,t)),r=mr(e.transactionQueueTree_,t);return function(e,t,n){let r=e.parent;for(;null!==r;){if(t(r))return!0;r=r.parent}}(r,t=>{pi(e,t)}),pi(e,r),br(r,t=>{pi(e,t)}),n}function pi(e,t){const n=yr(t);if(n){const r=[];let i=[],o=-1;for(let t=0;t<n.length;t++)3===n[t].status||(1===n[t].status?((0,s.hu)(o===t-1,"All SENT items should be at beginning of queue."),o=t,n[t].status=3,n[t].abortReason="set"):((0,s.hu)(0===n[t].status,"Unexpected transaction status in abort"),n[t].unwatcher(),i=i.concat(Gn(e.serverSyncTree_,n[t].currentWriteId,!0)),n[t].onComplete&&r.push(n[t].onComplete.bind(null,new Error("set"),!1,null))));-1===o?vr(t,void 0):n.length=o+1,jr(e.eventQueue_,Ir(t),i);for(let e=0;e<r.length;e++)U(r[e])}}const fi=function(e,t){const n=gi(e),r=n.namespace;return"firebase.com"===n.domain&&S(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||S("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&k("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new K(n.host,n.secure,r,t,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new ue(n.pathString)}},gi=function(e){let t="",n="",r="",i="",s="",o=!0,a="https",c=443;if("string"==typeof e){let l=e.indexOf("//");l>=0&&(a=e.substring(0,l-1),e=e.substring(l+2));let u=e.indexOf("/");-1===u&&(u=e.length);let h=e.indexOf("?");-1===h&&(h=e.length),t=e.substring(0,Math.min(u,h)),u<h&&(i=function(e){let t="";const n=e.split("/");for(let i=0;i<n.length;i++)if(n[i].length>0){let e=n[i];try{e=decodeURIComponent(e.replace(/\+/g," "))}catch(r){}t+="/"+e}return t}(e.substring(u,h)));const d=function(e){const t={};"?"===e.charAt(0)&&(e=e.substring(1));for(const n of e.split("&")){if(0===n.length)continue;const r=n.split("=");2===r.length?t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):k(`Invalid query segment '${n}' in query '${e}'`)}return t}(e.substring(Math.min(e.length,h)));l=t.indexOf(":"),l>=0?(o="https"===a||"wss"===a,c=parseInt(t.substring(l+1),10)):l=t.length;const p=t.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{const e=t.indexOf(".");r=t.substring(0,e).toLowerCase(),n=t.substring(e+1),s=r}"ns"in d&&(s=d.ns)}return{host:t,port:c,domain:n,subdomain:r,secure:o,scheme:a,pathString:i,namespace:s}};class mi{constructor(e,t,n,r){this.eventType=e,this.eventRegistration=t,this.snapshot=n,this.prevName=r}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,s.Pz)(this.snapshot.exportVal())}}class yi{constructor(e,t,n){this.eventRegistration=e,this.error=t,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class vi{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,s.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class _i{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new s.BH;return Zr(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Mr("OnDisconnect.remove",this._path);const e=new s.BH;return ei(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Mr("OnDisconnect.set",this._path),Nr("OnDisconnect.set",e,this._path,!1);const t=new s.BH;return ei(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Mr("OnDisconnect.setWithPriority",this._path),Nr("OnDisconnect.setWithPriority",e,this._path,!1),Rr("OnDisconnect.setWithPriority",t,!1);const n=new s.BH;return function(e,t,n,r,i){const s=rt(n,r);e.server_.onDisconnectPut(t.toString(),s.val(!0),(n,r)=>{"ok"===n&&St(e.onDisconnect_,t,s),ii(0,i,n,r)})}(this._repo,this._path,e,t,n.wrapCallback(()=>{})),n.promise}update(e){Mr("OnDisconnect.update",this._path),Pr("OnDisconnect.update",e,this._path,!1);const t=new s.BH;return function(e,t,n,r){if((0,s.xb)(n))return C("onDisconnect().update() called with empty data.  Don't do anything."),void ii(0,r,"ok",void 0);e.server_.onDisconnectMerge(t.toString(),n,(i,s)=>{"ok"===i&&M(n,(n,r)=>{const i=rt(r);St(e.onDisconnect_,ve(t,n),i)}),ii(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class wi{constructor(e,t,n,r){this._repo=e,this._path=t,this._queryParams=n,this._orderByCalled=r}get key(){return _e(this._path)?null:ge(this._path)}get ref(){return new Ti(this._repo,this._path)}get _queryIdentifier(){const e=It(this._queryParams),t=D(e);return"{}"===t?"default":t}get _queryObject(){return It(this._queryParams)}isEqual(e){if(!((e=(0,s.m9)(e))instanceof wi))return!1;const t=this._repo===e._repo,n=Ie(this._path,e._path);return t&&n&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function(e){let t="";for(let n=e.pieceNum_;n<e.pieces_.length;n++)""!==e.pieces_[n]&&(t+="/"+encodeURIComponent(String(e.pieces_[n])));return t||"/"}(this._path)}}function bi(e,t){if(!0===e._orderByCalled)throw new Error(t+": You can't combine multiple orderBy calls.")}function Ii(e){let t=null,n=null;if(e.hasStart()&&(t=e.getIndexStartValue()),e.hasEnd()&&(n=e.getIndexEndValue()),e.getIndex()===De){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(e.hasStart()){if(e.getIndexStartName()!==x)throw new Error(r);if("string"!=typeof t)throw new Error(i)}if(e.hasEnd()){if(e.getIndexEndName()!==N)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(e.getIndex()===We){if(null!=t&&!xr(t)||null!=n&&!xr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,s.hu)(e.getIndex()instanceof it||e.getIndex()===st,"unknown index type."),null!=t&&"object"==typeof t||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Ci(e){if(e.hasStart()&&e.hasEnd()&&e.hasLimit()&&!e.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ti extends wi{constructor(e,t){super(e,t,new yt,!1)}get parent(){const e=ye(this._path);return null===e?null:new Ti(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Ei{constructor(e,t,n){this._node=e,this.ref=t,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new ue(e),n=Ai(this.ref,e);return new Ei(this._node.getChild(t),n,We)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(t,n)=>e(new Ei(n,Ai(this.ref,t),We)))}hasChild(e){const t=new ue(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Si(e,t){return(e=(0,s.m9)(e))._checkNotDeleted("ref"),void 0!==t?Ai(e._root,t):e._root}function ki(e,t){(e=(0,s.m9)(e))._checkNotDeleted("refFromURL");const n=fi(t,e._repo.repoInfo_.nodeAdmin);Fr("refFromURL",n);const r=n.repoInfo;return e._repo.repoInfo_.isCustomHost()||r.host===e._repo.repoInfo_.host||S("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+e._repo.repoInfo_.host+")"),Si(e,n.path.toString())}function Ai(e,t){var n;return null===de((e=(0,s.m9)(e))._path)?((n=t)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Lr("child","path",n,!1)):Lr("child","path",t,!1),new Ti(e._repo,ve(e._path,t))}function xi(e,t){e=(0,s.m9)(e),Mr("push",e._path),Nr("push",t,e._path,!0);const n=Gr(e._repo),r=at(n),i=Ai(e,r),o=Ai(e,r);let a;return a=null!=t?Oi(o,t).then(()=>o):Promise.resolve(o),i.then=a.then.bind(a),i.catch=a.then.bind(a,void 0),i}function Ni(e){return Mr("remove",e._path),Oi(e,null)}function Oi(e,t){e=(0,s.m9)(e),Mr("set",e._path),Nr("set",t,e._path,!1);const n=new s.BH;return Jr(e._repo,e._path,t,null,n.wrapCallback(()=>{})),n.promise}function Pi(e,t){e=(0,s.m9)(e),Mr("setPriority",e._path),Rr("setPriority",t,!1);const n=new s.BH;return Jr(e._repo,ve(e._path,".priority"),t,null,n.wrapCallback(()=>{})),n.promise}function Ri(e,t,n){if(Mr("setWithPriority",e._path),Nr("setWithPriority",t,e._path,!1),Rr("setWithPriority",n,!1),".length"===e.key||".keys"===e.key)throw"setWithPriority failed: "+e.key+" is a read-only object.";const r=new s.BH;return Jr(e._repo,e._path,t,n,r.wrapCallback(()=>{})),r.promise}function Di(e,t){Pr("update",t,e._path,!1);const n=new s.BH;return function(e,t,n,r){ri(e,"update",{path:t.toString(),value:n});let i=!0;const o=Wr(e),a={};if(M(n,(n,r)=>{i=!1,a[n]=dr(ve(t,n),rt(r),e.serverSyncTree_,o)}),i)C("update() called with empty data.  Don't do anything."),ii(0,r,"ok",void 0);else{const i=Xr(e),o=function(e,t,n,r){!function(e,t,n,r){(0,s.hu)(r>e.lastWriteId,"Stacking an older merge on top of newer ones"),e.allWrites.push({path:t,children:n,writeId:r,visible:!0}),e.visibleWrites=Yt(e.visibleWrites,t,n),e.lastWriteId=r}(e.pendingWriteTree_,t,n,r);const i=Gt.fromObject(n);return Xn(e,new Mt({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},t,i))}(e.serverSyncTree_,t,a,i);Vr(e.eventQueue_,o),e.server_.merge(t.toString(),n,(n,s)=>{const o="ok"===n;o||k("update at "+t+" failed: "+n);const a=Gn(e.serverSyncTree_,i,!o),c=a.length>0?ai(e,t):t;jr(e.eventQueue_,c,a),ii(0,r,n,s)}),M(n,n=>{const r=di(e,ve(t,n));ai(e,r)}),jr(e.eventQueue_,t,[])}}(e._repo,e._path,t,n.wrapCallback(()=>{})),n.promise}function Li(e){return function(e,t){const n=function(e,t){const n=t._path;let r=null;e.syncPointTree_.foreachOnPath(n,(e,t)=>{const i=we(e,n);r=r||$n(t,i)});let i=e.syncPointTree_.get(n);i?r=r||$n(i,he()):(i=new Dn,e.syncPointTree_=e.syncPointTree_.set(n,i));const s=null!=r,o=s?new Ft(r,!0,!1):null;return Bt(Mn(i,t,sn(e.pendingWriteTree_,t._path),s?o.getNode():tt.EMPTY_NODE,s).viewCache_)}(e.serverSyncTree_,t);return null!=n?Promise.resolve(n):e.server_.get(t).then(n=>{const r=rt(n).withIndex(t._queryParams.getIndex()),i=Wn(e.serverSyncTree_,t._path,r);return Ur(e.eventQueue_,t._path,i),Promise.resolve(r)},n=>(ri(e,"get for query "+(0,s.Pz)(t)+" failed: "+n),Promise.reject(new Error(n))))}((e=(0,s.m9)(e))._repo,e).then(t=>new Ei(t,new Ti(e._repo,e._path),e._queryParams.getIndex()))}class Mi{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const n=t._queryParams.getIndex();return new mi("value",this,new Ei(e.snapshotNode,new Ti(t._repo,t._path),n))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new yi(this,e,t):null}matches(e){return e instanceof Mi&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class Fi{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new yi(this,e,t):null}createEvent(e,t){(0,s.hu)(null!=e.childName,"Child events should have a childName.");const n=Ai(new Ti(t._repo,t._path),e.childName),r=t._queryParams.getIndex();return new mi(e.type,this,new Ei(e.snapshotNode,n,r),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Fi&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function $i(e,t,n,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const t=n,r=(n,r)=>{ti(e._repo,e,a),t(n,r)};r.userCallback=n.userCallback,r.context=n.context,n=r}const o=new vi(n,s||void 0),a="value"===t?new Mi(o):new Fi(t,o);return function(e,t,n){let r;r=".info"===de(t._path)?Yn(e.infoSyncTree_,t,n):Yn(e.serverSyncTree_,t,n),Ur(e.eventQueue_,t._path,r)}(e._repo,e,a),()=>ti(e._repo,e,a)}function Vi(e,t,n,r){return $i(e,"value",t,n,r)}function Ui(e,t,n,r){return $i(e,"child_added",t,n,r)}function ji(e,t,n,r){return $i(e,"child_changed",t,n,r)}function qi(e,t,n,r){return $i(e,"child_moved",t,n,r)}function Bi(e,t,n,r){return $i(e,"child_removed",t,n,r)}function zi(e,t,n){let r=null;const i=n?new vi(n):null;"value"===t?r=new Mi(i):t&&(r=new Fi(t,i)),ti(e._repo,e,r)}class Hi{}class Gi extends Hi{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Nr("endAt",this._value,e._path,!0);const t=_t(e._queryParams,this._value,this._key);if(Ci(t),Ii(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new wi(e._repo,e._path,t,e._orderByCalled)}}function Wi(e,t){return Dr("endAt","key",t,!0),new Gi(e,t)}class Ki extends Hi{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Nr("endBefore",this._value,e._path,!1);const t=function(e,t,n){let r,i;return e.index_===De?("string"==typeof t&&(t=lt(t)),i=_t(e,t,n)):(r=null==n?x:lt(n),i=_t(e,t,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(Ci(t),Ii(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new wi(e._repo,e._path,t,e._orderByCalled)}}function Yi(e,t){return Dr("endBefore","key",t,!0),new Ki(e,t)}class Qi extends Hi{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Nr("startAt",this._value,e._path,!0);const t=vt(e._queryParams,this._value,this._key);if(Ci(t),Ii(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new wi(e._repo,e._path,t,e._orderByCalled)}}function Xi(e=null,t){return Dr("startAt","key",t,!0),new Qi(e,t)}class Ji extends Hi{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Nr("startAfter",this._value,e._path,!1);const t=function(e,t,n){let r;if(e.index_===De)"string"==typeof t&&(t=ct(t)),r=vt(e,t,n);else{let i;i=null==n?N:ct(n),r=vt(e,t,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(Ci(t),Ii(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new wi(e._repo,e._path,t,e._orderByCalled)}}function Zi(e,t){return Dr("startAfter","key",t,!0),new Ji(e,t)}class es extends Hi{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new wi(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="l",n}(e._queryParams,this._limit),e._orderByCalled)}}function ts(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new es(e)}class ns extends Hi{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new wi(e._repo,e._path,function(e,t){const n=e.copy();return n.limitSet_=!0,n.limit_=t,n.viewFrom_="r",n}(e._queryParams,this._limit),e._orderByCalled)}}function rs(e){if("number"!=typeof e||Math.floor(e)!==e||e<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new ns(e)}class is extends Hi{constructor(e){super(),this._path=e}_apply(e){bi(e,"orderByChild");const t=new ue(this._path);if(_e(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const n=new it(t),r=wt(e._queryParams,n);return Ii(r),new wi(e._repo,e._path,r,!0)}}function ss(e){if("$key"===e)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===e)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===e)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Lr("orderByChild","path",e,!1),new is(e)}class os extends Hi{_apply(e){bi(e,"orderByKey");const t=wt(e._queryParams,De);return Ii(t),new wi(e._repo,e._path,t,!0)}}function as(){return new os}class cs extends Hi{_apply(e){bi(e,"orderByPriority");const t=wt(e._queryParams,We);return Ii(t),new wi(e._repo,e._path,t,!0)}}function ls(){return new cs}class us extends Hi{_apply(e){bi(e,"orderByValue");const t=wt(e._queryParams,st);return Ii(t),new wi(e._repo,e._path,t,!0)}}function hs(){return new us}class ds extends Hi{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Nr("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Gi(this._value,this._key)._apply(new Qi(this._value,this._key)._apply(e))}}function ps(e,t){return Dr("equalTo","key",t,!0),new ds(e,t)}function fs(e,...t){let n=(0,s.m9)(e);for(const r of t)n=r._apply(n);return n}!function(e){(0,s.hu)(!Pn,"__referenceConstructor has already been defined"),Pn=e}(Ti),function(e){(0,s.hu)(!Rn,"__referenceConstructor has already been defined"),Rn=e}(Ti);const gs={};function ms(e,t,n,r,i){let s=r||e.options.databaseURL;void 0===s&&(e.options.projectId||S("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),C("Using default host for project ",e.options.projectId),s=`${e.options.projectId}-default-rtdb.firebaseio.com`);let o,a,c=fi(s,i),l=c.repoInfo;"undefined"!=typeof process&&(a=process.env.FIREBASE_DATABASE_EMULATOR_HOST),a?(o=!0,s=`http://${a}?ns=${l.namespace}`,c=fi(s,i),l=c.repoInfo):o=!c.repoInfo.secure;const u=i&&o?new z(z.OWNER):new B(e.name,e.options,t);Fr("Invalid Firebase Database URL",c),_e(c.path)||S("Database URL must point to the root of a Firebase Database (not including a child path).");const h=function(e,t,n,r){let i=gs[t.name];i||(i={},gs[t.name]=i);let s=i[e.toURLString()];return s&&S("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new Hr(e,!1,n,r),i[e.toURLString()]=s,s}(l,e,u,new q(e.name,n));return new ys(h,e)}class ys{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function(e,t,n){if(e.stats_=Z(e.repoInfo_),e.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)e.server_=new Ct(e.repoInfo_,(t,n,r,i)=>{Kr(e,t,n,r,i)},e.authTokenProvider_,e.appCheckProvider_),setTimeout(()=>Yr(e,!0),0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,s.Pz)(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}e.persistentConnection_=new Ne(e.repoInfo_,t,(t,n,r,i)=>{Kr(e,t,n,r,i)},t=>{Yr(e,t)},t=>{!function(e,t){M(t,(t,n)=>{Qr(e,t,n)})}(e,t)},e.authTokenProvider_,e.appCheckProvider_,n),e.server_=e.persistentConnection_}e.authTokenProvider_.addTokenChangeListener(t=>{e.server_.refreshAuthToken(t)}),e.appCheckProvider_.addTokenChangeListener(t=>{e.server_.refreshAppCheckToken(t.token)}),e.statsReporter_=function(t,n){const r=t.toString();return J[r]||(J[r]=new Nt(e.stats_,e.server_)),J[r]}(e.repoInfo_),e.infoData_=new Tt,e.infoSyncTree_=new zn({startListening:(t,n,r,i)=>{let s=[];const o=e.infoData_.getNode(t._path);return o.isEmpty()||(s=Wn(e.infoSyncTree_,t._path,o),setTimeout(()=>{i("ok")},0)),s},stopListening:()=>{}}),Qr(e,"connected",!1),e.serverSyncTree_=new zn({startListening:(t,n,r,i)=>(e.server_.listen(t,r,n,(n,r)=>{const s=i(n,r);jr(e.eventQueue_,t._path,s)}),[]),stopListening:(t,n)=>{e.server_.unlisten(t,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ti(this._repo,he())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function(e,t){const n=gs[t];n&&n[e.key]===e||S(`Database ${t}(${e.repoInfo_}) has already been deleted.`),ni(e),delete n[e.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&S("Cannot call "+e+" on a deleted database.")}}function vs(e=(0,r.getApp)(),t){return(0,r._getProvider)(e,"database").getImmediate({identifier:t})}function _s(e,t,n,r={}){(e=(0,s.m9)(e))._checkNotDeleted("useEmulator"),e._instanceStarted&&S("Cannot call useEmulator() after instance has already been initialized.");const i=e._repoInternal;let o;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&S('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),o=new z(z.OWNER);else if(r.mockUserToken){const t="string"==typeof r.mockUserToken?r.mockUserToken:(0,s.Sg)(r.mockUserToken,e.app.options.projectId);o=new z(t)}!function(e,t,n,r){e.repoInfo_=new K(`${t}:${n}`,!1,e.repoInfo_.namespace,e.repoInfo_.webSocketOnly,e.repoInfo_.nodeAdmin,e.repoInfo_.persistenceKey,e.repoInfo_.includeNamespaceInQueryParams),r&&(e.authTokenProvider_=r)}(i,t,n,o)}function ws(e){(e=(0,s.m9)(e))._checkNotDeleted("goOffline"),ni(e._repo)}function bs(e){var t;(e=(0,s.m9)(e))._checkNotDeleted("goOnline"),(t=e._repo).persistentConnection_&&t.persistentConnection_.resume(zr)}function Is(e,t){I(e,t)}const Cs={".sv":"timestamp"};function Ts(){return Cs}function Es(e){return{".sv":{increment:e}}}class Ss{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function ks(e,t,n){var r;if(e=(0,s.m9)(e),Mr("Reference.transaction",e._path),".length"===e.key||".keys"===e.key)throw"Reference.transaction failed: "+e.key+" is a read-only object.";const i=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,o=new s.BH,a=Vi(e,()=>{});return function(t,n,r,i,a,c){ri(t,"transaction on "+n);const l={path:n,update:r,onComplete:(t,n,r)=>{let i=null;t?o.reject(t):(i=new Ei(r,new Ti(e._repo,e._path),We),o.resolve(new Ss(n,i)))},status:null,order:y(),applyLocally:c,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},u=si(t,n,void 0);l.currentInputSnapshot=u;const h=l.update(u.val());if(void 0===h)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{Or("transaction failed: Data returned ",h,l.path),l.status=0;const e=mr(t.transactionQueueTree_,n),r=yr(e)||[];let i;r.push(l),vr(e,r),"object"==typeof h&&null!==h&&(0,s.r3)(h,".priority")?(i=(0,s.DV)(h,".priority"),(0,s.hu)(xr(i),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):i=(Qn(t.serverSyncTree_,n)||tt.EMPTY_NODE).getPriority().val();const o=Wr(t),a=rt(h,i),c=pr(a,u,o);l.currentOutputSnapshotRaw=a,l.currentOutputSnapshotResolved=c,l.currentWriteId=Xr(t);const d=Hn(t.serverSyncTree_,n,c,l.currentWriteId,l.applyLocally);jr(t.eventQueue_,n,d),oi(t,t.transactionQueueTree_)}}(e._repo,e._path,t,0,a,i),o.promise}Ne.prototype.simpleListen=function(e,t){this.sendRequest("q",{p:e},t)},Ne.prototype.echo=function(e,t){this.sendRequest("echo",{d:e},t)},u(r.SDK_VERSION),(0,r._registerComponent)(new i.wA("database",(e,{instanceIdentifier:t})=>ms(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,r.registerVersion)(a,c,void 0),(0,r.registerVersion)(a,c,"esm2017")},9665:(e,t,n)=>{"use strict";n.d(t,{u7:()=>gp,Jj:()=>hd,IX:()=>Yh,my:()=>$h,xU:()=>zd,Lz:()=>ud,WA:()=>Nr,F8:()=>pd,$q:()=>Hd,W:()=>Gd,EK:()=>zr,PU:()=>vp,l7:()=>Sh,Ky:()=>di,Xb:()=>Jr,Cf:()=>Rh,K9:()=>kr,Me:()=>ei,yq:()=>Cr,Wi:()=>xh,ET:()=>Np,Ab:()=>Up,vr:()=>Vp,Fc:()=>rd,hJ:()=>jh,B$:()=>qh,at:()=>Fh,oe:()=>xp,AK:()=>Fp,TF:()=>od,JU:()=>Bh,ST:()=>ed,fH:()=>td,Ix:()=>sd,Wu:()=>up,Lx:()=>lp,qY:()=>Jh,GL:()=>Rp,QT:()=>wp,kl:()=>Ip,Xk:()=>Cp,PL:()=>Tp,UQ:()=>Ep,zN:()=>Sp,ad:()=>Xh,nP:()=>jp,b9:()=>rp,vh:()=>ip,Pb:()=>ad,L$:()=>cd,cf:()=>Op,sc:()=>Pp,Xo:()=>tp,IO:()=>Xd,iE:()=>Hh,Eo:()=>zh,i3:()=>Mp,Bt:()=>$p,pl:()=>kp,Ub:()=>wr,qK:()=>Kd,TQ:()=>ap,e0:()=>op,r7:()=>Ap,Mx:()=>id,ar:()=>Zd});var r,i=n(5871),s=n(9171),o=n(4560),a=n(9870),c="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},l={},u=u||{},h=c||self;function d(){}function p(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function f(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var g="closure_uid_"+(1e9*Math.random()>>>0),m=0;function y(e,t,n){return e.call.apply(e.bind,arguments)}function v(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function _(e,t,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:v).apply(null,arguments)}function w(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function b(e,t){function n(){}n.prototype=t.prototype,e.Z=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Vb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function I(){this.s=this.s,this.o=this.o}var C={};I.prototype.s=!1,I.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var e=function(e){return Object.prototype.hasOwnProperty.call(e,g)&&e[g]||(e[g]=++m)}(this);delete C[e]}},I.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const T=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"==typeof e)return"string"!=typeof t||1!=t.length?-1:e.indexOf(t,0);for(let n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1},E=Array.prototype.forEach?function(e,t,n){Array.prototype.forEach.call(e,t,n)}:function(e,t,n){const r=e.length,i="string"==typeof e?e.split(""):e;for(let s=0;s<r;s++)s in i&&t.call(n,i[s],s,e)};function S(e){return Array.prototype.concat.apply([],arguments)}function k(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function A(e){return/^[\s\xa0]*$/.test(e)}var x,N=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function O(e,t){return-1!=e.indexOf(t)}function P(e,t){return e<t?-1:e>t?1:0}e:{var R=h.navigator;if(R){var D=R.userAgent;if(D){x=D;break e}}x=""}function L(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function M(e){const t={};for(const n in e)t[n]=e[n];return t}var F="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function $(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<F.length;t++)n=F[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function V(e){return V[" "](e),e}V[" "]=d;var U,j,q=O(x,"Opera"),B=O(x,"Trident")||O(x,"MSIE"),z=O(x,"Edge"),H=z||B,G=O(x,"Gecko")&&!(O(x.toLowerCase(),"webkit")&&!O(x,"Edge"))&&!(O(x,"Trident")||O(x,"MSIE"))&&!O(x,"Edge"),W=O(x.toLowerCase(),"webkit")&&!O(x,"Edge");function K(){var e=h.document;return e?e.documentMode:void 0}e:{var Y="",Q=(j=x,G?/rv:([^\);]+)(\)|;)/.exec(j):z?/Edge\/([\d\.]+)/.exec(j):B?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(j):W?/WebKit\/(\S+)/.exec(j):q?/(?:Version)[ \/]?(\S+)/.exec(j):void 0);if(Q&&(Y=Q?Q[1]:""),B){var X=K();if(null!=X&&X>parseFloat(Y)){U=String(X);break e}}U=Y}var J={};var Z=h.document&&B&&(K()||parseInt(U,10))||void 0,ee=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{h.addEventListener("test",d,t),h.removeEventListener("test",d,t)}catch(n){}return e}();function te(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}function ne(e,t){if(te.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(G){e:{try{V(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"==typeof e.pointerType?e.pointerType:re[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&ne.Z.h.call(this)}}te.prototype.h=function(){this.defaultPrevented=!0},b(ne,te);var re={2:"touch",3:"pen",4:"mouse"};ne.prototype.h=function(){ne.Z.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var ie="closure_listenable_"+(1e6*Math.random()|0),se=0;function oe(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ia=i,this.key=++se,this.ca=this.fa=!1}function ae(e){e.ca=!0,e.listener=null,e.proxy=null,e.src=null,e.ia=null}function ce(e){this.src=e,this.g={},this.h=0}function le(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=T(i,t);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(ae(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function ue(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.ca&&s.listener==t&&s.capture==!!n&&s.ia==r)return i}return-1}ce.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var o=ue(e,t,r,i);return-1<o?(t=e[o],n||(t.fa=!1)):((t=new oe(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var he="closure_lm_"+(1e6*Math.random()|0),de={};function pe(e,t,n,r,i){if(r&&r.once)return ge(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)pe(e,t[s],n,r,i);return null}return n=Ie(n),e&&e[ie]?e.N(t,n,f(r)?!!r.capture:!!r,i):fe(e,t,n,!1,r,i)}function fe(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=f(i)?!!i.capture:!!i,a=we(e);if(a||(e[he]=a=new ce(e)),(n=a.add(t,n,r,o,s)).proxy)return n;if(r=function(){var e=_e;return function t(n){return e.call(t.src,t.listener,n)}}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)ee||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ve(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ge(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)ge(e,t[s],n,r,i);return null}return n=Ie(n),e&&e[ie]?e.O(t,n,f(r)?!!r.capture:!!r,i):fe(e,t,n,!0,r,i)}function me(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)me(e,t[s],n,r,i);else r=f(r)?!!r.capture:!!r,n=Ie(n),e&&e[ie]?(e=e.i,(t=String(t).toString())in e.g&&-1<(n=ue(s=e.g[t],n,r,i))&&(ae(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--))):e&&(e=we(e))&&(t=e.g[t.toString()],e=-1,t&&(e=ue(t,n,r,i)),(n=-1<e?t[e]:null)&&ye(n))}function ye(e){if("number"!=typeof e&&e&&!e.ca){var t=e.src;if(t&&t[ie])le(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ve(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=we(t))?(le(n,e),0==n.h&&(n.src=null,t[he]=null)):ae(e)}}}function ve(e){return e in de?de[e]:de[e]="on"+e}function _e(e,t){if(e.ca)e=!0;else{t=new ne(t,this);var n=e.listener,r=e.ia||e.src;e.fa&&ye(e),e=n.call(r,t)}return e}function we(e){return(e=e[he])instanceof ce?e:null}var be="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ie(e){return"function"==typeof e?e:(e[be]||(e[be]=function(t){return e.handleEvent(t)}),e[be])}function Ce(){I.call(this),this.i=new ce(this),this.P=this,this.I=null}function Te(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"==typeof t)t=new te(t,e);else if(t instanceof te)t.target=t.target||e;else{var i=t;$(t=new te(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=t.g=n[s];i=Ee(o,r,!0,t)&&i}if(i=Ee(o=t.g=e,r,!0,t)&&i,i=Ee(o,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=Ee(o=t.g=n[s],r,!1,t)&&i}function Ee(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var o=t[s];if(o&&!o.ca&&o.capture==n){var a=o.listener,c=o.ia||o.src;o.fa&&le(e.i,o),i=!1!==a.call(c,r)&&i}}return i&&!r.defaultPrevented}b(Ce,I),Ce.prototype[ie]=!0,Ce.prototype.removeEventListener=function(e,t,n,r){me(this,e,t,n,r)},Ce.prototype.M=function(){if(Ce.Z.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ae(n[r]);delete t.g[e],t.h--}}this.I=null},Ce.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ce.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Se=h.JSON.stringify;function ke(){var e=De;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Ae,xe=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new Ne,e=>e.reset());class Ne{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function Oe(e){h.setTimeout(()=>{throw e},0)}function Pe(e,t){Ae||function(){var e=h.Promise.resolve(void 0);Ae=function(){e.then(Le)}}(),Re||(Ae(),Re=!0),De.add(e,t)}var Re=!1,De=new class{constructor(){this.h=this.g=null}add(e,t){const n=xe.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}};function Le(){for(var e;e=ke();){try{e.h.call(e.g)}catch(n){Oe(n)}var t=xe;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Re=!1}function Me(e,t){Ce.call(this),this.h=e||1,this.g=t||h,this.j=_(this.kb,this),this.l=Date.now()}function Fe(e){e.da=!1,e.S&&(e.g.clearTimeout(e.S),e.S=null)}function $e(e,t,n){if("function"==typeof e)n&&(e=_(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=_(e.handleEvent,e)}return 2147483647<Number(t)?-1:h.setTimeout(e,t||0)}function Ve(e){e.g=$e(()=>{e.g=null,e.i&&(e.i=!1,Ve(e))},e.j);const t=e.h;e.h=null,e.m.apply(null,t)}b(Me,Ce),(r=Me.prototype).da=!1,r.S=null,r.kb=function(){if(this.da){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-e):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Te(this,"tick"),this.da&&(Fe(this),this.start()))}},r.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},r.M=function(){Me.Z.M.call(this),Fe(this),delete this.g};class Ue extends I{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ve(this)}M(){super.M(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function je(e){I.call(this),this.h=e,this.g={}}b(je,I);var qe=[];function Be(e,t,n,r){Array.isArray(n)||(n&&(qe[0]=n.toString()),n=qe);for(var i=0;i<n.length;i++){var s=pe(t,n[i],r||e.handleEvent,!1,e.h||e);if(!s)break;e.g[s.key]=s}}function ze(e){L(e.g,function(e,t){this.g.hasOwnProperty(t)&&ye(e)},e),e.g={}}function He(){this.g=!0}function Ge(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<i.length;o++)i[o]=""}}}return Se(n)}catch(a){return t}}(e,n)+(r?" "+r:"")})}je.prototype.M=function(){je.Z.M.call(this),ze(this)},je.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},He.prototype.Aa=function(){this.g=!1},He.prototype.info=function(){};var We={},Ke=null;function Ye(){return Ke=Ke||new Ce}function Qe(e){te.call(this,We.Ma,e)}function Xe(e){const t=Ye();Te(t,new Qe(t,e))}function Je(e,t){te.call(this,We.STAT_EVENT,e),this.stat=t}function Ze(e){const t=Ye();Te(t,new Je(t,e))}function et(e,t){te.call(this,We.Na,e),this.size=t}function tt(e,t){if("function"!=typeof e)throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){e()},t)}We.Ma="serverreachability",b(Qe,te),We.STAT_EVENT="statevent",b(Je,te),We.Na="timingevent",b(et,te);var nt={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},rt={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function it(){}function st(){}it.prototype.h=null;var ot,at={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function ct(){te.call(this,"d")}function lt(){te.call(this,"c")}function ut(){}function ht(e,t,n,r){this.l=e,this.j=t,this.m=n,this.X=r||1,this.V=new je(this),this.P=pt,this.W=new Me(e=H?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new dt}function dt(){this.i=null,this.g="",this.h=!1}b(ct,te),b(lt,te),b(ut,it),ut.prototype.g=function(){return new XMLHttpRequest},ut.prototype.i=function(){return{}},ot=new ut;var pt=45e3,ft={},gt={};function mt(e,t,n){e.K=1,e.v=Vt(Rt(t)),e.s=n,e.U=!0,yt(e,null)}function yt(e,t){e.F=Date.now(),bt(e),e.A=Rt(e.v);var n=e.A,r=e.X;Array.isArray(r)||(r=[String(r)]),Jt(n.h,"t",r),e.C=0,n=e.l.H,e.h=new dt,e.g=Zn(e.l,n?t:null,!e.s),0<e.O&&(e.L=new Ue(_(e.Ia,e,e.g),e.O)),Be(e.V,e.g,"readystatechange",e.gb),t=e.H?M(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.s,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Xe(1),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var o="",a=s.split("&"),c=0;c<a.length;c++){var l=a[c].split("=");if(1<l.length){var u=l[0];l=l[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+l+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o})}(e.j,e.u,e.A,e.m,e.X,e.s)}function vt(e){return!!e.g&&"GET"==e.u&&2!=e.K&&e.l.Ba}function _t(e,t,n){let r,i=!0;for(;!e.I&&e.C<n.length;){if(r=wt(e,n),r==gt){4==t&&(e.o=4,Ze(14),i=!1),Ge(e.j,e.m,null,"[Incomplete Response]");break}if(r==ft){e.o=4,Ze(15),Ge(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}Ge(e.j,e.m,r,null),St(e,r)}vt(e)&&r!=gt&&r!=ft&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,Ze(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.aa&&(e.aa=!0,(t=e.l).g==e&&t.$&&!t.L&&(t.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Hn(t),t.L=!0,Ze(11))):(Ge(e.j,e.m,n,"[Invalid Chunked Response]"),Et(e),Tt(e))}function wt(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?gt:(n=Number(t.substring(n,r)),isNaN(n)?ft:(r+=1)+n>t.length?gt:(t=t.substr(r,n),e.C=r+n,t))}function bt(e){e.Y=Date.now()+e.P,It(e,e.P)}function It(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=tt(_(e.eb,e),t)}function Ct(e){e.B&&(h.clearTimeout(e.B),e.B=null)}function Tt(e){0==e.l.G||e.I||Kn(e.l,e)}function Et(e){Ct(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,Fe(e.W),ze(e.V),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function St(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||sn(n.i,e)))if(n.I=e.N,!e.J&&sn(n.i,e)&&3==n.G){try{var r=n.Ca.g.parse(t)}catch(l){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;Wn(n),Mn(n)}zn(n),Ze(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=tt(_(n.ab,n),6e3));if(1>=rn(n.i)&&n.ka){try{n.ka()}catch(l){}n.ka=void 0}}else Qn(n,11)}else if((e.J||n.g==e)&&Wn(n),!A(t))for(i=n.Ca.g.parse(t),t=0;t<i.length;t++){let l=i[t];if(n.U=l[0],l=l[1],2==n.G)if("c"==l[0]){n.J=l[1],n.la=l[2];const t=l[3];null!=t&&(n.ma=t,n.h.info("VER="+n.ma));const i=l[4];null!=i&&(n.za=i,n.h.info("SVER="+n.za));const u=l[5];null!=u&&"number"==typeof u&&0<u&&(n.K=r=1.5*u,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.i;!s.g&&(O(e,"spdy")||O(e,"quic")||O(e,"h2"))&&(s.j=s.l,s.g=new Set,s.h&&(on(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.sa=e,$t(r.F,r.D,e))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-e.F,n.h.info("Handshake RTT: "+n.O+"ms"));var o=e;if((r=n).oa=Jn(r,r.H?r.la:null,r.W),o.J){an(r.i,o);var a=o,c=r.K;c&&a.setTimeout(c),a.B&&(Ct(a),bt(a)),r.g=o}else Bn(r);0<n.l.length&&Vn(n)}else"stop"!=l[0]&&"close"!=l[0]||Qn(n,7);else 3==n.G&&("stop"==l[0]||"close"==l[0]?"stop"==l[0]?Qn(n,7):Ln(n):"noop"!=l[0]&&n.j&&n.j.wa(l),n.A=0)}Xe(4)}catch(l){}}function kt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(p(e)||"string"==typeof e)E(e,t,void 0);else{if(e.T&&"function"==typeof e.T)var n=e.T();else if(e.R&&"function"==typeof e.R)n=void 0;else if(p(e)||"string"==typeof e){n=[];for(var r=e.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,e)n[r++]=i;i=(r=function(e){if(e.R&&"function"==typeof e.R)return e.R();if("string"==typeof e)return e.split("");if(p(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e)).length;for(var s=0;s<i;s++)t.call(void 0,r[s],n&&n[s],e)}}function At(e,t){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(e)if(e instanceof At)for(n=e.T(),r=0;r<n.length;r++)this.set(n[r],e.get(n[r]));else for(r in e)this.set(r,e[r])}function xt(e){if(e.i!=e.g.length){for(var t=0,n=0;t<e.g.length;){var r=e.g[t];Nt(e.h,r)&&(e.g[n++]=r),t++}e.g.length=n}if(e.i!=e.g.length){var i={};for(n=t=0;t<e.g.length;)Nt(i,r=e.g[t])||(e.g[n++]=r,i[r]=1),t++;e.g.length=n}}function Nt(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(r=ht.prototype).setTimeout=function(e){this.P=e},r.gb=function(e){e=e.target;const t=this.L;t&&3==Nn(e)?t.l():this.Ia(e)},r.Ia=function(e){try{if(e==this.g)e:{const u=Nn(this.g);var t=this.g.Da();const d=this.g.ba();if(!(3>u)&&(3!=u||H||this.g&&(this.h.h||this.g.ga()||On(this.g)))){this.I||4!=u||7==t||Xe(8==t||0>=d?3:2),Ct(this);var n=this.g.ba();this.N=n;t:if(vt(this)){var r=On(this.g);e="";var i=r.length,s=4==Nn(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Et(this),Tt(this);var o="";break t}this.h.i=new h.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:s&&t==i-1});r.splice(0,i),this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.ga();if(this.i=200==n,function(e,t,n,r,i,s,o){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+o})}(this.j,this.u,this.A,this.m,this.X,u,n),this.i){if(this.$&&!this.J){t:{if(this.g){var a,c=this.g;if((a=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(a)){var l=a;break t}}l=null}if(!(n=l)){this.i=!1,this.o=3,Ze(12),Et(this),Tt(this);break e}Ge(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,St(this,n)}this.U?(_t(this,u,o),H&&this.i&&3==u&&(Be(this.V,this.W,"tick",this.fb),this.W.start())):(Ge(this.j,this.m,o,null),St(this,o)),4==u&&Et(this),this.i&&!this.I&&(4==u?Kn(this.l,this):(this.i=!1,bt(this)))}else 400==n&&0<o.indexOf("Unknown SID")?(this.o=3,Ze(12)):(this.o=0,Ze(13)),Et(this),Tt(this)}}}catch(u){}},r.fb=function(){if(this.g){var e=Nn(this.g),t=this.g.ga();this.C<t.length&&(Ct(this),_t(this,e,t),this.i&&4!=e&&bt(this))}},r.cancel=function(){this.I=!0,Et(this)},r.eb=function(){this.B=null;const e=Date.now();0<=e-this.Y?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.j,this.A),2!=this.K&&(Xe(3),Ze(17)),Et(this),this.o=2,Tt(this)):It(this,this.Y-e)},(r=At.prototype).R=function(){xt(this);for(var e=[],t=0;t<this.g.length;t++)e.push(this.h[this.g[t]]);return e},r.T=function(){return xt(this),this.g.concat()},r.get=function(e,t){return Nt(this.h,e)?this.h[e]:t},r.set=function(e,t){Nt(this.h,e)||(this.i++,this.g.push(e)),this.h[e]=t},r.forEach=function(e,t){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],s=this.get(i);e.call(t,s,i,this)}};var Ot=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pt(e,t){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,e instanceof Pt){this.g=void 0!==t?t:e.g,Dt(this,e.j),this.s=e.s,Lt(this,e.i),Mt(this,e.m),this.l=e.l,t=e.h;var n=new Kt;n.i=t.i,t.g&&(n.g=new At(t.g),n.h=t.h),Ft(this,n),this.o=e.o}else e&&(n=String(e).match(Ot))?(this.g=!!t,Dt(this,n[1]||"",!0),this.s=Ut(n[2]||""),Lt(this,n[3]||"",!0),Mt(this,n[4]),this.l=Ut(n[5]||"",!0),Ft(this,n[6]||"",!0),this.o=Ut(n[7]||"")):(this.g=!!t,this.h=new Kt(null,this.g))}function Rt(e){return new Pt(e)}function Dt(e,t,n){e.j=n?Ut(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Lt(e,t,n){e.i=n?Ut(t,!0):t}function Mt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Ft(e,t,n){t instanceof Kt?(e.h=t,function(e,t){t&&!e.j&&(Yt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(Qt(this,t),Jt(this,n,e))},e)),e.j=t}(e.h,e.g)):(n||(t=jt(t,Gt)),e.h=new Kt(t,e.g))}function $t(e,t,n){e.h.set(t,n)}function Vt(e){return $t(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function Ut(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function jt(e,t,n){return"string"==typeof e?(e=encodeURI(e).replace(t,qt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function qt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Pt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(jt(t,Bt,!0),":");var n=this.i;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(jt(t,Bt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&e.push("/"),e.push(jt(n,"/"==n.charAt(0)?Ht:zt,!0))),(n=this.h.toString())&&e.push("?",n),(n=this.o)&&e.push("#",jt(n,Wt)),e.join("")};var Bt=/[#\/\?@]/g,zt=/[#\?:]/g,Ht=/[#\?]/g,Gt=/[#\?@]/g,Wt=/#/g;function Kt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Yt(e){e.g||(e.g=new At,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function Qt(e,t){Yt(e),t=Zt(e,t),Nt(e.g.h,t)&&(e.i=null,e.h-=e.g.get(t).length,Nt((e=e.g).h,t)&&(delete e.h[t],e.i--,e.g.length>2*e.i&&xt(e)))}function Xt(e,t){return Yt(e),t=Zt(e,t),Nt(e.g.h,t)}function Jt(e,t,n){Qt(e,t),0<n.length&&(e.i=null,e.g.set(Zt(e,t),k(n)),e.h+=n.length)}function Zt(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function en(e){this.l=e||tn,e=h.PerformanceNavigationTiming?0<(e=h.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):!!(h.g&&h.g.Ea&&h.g.Ea()&&h.g.Ea().Zb),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(r=Kt.prototype).add=function(e,t){Yt(this),this.i=null,e=Zt(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},r.forEach=function(e,t){Yt(this),this.g.forEach(function(n,r){E(n,function(n){e.call(t,n,r,this)},this)},this)},r.T=function(){Yt(this);for(var e=this.g.R(),t=this.g.T(),n=[],r=0;r<t.length;r++)for(var i=e[r],s=0;s<i.length;s++)n.push(t[r]);return n},r.R=function(e){Yt(this);var t=[];if("string"==typeof e)Xt(this,e)&&(t=S(t,this.g.get(Zt(this,e))));else{e=this.g.R();for(var n=0;n<e.length;n++)t=S(t,e[n])}return t},r.set=function(e,t){return Yt(this),this.i=null,Xt(this,e=Zt(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},r.get=function(e,t){return e&&0<(e=this.R(e)).length?String(e[0]):t},r.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=this.g.T(),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r));r=this.R(r);for(var s=0;s<r.length;s++){var o=i;""!==r[s]&&(o+="="+encodeURIComponent(String(r[s]))),e.push(o)}}return this.i=e.join("&")};var tn=10;function nn(e){return!!e.h||!!e.g&&e.g.size>=e.j}function rn(e){return e.h?1:e.g?e.g.size:0}function sn(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function on(e,t){e.g?e.g.add(t):e.h=t}function an(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function cn(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return k(e.i)}function ln(){}function un(){this.g=new ln}function hn(e,t,n){const r=n||"";try{kt(e,function(e,n){let i=e;f(e)&&(i=Se(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function dn(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(s){}}function pn(e){this.l=e.$b||null,this.j=e.ib||!1}function fn(e,t){Ce.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=gn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}en.prototype.cancel=function(){if(this.i=cn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}},ln.prototype.stringify=function(e){return h.JSON.stringify(e,void 0)},ln.prototype.parse=function(e){return h.JSON.parse(e,void 0)},b(pn,it),pn.prototype.g=function(){return new fn(this.l,this.j)},pn.prototype.i=function(e){return function(){return e}}({}),b(fn,Ce);var gn=0;function mn(e){e.j.read().then(e.Sa.bind(e)).catch(e.ha.bind(e))}function yn(e){e.readyState=4,e.l=null,e.j=null,e.A=null,vn(e)}function vn(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(r=fn.prototype).open=function(e,t){if(this.readyState!=gn)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,vn(this)},r.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||h).fetch(new Request(this.B,t)).then(this.Va.bind(this),this.ha.bind(this))},r.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,yn(this)),this.readyState=gn},r.Va=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,vn(this)),this.g&&(this.readyState=3,vn(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==h.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;mn(this)}else e.text().then(this.Ua.bind(this),this.ha.bind(this))},r.Sa=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?yn(this):vn(this),3==this.readyState&&mn(this)}},r.Ua=function(e){this.g&&(this.response=this.responseText=e,yn(this))},r.Ta=function(e){this.g&&(this.response=e,yn(this))},r.ha=function(){this.g&&yn(this)},r.setRequestHeader=function(e,t){this.v.append(e,t)},r.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},r.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)e.push((n=n.value)[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(fn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var _n=h.JSON.parse;function wn(e){Ce.call(this),this.headers=new At,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=bn,this.K=this.L=!1}b(wn,Ce);var bn="",In=/^https?$/i,Cn=["POST","PUT"];function Tn(e){return"content-type"==e.toLowerCase()}function En(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Sn(e),An(e)}function Sn(e){e.D||(e.D=!0,Te(e,"complete"),Te(e,"error"))}function kn(e){if(e.h&&void 0!==u&&(!e.C[1]||4!=Nn(e)||2!=e.ba()))if(e.v&&4==Nn(e))$e(e.Fa,0,e);else if(Te(e,"readystatechange"),4==Nn(e)){e.h=!1;try{const c=e.ba();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var r;if(r=0===c){var i=String(e.H).match(Ot)[1]||null;if(!i&&h.self&&h.self.location){var s=h.self.location.protocol;i=s.substr(0,s.length-1)}r=!In.test(i?i.toLowerCase():"")}n=r}if(n)Te(e,"complete"),Te(e,"success");else{e.m=6;try{var o=2<Nn(e)?e.g.statusText:""}catch(a){o=""}e.j=o+" ["+e.ba()+"]",Sn(e)}}finally{An(e)}}}function An(e,t){if(e.g){xn(e);const r=e.g,i=e.C[0]?d:null;e.g=null,e.C=null,t||Te(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function xn(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(h.clearTimeout(e.A),e.A=null)}function Nn(e){return e.g?e.g.readyState:0}function On(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case bn:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Pn(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=function(e){let t="";return L(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}(n),"string"==typeof e?null!=n&&encodeURIComponent(String(n)):$t(e,t,n))}function Rn(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Dn(e){this.za=0,this.l=[],this.h=new He,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Rn("failFast",!1,e),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Rn("baseRetryDelayMs",5e3,e),this.$a=Rn("retryDelaySeedMs",1e4,e),this.Ya=Rn("forwardChannelMaxRetries",2,e),this.ra=Rn("forwardChannelRequestTimeoutMs",2e4,e),this.qa=e&&e.xmlHttpFactory||void 0,this.Ba=e&&e.Yb||!1,this.K=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.J="",this.i=new en(e&&e.concurrentRequestLimit),this.Ca=new un,this.ja=e&&e.fastHandshake||!1,this.Ra=e&&e.Wb||!1,e&&e.Aa&&this.h.Aa(),e&&e.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&e&&e.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!e||!1!==e.Xb}function Ln(e){if(Fn(e),3==e.G){var t=e.V++,n=Rt(e.F);$t(n,"SID",e.J),$t(n,"RID",t),$t(n,"TYPE","terminate"),jn(e,n),(t=new ht(e,e.h,t,void 0)).K=2,t.v=Vt(Rt(n)),n=!1,h.navigator&&h.navigator.sendBeacon&&(n=h.navigator.sendBeacon(t.v.toString(),"")),!n&&h.Image&&((new Image).src=t.v,n=!0),n||(t.g=Zn(t.l,null),t.g.ea(t.v)),t.F=Date.now(),bt(t)}Xn(e)}function Mn(e){e.g&&(Hn(e),e.g.cancel(),e.g=null)}function Fn(e){Mn(e),e.u&&(h.clearTimeout(e.u),e.u=null),Wn(e),e.i.cancel(),e.m&&("number"==typeof e.m&&h.clearTimeout(e.m),e.m=null)}function $n(e,t){e.l.push(new class{constructor(e,t){this.h=e,this.g=t}}(e.Za++,t)),3==e.G&&Vn(e)}function Vn(e){nn(e.i)||e.m||(e.m=!0,Pe(e.Ha,e),e.C=0)}function Un(e,t){var n;n=t?t.m:e.V++;const r=Rt(e.F);$t(r,"SID",e.J),$t(r,"RID",n),$t(r,"AID",e.U),jn(e,r),e.o&&e.s&&Pn(r,e.o,e.s),n=new ht(e,e.h,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.l=t.D.concat(e.l)),t=qn(e,n,1e3),n.setTimeout(Math.round(.5*e.ra)+Math.round(.5*e.ra*Math.random())),on(e.i,n),mt(n,r,t)}function jn(e,t){e.j&&kt({},function(e,n){$t(t,n,e)})}function qn(e,t,n){n=Math.min(e.l.length,n);var r=e.j?_(e.j.Oa,e.j,e):null;e:{var i=e.l;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].h,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let o=0;o<n;o++){let n=i[o].h;const a=i[o].g;if(n-=t,0>n)t=Math.max(0,i[o].h-100),s=!1;else try{hn(a,e,"req"+n+"_")}catch(Rr){r&&r(a)}}if(s){r=e.join("&");break e}}}return e=e.l.splice(0,n),t.D=e,r}function Bn(e){e.g||e.u||(e.Y=1,Pe(e.Ga,e),e.A=0)}function zn(e){return!(e.g||e.u||3<=e.A||(e.Y++,e.u=tt(_(e.Ga,e),Yn(e,e.A)),e.A++,0))}function Hn(e){null!=e.B&&(h.clearTimeout(e.B),e.B=null)}function Gn(e){e.g=new ht(e,e.h,"rpc",e.Y),null===e.o&&(e.g.H=e.s),e.g.O=0;var t=Rt(e.oa);$t(t,"RID","rpc"),$t(t,"SID",e.J),$t(t,"CI",e.N?"0":"1"),$t(t,"AID",e.U),jn(e,t),$t(t,"TYPE","xmlhttp"),e.o&&e.s&&Pn(t,e.o,e.s),e.K&&e.g.setTimeout(e.K);var n=e.g;e=e.la,n.K=1,n.v=Vt(Rt(t)),n.s=null,n.U=!0,yt(n,e)}function Wn(e){null!=e.v&&(h.clearTimeout(e.v),e.v=null)}function Kn(e,t){var n=null;if(e.g==t){Wn(e),Hn(e),e.g=null;var r=2}else{if(!sn(e.i,t))return;n=t.D,an(e.i,t),r=1}if(e.I=t.N,0!=e.G)if(t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Te(r=Ye(),new et(r,n,t,i)),Vn(e)}else Bn(e);else if(3==(i=t.o)||0==i&&0<e.I||!(1==r&&function(e,t){return!(rn(e.i)>=e.i.j-(e.m?1:0)||(e.m?(e.l=t.D.concat(e.l),0):1==e.G||2==e.G||e.C>=(e.Xa?0:e.Ya)||(e.m=tt(_(e.Ha,e,t),Yn(e,e.C)),e.C++,0)))}(e,t)||2==r&&zn(e)))switch(n&&0<n.length&&(t=e.i,t.i=t.i.concat(n)),i){case 1:Qn(e,5);break;case 4:Qn(e,10);break;case 3:Qn(e,6);break;default:Qn(e,2)}}function Yn(e,t){let n=e.Pa+Math.floor(Math.random()*e.$a);return e.j||(n*=2),n*t}function Qn(e,t){if(e.h.info("Error code "+t),2==t){var n=null;e.j&&(n=null);var r=_(e.jb,e);n||(n=new Pt("//www.google.com/images/cleardot.gif"),h.location&&"http"==h.location.protocol||Dt(n,"https"),Vt(n)),function(e,t){const n=new He;if(h.Image){const r=new Image;r.onload=w(dn,n,r,"TestLoadImage: loaded",!0,t),r.onerror=w(dn,n,r,"TestLoadImage: error",!1,t),r.onabort=w(dn,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=w(dn,n,r,"TestLoadImage: timeout",!1,t),h.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(n.toString(),r)}else Ze(2);e.G=0,e.j&&e.j.va(t),Xn(e),Fn(e)}function Xn(e){e.G=0,e.I=-1,e.j&&(0==cn(e.i).length&&0==e.l.length||(e.i.i.length=0,k(e.l),e.l.length=0),e.j.ua())}function Jn(e,t,n){let r=function(e){return e instanceof Pt?Rt(e):new Pt(e,void 0)}(n);if(""!=r.i)t&&Lt(r,t+"."+r.i),Mt(r,r.m);else{const e=h.location;r=function(e,t,n,r){var i=new Pt(null,void 0);return e&&Dt(i,e),t&&Lt(i,t),n&&Mt(i,n),r&&(i.l=r),i}(e.protocol,t?t+"."+e.hostname:e.hostname,+e.port,n)}return e.aa&&L(e.aa,function(e,t){$t(r,t,e)}),n=e.sa,(t=e.D)&&n&&$t(r,t,n),$t(r,"VER",e.ma),jn(e,r),r}function Zn(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new wn(n&&e.Ba&&!e.qa?new pn({ib:!0}):e.qa)).L=e.H,t}function er(){}function tr(){if(B&&!(10<=Number(Z)))throw Error("Environmental error: no available transport.")}function nr(e,t){Ce.call(this),this.g=new Dn(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.P=e,(e=t&&t.httpHeadersOverwriteParam)&&!A(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!A(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&t in(e=this.h)&&delete e[t]),this.j=new sr(this)}function rr(e){ct.call(this);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function ir(){lt.call(this),this.status=1}function sr(e){this.g=e}(r=wn.prototype).ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ot.g(),this.C=function(e){return e.h||(e.h=e.i())}(this.u?this.u:ot),this.g.onreadystatechange=_(this.Fa,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(s){return void En(this,s)}e=n||"";const i=new At(this.headers);r&&kt(r,function(e,t){i.set(t,e)}),r=function(e){e:{var t=Tn;const n=e.length,r="string"==typeof e?e.split(""):e;for(let i=0;i<n;i++)if(i in r&&t.call(void 0,r[i],i,e)){t=i;break e}t=-1}return 0>t?null:"string"==typeof e?e.charAt(t):e[t]}(i.T()),n=h.FormData&&e instanceof h.FormData,!(0<=T(Cn,t))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(e,t){this.g.setRequestHeader(t,e)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{xn(this),0<this.B&&((this.K=function(e){return B&&function(){return e=J,Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=function(){let e=0;const t=N(String(U)).split("."),n=N("9").split("."),r=Math.max(t.length,n.length);for(let o=0;0==e&&o<r;o++){var i=t[o]||"",s=n[o]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==i[0].length&&0==s[0].length)break;e=P(0==i[1].length?0:parseInt(i[1],10),0==s[1].length?0:parseInt(s[1],10))||P(0==i[2].length,0==s[2].length)||P(i[2],s[2]),i=i[3],s=s[3]}while(0==e)}return 0<=e}();var e}()&&"number"==typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=_(this.pa,this)):this.A=$e(this.pa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(s){En(this,s)}},r.pa=function(){void 0!==u&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Te(this,"timeout"),this.abort(8))},r.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Te(this,"complete"),Te(this,"abort"),An(this))},r.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),An(this,!0)),wn.Z.M.call(this)},r.Fa=function(){this.s||(this.F||this.v||this.l?kn(this):this.cb())},r.cb=function(){kn(this)},r.ba=function(){try{return 2<Nn(this)?this.g.status:-1}catch(j){return-1}},r.ga=function(){try{return this.g?this.g.responseText:""}catch(j){return""}},r.Qa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),_n(t)}},r.Da=function(){return this.m},r.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(r=Dn.prototype).ma=8,r.G=1,r.hb=function(e){try{this.h.info("Origin Trials invoked: "+e)}catch(t){}},r.Ha=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.V=Math.floor(1e5*Math.random()),e=this.V++;const i=new ht(this,this.h,e,void 0);let s=this.s;if(this.P&&(s?(s=M(s),$(s,this.P)):s=this.P),null===this.o&&(i.H=s),this.ja)e:{for(var t=0,n=0;n<this.l.length;n++){var r=this.l[n];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.l.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=qn(this,i,t),$t(n=Rt(this.F),"RID",e),$t(n,"CVER",22),this.D&&$t(n,"X-HTTP-Session-Id",this.D),jn(this,n),this.o&&s&&Pn(n,this.o,s),on(this.i,i),this.Ra&&$t(n,"TYPE","init"),this.ja?($t(n,"$req",t),$t(n,"SID","null"),i.$=!0,mt(i,n,null)):mt(i,n,t),this.G=2}}else 3==this.G&&(e?Un(this,e):0==this.l.length||nn(this.i)||Un(this))},r.Ga=function(){if(this.u=null,Gn(this),this.$&&!(this.L||null==this.g||0>=this.O)){var e=2*this.O;this.h.info("BP detection timer enabled: "+e),this.B=tt(_(this.bb,this),e)}},r.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,Ze(10),Mn(this),Gn(this))},r.ab=function(){null!=this.v&&(this.v=null,Mn(this),zn(this),Ze(19))},r.jb=function(e){e?(this.h.info("Successfully pinged google.com"),Ze(2)):(this.h.info("Failed to ping google.com"),Ze(1))},(r=er.prototype).xa=function(){},r.wa=function(){},r.va=function(){},r.ua=function(){},r.Oa=function(){},tr.prototype.g=function(e,t){return new nr(e,t)},b(nr,Ce),nr.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;e.Wa&&(e.h.info("Origin Trials enabled."),Pe(_(e.hb,e,t))),Ze(0),e.W=t,e.aa=n||{},e.N=e.X,e.F=Jn(e,null,e.W),Vn(e)},nr.prototype.close=function(){Ln(this.g)},nr.prototype.u=function(e){if("string"==typeof e){var t={};t.__data__=e,$n(this.g,t)}else this.v?((t={}).__data__=Se(e),$n(this.g,t)):$n(this.g,e)},nr.prototype.M=function(){this.g.j=null,delete this.j,Ln(this.g),delete this.g,nr.Z.M.call(this)},b(rr,ct),b(ir,lt),b(sr,er),sr.prototype.xa=function(){Te(this.g,"a")},sr.prototype.wa=function(e){Te(this.g,new rr(e))},sr.prototype.va=function(e){Te(this.g,new ir(e))},sr.prototype.ua=function(){Te(this.g,"b")},tr.prototype.createWebChannel=tr.prototype.g,nr.prototype.send=nr.prototype.u,nr.prototype.open=nr.prototype.m,nr.prototype.close=nr.prototype.close,nt.NO_ERROR=0,nt.TIMEOUT=8,nt.HTTP_ERROR=6,rt.COMPLETE="complete",st.EventType=at,at.OPEN="a",at.CLOSE="b",at.ERROR="c",at.MESSAGE="d",Ce.prototype.listen=Ce.prototype.N,wn.prototype.listenOnce=wn.prototype.O,wn.prototype.getLastError=wn.prototype.La,wn.prototype.getLastErrorCode=wn.prototype.Da,wn.prototype.getStatus=wn.prototype.ba,wn.prototype.getResponseJson=wn.prototype.Qa,wn.prototype.getResponseText=wn.prototype.ga,wn.prototype.send=wn.prototype.ea;var or=l.createWebChannelTransport=function(){return new tr},ar=l.getStatEventTarget=function(){return Ye()},cr=l.ErrorCode=nt,lr=l.EventType=rt,ur=l.Event=We,hr=l.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},dr=l.FetchXmlHttpFactory=pn,pr=l.WebChannel=st,fr=l.XhrIo=wn;const gr="@firebase/firestore";class mr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}mr.UNAUTHENTICATED=new mr(null),mr.GOOGLE_CREDENTIALS=new mr("google-credentials-uid"),mr.FIRST_PARTY=new mr("first-party-uid"),mr.MOCK_USER=new mr("mock-user");let yr="9.5.0";const vr=new o.Yd("@firebase/firestore");function _r(){return vr.logLevel}function wr(e){vr.setLogLevel(e)}function br(e,...t){if(vr.logLevel<=o.in.DEBUG){const n=t.map(Tr);vr.debug(`Firestore (${yr}): ${e}`,...n)}}function Ir(e,...t){if(vr.logLevel<=o.in.ERROR){const n=t.map(Tr);vr.error(`Firestore (${yr}): ${e}`,...n)}}function Cr(e,...t){if(vr.logLevel<=o.in.WARN){const n=t.map(Tr);vr.warn(`Firestore (${yr}): ${e}`,...n)}}function Tr(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function Er(e="Unexpected state"){const t=`FIRESTORE (${yr}) INTERNAL ASSERTION FAILED: `+e;throw Ir(t),new Error(t)}function Sr(e,t){e||Er()}function kr(e,t){e||Er()}function Ar(e,t){return e}const xr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Nr extends Error{constructor(e,t){super(t),this.code=e,this.message=t,this.name="FirebaseError",this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Or{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Pr{constructor(e,t){this.user=t,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization=`Bearer ${e}`}}class Rr{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(mr.UNAUTHENTICATED))}shutdown(){}}class Dr{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Lr{constructor(e){this.t=e,this.currentUser=mr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new Or;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Or,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},o=e=>{br("FirebaseCredentialsProvider","Auth detected"),this.auth=e,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(e=>o(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?o(e):(br("FirebaseCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Or)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(br("FirebaseCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Sr("string"==typeof t.accessToken),new Pr(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Sr(null===e||"string"==typeof e),new mr(e)}}class Mr{constructor(e,t,n){this.h=e,this.l=t,this.m=n,this.type="FirstParty",this.user=mr.FIRST_PARTY}get authHeaders(){const e={"X-Goog-AuthUser":this.l},t=this.h.auth.getAuthHeaderValueForFirstParty([]);return t&&(e.Authorization=t),this.m&&(e["X-Goog-Iam-Authorization-Token"]=this.m),e}}class Fr{constructor(e,t,n){this.h=e,this.l=t,this.m=n}getToken(){return Promise.resolve(new Mr(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(mr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class $r{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.g(e),this.p=e=>t.writeSequenceNumber(e))}g(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.p&&this.p(e),e}}function Vr(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}$r.T=-1;class Ur{static I(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const r=Vr(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%e.length))}return n}}function jr(e,t){return e<t?-1:e>t?1:0}function qr(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}function Br(e){return e+"\0"}class zr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Nr(xr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Nr(xr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Nr(xr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Nr(xr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return zr.fromMillis(Date.now())}static fromDate(e){return zr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new zr(t,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?jr(this.nanoseconds,e.nanoseconds):jr(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Hr{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Hr(e)}static min(){return new Hr(new zr(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Gr(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Wr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function Kr(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class Yr{constructor(e,t,n){void 0===t?t=0:t>e.length&&Er(),void 0===n?n=e.length-t:n>e.length-t&&Er(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Yr.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Yr?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Qr extends Yr{construct(e,t,n){return new Qr(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const n of e){if(n.indexOf("//")>=0)throw new Nr(xr.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);t.push(...n.split("/").filter(e=>e.length>0))}return new Qr(t)}static emptyPath(){return new Qr([])}}const Xr=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Jr extends Yr{construct(e,t,n){return new Jr(e,t,n)}static isValidIdentifier(e){return Xr.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Jr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Jr(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new Nr(xr.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Nr(xr.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Nr(xr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new Nr(xr.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Jr(t)}static emptyPath(){return new Jr([])}}class Zr{constructor(e){this.fields=e,e.sort(Jr.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qr(this.fields,e.fields,(e,t)=>e.isEqual(t))}}function ei(){return"undefined"!=typeof atob}class ti{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new ti(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new ti(t)}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return jr(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ti.EMPTY_BYTE_STRING=new ti("");const ni=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ri(e){if(Sr(!!e),"string"==typeof e){let t=0;const n=ni.exec(e);if(Sr(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ii(e.seconds),nanos:ii(e.nanos)}}function ii(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function si(e){return"string"==typeof e?ti.fromBase64String(e):ti.fromUint8Array(e)}function oi(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function ai(e){const t=e.mapValue.fields.__previous_value__;return oi(t)?ai(t):t}function ci(e){const t=ri(e.mapValue.fields.__local_write_time__.timestampValue);return new zr(t.seconds,t.nanos)}function li(e){return null==e}function ui(e){return 0===e&&1/e==-1/0}function hi(e){return"number"==typeof e&&Number.isInteger(e)&&!ui(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}class di{constructor(e){this.path=e}static fromPath(e){return new di(Qr.fromString(e))}static fromName(e){return new di(Qr.fromString(e).popFirst(5))}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}isEqual(e){return null!==e&&0===Qr.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return Qr.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new di(new Qr(e.slice()))}}function pi(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?oi(e)?4:10:Er()}function fi(e,t){const n=pi(e);if(n!==pi(t))return!1;switch(n){case 0:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return ci(e).isEqual(ci(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=ri(e.timestampValue),r=ri(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return si(e.bytesValue).isEqual(si(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return ii(e.geoPointValue.latitude)===ii(t.geoPointValue.latitude)&&ii(e.geoPointValue.longitude)===ii(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return ii(e.integerValue)===ii(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=ii(e.doubleValue),r=ii(t.doubleValue);return n===r?ui(n)===ui(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return qr(e.arrayValue.values||[],t.arrayValue.values||[],fi);case 10:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(Gr(n)!==Gr(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!fi(n[i],r[i])))return!1;return!0}(e,t);default:return Er()}}function gi(e,t){return void 0!==(e.values||[]).find(e=>fi(e,t))}function mi(e,t){const n=pi(e),r=pi(t);if(n!==r)return jr(n,r);switch(n){case 0:return 0;case 1:return jr(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=ii(e.integerValue||e.doubleValue),r=ii(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return yi(e.timestampValue,t.timestampValue);case 4:return yi(ci(e),ci(t));case 5:return jr(e.stringValue,t.stringValue);case 6:return function(e,t){const n=si(e),r=si(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=jr(n[i],r[i]);if(0!==e)return e}return jr(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=jr(ii(e.latitude),ii(t.latitude));return 0!==n?n:jr(ii(e.longitude),ii(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=mi(n[i],r[i]);if(e)return e}return jr(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let o=0;o<r.length&&o<s.length;++o){const e=jr(r[o],s[o]);if(0!==e)return e;const t=mi(n[r[o]],i[s[o]]);if(0!==t)return t}return jr(r.length,s.length)}(e.mapValue,t.mapValue);default:throw Er()}}function yi(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return jr(e,t);const n=ri(e),r=ri(t),i=jr(n.seconds,r.seconds);return 0!==i?i:jr(n.nanos,r.nanos)}function vi(e){return _i(e)}function _i(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=ri(e);return`time(${t.seconds},${t.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?si(e.bytesValue).toBase64():"referenceValue"in e?di.fromName(e.referenceValue).toString():"geoPointValue"in e?`geo(${(t=e.geoPointValue).latitude},${t.longitude})`:"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=_i(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+=`${i}:${_i(e.fields[i])}`;return n+"}"}(e.mapValue):Er();var t}function wi(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function bi(e){return!!e&&"integerValue"in e}function Ii(e){return!!e&&"arrayValue"in e}function Ci(e){return!!e&&"nullValue"in e}function Ti(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Ei(e){return!!e&&"mapValue"in e}function Si(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Wr(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Si(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Si(e.arrayValue.values[n]);return t}return Object.assign({},e)}class ki{constructor(e){this.value=e}static empty(){return new ki({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Ei(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Si(t)}setAll(e){let t=Jr.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=Si(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Ei(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return fi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Ei(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){Wr(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new ki(Si(this.value))}}function Ai(e){const t=[];return Wr(e.fields,(e,n)=>{const r=new Jr([e]);if(Ei(n)){const e=Ai(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new Zr(t)}class xi{constructor(e,t,n,r,i){this.key=e,this.documentType=t,this.version=n,this.data=r,this.documentState=i}static newInvalidDocument(e){return new xi(e,0,Hr.min(),ki.empty(),0)}static newFoundDocument(e,t,n){return new xi(e,1,t,n,0)}static newNoDocument(e,t){return new xi(e,2,t,ki.empty(),0)}static newUnknownDocument(e,t){return new xi(e,3,t,ki.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ki.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ki.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof xi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}clone(){return new xi(this.key,this.documentType,this.version,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Ni{constructor(e,t=null,n=[],r=[],i=null,s=null,o=null){this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=o,this.A=null}}function Oi(e,t=null,n=[],r=[],i=null,s=null,o=null){return new Ni(e,t,n,r,i,s,o)}function Pi(e){const t=Ar(e);if(null===t.A){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>function(e){return e.field.canonicalString()+e.op.toString()+vi(e.value)}(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),li(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=Hi(t.startAt)),t.endAt&&(e+="|ub:",e+=Hi(t.endAt)),t.A=e}return t.A}function Ri(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let i=0;i<e.orderBy.length;i++)if(!Wi(e.orderBy[i],t.orderBy[i]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let i=0;i<e.filters.length;i++)if((n=e.filters[i]).op!==(r=t.filters[i]).op||!n.field.isEqual(r.field)||!fi(n.value,r.value))return!1;var n,r;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Yi(e.startAt,t.startAt)&&Yi(e.endAt,t.endAt)}function Di(e){return di.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Li extends class{}{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.R(e,t,n):new Mi(e,t,n):"array-contains"===t?new Ui(e,n):"in"===t?new ji(e,n):"not-in"===t?new qi(e,n):"array-contains-any"===t?new Bi(e,n):new Li(e,t,n)}static R(e,t,n){return"in"===t?new Fi(e,n):new $i(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.P(mi(t,this.value)):null!==t&&pi(this.value)===pi(t)&&this.P(mi(t,this.value))}P(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Er()}}v(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Mi extends Li{constructor(e,t,n){super(e,t,n),this.key=di.fromName(n.referenceValue)}matches(e){const t=di.comparator(e.key,this.key);return this.P(t)}}class Fi extends Li{constructor(e,t){super(e,"in",t),this.keys=Vi(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class $i extends Li{constructor(e,t){super(e,"not-in",t),this.keys=Vi(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Vi(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>di.fromName(e.referenceValue))}class Ui extends Li{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Ii(t)&&gi(t.arrayValue,this.value)}}class ji extends Li{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&gi(this.value.arrayValue,t)}}class qi extends Li{constructor(e,t){super(e,"not-in",t)}matches(e){if(gi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!gi(this.value.arrayValue,t)}}class Bi extends Li{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Ii(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>gi(this.value.arrayValue,e))}}class zi{constructor(e,t){this.position=e,this.before=t}}function Hi(e){return`${e.before?"b":"a"}:${e.position.map(e=>vi(e)).join(",")}`}class Gi{constructor(e,t="asc"){this.field=e,this.dir=t}}function Wi(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}function Ki(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(r=s.field.isKeyField()?di.comparator(di.fromName(o.referenceValue),n.key):mi(o,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return e.before?r<=0:r<0}function Yi(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.before!==t.before||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!fi(e.position[n],t.position[n]))return!1;return!0}class Qi{constructor(e,t=null,n=[],r=[],i=null,s="F",o=null,a=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=o,this.endAt=a,this.V=null,this.S=null}}function Xi(e,t,n,r,i,s,o,a){return new Qi(e,t,n,r,i,s,o,a)}function Ji(e){return new Qi(e)}function Zi(e){return!li(e.limit)&&"F"===e.limitType}function es(e){return!li(e.limit)&&"L"===e.limitType}function ts(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function ns(e){for(const t of e.filters)if(t.v())return t.field;return null}function rs(e){return null!==e.collectionGroup}function is(e){const t=Ar(e);if(null===t.V){t.V=[];const e=ns(t),n=ts(t);if(null!==e&&null===n)e.isKeyField()||t.V.push(new Gi(e)),t.V.push(new Gi(Jr.keyField(),"asc"));else{let e=!1;for(const n of t.explicitOrderBy)t.V.push(n),n.field.isKeyField()&&(e=!0);if(!e){const e=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.V.push(new Gi(Jr.keyField(),e))}}}return t.V}function ss(e){const t=Ar(e);if(!t.S)if("F"===t.limitType)t.S=Oi(t.path,t.collectionGroup,is(t),t.filters,t.limit,t.startAt,t.endAt);else{const e=[];for(const i of is(t))e.push(new Gi(i.field,"desc"===i.dir?"asc":"desc"));const n=t.endAt?new zi(t.endAt.position,!t.endAt.before):null,r=t.startAt?new zi(t.startAt.position,!t.startAt.before):null;t.S=Oi(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}return t.S}function os(e,t,n){return new Qi(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function as(e,t){return Ri(ss(e),ss(t))&&e.limitType===t.limitType}function cs(e){return`${Pi(ss(e))}|lt:${e.limitType}`}function ls(e){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(e=>{return`${(t=e).field.canonicalString()} ${t.op} ${vi(t.value)}`;var t}).join(", ")}]`),li(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(e=>function(e){return`${e.field.canonicalString()} (${e.dir})`}(e)).join(", ")}]`),e.startAt&&(t+=", startAt: "+Hi(e.startAt)),e.endAt&&(t+=", endAt: "+Hi(e.endAt)),`Target(${t})`}(ss(e))}; limitType=${e.limitType})`}function us(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):di.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of e.explicitOrderBy)if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!Ki(e.startAt,is(e),t)||e.endAt&&Ki(e.endAt,is(e),t))}(e,t)}function hs(e){return(t,n)=>{let r=!1;for(const i of is(e)){const e=ds(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function ds(e,t,n){const r=e.field.isKeyField()?di.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?mi(r,i):Er()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Er()}}function ps(e,t){if(e.D){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ui(t)?"-0":t}}function fs(e){return{integerValue:""+e}}function gs(e,t){return hi(t)?fs(t):ps(e,t)}class ms{constructor(){this._=void 0}}function ys(e,t,n){return e instanceof ws?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof bs?Is(e,t):e instanceof Cs?Ts(e,t):function(e,t){const n=_s(e,t),r=Ss(n)+Ss(e.C);return bi(n)&&bi(e.C)?fs(r):ps(e.N,r)}(e,t)}function vs(e,t,n){return e instanceof bs?Is(e,t):e instanceof Cs?Ts(e,t):n}function _s(e,t){return e instanceof Es?bi(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}class ws extends ms{}class bs extends ms{constructor(e){super(),this.elements=e}}function Is(e,t){const n=ks(t);for(const r of e.elements)n.some(e=>fi(e,r))||n.push(r);return{arrayValue:{values:n}}}class Cs extends ms{constructor(e){super(),this.elements=e}}function Ts(e,t){let n=ks(t);for(const r of e.elements)n=n.filter(e=>!fi(e,r));return{arrayValue:{values:n}}}class Es extends ms{constructor(e,t){super(),this.N=e,this.C=t}}function Ss(e){return ii(e.integerValue||e.doubleValue)}function ks(e){return Ii(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class As{constructor(e,t){this.field=e,this.transform=t}}class xs{constructor(e,t){this.version=e,this.transformResults=t}}class Ns{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Ns}static exists(e){return new Ns(void 0,e)}static updateTime(e){return new Ns(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Os(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Ps{}function Rs(e,t,n){e instanceof $s?function(e,t,n){const r=e.value.clone(),i=js(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Vs?function(e,t,n){if(!Os(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=js(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Us(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Ds(e,t,n){e instanceof $s?function(e,t,n){if(!Os(e.precondition,t))return;const r=e.value.clone(),i=qs(e.fieldTransforms,n,t);r.setAll(i),t.convertToFoundDocument(Fs(t),r).setHasLocalMutations()}(e,t,n):e instanceof Vs?function(e,t,n){if(!Os(e.precondition,t))return;const r=qs(e.fieldTransforms,n,t),i=t.data;i.setAll(Us(e)),i.setAll(r),t.convertToFoundDocument(Fs(t),i).setHasLocalMutations()}(e,t,n):function(e,t){Os(e.precondition,t)&&t.convertToNoDocument(Hr.min())}(e,t)}function Ls(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=_s(r.transform,e||null);null!=i&&(null==n&&(n=ki.empty()),n.set(r.field,i))}return n||null}function Ms(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&qr(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof bs&&t instanceof bs||e instanceof Cs&&t instanceof Cs?qr(e.elements,t.elements,fi):e instanceof Es&&t instanceof Es?fi(e.C,t.C):e instanceof ws&&t instanceof ws}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}function Fs(e){return e.isFoundDocument()?e.version:Hr.min()}class $s extends Ps{constructor(e,t,n,r=[]){super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}}class Vs extends Ps{constructor(e,t,n,r,i=[]){super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}}function Us(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function js(e,t,n){const r=new Map;Sr(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,vs(o,a,n[i]))}return r}function qs(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,ys(e,s,t))}return r}class Bs extends Ps{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class zs extends Ps{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class Hs{constructor(e){this.count=e}}var Gs,Ws;function Ks(e){switch(e){default:return Er();case xr.CANCELLED:case xr.UNKNOWN:case xr.DEADLINE_EXCEEDED:case xr.RESOURCE_EXHAUSTED:case xr.INTERNAL:case xr.UNAVAILABLE:case xr.UNAUTHENTICATED:return!1;case xr.INVALID_ARGUMENT:case xr.NOT_FOUND:case xr.ALREADY_EXISTS:case xr.PERMISSION_DENIED:case xr.FAILED_PRECONDITION:case xr.ABORTED:case xr.OUT_OF_RANGE:case xr.UNIMPLEMENTED:case xr.DATA_LOSS:return!0}}function Ys(e){if(void 0===e)return Ir("GRPC error has no .code"),xr.UNKNOWN;switch(e){case Gs.OK:return xr.OK;case Gs.CANCELLED:return xr.CANCELLED;case Gs.UNKNOWN:return xr.UNKNOWN;case Gs.DEADLINE_EXCEEDED:return xr.DEADLINE_EXCEEDED;case Gs.RESOURCE_EXHAUSTED:return xr.RESOURCE_EXHAUSTED;case Gs.INTERNAL:return xr.INTERNAL;case Gs.UNAVAILABLE:return xr.UNAVAILABLE;case Gs.UNAUTHENTICATED:return xr.UNAUTHENTICATED;case Gs.INVALID_ARGUMENT:return xr.INVALID_ARGUMENT;case Gs.NOT_FOUND:return xr.NOT_FOUND;case Gs.ALREADY_EXISTS:return xr.ALREADY_EXISTS;case Gs.PERMISSION_DENIED:return xr.PERMISSION_DENIED;case Gs.FAILED_PRECONDITION:return xr.FAILED_PRECONDITION;case Gs.ABORTED:return xr.ABORTED;case Gs.OUT_OF_RANGE:return xr.OUT_OF_RANGE;case Gs.UNIMPLEMENTED:return xr.UNIMPLEMENTED;case Gs.DATA_LOSS:return xr.DATA_LOSS;default:return Er()}}(Ws=Gs||(Gs={}))[Ws.OK=0]="OK",Ws[Ws.CANCELLED=1]="CANCELLED",Ws[Ws.UNKNOWN=2]="UNKNOWN",Ws[Ws.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ws[Ws.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ws[Ws.NOT_FOUND=5]="NOT_FOUND",Ws[Ws.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ws[Ws.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ws[Ws.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ws[Ws.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ws[Ws.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ws[Ws.ABORTED=10]="ABORTED",Ws[Ws.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ws[Ws.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ws[Ws.INTERNAL=13]="INTERNAL",Ws[Ws.UNAVAILABLE=14]="UNAVAILABLE",Ws[Ws.DATA_LOSS=15]="DATA_LOSS";class Qs{constructor(e,t){this.comparator=e,this.root=t||Js.EMPTY}insert(e,t){return new Qs(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Js.BLACK,null,null))}remove(e){return new Qs(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Js.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push(`${t}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Xs(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Xs(this.root,e,this.comparator,!1)}getReverseIterator(){return new Xs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Xs(this.root,e,this.comparator,!0)}}class Xs{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Js{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:Js.RED,this.left=null!=r?r:Js.EMPTY,this.right=null!=i?i:Js.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new Js(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return Js.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return Js.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Js.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Js.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Er();if(this.right.isRed())throw Er();const e=this.left.check();if(e!==this.right.check())throw Er();return e+(this.isRed()?0:1)}}Js.EMPTY=null,Js.RED=!0,Js.BLACK=!1,Js.EMPTY=new class{constructor(){this.size=0}get key(){throw Er()}get value(){throw Er()}get color(){throw Er()}get left(){throw Er()}get right(){throw Er()}copy(e,t,n,r,i){return this}insert(e,t,n){return new Js(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Zs{constructor(e){this.comparator=e,this.data=new Qs(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new eo(this.data.getIterator())}getIteratorFrom(e){return new eo(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof Zs))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Zs(this.comparator);return t.data=e,t}}class eo{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}const to=new Qs(di.comparator);function no(){return to}const ro=new Qs(di.comparator);function io(){return ro}const so=new Qs(di.comparator);function oo(){return so}const ao=new Zs(di.comparator);function co(...e){let t=ao;for(const n of e)t=t.add(n);return t}const lo=new Zs(jr);function uo(){return lo}class ho{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t){const n=new Map;return n.set(e,po.createSynthesizedTargetChangeForCurrentChange(e,t)),new ho(Hr.min(),n,uo(),no(),co())}}class po{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t){return new po(ti.EMPTY_BYTE_STRING,t,co(),co(),co())}}class fo{constructor(e,t,n,r){this.k=e,this.removedTargetIds=t,this.key=n,this.$=r}}class go{constructor(e,t){this.targetId=e,this.O=t}}class mo{constructor(e,t,n=ti.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class yo{constructor(){this.F=0,this.M=wo(),this.L=ti.EMPTY_BYTE_STRING,this.B=!1,this.U=!0}get current(){return this.B}get resumeToken(){return this.L}get q(){return 0!==this.F}get K(){return this.U}j(e){e.approximateByteSize()>0&&(this.U=!0,this.L=e)}W(){let e=co(),t=co(),n=co();return this.M.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Er()}}),new po(this.L,this.B,e,t,n)}G(){this.U=!1,this.M=wo()}H(e,t){this.U=!0,this.M=this.M.insert(e,t)}J(e){this.U=!0,this.M=this.M.remove(e)}Y(){this.F+=1}X(){this.F-=1}Z(){this.U=!0,this.B=!0}}class vo{constructor(e){this.tt=e,this.et=new Map,this.nt=no(),this.st=_o(),this.it=new Zs(jr)}rt(e){for(const t of e.k)e.$&&e.$.isFoundDocument()?this.ot(t,e.$):this.ct(t,e.key,e.$);for(const t of e.removedTargetIds)this.ct(t,e.key,e.$)}at(e){this.forEachTarget(e,t=>{const n=this.ut(t);switch(e.state){case 0:this.ht(t)&&n.j(e.resumeToken);break;case 1:n.X(),n.q||n.G(),n.j(e.resumeToken);break;case 2:n.X(),n.q||this.removeTarget(t);break;case 3:this.ht(t)&&(n.Z(),n.j(e.resumeToken));break;case 4:this.ht(t)&&(this.lt(t),n.j(e.resumeToken));break;default:Er()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.et.forEach((e,n)=>{this.ht(n)&&t(n)})}ft(e){const t=e.targetId,n=e.O.count,r=this.dt(t);if(r){const e=r.target;if(Di(e))if(0===n){const n=new di(e.path);this.ct(t,n,xi.newNoDocument(n,Hr.min()))}else Sr(1===n);else this.wt(t)!==n&&(this.lt(t),this.it=this.it.add(t))}}_t(e){const t=new Map;this.et.forEach((n,r)=>{const i=this.dt(r);if(i){if(n.current&&Di(i.target)){const t=new di(i.target.path);null!==this.nt.get(t)||this.gt(r,t)||this.ct(r,t,xi.newNoDocument(t,e))}n.K&&(t.set(r,n.W()),n.G())}});let n=co();this.st.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.dt(e);return!t||2===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))});const r=new ho(e,t,this.it,this.nt,n);return this.nt=no(),this.st=_o(),this.it=new Zs(jr),r}ot(e,t){if(!this.ht(e))return;const n=this.gt(e,t.key)?2:0;this.ut(e).H(t.key,n),this.nt=this.nt.insert(t.key,t),this.st=this.st.insert(t.key,this.yt(t.key).add(e))}ct(e,t,n){if(!this.ht(e))return;const r=this.ut(e);this.gt(e,t)?r.H(t,1):r.J(t),this.st=this.st.insert(t,this.yt(t).delete(e)),n&&(this.nt=this.nt.insert(t,n))}removeTarget(e){this.et.delete(e)}wt(e){const t=this.ut(e).W();return this.tt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Y(e){this.ut(e).Y()}ut(e){let t=this.et.get(e);return t||(t=new yo,this.et.set(e,t)),t}yt(e){let t=this.st.get(e);return t||(t=new Zs(jr),this.st=this.st.insert(e,t)),t}ht(e){const t=null!==this.dt(e);return t||br("WatchChangeAggregator","Detected inactive target",e),t}dt(e){const t=this.et.get(e);return t&&t.q?null:this.tt.Tt(e)}lt(e){this.et.set(e,new yo),this.tt.getRemoteKeysForTarget(e).forEach(t=>{this.ct(e,t,null)})}gt(e,t){return this.tt.getRemoteKeysForTarget(e).has(t)}}function _o(){return new Qs(di.comparator)}function wo(){return new Qs(di.comparator)}const bo={asc:"ASCENDING",desc:"DESCENDING"},Io={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Co{constructor(e,t){this.databaseId=e,this.D=t}}function To(e,t){return e.D?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Eo(e,t){return e.D?t.toBase64():t.toUint8Array()}function So(e,t){return To(e,t.toTimestamp())}function ko(e){return Sr(!!e),Hr.fromTimestamp(function(e){const t=ri(e);return new zr(t.seconds,t.nanos)}(e))}function Ao(e,t){return function(e){return new Qr(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function xo(e){const t=Qr.fromString(e);return Sr(Zo(t)),t}function No(e,t){return Ao(e.databaseId,t.path)}function Oo(e,t){const n=xo(t);if(n.get(1)!==e.databaseId.projectId)throw new Nr(xr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Nr(xr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new di(Lo(n))}function Po(e,t){return Ao(e.databaseId,t)}function Ro(e){const t=xo(e);return 4===t.length?Qr.emptyPath():Lo(t)}function Do(e){return new Qr(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Lo(e){return Sr(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Mo(e,t,n){return{name:No(e,t),fields:n.value.mapValue.fields}}function Fo(e,t,n){const r=Oo(e,t.name),i=ko(t.updateTime),s=new ki({mapValue:{fields:t.fields}}),o=xi.newFoundDocument(r,i,s);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function $o(e,t){let n;if(t instanceof $s)n={update:Mo(e,t.key,t.value)};else if(t instanceof Bs)n={delete:No(e,t.key)};else if(t instanceof Vs)n={update:Mo(e,t.key,t.data),updateMask:Jo(t.fieldMask)};else{if(!(t instanceof zs))return Er();n={verify:No(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof ws)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof bs)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Cs)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Es)return{fieldPath:t.field.canonicalString(),increment:n.C};throw Er()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:So(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Er()}(e,t.precondition)),n}function Vo(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Ns.updateTime(ko(e.updateTime)):void 0!==e.exists?Ns.exists(e.exists):Ns.none()}(t.currentDocument):Ns.none(),r=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let n=null;"setToServerValue"in t?(Sr("REQUEST_TIME"===t.setToServerValue),n=new ws):"appendMissingElements"in t?n=new bs(t.appendMissingElements.values||[]):"removeAllFromArray"in t?n=new Cs(t.removeAllFromArray.values||[]):"increment"in t?n=new Es(e,t.increment):Er();const r=Jr.fromServerFormat(t.fieldPath);return new As(r,n)}(e,t)):[];if(t.update){const i=Oo(e,t.update.name),s=new ki({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){return new Zr((e.fieldPaths||[]).map(e=>Jr.fromServerFormat(e)))}(t.updateMask);return new Vs(i,s,e,n,r)}return new $s(i,s,n,r)}if(t.delete){const r=Oo(e,t.delete);return new Bs(r,n)}if(t.verify){const r=Oo(e,t.verify);return new zs(r,n)}return Er()}function Uo(e,t){return{documents:[Po(e,t.path)]}}function jo(e,t){const n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Po(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Po(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(e){if(0===e.length)return;const t=e.map(e=>function(e){if("=="===e.op){if(Ti(e.value))return{unaryFilter:{field:Ko(e.field),op:"IS_NAN"}};if(Ci(e.value))return{unaryFilter:{field:Ko(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Ti(e.value))return{unaryFilter:{field:Ko(e.field),op:"IS_NOT_NAN"}};if(Ci(e.value))return{unaryFilter:{field:Ko(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ko(e.field),op:Wo(e.op),value:e.value}}}(e));return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}(t.filters);i&&(n.structuredQuery.where=i);const s=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Ko(e.field),direction:Go(e.dir)}}(e))}(t.orderBy);s&&(n.structuredQuery.orderBy=s);const o=function(e,t){return e.D||li(t)?t:{value:t}}(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=zo(t.startAt)),t.endAt&&(n.structuredQuery.endAt=zo(t.endAt)),n}function qo(e){let t=Ro(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Sr(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=Bo(n.where));let o=[];n.orderBy&&(o=n.orderBy.map(e=>function(e){return new Gi(Yo(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)));let a=null;n.limit&&(a=function(e){let t;return t="object"==typeof e?e.value:e,li(t)?null:t}(n.limit));let c=null;n.startAt&&(c=Ho(n.startAt));let l=null;return n.endAt&&(l=Ho(n.endAt)),Xi(t,i,o,s,a,"F",c,l)}function Bo(e){return e?void 0!==e.unaryFilter?[Xo(e)]:void 0!==e.fieldFilter?[Qo(e)]:void 0!==e.compositeFilter?e.compositeFilter.filters.map(e=>Bo(e)).reduce((e,t)=>e.concat(t)):Er():[]}function zo(e){return{before:e.before,values:e.position}}function Ho(e){return new zi(e.values||[],!!e.before)}function Go(e){return bo[e]}function Wo(e){return Io[e]}function Ko(e){return{fieldPath:e.canonicalString()}}function Yo(e){return Jr.fromServerFormat(e.fieldPath)}function Qo(e){return Li.create(Yo(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Er()}}(e.fieldFilter.op),e.fieldFilter.value)}function Xo(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Yo(e.unaryFilter.field);return Li.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Yo(e.unaryFilter.field);return Li.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Yo(e.unaryFilter.field);return Li.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=Yo(e.unaryFilter.field);return Li.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Er()}}function Jo(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function Zo(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}function ea(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=na(t)),t=ta(e.get(n),t);return na(t)}function ta(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function na(e){return e+"\x01\x01"}function ra(e){const t=e.length;if(Sr(t>=2),2===t)return Sr("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),Qr.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&Er(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let o;0===i.length?o=n:(i+=n,o=i,i=""),r.push(o);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:Er()}s=t+2}return new Qr(r)}class ia{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class sa{constructor(e,t,n){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=n}}sa.store="owner",sa.key="owner";class oa{constructor(e,t,n){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=n}}oa.store="mutationQueues",oa.keyPath="userId";class aa{constructor(e,t,n,r,i){this.userId=e,this.batchId=t,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}}aa.store="mutations",aa.keyPath="batchId",aa.userMutationsIndex="userMutationsIndex",aa.userMutationsKeyPath=["userId","batchId"];class ca{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,ea(t)]}static key(e,t,n){return[e,ea(t),n]}}ca.store="documentMutations",ca.PLACEHOLDER=new ca;class la{constructor(e,t){this.path=e,this.readTime=t}}class ua{constructor(e,t){this.path=e,this.version=t}}class ha{constructor(e,t,n,r,i,s){this.unknownDocument=e,this.noDocument=t,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=s}}ha.store="remoteDocuments",ha.readTimeIndex="readTimeIndex",ha.readTimeIndexPath="readTime",ha.collectionReadTimeIndex="collectionReadTimeIndex",ha.collectionReadTimeIndexPath=["parentPath","readTime"];class da{constructor(e){this.byteSize=e}}da.store="remoteDocumentGlobal",da.key="remoteDocumentGlobalKey";class pa{constructor(e,t,n,r,i,s,o){this.targetId=e,this.canonicalId=t,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=s,this.query=o}}pa.store="targets",pa.keyPath="targetId",pa.queryTargetsIndexName="queryTargetsIndex",pa.queryTargetsKeyPath=["canonicalId","targetId"];class fa{constructor(e,t,n){this.targetId=e,this.path=t,this.sequenceNumber=n}}fa.store="targetDocuments",fa.keyPath=["targetId","path"],fa.documentTargetsIndex="documentTargetsIndex",fa.documentTargetsKeyPath=["path","targetId"];class ga{constructor(e,t,n,r){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=n,this.targetCount=r}}ga.key="targetGlobalKey",ga.store="targetGlobal";class ma{constructor(e,t){this.collectionId=e,this.parent=t}}ma.store="collectionParents",ma.keyPath=["collectionId","parent"];class ya{constructor(e,t,n,r){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=n,this.inForeground=r}}ya.store="clientMetadata",ya.keyPath="clientId";class va{constructor(e,t,n){this.bundleId=e,this.createTime=t,this.version=n}}va.store="bundles",va.keyPath="bundleId";class _a{constructor(e,t,n){this.name=e,this.readTime=t,this.bundledQuery=n}}_a.store="namedQueries",_a.keyPath="name";const wa=[oa.store,aa.store,ca.store,ha.store,pa.store,sa.store,ga.store,fa.store,ya.store,da.store,ma.store,va.store,_a.store],ba="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Ia{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Ca{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Er(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ca((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ca?t:Ca.resolve(t)}catch(e){return Ca.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ca.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ca.reject(t)}static resolve(e){return new Ca((t,n)=>{t(e)})}static reject(e){return new Ca((t,n)=>{n(e)})}static waitFor(e){return new Ca((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=Ca.resolve(!1);for(const n of e)t=t.next(e=>e?Ca.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}}class Ta{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.Et=new Or,this.transaction.oncomplete=()=>{this.Et.resolve()},this.transaction.onabort=()=>{t.error?this.Et.reject(new ka(e,t.error)):this.Et.resolve()},this.transaction.onerror=t=>{const n=Pa(t.target.error);this.Et.reject(new ka(e,n))}}static open(e,t,n,r){try{return new Ta(t,e.transaction(r,n))}catch(e){throw new ka(t,e)}}get It(){return this.Et.promise}abort(e){e&&this.Et.reject(e),this.aborted||(br("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}store(e){const t=this.transaction.objectStore(e);return new xa(t)}}class Ea{constructor(e,t,n){this.name=e,this.version=t,this.At=n,12.2===Ea.Rt((0,a.z$)())&&Ir("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return br("SimpleDb","Removing database:",e),Na(window.indexedDB.deleteDatabase(e)).toPromise()}static bt(){if(!(0,a.hl)())return!1;if(Ea.Pt())return!0;const e=(0,a.z$)(),t=Ea.Rt(e),n=0<t&&t<10,r=Ea.vt(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static Pt(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Vt)}static St(e,t){return e.store(t)}static Rt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static vt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async Dt(e){return this.db||(br("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{t(e.target.result)},r.onblocked=()=>{n(new ka(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;n("VersionError"===r.name?new Nr(xr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===r.name?new Nr(xr.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r):new ka(e,r))},r.onupgradeneeded=e=>{br("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion),this.At.Ct(e.target.result,r.transaction,e.oldVersion,this.version).next(()=>{br("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.Nt&&(this.db.onversionchange=e=>this.Nt(e)),this.db}xt(e){this.Nt=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.Dt(e);const t=Ta.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).catch(e=>(t.abort(e),Ca.reject(e))).toPromise();return s.catch(()=>{}),await t.It,s}catch(e){const t="FirebaseError"!==e.name&&s<3;if(br("SimpleDb","Transaction failed with error:",e.message,"Retrying:",t),this.close(),!t)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}class Sa{constructor(e){this.kt=e,this.$t=!1,this.Ot=null}get isDone(){return this.$t}get Ft(){return this.Ot}set cursor(e){this.kt=e}done(){this.$t=!0}Mt(e){this.Ot=e}delete(){return Na(this.kt.delete())}}class ka extends Nr{constructor(e,t){super(xr.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Aa(e){return"IndexedDbTransactionError"===e.name}class xa{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(br("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(br("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Na(n)}add(e){return br("SimpleDb","ADD",this.store.name,e,e),Na(this.store.add(e))}get(e){return Na(this.store.get(e)).next(t=>(void 0===t&&(t=null),br("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return br("SimpleDb","DELETE",this.store.name,e),Na(this.store.delete(e))}count(){return br("SimpleDb","COUNT",this.store.name),Na(this.store.count())}Lt(e,t){const n=this.cursor(this.options(e,t)),r=[];return this.Bt(n,(e,t)=>{r.push(t)}).next(()=>r)}Ut(e,t){br("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.qt=!1;const r=this.cursor(n);return this.Bt(r,(e,t,n)=>n.delete())}Kt(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.Bt(r,t)}jt(e){const t=this.cursor({});return new Ca((n,r)=>{t.onerror=e=>{const t=Pa(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():n()}):n()}})}Bt(e,t){const n=[];return new Ca((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new Sa(i),o=t(i.primaryKey,i.value,s);if(o instanceof Ca){const e=o.catch(e=>(s.done(),Ca.reject(e)));n.push(e)}s.isDone?r():null===s.Ft?i.continue():i.continue(s.Ft)}}).next(()=>Ca.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.qt?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Na(e){return new Ca((t,n)=>{e.onsuccess=e=>{t(e.target.result)},e.onerror=e=>{const t=Pa(e.target.error);n(t)}})}let Oa=!1;function Pa(e){const t=Ea.Rt((0,a.z$)());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new Nr("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Oa||(Oa=!0,setTimeout(()=>{throw e},0)),e}}return e}class Ra extends Ia{constructor(e,t){super(),this.Qt=e,this.currentSequenceNumber=t}}function Da(e,t){const n=Ar(e);return Ea.St(n.Qt,t)}class La{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Rs(t,e,n[r])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&Ds(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&Ds(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const n=e.get(t.key),r=n;this.applyToLocalView(r),n.isValidDocument()||r.convertToNoDocument(Hr.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),co())}isEqual(e){return this.batchId===e.batchId&&qr(this.mutations,e.mutations,(e,t)=>Ms(e,t))&&qr(this.baseMutations,e.baseMutations,(e,t)=>Ms(e,t))}}class Ma{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Sr(e.mutations.length===n.length);let r=oo();const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new Ma(e,t,n,r)}}class Fa{constructor(e,t,n,r,i=Hr.min(),s=Hr.min(),o=ti.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o}withSequenceNumber(e){return new Fa(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Fa(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Fa(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class $a{constructor(e){this.Wt=e}}function Va(e,t){if(t.document)return Fo(e.Wt,t.document,!!t.hasCommittedMutations);if(t.noDocument){const e=di.fromSegments(t.noDocument.path),n=za(t.noDocument.readTime),r=xi.newNoDocument(e,n);return t.hasCommittedMutations?r.setHasCommittedMutations():r}if(t.unknownDocument){const e=di.fromSegments(t.unknownDocument.path),n=za(t.unknownDocument.version);return xi.newUnknownDocument(e,n)}return Er()}function Ua(e,t,n){const r=ja(n),i=t.key.path.popLast().toArray();if(t.isFoundDocument()){const n=function(e,t){return{name:No(e,t.key),fields:t.data.value.mapValue.fields,updateTime:To(e,t.version.toTimestamp())}}(e.Wt,t);return new ha(null,null,n,t.hasCommittedMutations,r,i)}if(t.isNoDocument()){const e=t.key.path.toArray(),n=Ba(t.version),s=t.hasCommittedMutations;return new ha(null,new la(e,n),null,s,r,i)}if(t.isUnknownDocument()){const e=t.key.path.toArray(),n=Ba(t.version);return new ha(new ua(e,n),null,null,!0,r,i)}return Er()}function ja(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function qa(e){const t=new zr(e[0],e[1]);return Hr.fromTimestamp(t)}function Ba(e){const t=e.toTimestamp();return new ia(t.seconds,t.nanoseconds)}function za(e){const t=new zr(e.seconds,e.nanoseconds);return Hr.fromTimestamp(t)}function Ha(e,t){const n=(t.baseMutations||[]).map(t=>Vo(e.Wt,t));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform&&(e.updateTransforms=t.mutations[s+1].transform.fieldTransforms,t.mutations.splice(s+1,1),++s)}const r=t.mutations.map(t=>Vo(e.Wt,t)),i=zr.fromMillis(t.localWriteTimeMs);return new La(t.batchId,i,n,r)}function Ga(e){const t=za(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?za(e.lastLimboFreeSnapshotVersion):Hr.min();let r;var i;return void 0!==e.query.documents?(Sr(1===(i=e.query).documents.length),r=ss(Ji(Ro(i.documents[0])))):r=function(e){return ss(qo(e))}(e.query),new Fa(r,e.targetId,0,e.lastListenSequenceNumber,t,n,ti.fromBase64String(e.resumeToken))}function Wa(e,t){const n=Ba(t.snapshotVersion),r=Ba(t.lastLimboFreeSnapshotVersion);let i;i=Di(t.target)?Uo(e.Wt,t.target):jo(e.Wt,t.target);const s=t.resumeToken.toBase64();return new pa(t.targetId,Pi(t.target),n,s,t.sequenceNumber,r,i)}function Ka(e){const t=qo({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?os(t,t.limit,"L"):t}class Ya{getBundleMetadata(e,t){return Qa(e).get(t).next(e=>{if(e)return{id:(t=e).bundleId,createTime:za(t.createTime),version:t.version};var t})}saveBundleMetadata(e,t){return Qa(e).put({bundleId:(n=t).id,createTime:Ba(ko(n.createTime)),version:n.version});var n}getNamedQuery(e,t){return Xa(e).get(t).next(e=>{if(e)return{name:(t=e).name,query:Ka(t.bundledQuery),readTime:za(t.readTime)};var t})}saveNamedQuery(e,t){return Xa(e).put(function(e){return{name:e.name,readTime:Ba(ko(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function Qa(e){return Da(e,va.store)}function Xa(e){return Da(e,_a.store)}class Ja{constructor(){this.Gt=new Za}addToCollectionParentIndex(e,t){return this.Gt.add(t),Ca.resolve()}getCollectionParents(e,t){return Ca.resolve(this.Gt.getEntries(t))}}class Za{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new Zs(Qr.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new Zs(Qr.comparator)).toArray()}}class ec{constructor(){this.zt=new Za}addToCollectionParentIndex(e,t){if(!this.zt.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.zt.add(t)});const i={collectionId:n,parent:ea(r)};return tc(e).put(i)}return Ca.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[Br(t),""],!1,!0);return tc(e).Lt(r).next(e=>{for(const r of e){if(r.collectionId!==t)break;n.push(ra(r.parent))}return n})}}function tc(e){return Da(e,ma.store)}const nc={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class rc{constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}static withCacheSize(e){return new rc(e,rc.DEFAULT_COLLECTION_PERCENTILE,rc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ic(e,t,n){const r=e.store(aa.store),i=e.store(ca.store),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const c=r.Kt({range:o},(e,t,n)=>(a++,n.delete()));s.push(c.next(()=>{Sr(1===a)}));const l=[];for(const u of n.mutations){const e=ca.key(t,u.key.path,n.batchId);s.push(i.delete(e)),l.push(u.key)}return Ca.waitFor(s).next(()=>l)}function sc(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Er();t=e.noDocument}return JSON.stringify(t).length}rc.DEFAULT_COLLECTION_PERCENTILE=10,rc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,rc.DEFAULT=new rc(41943040,rc.DEFAULT_COLLECTION_PERCENTILE,rc.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),rc.DISABLED=new rc(-1,0,0);class oc{constructor(e,t,n,r){this.userId=e,this.N=t,this.Ht=n,this.referenceDelegate=r,this.Jt={}}static Yt(e,t,n,r){Sr(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new oc(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return cc(e).Kt({index:aa.userMutationsIndex,range:n},(e,n,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,n,r){const i=lc(e),s=cc(e);return s.add({}).next(o=>{Sr("number"==typeof o);const a=new La(o,t,n,r),c=function(e,t,n){const r=n.baseMutations.map(t=>$o(e.Wt,t)),i=n.mutations.map(t=>$o(e.Wt,t));return new aa(t,n.batchId,n.localWriteTime.toMillis(),r,i)}(this.N,this.userId,a),l=[];let u=new Zs((e,t)=>jr(e.canonicalString(),t.canonicalString()));for(const e of r){const t=ca.key(this.userId,e.key.path,o);u=u.add(e.key.path.popLast()),l.push(s.put(c)),l.push(i.put(t,ca.PLACEHOLDER))}return u.forEach(t=>{l.push(this.Ht.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.Jt[o]=a.keys()}),Ca.waitFor(l).next(()=>a)})}lookupMutationBatch(e,t){return cc(e).get(t).next(e=>e?(Sr(e.userId===this.userId),Ha(this.N,e)):null)}Xt(e,t){return this.Jt[t]?Ca.resolve(this.Jt[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.Jt[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return cc(e).Kt({index:aa.userMutationsIndex,range:r},(e,t,r)=>{t.userId===this.userId&&(Sr(t.batchId>=n),i=Ha(this.N,t)),r.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return cc(e).Kt({index:aa.userMutationsIndex,range:t,reverse:!0},(e,t,r)=>{n=t.batchId,r.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return cc(e).Lt(aa.userMutationsIndex,t).next(e=>e.map(e=>Ha(this.N,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=ca.prefixForPath(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return lc(e).Kt({range:r},(n,r,s)=>{const[o,a,c]=n,l=ra(a);if(o===this.userId&&t.path.isEqual(l))return cc(e).get(c).next(e=>{if(!e)throw Er();Sr(e.userId===this.userId),i.push(Ha(this.N,e))});s.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Zs(jr);const r=[];return t.forEach(t=>{const i=ca.prefixForPath(this.userId,t.path),s=IDBKeyRange.lowerBound(i),o=lc(e).Kt({range:s},(e,r,i)=>{const[s,o,a]=e,c=ra(o);s===this.userId&&t.path.isEqual(c)?n=n.add(a):i.done()});r.push(o)}),Ca.waitFor(r).next(()=>this.Zt(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=ca.prefixForPath(this.userId,n),s=IDBKeyRange.lowerBound(i);let o=new Zs(jr);return lc(e).Kt({range:s},(e,t,i)=>{const[s,a,c]=e,l=ra(a);s===this.userId&&n.isPrefixOf(l)?l.length===r&&(o=o.add(c)):i.done()}).next(()=>this.Zt(e,o))}Zt(e,t){const n=[],r=[];return t.forEach(t=>{r.push(cc(e).get(t).next(e=>{if(null===e)throw Er();Sr(e.userId===this.userId),n.push(Ha(this.N,e))}))}),Ca.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return ic(e.Qt,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.te(t.batchId)}),Ca.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}te(e){delete this.Jt[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return Ca.resolve();const n=IDBKeyRange.lowerBound(ca.prefixForUser(this.userId)),r=[];return lc(e).Kt({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=ra(e[1]);r.push(t)}else n.done()}).next(()=>{Sr(0===r.length)})})}containsKey(e,t){return ac(e,this.userId,t)}ee(e){return uc(e).get(this.userId).next(e=>e||new oa(this.userId,-1,""))}}function ac(e,t,n){const r=ca.prefixForPath(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let o=!1;return lc(e).Kt({range:s,qt:!0},(e,n,r)=>{const[s,a,c]=e;s===t&&a===i&&(o=!0),r.done()}).next(()=>o)}function cc(e){return Da(e,aa.store)}function lc(e){return Da(e,ca.store)}function uc(e){return Da(e,oa.store)}class hc{constructor(e){this.ne=e}next(){return this.ne+=2,this.ne}static se(){return new hc(0)}static ie(){return new hc(-1)}}class dc{constructor(e,t){this.referenceDelegate=e,this.N=t}allocateTargetId(e){return this.re(e).next(t=>{const n=new hc(t.highestTargetId);return t.highestTargetId=n.next(),this.oe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.re(e).next(e=>Hr.fromTimestamp(new zr(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.re(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.re(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.oe(e,r)))}addTargetData(e,t){return this.ce(e,t).next(()=>this.re(e).next(n=>(n.targetCount+=1,this.ae(t,n),this.oe(e,n))))}updateTargetData(e,t){return this.ce(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>pc(e).delete(t.targetId)).next(()=>this.re(e)).next(t=>(Sr(t.targetCount>0),t.targetCount-=1,this.oe(e,t)))}removeTargets(e,t,n){let r=0;const i=[];return pc(e).Kt((s,o)=>{const a=Ga(o);a.sequenceNumber<=t&&null===n.get(a.targetId)&&(r++,i.push(this.removeTargetData(e,a)))}).next(()=>Ca.waitFor(i)).next(()=>r)}forEachTarget(e,t){return pc(e).Kt((e,n)=>{const r=Ga(n);t(r)})}re(e){return fc(e).get(ga.key).next(e=>(Sr(null!==e),e))}oe(e,t){return fc(e).put(ga.key,t)}ce(e,t){return pc(e).put(Wa(this.N,t))}ae(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.re(e).next(e=>e.targetCount)}getTargetData(e,t){const n=Pi(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return pc(e).Kt({range:r,index:pa.queryTargetsIndexName},(e,n,r)=>{const s=Ga(n);Ri(t,s.target)&&(i=s,r.done())}).next(()=>i)}addMatchingKeys(e,t,n){const r=[],i=gc(e);return t.forEach(t=>{const s=ea(t.path);r.push(i.put(new fa(n,s))),r.push(this.referenceDelegate.addReference(e,n,t))}),Ca.waitFor(r)}removeMatchingKeys(e,t,n){const r=gc(e);return Ca.forEach(t,t=>{const i=ea(t.path);return Ca.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=gc(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=gc(e);let i=co();return r.Kt({range:n,qt:!0},(e,t,n)=>{const r=ra(e[1]),s=new di(r);i=i.add(s)}).next(()=>i)}containsKey(e,t){const n=ea(t.path),r=IDBKeyRange.bound([n],[Br(n)],!1,!0);let i=0;return gc(e).Kt({index:fa.documentTargetsIndex,qt:!0,range:r},([e,t],n,r)=>{0!==e&&(i++,r.done())}).next(()=>i>0)}Tt(e,t){return pc(e).get(t).next(e=>e?Ga(e):null)}}function pc(e){return Da(e,pa.store)}function fc(e){return Da(e,ga.store)}function gc(e){return Da(e,fa.store)}async function mc(e){if(e.code!==xr.FAILED_PRECONDITION||e.message!==ba)throw e;br("LocalStore","Unexpectedly lost primary lease")}function yc([e,t],[n,r]){const i=jr(e,n);return 0===i?jr(t,r):i}class vc{constructor(e){this.ue=e,this.buffer=new Zs(yc),this.he=0}le(){return++this.he}fe(e){const t=[e,this.le()];if(this.buffer.size<this.ue)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();yc(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class _c{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.de=!1,this.we=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this._e(e)}stop(){this.we&&(this.we.cancel(),this.we=null)}get started(){return null!==this.we}_e(e){const t=this.de?3e5:6e4;br("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.we=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.we=null,this.de=!0;try{await e.collectGarbage(this.garbageCollector)}catch(e){Aa(e)?br("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await mc(e)}await this._e(e)})}}class wc{constructor(e,t){this.me=e,this.params=t}calculateTargetCount(e,t){return this.me.ge(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return Ca.resolve($r.T);const n=new vc(t);return this.me.forEachTarget(e,e=>n.fe(e.sequenceNumber)).next(()=>this.me.ye(e,e=>n.fe(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.me.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.me.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(br("LruGarbageCollector","Garbage collection skipped; disabled"),Ca.resolve(nc)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(br("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nc):this.pe(e,t))}getCacheSize(e){return this.me.getCacheSize(e)}pe(e,t){let n,r,i,s,a,c,l;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(br("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${t}`),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,c=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),_r()<=o.in.DEBUG&&br("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-u}ms\n\tDetermined least recently used ${r} in `+(a-s)+"ms\n"+`\tRemoved ${i} targets in `+(c-a)+"ms\n"+`\tRemoved ${e} documents in `+(l-c)+"ms\n"+`Total Duration: ${l-u}ms`),Ca.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}class bc{constructor(e,t){this.db=e,this.garbageCollector=function(e,t){return new wc(e,t)}(this,t)}ge(e){const t=this.Te(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}Te(e){let t=0;return this.ye(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ye(e,t){return this.Ee(e,(e,n)=>t(n))}addReference(e,t,n){return Ic(e,n)}removeReference(e,t,n){return Ic(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return Ic(e,t)}Ie(e,t){return function(e,t){let n=!1;return uc(e).jt(r=>ac(e,r,t).next(e=>(e&&(n=!0),Ca.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.Ee(e,(s,o)=>{if(o<=t){const t=this.Ie(e,s).next(t=>{if(!t)return i++,n.getEntry(e,s).next(()=>(n.removeEntry(s),gc(e).delete([0,ea(s.path)])))});r.push(t)}}).next(()=>Ca.waitFor(r)).next(()=>n.apply(e)).next(()=>i)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return Ic(e,t)}Ee(e,t){const n=gc(e);let r,i=$r.T;return n.Kt({index:fa.documentTargetsIndex},([e,n],{path:s,sequenceNumber:o})=>{0===e?(i!==$r.T&&t(new di(ra(r)),i),i=o,r=s):i=$r.T}).next(()=>{i!==$r.T&&t(new di(ra(r)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Ic(e,t){return gc(e).put(function(e,t){return new fa(0,ea(e.path),t)}(t,e.currentSequenceNumber))}class Cc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0!==r){for(let n=0;n<r.length;n++)if(this.equalsFn(r[n][0],e))return void(r[n]=[e,t]);r.push([e,t])}else this.inner[n]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),!0;return!1}forEach(e){Wr(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return Kr(this.inner)}}class Tc{constructor(){this.changes=new Cc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}getReadTime(e){const t=this.changes.get(e);return t?t.readTime:Hr.min()}addEntry(e,t){this.assertNotApplied(),this.changes.set(e.key,{document:e,readTime:t})}removeEntry(e,t=null){this.assertNotApplied(),this.changes.set(e,{document:xi.newInvalidDocument(e),readTime:t})}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?Ca.resolve(n.document):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class Ec{constructor(e,t){this.N=e,this.Ht=t}addEntry(e,t,n){return Ac(e).put(xc(t),n)}removeEntry(e,t){const n=Ac(e),r=xc(t);return n.delete(r)}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.Ae(e,n)))}getEntry(e,t){return Ac(e).get(xc(t)).next(e=>this.Re(t,e))}be(e,t){return Ac(e).get(xc(t)).next(e=>({document:this.Re(t,e),size:sc(e)}))}getEntries(e,t){let n=no();return this.Pe(e,t,(e,t)=>{const r=this.Re(e,t);n=n.insert(e,r)}).next(()=>n)}ve(e,t){let n=no(),r=new Qs(di.comparator);return this.Pe(e,t,(e,t)=>{const i=this.Re(e,t);n=n.insert(e,i),r=r.insert(e,sc(t))}).next(()=>({documents:n,Ve:r}))}Pe(e,t,n){if(t.isEmpty())return Ca.resolve();const r=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),i=t.getIterator();let s=i.getNext();return Ac(e).Kt({range:r},(e,t,r)=>{const o=di.fromSegments(e);for(;s&&di.comparator(s,o)<0;)n(s,null),s=i.getNext();s&&s.isEqual(o)&&(n(s,t),s=i.hasNext()?i.getNext():null),s?r.Mt(s.path.toArray()):r.done()}).next(()=>{for(;s;)n(s,null),s=i.hasNext()?i.getNext():null})}getDocumentsMatchingQuery(e,t,n){let r=no();const i=t.path.length+1,s={};if(n.isEqual(Hr.min())){const e=t.path.toArray();s.range=IDBKeyRange.lowerBound(e)}else{const e=t.path.toArray(),r=ja(n);s.range=IDBKeyRange.lowerBound([e,r],!0),s.index=ha.collectionReadTimeIndex}return Ac(e).Kt(s,(e,n,s)=>{if(e.length!==i)return;const o=Va(this.N,n);t.path.isPrefixOf(o.key.path)?us(t,o)&&(r=r.insert(o.key,o)):s.done()}).next(()=>r)}newChangeBuffer(e){return new Sc(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return kc(e).get(da.key).next(e=>(Sr(!!e),e))}Ae(e,t){return kc(e).put(da.key,t)}Re(e,t){if(t){const e=Va(this.N,t);if(!e.isNoDocument()||!e.version.isEqual(Hr.min()))return e}return xi.newInvalidDocument(e)}}class Sc extends Tc{constructor(e,t){super(),this.Se=e,this.trackRemovals=t,this.De=new Cc(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,r=new Zs((e,t)=>jr(e.canonicalString(),t.canonicalString()));return this.changes.forEach((i,s)=>{const o=this.De.get(i);if(s.document.isValidDocument()){const a=Ua(this.Se.N,s.document,this.getReadTime(i));r=r.add(i.path.popLast());const c=sc(a);n+=c-o,t.push(this.Se.addEntry(e,i,a))}else if(n-=o,this.trackRemovals){const n=Ua(this.Se.N,xi.newNoDocument(i,Hr.min()),this.getReadTime(i));t.push(this.Se.addEntry(e,i,n))}else t.push(this.Se.removeEntry(e,i))}),r.forEach(n=>{t.push(this.Se.Ht.addToCollectionParentIndex(e,n))}),t.push(this.Se.updateMetadata(e,n)),Ca.waitFor(t)}getFromCache(e,t){return this.Se.be(e,t).next(e=>(this.De.set(t,e.size),e.document))}getAllFromCache(e,t){return this.Se.ve(e,t).next(({documents:e,Ve:t})=>(t.forEach((e,t)=>{this.De.set(e,t)}),e))}}function kc(e){return Da(e,da.store)}function Ac(e){return Da(e,ha.store)}function xc(e){return e.path.toArray()}class Nc{constructor(e){this.N=e}Ct(e,t,n,r){Sr(n<r&&n>=0&&r<=11);const i=new Ta("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore(sa.store)}(e),function(e){e.createObjectStore(oa.store,{keyPath:oa.keyPath}),e.createObjectStore(aa.store,{keyPath:aa.keyPath,autoIncrement:!0}).createIndex(aa.userMutationsIndex,aa.userMutationsKeyPath,{unique:!0}),e.createObjectStore(ca.store)}(e),Oc(e),function(e){e.createObjectStore(ha.store)}(e));let s=Ca.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore(fa.store),e.deleteObjectStore(pa.store),e.deleteObjectStore(ga.store)}(e),Oc(e)),s=s.next(()=>function(e){const t=e.store(ga.store),n=new ga(0,0,Hr.min().toTimestamp(),0);return t.put(ga.key,n)}(i))),n<4&&r>=4&&(0!==n&&(s=s.next(()=>function(e,t){return t.store(aa.store).Lt().next(n=>{e.deleteObjectStore(aa.store),e.createObjectStore(aa.store,{keyPath:aa.keyPath,autoIncrement:!0}).createIndex(aa.userMutationsIndex,aa.userMutationsKeyPath,{unique:!0});const r=t.store(aa.store),i=n.map(e=>r.put(e));return Ca.waitFor(i)})}(e,i))),s=s.next(()=>{!function(e){e.createObjectStore(ya.store,{keyPath:ya.keyPath})}(e)})),n<5&&r>=5&&(s=s.next(()=>this.Ce(i))),n<6&&r>=6&&(s=s.next(()=>(function(e){e.createObjectStore(da.store)}(e),this.Ne(i)))),n<7&&r>=7&&(s=s.next(()=>this.xe(i))),n<8&&r>=8&&(s=s.next(()=>this.ke(e,i))),n<9&&r>=9&&(s=s.next(()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e),function(e){const t=e.objectStore(ha.store);t.createIndex(ha.readTimeIndex,ha.readTimeIndexPath,{unique:!1}),t.createIndex(ha.collectionReadTimeIndex,ha.collectionReadTimeIndexPath,{unique:!1})}(t)})),n<10&&r>=10&&(s=s.next(()=>this.$e(i))),n<11&&r>=11&&(s=s.next(()=>{!function(e){e.createObjectStore(va.store,{keyPath:va.keyPath})}(e),function(e){e.createObjectStore(_a.store,{keyPath:_a.keyPath})}(e)})),s}Ne(e){let t=0;return e.store(ha.store).Kt((e,n)=>{t+=sc(n)}).next(()=>{const n=new da(t);return e.store(da.store).put(da.key,n)})}Ce(e){const t=e.store(oa.store),n=e.store(aa.store);return t.Lt().next(t=>Ca.forEach(t,t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.Lt(aa.userMutationsIndex,r).next(n=>Ca.forEach(n,n=>{Sr(n.userId===t.userId);const r=Ha(this.N,n);return ic(e,t.userId,r).next(()=>{})}))}))}xe(e){const t=e.store(fa.store),n=e.store(ha.store);return e.store(ga.store).get(ga.key).next(e=>{const r=[];return n.Kt((n,i)=>{const s=new Qr(n),o=function(e){return[0,ea(e)]}(s);r.push(t.get(o).next(n=>n?Ca.resolve():(n=>t.put(new fa(0,ea(n),e.highestListenSequenceNumber)))(s)))}).next(()=>Ca.waitFor(r))})}ke(e,t){e.createObjectStore(ma.store,{keyPath:ma.keyPath});const n=t.store(ma.store),r=new Za,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:ea(r)})}};return t.store(ha.store).Kt({qt:!0},(e,t)=>{const n=new Qr(e);return i(n.popLast())}).next(()=>t.store(ca.store).Kt({qt:!0},([e,t,n],r)=>{const s=ra(t);return i(s.popLast())}))}$e(e){const t=e.store(pa.store);return t.Kt((e,n)=>{const r=Ga(n),i=Wa(this.N,r);return t.put(i)})}}function Oc(e){e.createObjectStore(fa.store,{keyPath:fa.keyPath}).createIndex(fa.documentTargetsIndex,fa.documentTargetsKeyPath,{unique:!0}),e.createObjectStore(pa.store,{keyPath:pa.keyPath}).createIndex(pa.queryTargetsIndexName,pa.queryTargetsKeyPath,{unique:!0}),e.createObjectStore(ga.store)}const Pc="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Rc{constructor(e,t,n,r,i,s,o,a,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.Oe=i,this.window=s,this.document=o,this.Fe=c,this.Me=l,this.Le=null,this.Be=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ue=null,this.inForeground=!1,this.qe=null,this.Ke=null,this.je=Number.NEGATIVE_INFINITY,this.Qe=e=>Promise.resolve(),!Rc.bt())throw new Nr(xr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new bc(this,r),this.We=t+"main",this.N=new $a(a),this.Ge=new Ea(this.We,11,new Nc(this.N)),this.ze=new dc(this.referenceDelegate,this.N),this.Ht=new ec,this.He=function(e,t){return new Ec(e,t)}(this.N,this.Ht),this.Je=new Ya,this.window&&this.window.localStorage?this.Ye=this.window.localStorage:(this.Ye=null,!1===l&&Ir("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Xe().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Nr(xr.FAILED_PRECONDITION,Pc);return this.Ze(),this.tn(),this.en(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ze.getHighestSequenceNumber(e))}).then(e=>{this.Le=new $r(e,this.Fe)}).then(()=>{this.Be=!0}).catch(e=>(this.Ge&&this.Ge.close(),Promise.reject(e)))}nn(e){return this.Qe=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ge.xt(async t=>{null===t.newVersion&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.Oe.enqueueAndForget(async()=>{this.started&&await this.Xe()}))}Xe(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Lc(e).put(new ya(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.sn(e).next(e=>{e||(this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)))})}).next(()=>this.rn(e)).next(t=>this.isPrimary&&!t?this.on(e).next(()=>!1):!!t&&this.cn(e).next(()=>!0))).catch(e=>{if(Aa(e))return br("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return br("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Oe.enqueueRetryable(()=>this.Qe(e)),this.isPrimary=e})}sn(e){return Dc(e).get(sa.key).next(e=>Ca.resolve(this.an(e)))}un(e){return Lc(e).delete(this.clientId)}async hn(){if(this.isPrimary&&!this.ln(this.je,18e5)){this.je=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const t=Da(e,ya.store);return t.Lt().next(e=>{const n=this.fn(e,18e5),r=e.filter(e=>-1===n.indexOf(e));return Ca.forEach(r,e=>t.delete(e.clientId)).next(()=>r)})}).catch(()=>[]);if(this.Ye)for(const t of e)this.Ye.removeItem(this.dn(t.clientId))}}en(){this.Ke=this.Oe.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.Xe().then(()=>this.hn()).then(()=>this.en()))}an(e){return!!e&&e.ownerId===this.clientId}rn(e){return this.Me?Ca.resolve(!0):Dc(e).get(sa.key).next(t=>{if(null!==t&&this.ln(t.leaseTimestampMs,5e3)&&!this.wn(t.ownerId)){if(this.an(t)&&this.networkEnabled)return!0;if(!this.an(t)){if(!t.allowTabSynchronization)throw new Nr(xr.FAILED_PRECONDITION,Pc);return!1}}return!(!this.networkEnabled||!this.inForeground)||Lc(e).Lt().next(e=>void 0===this.fn(e,5e3).find(e=>{if(this.clientId!==e.clientId){const t=!this.inForeground&&e.inForeground,n=this.networkEnabled===e.networkEnabled;if(!this.networkEnabled&&e.networkEnabled||t&&n)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&br("IndexedDbPersistence",`Client ${e?"is":"is not"} eligible for a primary lease.`),e))}async shutdown(){this.Be=!1,this._n(),this.Ke&&(this.Ke.cancel(),this.Ke=null),this.mn(),this.gn(),await this.Ge.runTransaction("shutdown","readwrite",[sa.store,ya.store],e=>{const t=new Ra(e,$r.T);return this.on(t).next(()=>this.un(t))}),this.Ge.close(),this.yn()}fn(e,t){return e.filter(e=>this.ln(e.updateTimeMs,t)&&!this.wn(e.clientId))}pn(){return this.runTransaction("getActiveClients","readonly",e=>Lc(e).Lt().next(e=>this.fn(e,18e5).map(e=>e.clientId)))}get started(){return this.Be}getMutationQueue(e){return oc.Yt(e,this.N,this.Ht,this.referenceDelegate)}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getIndexManager(){return this.Ht}getBundleCache(){return this.Je}runTransaction(e,t,n){let r;return br("IndexedDbPersistence","Starting transaction:",e),this.Ge.runTransaction(e,"readonly"===t?"readonly":"readwrite",wa,i=>(r=new Ra(i,this.Le?this.Le.next():$r.T),"readwrite-primary"===t?this.sn(r).next(e=>!!e||this.rn(r)).next(t=>{if(!t)throw Ir(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Oe.enqueueRetryable(()=>this.Qe(!1)),new Nr(xr.FAILED_PRECONDITION,ba);return n(r)}).next(e=>this.cn(r).next(()=>e)):this.Tn(r).next(()=>n(r)))).then(e=>(r.raiseOnCommittedEvent(),e))}Tn(e){return Dc(e).get(sa.key).next(e=>{if(null!==e&&this.ln(e.leaseTimestampMs,5e3)&&!this.wn(e.ownerId)&&!this.an(e)&&!(this.Me||this.allowTabSynchronization&&e.allowTabSynchronization))throw new Nr(xr.FAILED_PRECONDITION,Pc)})}cn(e){const t=new sa(this.clientId,this.allowTabSynchronization,Date.now());return Dc(e).put(sa.key,t)}static bt(){return Ea.bt()}on(e){const t=Dc(e);return t.get(sa.key).next(e=>this.an(e)?(br("IndexedDbPersistence","Releasing primary lease."),t.delete(sa.key)):Ca.resolve())}ln(e,t){const n=Date.now();return!(e<n-t||e>n&&(Ir(`Detected an update time that is in the future: ${e} > ${n}`),1))}Ze(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=()=>{this.Oe.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.Xe()))},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)}mn(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)}tn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ue=()=>{this._n(),(0,a.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Oe.enterRestrictedMode(!0),this.Oe.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ue))}gn(){this.Ue&&(this.window.removeEventListener("pagehide",this.Ue),this.Ue=null)}wn(e){var t;try{const n=null!==(null===(t=this.Ye)||void 0===t?void 0:t.getItem(this.dn(e)));return br("IndexedDbPersistence",`Client '${e}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(e){return Ir("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}_n(){if(this.Ye)try{this.Ye.setItem(this.dn(this.clientId),String(Date.now()))}catch(b){Ir("Failed to set zombie client id.",b)}}yn(){if(this.Ye)try{this.Ye.removeItem(this.dn(this.clientId))}catch(b){}}dn(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Dc(e){return Da(e,sa.store)}function Lc(e){return Da(e,ya.store)}function Mc(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class Fc{constructor(e,t){this.progress=e,this.En=t}}class $c{constructor(e,t,n){this.He=e,this.In=t,this.Ht=n}An(e,t){return this.In.getAllMutationBatchesAffectingDocumentKey(e,t).next(n=>this.Rn(e,t,n))}Rn(e,t,n){return this.He.getEntry(e,t).next(e=>{for(const t of n)t.applyToLocalView(e);return e})}bn(e,t){e.forEach((e,n)=>{for(const r of t)r.applyToLocalView(n)})}Pn(e,t){return this.He.getEntries(e,t).next(t=>this.vn(e,t).next(()=>t))}vn(e,t){return this.In.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>this.bn(t,e))}getDocumentsMatchingQuery(e,t,n){return function(e){return di.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.Vn(e,t.path):rs(t)?this.Sn(e,t,n):this.Dn(e,t,n)}Vn(e,t){return this.An(e,new di(t)).next(e=>{let t=io();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}Sn(e,t,n){const r=t.collectionGroup;let i=io();return this.Ht.getCollectionParents(e,r).next(s=>Ca.forEach(s,s=>{const o=function(e,t){return new Qi(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,s.child(r));return this.Dn(e,o,n).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}Dn(e,t,n){let r,i;return this.He.getDocumentsMatchingQuery(e,t,n).next(n=>(r=n,this.In.getAllMutationBatchesAffectingQuery(e,t))).next(t=>(i=t,this.Cn(e,i,r).next(e=>{r=e;for(const t of i)for(const e of t.mutations){const n=e.key;let i=r.get(n);null==i&&(i=xi.newInvalidDocument(n),r=r.insert(n,i)),Ds(e,i,t.localWriteTime),i.isFoundDocument()||(r=r.remove(n))}}))).next(()=>(r.forEach((e,n)=>{us(t,n)||(r=r.remove(e))}),r))}Cn(e,t,n){let r=co();for(const s of t)for(const e of s.mutations)e instanceof Vs&&null===n.get(e.key)&&(r=r.add(e.key));let i=n;return this.He.getEntries(e,r).next(e=>(e.forEach((e,t)=>{t.isFoundDocument()&&(i=i.insert(e,t))}),i))}}class Vc{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Nn=n,this.xn=r}static kn(e,t){let n=co(),r=co();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new Vc(e,t.fromCache,n,r)}}class Uc{$n(e){this.On=e}getDocumentsMatchingQuery(e,t,n,r){return function(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}(t)||n.isEqual(Hr.min())?this.Fn(e,t):this.On.Pn(e,r).next(i=>{const s=this.Mn(t,i);return(Zi(t)||es(t))&&this.Ln(t.limitType,s,r,n)?this.Fn(e,t):(_r()<=o.in.DEBUG&&br("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),ls(t)),this.On.getDocumentsMatchingQuery(e,t,n).next(e=>(s.forEach(t=>{e=e.insert(t.key,t)}),e)))})}Mn(e,t){let n=new Zs(hs(e));return t.forEach((t,r)=>{us(e,r)&&(n=n.add(r))}),n}Ln(e,t,n,r){if(n.size!==t.size)return!0;const i="F"===e?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}Fn(e,t){return _r()<=o.in.DEBUG&&br("QueryEngine","Using full collection scan to execute query:",ls(t)),this.On.getDocumentsMatchingQuery(e,t,Hr.min())}}class jc{constructor(e,t,n,r){this.persistence=e,this.Bn=t,this.N=r,this.Un=new Qs(jr),this.qn=new Cc(e=>Pi(e),Ri),this.Kn=Hr.min(),this.In=e.getMutationQueue(n),this.jn=e.getRemoteDocumentCache(),this.ze=e.getTargetCache(),this.Qn=new $c(this.jn,this.In,this.persistence.getIndexManager()),this.Je=e.getBundleCache(),this.Bn.$n(this.Qn)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Un))}}function qc(e,t,n,r){return new jc(e,t,n,r)}async function Bc(e,t){const n=Ar(e);let r=n.In,i=n.Qn;const s=await n.persistence.runTransaction("Handle user change","readonly",e=>{let s;return n.In.getAllMutationBatches(e).next(o=>(s=o,r=n.persistence.getMutationQueue(t),i=new $c(n.jn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(e))).next(t=>{const n=[],r=[];let o=co();for(const e of s){n.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}for(const e of t){r.push(e.batchId);for(const t of e.mutations)o=o.add(t.key)}return i.Pn(e,o).next(e=>({Wn:e,removedBatchIds:n,addedBatchIds:r}))})});return n.In=r,n.Qn=i,n.Bn.$n(n.Qn),s}function zc(e){const t=Ar(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.ze.getLastRemoteSnapshotVersion(e))}function Hc(e,t,n,r,i){let s=co();return n.forEach(e=>s=s.add(e)),t.getEntries(e,s).next(e=>{let s=no();return n.forEach((n,o)=>{const a=e.get(n),c=(null==i?void 0:i.get(n))||r;o.isNoDocument()&&o.version.isEqual(Hr.min())?(t.removeEntry(n,c),s=s.insert(n,o)):!a.isValidDocument()||o.version.compareTo(a.version)>0||0===o.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(o,c),s=s.insert(n,o)):br("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",o.version)}),s})}function Gc(e,t){const n=Ar(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.In.getNextMutationBatchAfterBatchId(e,t)))}function Wc(e,t){const n=Ar(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.ze.getTargetData(e,t).next(i=>i?(r=i,Ca.resolve(r)):n.ze.allocateTargetId(e).next(i=>(r=new Fa(t,i,0,e.currentSequenceNumber),n.ze.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Un.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Un=n.Un.insert(e.targetId,e),n.qn.set(t,e.targetId)),e})}async function Kc(e,t,n){const r=Ar(e),i=r.Un.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Aa(e))throw e;br("LocalStore",`Failed to update sequence numbers for target ${t}: ${e}`)}r.Un=r.Un.remove(t),r.qn.delete(i.target)}function Yc(e,t,n){const r=Ar(e);let i=Hr.min(),s=co();return r.persistence.runTransaction("Execute query","readonly",e=>function(e,t,n){const r=Ar(e),i=r.qn.get(n);return void 0!==i?Ca.resolve(r.Un.get(i)):r.ze.getTargetData(t,n)}(r,e,ss(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.ze.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r.Bn.getDocumentsMatchingQuery(e,t,n?i:Hr.min(),n?s:co())).next(e=>({documents:e,Gn:s})))}function Qc(e,t){const n=Ar(e),r=Ar(n.ze),i=n.Un.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",e=>r.Tt(e,t).next(e=>e?e.target:null))}function Xc(e){const t=Ar(e);return t.persistence.runTransaction("Get new document changes","readonly",e=>function(e,t,n){const r=Ar(e);let i=no(),s=ja(n);const o=Ac(t),a=IDBKeyRange.lowerBound(s,!0);return o.Kt({index:ha.readTimeIndex,range:a},(e,t)=>{const n=Va(r.N,t);i=i.insert(n.key,n),s=t.readTime}).next(()=>({En:i,readTime:qa(s)}))}(t.jn,e,t.Kn)).then(({En:e,readTime:n})=>(t.Kn=n,e))}async function Jc(e,t,n=co()){const r=await Wc(e,ss(Ka(t.bundledQuery))),i=Ar(e);return i.persistence.runTransaction("Save named query","readwrite",e=>{const s=ko(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.Je.saveNamedQuery(e,t);const o=r.withResumeToken(ti.EMPTY_BYTE_STRING,s);return i.Un=i.Un.insert(o.targetId,o),i.ze.updateTargetData(e,o).next(()=>i.ze.removeMatchingKeysForTargetId(e,r.targetId)).next(()=>i.ze.addMatchingKeys(e,n,r.targetId)).next(()=>i.Je.saveNamedQuery(e,t))})}class Zc{constructor(e){this.N=e,this.Yn=new Map,this.Xn=new Map}getBundleMetadata(e,t){return Ca.resolve(this.Yn.get(t))}saveBundleMetadata(e,t){var n;return this.Yn.set(t.id,{id:(n=t).id,version:n.version,createTime:ko(n.createTime)}),Ca.resolve()}getNamedQuery(e,t){return Ca.resolve(this.Xn.get(t))}saveNamedQuery(e,t){return this.Xn.set(t.name,function(e){return{name:e.name,query:Ka(e.bundledQuery),readTime:ko(e.readTime)}}(t)),Ca.resolve()}}class el{constructor(){this.Zn=new Zs(tl.ts),this.es=new Zs(tl.ns)}isEmpty(){return this.Zn.isEmpty()}addReference(e,t){const n=new tl(e,t);this.Zn=this.Zn.add(n),this.es=this.es.add(n)}ss(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.rs(new tl(e,t))}os(e,t){e.forEach(e=>this.removeReference(e,t))}cs(e){const t=new di(new Qr([])),n=new tl(t,e),r=new tl(t,e+1),i=[];return this.es.forEachInRange([n,r],e=>{this.rs(e),i.push(e.key)}),i}us(){this.Zn.forEach(e=>this.rs(e))}rs(e){this.Zn=this.Zn.delete(e),this.es=this.es.delete(e)}hs(e){const t=new di(new Qr([])),n=new tl(t,e),r=new tl(t,e+1);let i=co();return this.es.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new tl(e,0),n=this.Zn.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class tl{constructor(e,t){this.key=e,this.ls=t}static ts(e,t){return di.comparator(e.key,t.key)||jr(e.ls,t.ls)}static ns(e,t){return jr(e.ls,t.ls)||di.comparator(e.key,t.key)}}class nl{constructor(e,t){this.Ht=e,this.referenceDelegate=t,this.In=[],this.fs=1,this.ds=new Zs(tl.ts)}checkEmpty(e){return Ca.resolve(0===this.In.length)}addMutationBatch(e,t,n,r){const i=this.fs;this.fs++;const s=new La(i,t,n,r);this.In.push(s);for(const o of r)this.ds=this.ds.add(new tl(o.key,i)),this.Ht.addToCollectionParentIndex(e,o.key.path.popLast());return Ca.resolve(s)}lookupMutationBatch(e,t){return Ca.resolve(this.ws(t))}getNextMutationBatchAfterBatchId(e,t){const n=this._s(t+1),r=n<0?0:n;return Ca.resolve(this.In.length>r?this.In[r]:null)}getHighestUnacknowledgedBatchId(){return Ca.resolve(0===this.In.length?-1:this.fs-1)}getAllMutationBatches(e){return Ca.resolve(this.In.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new tl(t,0),r=new tl(t,Number.POSITIVE_INFINITY),i=[];return this.ds.forEachInRange([n,r],e=>{const t=this.ws(e.ls);i.push(t)}),Ca.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new Zs(jr);return t.forEach(e=>{const t=new tl(e,0),r=new tl(e,Number.POSITIVE_INFINITY);this.ds.forEachInRange([t,r],e=>{n=n.add(e.ls)})}),Ca.resolve(this.gs(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;di.isDocumentKey(i)||(i=i.child(""));const s=new tl(new di(i),0);let o=new Zs(jr);return this.ds.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ls)),!0)},s),Ca.resolve(this.gs(o))}gs(e){const t=[];return e.forEach(e=>{const n=this.ws(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Sr(0===this.ys(t.batchId,"removed")),this.In.shift();let n=this.ds;return Ca.forEach(t.mutations,r=>{const i=new tl(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.ds=n})}te(e){}containsKey(e,t){const n=new tl(t,0),r=this.ds.firstAfterOrEqual(n);return Ca.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return Ca.resolve()}ys(e,t){return this._s(e)}_s(e){return 0===this.In.length?0:e-this.In[0].batchId}ws(e){const t=this._s(e);return t<0||t>=this.In.length?null:this.In[t]}}class rl{constructor(e,t){this.Ht=e,this.ps=t,this.docs=new Qs(di.comparator),this.size=0}addEntry(e,t,n){const r=t.key,i=this.docs.get(r),s=i?i.size:0,o=this.ps(t);return this.docs=this.docs.insert(r,{document:t.clone(),size:o,readTime:n}),this.size+=o-s,this.Ht.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return Ca.resolve(n?n.document.clone():xi.newInvalidDocument(t))}getEntries(e,t){let n=no();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.clone():xi.newInvalidDocument(e))}),Ca.resolve(n)}getDocumentsMatchingQuery(e,t,n){let r=no();const i=new di(t.path.child("")),s=this.docs.getIteratorFrom(i);for(;s.hasNext();){const{key:e,value:{document:i,readTime:o}}=s.getNext();if(!t.path.isPrefixOf(e.path))break;o.compareTo(n)<=0||us(t,i)&&(r=r.insert(i.key,i.clone()))}return Ca.resolve(r)}Ts(e,t){return Ca.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new il(this)}getSize(e){return Ca.resolve(this.size)}}class il extends Tc{constructor(e){super(),this.Se=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.document.isValidDocument()?t.push(this.Se.addEntry(e,r.document,this.getReadTime(n))):this.Se.removeEntry(n)}),Ca.waitFor(t)}getFromCache(e,t){return this.Se.getEntry(e,t)}getAllFromCache(e,t){return this.Se.getEntries(e,t)}}class sl{constructor(e){this.persistence=e,this.Es=new Cc(e=>Pi(e),Ri),this.lastRemoteSnapshotVersion=Hr.min(),this.highestTargetId=0,this.Is=0,this.As=new el,this.targetCount=0,this.Rs=hc.se()}forEachTarget(e,t){return this.Es.forEach((e,n)=>t(n)),Ca.resolve()}getLastRemoteSnapshotVersion(e){return Ca.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ca.resolve(this.Is)}allocateTargetId(e){return this.highestTargetId=this.Rs.next(),Ca.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Is&&(this.Is=t),Ca.resolve()}ce(e){this.Es.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Rs=new hc(t),this.highestTargetId=t),e.sequenceNumber>this.Is&&(this.Is=e.sequenceNumber)}addTargetData(e,t){return this.ce(t),this.targetCount+=1,Ca.resolve()}updateTargetData(e,t){return this.ce(t),Ca.resolve()}removeTargetData(e,t){return this.Es.delete(t.target),this.As.cs(t.targetId),this.targetCount-=1,Ca.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Es.forEach((s,o)=>{o.sequenceNumber<=t&&null===n.get(o.targetId)&&(this.Es.delete(s),i.push(this.removeMatchingKeysForTargetId(e,o.targetId)),r++)}),Ca.waitFor(i).next(()=>r)}getTargetCount(e){return Ca.resolve(this.targetCount)}getTargetData(e,t){const n=this.Es.get(t)||null;return Ca.resolve(n)}addMatchingKeys(e,t,n){return this.As.ss(t,n),Ca.resolve()}removeMatchingKeys(e,t,n){this.As.os(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),Ca.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.As.cs(t),Ca.resolve()}getMatchingKeysForTargetId(e,t){const n=this.As.hs(t);return Ca.resolve(n)}containsKey(e,t){return Ca.resolve(this.As.containsKey(t))}}class ol{constructor(e,t){this.bs={},this.Le=new $r(0),this.Be=!1,this.Be=!0,this.referenceDelegate=e(this),this.ze=new sl(this),this.Ht=new Ja,this.He=function(e,t){return new rl(e,t)}(this.Ht,e=>this.referenceDelegate.Ps(e)),this.N=new $a(t),this.Je=new Zc(this.N)}start(){return Promise.resolve()}shutdown(){return this.Be=!1,Promise.resolve()}get started(){return this.Be}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(){return this.Ht}getMutationQueue(e){let t=this.bs[e.toKey()];return t||(t=new nl(this.Ht,this.referenceDelegate),this.bs[e.toKey()]=t),t}getTargetCache(){return this.ze}getRemoteDocumentCache(){return this.He}getBundleCache(){return this.Je}runTransaction(e,t,n){br("MemoryPersistence","Starting transaction:",e);const r=new al(this.Le.next());return this.referenceDelegate.vs(),n(r).next(e=>this.referenceDelegate.Vs(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ss(e,t){return Ca.or(Object.values(this.bs).map(n=>()=>n.containsKey(e,t)))}}class al extends Ia{constructor(e){super(),this.currentSequenceNumber=e}}class cl{constructor(e){this.persistence=e,this.Ds=new el,this.Cs=null}static Ns(e){return new cl(e)}get xs(){if(this.Cs)return this.Cs;throw Er()}addReference(e,t,n){return this.Ds.addReference(n,t),this.xs.delete(n.toString()),Ca.resolve()}removeReference(e,t,n){return this.Ds.removeReference(n,t),this.xs.add(n.toString()),Ca.resolve()}markPotentiallyOrphaned(e,t){return this.xs.add(t.toString()),Ca.resolve()}removeTarget(e,t){this.Ds.cs(t.targetId).forEach(e=>this.xs.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.xs.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}vs(){this.Cs=new Set}Vs(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ca.forEach(this.xs,n=>{const r=di.fromPath(n);return this.ks(e,r).next(e=>{e||t.removeEntry(r)})}).next(()=>(this.Cs=null,t.apply(e)))}updateLimboDocument(e,t){return this.ks(e,t).next(e=>{e?this.xs.delete(t.toString()):this.xs.add(t.toString())})}Ps(e){return 0}ks(e,t){return Ca.or([()=>Ca.resolve(this.Ds.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ss(e,t)])}}function ll(e,t){return`firestore_clients_${e}_${t}`}function ul(e,t,n){let r=`firestore_mutations_${e}_${n}`;return t.isAuthenticated()&&(r+=`_${t.uid}`),r}function hl(e,t){return`firestore_targets_${e}_${t}`}class dl{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static $s(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new Nr(r.error.code,r.error.message))),s?new dl(e,t,r.state,i):(Ir("SharedClientState",`Failed to parse mutation state for ID '${t}': ${n}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class pl{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static $s(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new Nr(n.error.code,n.error.message))),i?new pl(e,n.state,r):(Ir("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Os(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class fl{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static $s(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=uo();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=hi(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new fl(e,i):(Ir("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class gl{constructor(e,t){this.clientId=e,this.onlineState=t}static $s(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new gl(t.clientId,t.onlineState):(Ir("SharedClientState",`Failed to parse online state: ${e}`),null)}}class ml{constructor(){this.activeTargetIds=uo()}Fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ms(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Os(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yl{constructor(e,t,n,r,i){this.window=e,this.Oe=t,this.persistenceKey=n,this.Ls=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Bs=this.Us.bind(this),this.qs=new Qs(jr),this.started=!1,this.Ks=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.js=ll(this.persistenceKey,this.Ls),this.Qs=function(e){return`firestore_sequence_number_${e}`}(this.persistenceKey),this.qs=this.qs.insert(this.Ls,new ml),this.Ws=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Gs=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.zs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.Hs=function(e){return`firestore_online_state_${e}`}(this.persistenceKey),this.Js=function(e){return`firestore_bundle_loaded_${e}`}(this.persistenceKey),this.window.addEventListener("storage",this.Bs)}static bt(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.pn();for(const n of e){if(n===this.Ls)continue;const e=this.getItem(ll(this.persistenceKey,n));if(e){const t=fl.$s(n,e);t&&(this.qs=this.qs.insert(t.clientId,t))}}this.Ys();const t=this.storage.getItem(this.Hs);if(t){const e=this.Xs(t);e&&this.Zs(e)}for(const n of this.Ks)this.Us(n);this.Ks=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Qs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.ti(this.qs)}isActiveQueryTarget(e){let t=!1;return this.qs.forEach((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.ei(e,"pending")}updateMutationState(e,t,n){this.ei(e,t,n),this.ni(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const n=this.storage.getItem(hl(this.persistenceKey,e));if(n){const r=pl.$s(e,n);r&&(t=r.state)}}return this.si.Fs(e),this.Ys(),t}removeLocalQueryTarget(e){this.si.Ms(e),this.Ys()}isLocalQueryTarget(e){return this.si.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(hl(this.persistenceKey,e))}updateQueryState(e,t,n){this.ii(e,t,n)}handleUserChange(e,t,n){t.forEach(e=>{this.ni(e)}),this.currentUser=e,n.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.ri(e)}notifyBundleLoaded(){this.oi()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Bs),this.removeItem(this.js),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return br("SharedClientState","READ",e,t),t}setItem(e,t){br("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){br("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Us(e){const t=e;if(t.storageArea===this.storage){if(br("SharedClientState","EVENT",t.key,t.newValue),t.key===this.js)return void Ir("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Oe.enqueueRetryable(async()=>{if(this.started){if(null!==t.key)if(this.Ws.test(t.key)){if(null==t.newValue){const e=this.ci(t.key);return this.ai(e,null)}{const e=this.ui(t.key,t.newValue);if(e)return this.ai(e.clientId,e)}}else if(this.Gs.test(t.key)){if(null!==t.newValue){const e=this.hi(t.key,t.newValue);if(e)return this.li(e)}}else if(this.zs.test(t.key)){if(null!==t.newValue){const e=this.fi(t.key,t.newValue);if(e)return this.di(e)}}else if(t.key===this.Hs){if(null!==t.newValue){const e=this.Xs(t.newValue);if(e)return this.Zs(e)}}else if(t.key===this.Qs){const e=function(e){let t=$r.T;if(null!=e)try{const n=JSON.parse(e);Sr("number"==typeof n),t=n}catch(e){Ir("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==$r.T&&this.sequenceNumberHandler(e)}else if(t.key===this.Js)return this.syncEngine.wi()}else this.Ks.push(t)})}}get si(){return this.qs.get(this.Ls)}Ys(){this.setItem(this.js,this.si.Os())}ei(e,t,n){const r=new dl(this.currentUser,e,t,n),i=ul(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Os())}ni(e){const t=ul(this.persistenceKey,this.currentUser,e);this.removeItem(t)}ri(e){this.storage.setItem(this.Hs,JSON.stringify({clientId:this.Ls,onlineState:e}))}ii(e,t,n){const r=hl(this.persistenceKey,e),i=new pl(e,t,n);this.setItem(r,i.Os())}oi(){this.setItem(this.Js,"value-not-used")}ci(e){const t=this.Ws.exec(e);return t?t[1]:null}ui(e,t){const n=this.ci(e);return fl.$s(n,t)}hi(e,t){const n=this.Gs.exec(e),r=Number(n[1]);return dl.$s(new mr(void 0!==n[2]?n[2]:null),r,t)}fi(e,t){const n=this.zs.exec(e),r=Number(n[1]);return pl.$s(r,t)}Xs(e){return gl.$s(e)}async li(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine._i(e.batchId,e.state,e.error);br("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)}di(e){return this.syncEngine.mi(e.targetId,e.state,e.error)}ai(e,t){const n=t?this.qs.insert(e,t):this.qs.remove(e),r=this.ti(this.qs),i=this.ti(n),s=[],o=[];return i.forEach(e=>{r.has(e)||s.push(e)}),r.forEach(e=>{i.has(e)||o.push(e)}),this.syncEngine.gi(s,o).then(()=>{this.qs=n})}Zs(e){this.qs.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}ti(e){let t=uo();return e.forEach((e,n)=>{t=t.unionWith(n.activeTargetIds)}),t}}class vl{constructor(){this.yi=new ml,this.pi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return this.yi.Fs(e),this.pi[e]||"not-current"}updateQueryState(e,t,n){this.pi[e]=t}removeLocalQueryTarget(e){this.yi.Ms(e)}isLocalQueryTarget(e){return this.yi.activeTargetIds.has(e)}clearQueryState(e){delete this.pi[e]}getAllActiveQueryTargets(){return this.yi.activeTargetIds}isActiveQueryTarget(e){return this.yi.activeTargetIds.has(e)}start(){return this.yi=new ml,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class _l{Ti(e){}shutdown(){}}class wl{constructor(){this.Ei=()=>this.Ii(),this.Ai=()=>this.Ri(),this.bi=[],this.Pi()}Ti(e){this.bi.push(e)}shutdown(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ai)}Pi(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ai)}Ii(){br("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.bi)e(0)}Ri(){br("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.bi)e(1)}static bt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const bl={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class Il{constructor(e){this.vi=e.vi,this.Vi=e.Vi}Si(e){this.Di=e}Ci(e){this.Ni=e}onMessage(e){this.xi=e}close(){this.Vi()}send(e){this.vi(e)}ki(){this.Di()}$i(e){this.Ni(e)}Oi(e){this.xi(e)}}class Cl extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.Fi=(e.ssl?"https":"http")+"://"+e.host,this.Mi="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Li(e,t,n,r){const i=this.Bi(e,t);br("RestConnection","Sending: ",i,n);const s={};return this.Ui(s,r),this.qi(e,i,s,n).then(e=>(br("RestConnection","Received: ",e),e),t=>{throw Cr("RestConnection",`${e} failed with error: `,t,"url: ",i,"request:",n),t})}Ki(e,t,n,r){return this.Li(e,t,n,r)}Ui(e,t){if(e["X-Goog-Api-Client"]="gl-js/ fire/"+yr,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t)for(const n in t.authHeaders)t.authHeaders.hasOwnProperty(n)&&(e[n]=t.authHeaders[n])}Bi(e,t){return`${this.Fi}/v1/${t}:${bl[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}qi(e,t,n,r){return new Promise((i,s)=>{const o=new fr;o.listenOnce(lr.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case cr.NO_ERROR:const t=o.getResponseJson();br("Connection","XHR received:",JSON.stringify(t)),i(t);break;case cr.TIMEOUT:br("Connection",'RPC "'+e+'" timed out'),s(new Nr(xr.DEADLINE_EXCEEDED,"Request time out"));break;case cr.HTTP_ERROR:const n=o.getStatus();if(br("Connection",'RPC "'+e+'" failed with status:',n,"response text:",o.getResponseText()),n>0){const e=o.getResponseJson().error;if(e&&e.status&&e.message){const t=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(xr).indexOf(t)>=0?t:xr.UNKNOWN}(e.status);s(new Nr(t,e.message))}else s(new Nr(xr.UNKNOWN,"Server responded with status "+o.getStatus()))}else s(new Nr(xr.UNAVAILABLE,"Connection failed."));break;default:Er()}}finally{br("Connection",'RPC "'+e+'" completed.')}});const a=JSON.stringify(r);o.send(t,"POST",a,n,15)})}ji(e,t){const n=[this.Fi,"/","google.firestore.v1.Firestore","/",e,"/channel"],r=or(),i=ar(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new dr({})),this.Ui(s.initMessageHeaders,t),(0,a.uI)()||(0,a.b$)()||(0,a.d)()||(0,a.w1)()||(0,a.Mn)()||(0,a.ru)()||(s.httpHeadersOverwriteParam="$httpHeaders");const o=n.join("");br("Connection","Creating WebChannel: "+o,s);const c=r.createWebChannel(o,s);let l=!1,u=!1;const h=new Il({vi:e=>{u?br("Connection","Not sending because WebChannel is closed:",e):(l||(br("Connection","Opening WebChannel transport."),c.open(),l=!0),br("Connection","WebChannel sending:",e),c.send(e))},Vi:()=>c.close()}),d=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return d(c,pr.EventType.OPEN,()=>{u||br("Connection","WebChannel transport opened.")}),d(c,pr.EventType.CLOSE,()=>{u||(u=!0,br("Connection","WebChannel transport closed"),h.$i())}),d(c,pr.EventType.ERROR,e=>{u||(u=!0,Cr("Connection","WebChannel transport errored:",e),h.$i(new Nr(xr.UNAVAILABLE,"The operation could not be completed")))}),d(c,pr.EventType.MESSAGE,e=>{var t;if(!u){const n=e.data[0];Sr(!!n);const r=n,i=r.error||(null===(t=r[0])||void 0===t?void 0:t.error);if(i){br("Connection","WebChannel received error:",i);const e=i.status;let t=function(e){const t=Gs[e];if(void 0!==t)return Ys(t)}(e),n=i.message;void 0===t&&(t=xr.INTERNAL,n="Unknown error status: "+e+" with message "+i.message),u=!0,h.$i(new Nr(t,n)),c.close()}else br("Connection","WebChannel received:",n),h.Oi(n)}}),d(i,ur.STAT_EVENT,e=>{e.stat===hr.PROXY?br("Connection","Detected buffering proxy"):e.stat===hr.NOPROXY&&br("Connection","Detected no buffering proxy")}),setTimeout(()=>{h.ki()},0),h}}function Tl(){return"undefined"!=typeof window?window:null}function El(){return"undefined"!=typeof document?document:null}function Sl(e){return new Co(e,!0)}class kl{constructor(e,t,n=1e3,r=1.5,i=6e4){this.Oe=e,this.timerId=t,this.Qi=n,this.Wi=r,this.Gi=i,this.zi=0,this.Hi=null,this.Ji=Date.now(),this.reset()}reset(){this.zi=0}Yi(){this.zi=this.Gi}Xi(e){this.cancel();const t=Math.floor(this.zi+this.Zi()),n=Math.max(0,Date.now()-this.Ji),r=Math.max(0,t-n);r>0&&br("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.zi} ms, delay with jitter: ${t} ms, last attempt: ${n} ms ago)`),this.Hi=this.Oe.enqueueAfterDelay(this.timerId,r,()=>(this.Ji=Date.now(),e())),this.zi*=this.Wi,this.zi<this.Qi&&(this.zi=this.Qi),this.zi>this.Gi&&(this.zi=this.Gi)}tr(){null!==this.Hi&&(this.Hi.skipDelay(),this.Hi=null)}cancel(){null!==this.Hi&&(this.Hi.cancel(),this.Hi=null)}Zi(){return(Math.random()-.5)*this.zi}}class Al{constructor(e,t,n,r,i,s,o){this.Oe=e,this.er=n,this.nr=r,this.sr=i,this.credentialsProvider=s,this.listener=o,this.state=0,this.ir=0,this.rr=null,this.cr=null,this.stream=null,this.ar=new kl(e,t)}ur(){return 1===this.state||5===this.state||this.hr()}hr(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.lr()}async stop(){this.ur()&&await this.close(0)}dr(){this.state=0,this.ar.reset()}wr(){this.hr()&&null===this.rr&&(this.rr=this.Oe.enqueueAfterDelay(this.er,6e4,()=>this._r()))}mr(e){this.gr(),this.stream.send(e)}async _r(){if(this.hr())return this.close(0)}gr(){this.rr&&(this.rr.cancel(),this.rr=null)}yr(){this.cr&&(this.cr.cancel(),this.cr=null)}async close(e,t){this.gr(),this.yr(),this.ar.cancel(),this.ir++,4!==e?this.ar.reset():t&&t.code===xr.RESOURCE_EXHAUSTED?(Ir(t.toString()),Ir("Using maximum backoff delay to prevent overloading the backend."),this.ar.Yi()):t&&t.code===xr.UNAUTHENTICATED&&3!==this.state&&this.credentialsProvider.invalidateToken(),null!==this.stream&&(this.pr(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Ci(t)}pr(){}auth(){this.state=1;const e=this.Tr(this.ir),t=this.ir;this.credentialsProvider.getToken().then(e=>{this.ir===t&&this.Er(e)},t=>{e(()=>{const e=new Nr(xr.UNKNOWN,"Fetching auth token failed: "+t.message);return this.Ir(e)})})}Er(e){const t=this.Tr(this.ir);this.stream=this.Ar(e),this.stream.Si(()=>{t(()=>(this.state=2,this.cr=this.Oe.enqueueAfterDelay(this.nr,1e4,()=>(this.hr()&&(this.state=3),Promise.resolve())),this.listener.Si()))}),this.stream.Ci(e=>{t(()=>this.Ir(e))}),this.stream.onMessage(e=>{t(()=>this.onMessage(e))})}lr(){this.state=5,this.ar.Xi(async()=>{this.state=0,this.start()})}Ir(e){return br("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Tr(e){return t=>{this.Oe.enqueueAndForget(()=>this.ir===e?t():(br("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xl extends Al{constructor(e,t,n,r,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,i),this.N=r}Ar(e){return this.sr.ji("Listen",e)}onMessage(e){this.ar.reset();const t=function(e,t){let n;if("targetChange"in t){const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Er()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.D?(Sr(void 0===t||"string"==typeof t),ti.fromBase64String(t||"")):(Sr(void 0===t||t instanceof Uint8Array),ti.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(e){const t=void 0===e.code?xr.UNKNOWN:Ys(e.code);return new Nr(t,e.message||"")}(o);n=new mo(r,i,s,a||null)}else if("documentChange"in t){const r=t.documentChange,i=Oo(e,r.document.name),s=ko(r.document.updateTime),o=new ki({mapValue:{fields:r.document.fields}}),a=xi.newFoundDocument(i,s,o);n=new fo(r.targetIds||[],r.removedTargetIds||[],a.key,a)}else if("documentDelete"in t){const r=t.documentDelete,i=Oo(e,r.document),s=r.readTime?ko(r.readTime):Hr.min(),o=xi.newNoDocument(i,s);n=new fo([],r.removedTargetIds||[],o.key,o)}else if("documentRemove"in t){const r=t.documentRemove,i=Oo(e,r.document);n=new fo([],r.removedTargetIds||[],i,null)}else{if(!("filter"in t))return Er();{const e=t.filter,r=new Hs(e.count||0);n=new go(e.targetId,r)}}return n}(this.N,e),n=function(e){if(!("targetChange"in e))return Hr.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?Hr.min():t.readTime?ko(t.readTime):Hr.min()}(e);return this.listener.Rr(t,n)}br(e){const t={};t.database=Do(this.N),t.addTarget=function(e,t){let n;const r=t.target;return n=Di(r)?{documents:Uo(e,r)}:{query:jo(e,r)},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=Eo(e,t.resumeToken):t.snapshotVersion.compareTo(Hr.min())>0&&(n.readTime=To(e,t.snapshotVersion.toTimestamp())),n}(this.N,e);const n=function(e,t){const n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Er()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);n&&(t.labels=n),this.mr(t)}Pr(e){const t={};t.database=Do(this.N),t.removeTarget=e,this.mr(t)}}class Nl extends Al{constructor(e,t,n,r,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,i),this.N=r,this.vr=!1}get Vr(){return this.vr}start(){this.vr=!1,this.lastStreamToken=void 0,super.start()}pr(){this.vr&&this.Sr([])}Ar(e){return this.sr.ji("Write",e)}onMessage(e){if(Sr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.vr){this.ar.reset();const t=function(e,t){return e&&e.length>0?(Sr(void 0!==t),e.map(e=>function(e,t){let n=ko(e.updateTime?e.updateTime:t);return n.isEqual(Hr.min())&&(n=ko(t)),new xs(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=ko(e.commitTime);return this.listener.Dr(n,t)}return Sr(!e.writeResults||0===e.writeResults.length),this.vr=!0,this.listener.Cr()}Nr(){const e={};e.database=Do(this.N),this.mr(e)}Sr(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>$o(this.N,e))};this.mr(t)}}class Ol extends class{}{constructor(e,t,n){super(),this.credentials=e,this.sr=t,this.N=n,this.kr=!1}$r(){if(this.kr)throw new Nr(xr.FAILED_PRECONDITION,"The client has already been terminated.")}Li(e,t,n){return this.$r(),this.credentials.getToken().then(r=>this.sr.Li(e,t,n,r)).catch(e=>{throw"FirebaseError"===e.name?(e.code===xr.UNAUTHENTICATED&&this.credentials.invalidateToken(),e):new Nr(xr.UNKNOWN,e.toString())})}Ki(e,t,n){return this.$r(),this.credentials.getToken().then(r=>this.sr.Ki(e,t,n,r)).catch(e=>{throw"FirebaseError"===e.name?(e.code===xr.UNAUTHENTICATED&&this.credentials.invalidateToken(),e):new Nr(xr.UNKNOWN,e.toString())})}terminate(){this.kr=!0}}class Pl{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.Or=0,this.Fr=null,this.Mr=!0}Lr(){0===this.Or&&(this.Br("Unknown"),this.Fr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.Fr=null,this.Ur("Backend didn't respond within 10 seconds."),this.Br("Offline"),Promise.resolve())))}qr(e){"Online"===this.state?this.Br("Unknown"):(this.Or++,this.Or>=1&&(this.Kr(),this.Ur(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.Br("Offline")))}set(e){this.Kr(),this.Or=0,"Online"===e&&(this.Mr=!1),this.Br(e)}Br(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Ur(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Mr?(Ir(t),this.Mr=!1):br("OnlineStateTracker",t)}Kr(){null!==this.Fr&&(this.Fr.cancel(),this.Fr=null)}}class Rl{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.jr=[],this.Qr=new Map,this.Wr=new Set,this.Gr=[],this.zr=i,this.zr.Ti(e=>{n.enqueueAndForget(async()=>{ql(this)&&(br("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=Ar(e);t.Wr.add(4),await Ll(t),t.Hr.set("Unknown"),t.Wr.delete(4),await Dl(t)}(this))})}),this.Hr=new Pl(n,r)}}async function Dl(e){if(ql(e))for(const t of e.Gr)await t(!0)}async function Ll(e){for(const t of e.Gr)await t(!1)}function Ml(e,t){const n=Ar(e);n.Qr.has(t.targetId)||(n.Qr.set(t.targetId,t),jl(n)?Ul(n):su(n).hr()&&$l(n,t))}function Fl(e,t){const n=Ar(e),r=su(n);n.Qr.delete(t),r.hr()&&Vl(n,t),0===n.Qr.size&&(r.hr()?r.wr():ql(n)&&n.Hr.set("Unknown"))}function $l(e,t){e.Jr.Y(t.targetId),su(e).br(t)}function Vl(e,t){e.Jr.Y(t),su(e).Pr(t)}function Ul(e){e.Jr=new vo({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Tt:t=>e.Qr.get(t)||null}),su(e).start(),e.Hr.Lr()}function jl(e){return ql(e)&&!su(e).ur()&&e.Qr.size>0}function ql(e){return 0===Ar(e).Wr.size}function Bl(e){e.Jr=void 0}async function zl(e){e.Qr.forEach((t,n)=>{$l(e,t)})}async function Hl(e,t){Bl(e),jl(e)?(e.Hr.qr(t),Ul(e)):e.Hr.set("Unknown")}async function Gl(e,t,n){if(e.Hr.set("Online"),t instanceof mo&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Qr.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Qr.delete(r),e.Jr.removeTarget(r))}(e,t)}catch(n){br("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await Wl(e,n)}else if(t instanceof fo?e.Jr.rt(t):t instanceof go?e.Jr.ft(t):e.Jr.at(t),!n.isEqual(Hr.min()))try{const t=await zc(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Jr._t(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.Qr.get(r);i&&e.Qr.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach(t=>{const n=e.Qr.get(t);if(!n)return;e.Qr.set(t,n.withResumeToken(ti.EMPTY_BYTE_STRING,n.snapshotVersion)),Vl(e,t);const r=new Fa(n.target,t,1,n.sequenceNumber);$l(e,r)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){br("RemoteStore","Failed to raise snapshot:",t),await Wl(e,t)}}async function Wl(e,t,n){if(!Aa(t))throw t;e.Wr.add(1),await Ll(e),e.Hr.set("Offline"),n||(n=()=>zc(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{br("RemoteStore","Retrying IndexedDB access"),await n(),e.Wr.delete(1),await Dl(e)})}function Kl(e,t){return t().catch(n=>Wl(e,n,t))}async function Yl(e){const t=Ar(e),n=ou(t);let r=t.jr.length>0?t.jr[t.jr.length-1].batchId:-1;for(;Ql(t);)try{const e=await Gc(t.localStore,r);if(null===e){0===t.jr.length&&n.wr();break}r=e.batchId,Xl(t,e)}catch(e){await Wl(t,e)}Jl(t)&&Zl(t)}function Ql(e){return ql(e)&&e.jr.length<10}function Xl(e,t){e.jr.push(t);const n=ou(e);n.hr()&&n.Vr&&n.Sr(t.mutations)}function Jl(e){return ql(e)&&!ou(e).ur()&&e.jr.length>0}function Zl(e){ou(e).start()}async function eu(e){ou(e).Nr()}async function tu(e){const t=ou(e);for(const n of e.jr)t.Sr(n.mutations)}async function nu(e,t,n){const r=e.jr.shift(),i=Ma.from(r,t,n);await Kl(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await Yl(e)}async function ru(e,t){t&&ou(e).Vr&&await async function(e,t){if(Ks(n=t.code)&&n!==xr.ABORTED){const n=e.jr.shift();ou(e).dr(),await Kl(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Yl(e)}var n}(e,t),Jl(e)&&Zl(e)}async function iu(e,t){const n=Ar(e);t?(n.Wr.delete(2),await Dl(n)):t||(n.Wr.add(2),await Ll(n),n.Hr.set("Unknown"))}function su(e){return e.Yr||(e.Yr=function(e,t,n){const r=Ar(e);return r.$r(),new xl(t,r.sr,r.credentials,r.N,n)}(e.datastore,e.asyncQueue,{Si:zl.bind(null,e),Ci:Hl.bind(null,e),Rr:Gl.bind(null,e)}),e.Gr.push(async t=>{t?(e.Yr.dr(),jl(e)?Ul(e):e.Hr.set("Unknown")):(await e.Yr.stop(),Bl(e))})),e.Yr}function ou(e){return e.Xr||(e.Xr=function(e,t,n){const r=Ar(e);return r.$r(),new Nl(t,r.sr,r.credentials,r.N,n)}(e.datastore,e.asyncQueue,{Si:eu.bind(null,e),Ci:ru.bind(null,e),Cr:tu.bind(null,e),Dr:nu.bind(null,e)}),e.Gr.push(async t=>{t?(e.Xr.dr(),await Yl(e)):(await e.Xr.stop(),e.jr.length>0&&(br("RemoteStore",`Stopping write stream with ${e.jr.length} pending writes`),e.jr=[]))})),e.Xr}class au{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,o=new au(e,t,s,r,i);return o.start(n),o}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Nr(xr.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function cu(e,t){if(Ir("AsyncQueue",`${t}: ${e}`),Aa(e))return new Nr(xr.UNAVAILABLE,`${t}: ${e}`);throw e}class lu{constructor(e){this.comparator=e?(t,n)=>e(t,n)||di.comparator(t.key,n.key):(e,t)=>di.comparator(e.key,t.key),this.keyedMap=io(),this.sortedSet=new Qs(this.comparator)}static emptySet(e){return new lu(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof lu))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new lu;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class uu{constructor(){this.Zr=new Qs(di.comparator)}track(e){const t=e.doc.key,n=this.Zr.get(t);n?0!==e.type&&3===n.type?this.Zr=this.Zr.insert(t,e):3===e.type&&1!==n.type?this.Zr=this.Zr.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Zr=this.Zr.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Zr=this.Zr.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Zr=this.Zr.remove(t):1===e.type&&2===n.type?this.Zr=this.Zr.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Zr=this.Zr.insert(t,{type:2,doc:e.doc}):Er():this.Zr=this.Zr.insert(t,e)}eo(){const e=[];return this.Zr.inorderTraversal((t,n)=>{e.push(n)}),e}}class hu{constructor(e,t,n,r,i,s,o,a){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a}static fromInitialDocuments(e,t,n,r){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new hu(e,t,lu.emptySet(t),i,n,r,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&as(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class du{constructor(){this.no=void 0,this.listeners=[]}}class pu{constructor(){this.queries=new Cc(e=>cs(e),as),this.onlineState="Unknown",this.so=new Set}}async function fu(e,t){const n=Ar(e),r=t.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new du),i)try{s.no=await n.onListen(r)}catch(e){const n=cu(e,`Initialization of query '${ls(t.query)}' failed`);return void t.onError(n)}n.queries.set(r,s),s.listeners.push(t),t.io(n.onlineState),s.no&&t.ro(s.no)&&vu(n)}async function gu(e,t){const n=Ar(e),r=t.query;let i=!1;const s=n.queries.get(r);if(s){const e=s.listeners.indexOf(t);e>=0&&(s.listeners.splice(e,1),i=0===s.listeners.length)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function mu(e,t){const n=Ar(e);let r=!1;for(const i of t){const e=n.queries.get(i.query);if(e){for(const t of e.listeners)t.ro(i)&&(r=!0);e.no=i}}r&&vu(n)}function yu(e,t,n){const r=Ar(e),i=r.queries.get(t);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(t)}function vu(e){e.so.forEach(e=>{e.next()})}class _u{constructor(e,t,n){this.query=e,this.oo=t,this.co=!1,this.ao=null,this.onlineState="Unknown",this.options=n||{}}ro(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new hu(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.co?this.uo(e)&&(this.oo.next(e),t=!0):this.ho(e,this.onlineState)&&(this.lo(e),t=!0),this.ao=e,t}onError(e){this.oo.error(e)}io(e){this.onlineState=e;let t=!1;return this.ao&&!this.co&&this.ho(this.ao,e)&&(this.lo(this.ao),t=!0),t}ho(e,t){return!e.fromCache||!(this.options.fo&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}uo(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ao&&this.ao.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}lo(e){e=hu.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.co=!0,this.oo.next(e)}}class wu{constructor(e,t){this.payload=e,this.byteLength=t}wo(){return"metadata"in this.payload}}class bu{constructor(e){this.N=e}zn(e){return Oo(this.N,e)}Hn(e){return e.metadata.exists?Fo(this.N,e.document,!1):xi.newNoDocument(this.zn(e.metadata.name),this.Jn(e.metadata.readTime))}Jn(e){return ko(e)}}class Iu{constructor(e,t,n){this._o=e,this.localStore=t,this.N=n,this.queries=[],this.documents=[],this.progress=Cu(e)}mo(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}yo(e){const t=new Map,n=new bu(this.N);for(const r of e)if(r.metadata.queries){const e=n.zn(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||co()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=Ar(e);let s=co(),o=no(),a=oo();for(const u of n){const e=t.zn(u.metadata.name);u.document&&(s=s.add(e)),o=o.insert(e,t.Hn(u)),a=a.insert(e,t.Jn(u.metadata.readTime))}const c=i.jn.newChangeBuffer({trackRemovals:!0}),l=await Wc(i,function(e){return ss(Ji(Qr.fromString(`__bundle__/docs/${e}`)))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",e=>Hc(e,c,o,Hr.min(),a).next(t=>(c.apply(e),t)).next(t=>i.ze.removeMatchingKeysForTargetId(e,l.targetId).next(()=>i.ze.addMatchingKeys(e,s,l.targetId)).next(()=>i.Qn.vn(e,t)).next(()=>t)))}(this.localStore,new bu(this.N),this.documents,this._o.id),t=this.yo(this.documents);for(const n of this.queries)await Jc(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",new Fc(Object.assign({},this.progress),e)}}function Cu(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class Tu{constructor(e){this.key=e}}class Eu{constructor(e){this.key=e}}class Su{constructor(e,t){this.query=e,this.po=t,this.To=null,this.current=!1,this.Eo=co(),this.mutatedKeys=co(),this.Io=hs(e),this.Ao=new lu(this.Io)}get Ro(){return this.po}bo(e,t){const n=t?t.Po:new uu,r=t?t.Ao:this.Ao;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,o=!1;const a=Zi(this.query)&&r.size===this.query.limit?r.last():null,c=es(this.query)&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const l=r.get(e),u=us(this.query,t)?t:null,h=!!l&&this.mutatedKeys.has(l.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let p=!1;l&&u?l.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),p=!0):this.vo(l,u)||(n.track({type:2,doc:u}),p=!0,(a&&this.Io(u,a)>0||c&&this.Io(u,c)<0)&&(o=!0)):!l&&u?(n.track({type:0,doc:u}),p=!0):l&&!u&&(n.track({type:1,doc:l}),p=!0,(a||c)&&(o=!0)),p&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),Zi(this.query)||es(this.query))for(;s.size>this.query.limit;){const e=Zi(this.query)?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{Ao:s,Po:n,Ln:o,mutatedKeys:i}}vo(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n){const r=this.Ao;this.Ao=e.Ao,this.mutatedKeys=e.mutatedKeys;const i=e.Po.eo();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Er()}};return n(e)-n(t)}(e.type,t.type)||this.Io(e.doc,t.doc)),this.Vo(n);const s=t?this.So():[],o=0===this.Eo.size&&this.current?1:0,a=o!==this.To;return this.To=o,0!==i.length||a?{snapshot:new hu(this.query,e.Ao,r,i,e.mutatedKeys,0===o,a,!1),Do:s}:{Do:s}}io(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Ao:this.Ao,Po:new uu,mutatedKeys:this.mutatedKeys,Ln:!1},!1)):{Do:[]}}Co(e){return!this.po.has(e)&&!!this.Ao.has(e)&&!this.Ao.get(e).hasLocalMutations}Vo(e){e&&(e.addedDocuments.forEach(e=>this.po=this.po.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.po=this.po.delete(e)),this.current=e.current)}So(){if(!this.current)return[];const e=this.Eo;this.Eo=co(),this.Ao.forEach(e=>{this.Co(e.key)&&(this.Eo=this.Eo.add(e.key))});const t=[];return e.forEach(e=>{this.Eo.has(e)||t.push(new Eu(e))}),this.Eo.forEach(n=>{e.has(n)||t.push(new Tu(n))}),t}No(e){this.po=e.Gn,this.Eo=co();const t=this.bo(e.documents);return this.applyChanges(t,!0)}xo(){return hu.fromInitialDocuments(this.query,this.Ao,this.mutatedKeys,0===this.To)}}class ku{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Au{constructor(e){this.key=e,this.ko=!1}}class xu{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.$o={},this.Oo=new Cc(e=>cs(e),as),this.Fo=new Map,this.Mo=new Set,this.Lo=new Qs(di.comparator),this.Bo=new Map,this.Uo=new el,this.qo={},this.Ko=new Map,this.jo=hc.ie(),this.onlineState="Unknown",this.Qo=void 0}get isPrimaryClient(){return!0===this.Qo}}async function Nu(e,t){const n=nh(e);let r,i;const s=n.Oo.get(t);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.xo();else{const e=await Wc(n.localStore,ss(t)),s=n.sharedClientState.addLocalQueryTarget(e.targetId);r=e.targetId,i=await Ou(n,t,r,"current"===s),n.isPrimaryClient&&Ml(n.remoteStore,e)}return i}async function Ou(e,t,n,r){e.Wo=(t,n,r)=>async function(e,t,n,r){let i=t.view.bo(n);i.Ln&&(i=await Yc(e.localStore,t.query,!1).then(({documents:e})=>t.view.bo(e,i)));const s=r&&r.targetChanges.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s);return qu(e,t.targetId,o.Do),o.snapshot}(e,t,n,r);const i=await Yc(e.localStore,t,!0),s=new Su(t,i.Gn),o=s.bo(i.documents),a=po.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState),c=s.applyChanges(o,e.isPrimaryClient,a);qu(e,n,c.Do);const l=new ku(t,n,s);return e.Oo.set(t,l),e.Fo.has(n)?e.Fo.get(n).push(t):e.Fo.set(n,[t]),c.snapshot}async function Pu(e,t){const n=Ar(e),r=n.Oo.get(t),i=n.Fo.get(r.targetId);if(i.length>1)return n.Fo.set(r.targetId,i.filter(e=>!as(e,t))),void n.Oo.delete(t);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Kc(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Fl(n.remoteStore,r.targetId),Uu(n,r.targetId)}).catch(mc)):(Uu(n,r.targetId),await Kc(n.localStore,r.targetId,!0))}async function Ru(e,t){const n=Ar(e);try{const e=await function(e,t){const n=Ar(e),r=t.snapshotVersion;let i=n.Un;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.jn.newChangeBuffer({trackRemovals:!0});i=n.Un;const o=[];t.targetChanges.forEach((t,s)=>{const a=i.get(s);if(!a)return;o.push(n.ze.removeMatchingKeys(e,t.removedDocuments,s).next(()=>n.ze.addMatchingKeys(e,t.addedDocuments,s)));const c=t.resumeToken;if(c.approximateByteSize()>0){const l=a.withResumeToken(c,r).withSequenceNumber(e.currentSequenceNumber);i=i.insert(s,l),function(e,t,n){return Sr(t.resumeToken.approximateByteSize()>0),0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,l,t)&&o.push(n.ze.updateTargetData(e,l))}});let a=no();if(t.documentUpdates.forEach((r,i)=>{t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),o.push(Hc(e,s,t.documentUpdates,r,void 0).next(e=>{a=e})),!r.isEqual(Hr.min())){const t=n.ze.getLastRemoteSnapshotVersion(e).next(t=>n.ze.setTargetsMetadata(e,e.currentSequenceNumber,r));o.push(t)}return Ca.waitFor(o).next(()=>s.apply(e)).next(()=>n.Qn.vn(e,a)).next(()=>a)}).then(e=>(n.Un=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Bo.get(t);r&&(Sr(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.ko=!0:e.modifiedDocuments.size>0?Sr(r.ko):e.removedDocuments.size>0&&(Sr(r.ko),r.ko=!1))}),await Hu(n,e,t)}catch(e){await mc(e)}}function Du(e,t,n){const r=Ar(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Oo.forEach((n,r)=>{const i=r.view.io(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=Ar(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.listeners)i.io(t)&&(r=!0)}),r&&vu(n)}(r.eventManager,t),e.length&&r.$o.Rr(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Lu(e,t,n){const r=Ar(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Bo.get(t),s=i&&i.key;if(s){let e=new Qs(di.comparator);e=e.insert(s,xi.newNoDocument(s,Hr.min()));const n=co().add(s),i=new ho(Hr.min(),new Map,new Zs(jr),e,n);await Ru(r,i),r.Lo=r.Lo.remove(s),r.Bo.delete(t),zu(r)}else await Kc(r.localStore,t,!1).then(()=>Uu(r,t,n)).catch(mc)}async function Mu(e,t){const n=Ar(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Ar(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.jn.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let o=Ca.resolve();return s.forEach(e=>{o=o.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);Sr(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&r.addEntry(t,n.commitVersion))})}),o.next(()=>e.In.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.In.performConsistencyCheck(e)).next(()=>n.Qn.Pn(e,r))})}(n.localStore,t);Vu(n,r,null),$u(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Hu(n,e)}catch(e){await mc(e)}}async function Fu(e,t,n){const r=Ar(e);try{const e=await function(e,t){const n=Ar(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.In.lookupMutationBatch(e,t).next(t=>(Sr(null!==t),r=t.keys(),n.In.removeMutationBatch(e,t))).next(()=>n.In.performConsistencyCheck(e)).next(()=>n.Qn.Pn(e,r))})}(r.localStore,t);Vu(r,t,n),$u(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Hu(r,e)}catch(n){await mc(n)}}function $u(e,t){(e.Ko.get(t)||[]).forEach(e=>{e.resolve()}),e.Ko.delete(t)}function Vu(e,t,n){const r=Ar(e);let i=r.qo[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.qo[r.currentUser.toKey()]=i}}function Uu(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Fo.get(t))e.Oo.delete(r),n&&e.$o.Go(r,n);e.Fo.delete(t),e.isPrimaryClient&&e.Uo.cs(t).forEach(t=>{e.Uo.containsKey(t)||ju(e,t)})}function ju(e,t){e.Mo.delete(t.path.canonicalString());const n=e.Lo.get(t);null!==n&&(Fl(e.remoteStore,n),e.Lo=e.Lo.remove(t),e.Bo.delete(n),zu(e))}function qu(e,t,n){for(const r of n)r instanceof Tu?(e.Uo.addReference(r.key,t),Bu(e,r)):r instanceof Eu?(br("SyncEngine","Document no longer in limbo: "+r.key),e.Uo.removeReference(r.key,t),e.Uo.containsKey(r.key)||ju(e,r.key)):Er()}function Bu(e,t){const n=t.key,r=n.path.canonicalString();e.Lo.get(n)||e.Mo.has(r)||(br("SyncEngine","New document in limbo: "+n),e.Mo.add(r),zu(e))}function zu(e){for(;e.Mo.size>0&&e.Lo.size<e.maxConcurrentLimboResolutions;){const t=e.Mo.values().next().value;e.Mo.delete(t);const n=new di(Qr.fromString(t)),r=e.jo.next();e.Bo.set(r,new Au(n)),e.Lo=e.Lo.insert(n,r),Ml(e.remoteStore,new Fa(ss(Ji(n.path)),r,2,$r.T))}}async function Hu(e,t,n){const r=Ar(e),i=[],s=[],o=[];r.Oo.isEmpty()||(r.Oo.forEach((e,a)=>{o.push(r.Wo(a,t,n).then(e=>{if(e){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,e.fromCache?"not-current":"current"),i.push(e);const t=Vc.kn(a.targetId,e);s.push(t)}}))}),await Promise.all(o),r.$o.Rr(i),await async function(e,t){const n=Ar(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>Ca.forEach(t,t=>Ca.forEach(t.Nn,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>Ca.forEach(t.xn,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Aa(e))throw e;br("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Un.get(e),r=t.withLastLimboFreeSnapshotVersion(t.snapshotVersion);n.Un=n.Un.insert(e,r)}}}(r.localStore,s))}async function Gu(e,t){const n=Ar(e);if(!n.currentUser.isEqual(t)){br("SyncEngine","User change. New user:",t.toKey());const e=await Bc(n.localStore,t);n.currentUser=t,function(e,t){e.Ko.forEach(e=>{e.forEach(e=>{e.reject(new Nr(xr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Ko.clear()}(n),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Hu(n,e.Wn)}}function Wu(e,t){const n=Ar(e),r=n.Bo.get(t);if(r&&r.ko)return co().add(r.key);{let e=co();const r=n.Fo.get(t);if(!r)return e;for(const t of r){const r=n.Oo.get(t);e=e.unionWith(r.view.Ro)}return e}}async function Ku(e,t){const n=Ar(e),r=await Yc(n.localStore,t.query,!0),i=t.view.No(r);return n.isPrimaryClient&&qu(n,t.targetId,i.Do),i}async function Yu(e){const t=Ar(e);return Xc(t.localStore).then(e=>Hu(t,e))}async function Qu(e,t,n,r){const i=Ar(e),s=await function(e,t){const n=Ar(e),r=Ar(n.In);return n.persistence.runTransaction("Lookup mutation documents","readonly",e=>r.Xt(e,t).next(t=>t?n.Qn.Pn(e,t):Ca.resolve(null)))}(i.localStore,t);null!==s?("pending"===n?await Yl(i.remoteStore):"acknowledged"===n||"rejected"===n?(Vu(i,t,r||null),$u(i,t),function(e,t){Ar(Ar(e).In).te(t)}(i.localStore,t)):Er(),await Hu(i,s)):br("SyncEngine","Cannot apply mutation batch with id: "+t)}async function Xu(e,t,n){const r=Ar(e),i=[],s=[];for(const o of t){let e;const t=r.Fo.get(o);if(t&&0!==t.length){e=await Wc(r.localStore,ss(t[0]));for(const e of t){const t=r.Oo.get(e),n=await Ku(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await Qc(r.localStore,o);e=await Wc(r.localStore,t),await Ou(r,Ju(t),o,!1)}i.push(e)}return r.$o.Rr(s),i}function Ju(e){return Xi(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Zu(e){const t=Ar(e);return Ar(Ar(t.localStore).persistence).pn()}async function eh(e,t,n,r){const i=Ar(e);if(i.Qo)br("SyncEngine","Ignoring unexpected query state notification.");else if(i.Fo.has(t))switch(n){case"current":case"not-current":{const e=await Xc(i.localStore),r=ho.createSynthesizedRemoteEventForCurrentChange(t,"current"===n);await Hu(i,e,r);break}case"rejected":await Kc(i.localStore,t,!0),Uu(i,t,r);break;default:Er()}}async function th(e,t,n){const r=nh(e);if(r.Qo){for(const e of t){if(r.Fo.has(e)){br("SyncEngine","Adding an already active target "+e);continue}const t=await Qc(r.localStore,e),n=await Wc(r.localStore,t);await Ou(r,Ju(t),n.targetId,!1),Ml(r.remoteStore,n)}for(const e of n)r.Fo.has(e)&&await Kc(r.localStore,e,!1).then(()=>{Fl(r.remoteStore,e),Uu(r,e)}).catch(mc)}}function nh(e){const t=Ar(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Ru.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Wu.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Lu.bind(null,t),t.$o.Rr=mu.bind(null,t.eventManager),t.$o.Go=yu.bind(null,t.eventManager),t}function rh(e){const t=Ar(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Mu.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Fu.bind(null,t),t}class ih{constructor(){this.synchronizeTabs=!1}async initialize(e){this.N=Sl(e.databaseInfo.databaseId),this.sharedClientState=this.Ho(e),this.persistence=this.Jo(e),await this.persistence.start(),this.gcScheduler=this.Yo(e),this.localStore=this.Xo(e)}Yo(e){return null}Xo(e){return qc(this.persistence,new Uc,e.initialUser,this.N)}Jo(e){return new ol(cl.Ns,this.N)}Ho(e){return new vl}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class sh extends ih{constructor(e,t,n){super(),this.Zo=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await async function(e){const t=Ar(e);return t.persistence.runTransaction("Synchronize last document change read time","readonly",e=>function(e){const t=Ac(e);let n=Hr.min();return t.Kt({index:ha.readTimeIndex,reverse:!0},(e,t,r)=>{t.readTime&&(n=qa(t.readTime)),r.done()}).next(()=>n)}(e)).then(e=>{t.Kn=e})}(this.localStore),await this.Zo.initialize(this,e),await rh(this.Zo.syncEngine),await Yl(this.Zo.remoteStore),await this.persistence.nn(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(this.localStore),Promise.resolve()))}Xo(e){return qc(this.persistence,new Uc,e.initialUser,this.N)}Yo(e){return new _c(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}Jo(e){const t=Mc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?rc.withCacheSize(this.cacheSizeBytes):rc.DEFAULT;return new Rc(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,Tl(),El(),this.N,this.sharedClientState,!!this.forceOwnership)}Ho(e){return new vl}}class oh extends sh{constructor(e,t){super(e,t,!1),this.Zo=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Zo.syncEngine;this.sharedClientState instanceof yl&&(this.sharedClientState.syncEngine={_i:Qu.bind(null,t),mi:eh.bind(null,t),gi:th.bind(null,t),pn:Zu.bind(null,t),wi:Yu.bind(null,t)},await this.sharedClientState.start()),await this.persistence.nn(async e=>{await async function(e,t){const n=Ar(e);if(nh(n),rh(n),!0===t&&!0!==n.Qo){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await Xu(n,e.toArray());n.Qo=!0,await iu(n.remoteStore,!0);for(const r of t)Ml(n.remoteStore,r)}else if(!1===t&&!1!==n.Qo){const e=[];let t=Promise.resolve();n.Fo.forEach((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then(()=>(Uu(n,i),Kc(n.localStore,i,!0))),Fl(n.remoteStore,i)}),await t,await Xu(n,e),function(e){const t=Ar(e);t.Bo.forEach((e,n)=>{Fl(t.remoteStore,n)}),t.Uo.us(),t.Bo=new Map,t.Lo=new Qs(di.comparator)}(n),n.Qo=!1,await iu(n.remoteStore,!1)}}(this.Zo.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):e||this.gcScheduler.stop())})}Ho(e){const t=Tl();if(!yl.bt(t))throw new Nr(xr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Mc(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new yl(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class ah{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Du(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Gu.bind(null,this.syncEngine),await iu(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new pu}createDatastore(e){const t=Sl(e.databaseInfo.databaseId),n=new Cl(e.databaseInfo);return function(e,t,n){return new Ol(e,t,n)}(e.credentials,n,t)}createRemoteStore(e){return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=e=>Du(this.syncEngine,e,0),s=wl.bt()?new wl:new _l,new Rl(t,n,r,i,s);var t,n,r,i,s}createSyncEngine(e,t){return function(e,t,n,r,i,s,o){const a=new xu(e,t,n,r,i,s);return o&&(a.Qo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return async function(e){const t=Ar(e);br("RemoteStore","RemoteStore shutting down."),t.Wr.add(5),await Ll(t),t.zr.shutdown(),t.Hr.set("Unknown")}(this.remoteStore)}}function ch(e,t=10240){let n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.reject("unimplemented")}}class lh{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.tc(this.observer.next,e)}error(e){this.observer.error?this.tc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}ec(){this.muted=!0}tc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class uh{constructor(e,t){this.nc=e,this.N=t,this.metadata=new Or,this.buffer=new Uint8Array,this.sc=new TextDecoder("utf-8"),this.ic().then(e=>{e&&e.wo()?this.metadata.resolve(e.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==e?void 0:e.payload)}`))},e=>this.metadata.reject(e))}close(){return this.nc.cancel()}async getMetadata(){return this.metadata.promise}async zo(){return await this.getMetadata(),this.ic()}async ic(){const e=await this.rc();if(null===e)return null;const t=this.sc.decode(e),n=Number(t);isNaN(n)&&this.oc(`length string (${t}) is not valid number`);const r=await this.cc(n);return new wu(JSON.parse(r),e.length+n)}ac(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async rc(){for(;this.ac()<0&&!(await this.uc()););if(0===this.buffer.length)return null;const e=this.ac();e<0&&this.oc("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async cc(e){for(;this.buffer.length<e;)await this.uc()&&this.oc("Reached the end of bundle when more is expected.");const t=this.sc.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}oc(e){throw this.nc.cancel(),new Error(`Invalid bundle format: ${e}`)}async uc(){const e=await this.nc.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class hh{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Nr(xr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const t=await async function(e,t){const n=Ar(e),r=Do(n.N)+"/documents",i={documents:t.map(e=>No(n.N,e))},s=await n.Ki("BatchGetDocuments",r,i),o=new Map;s.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){Sr(!!t.found);const n=Oo(e,t.found.name),r=ko(t.found.updateTime),i=new ki({mapValue:{fields:t.found.fields}});return xi.newFoundDocument(n,r,i)}(e,t):"missing"in t?function(e,t){Sr(!!t.missing),Sr(!!t.readTime);const n=Oo(e,t.missing),r=ko(t.readTime);return xi.newNoDocument(n,r)}(e,t):Er()}(n.N,e);o.set(t.key.toString(),t)});const a=[];return t.forEach(e=>{const t=o.get(e.toString());Sr(!!t),a.push(t)}),a}(this.datastore,e);return t.forEach(e=>this.recordVersion(e)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Bs(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,t)=>{const n=di.fromPath(t);this.mutations.push(new zs(n,this.precondition(n)))}),await async function(e,t){const n=Ar(e),r=Do(n.N)+"/documents",i={writes:t.map(e=>$o(n.N,e))};await n.Li("Commit",r,i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Er();t=Hr.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Nr(xr.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?Ns.updateTime(t):Ns.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Hr.min()))throw new Nr(xr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ns.updateTime(t)}return Ns.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class dh{constructor(e,t,n,r){this.asyncQueue=e,this.datastore=t,this.updateFunction=n,this.deferred=r,this.hc=5,this.ar=new kl(this.asyncQueue,"transaction_retry")}run(){this.hc-=1,this.lc()}lc(){this.ar.Xi(async()=>{const e=new hh(this.datastore),t=this.fc(e);t&&t.then(t=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(t)}).catch(e=>{this.dc(e)}))}).catch(e=>{this.dc(e)})})}fc(e){try{const t=this.updateFunction(e);return!li(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}dc(e){this.hc>0&&this.wc(e)?(this.hc-=1,this.asyncQueue.enqueueAndForget(()=>(this.lc(),Promise.resolve()))):this.deferred.reject(e)}wc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!Ks(t)}return!1}}class ph{constructor(e,t,n){this.credentials=e,this.asyncQueue=t,this.databaseInfo=n,this.user=mr.UNAUTHENTICATED,this.clientId=Ur.I(),this.credentialListener=()=>Promise.resolve(),this.credentials.start(t,async e=>{br("FirestoreClient","Received user=",e.uid),await this.credentialListener(e),this.user=e})}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.credentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Nr(xr.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this.onlineComponents&&await this.onlineComponents.terminate(),this.offlineComponents&&await this.offlineComponents.terminate(),this.credentials.shutdown(),e.resolve()}catch(t){const n=cu(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function fh(e,t){e.asyncQueue.verifyOperationInProgress(),br("FirestoreClient","Initializing OfflineComponentProvider");const n=await e.getConfiguration();await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Bc(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e.offlineComponents=t}async function gh(e,t){e.asyncQueue.verifyOperationInProgress();const n=await mh(e);br("FirestoreClient","Initializing OnlineComponentProvider");const r=await e.getConfiguration();await t.initialize(n,r),e.setCredentialChangeListener(e=>async function(e,t){const n=Ar(e);n.asyncQueue.verifyOperationInProgress(),br("RemoteStore","RemoteStore received new credentials");const r=ql(n);n.Wr.add(3),await Ll(n),r&&n.Hr.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Wr.delete(3),await Dl(n)}(t.remoteStore,e)),e.onlineComponents=t}async function mh(e){return e.offlineComponents||(br("FirestoreClient","Using default OfflineComponentProvider"),await fh(e,new ih)),e.offlineComponents}async function yh(e){return e.onlineComponents||(br("FirestoreClient","Using default OnlineComponentProvider"),await gh(e,new ah)),e.onlineComponents}function vh(e){return mh(e).then(e=>e.persistence)}function _h(e){return mh(e).then(e=>e.localStore)}function wh(e){return yh(e).then(e=>e.remoteStore)}function bh(e){return yh(e).then(e=>e.syncEngine)}async function Ih(e){const t=await yh(e),n=t.eventManager;return n.onListen=Nu.bind(null,t.syncEngine),n.onUnlisten=Pu.bind(null,t.syncEngine),n}function Ch(e,t,n={}){const r=new Or;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new lh({next:s=>{t.enqueueAndForget(()=>gu(e,o));const a=s.docs.has(n);!a&&s.fromCache?i.reject(new Nr(xr.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&r&&"server"===r.source?i.reject(new Nr(xr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(s)},error:e=>i.reject(e)}),o=new _u(Ji(n.path),s,{includeMetadataChanges:!0,fo:!0});return fu(e,o)}(await Ih(e),e.asyncQueue,t,n,r)),r.promise}function Th(e,t,n={}){const r=new Or;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new lh({next:n=>{t.enqueueAndForget(()=>gu(e,o)),n.fromCache&&"server"===r.source?i.reject(new Nr(xr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),o=new _u(n,s,{includeMetadataChanges:!0,fo:!0});return fu(e,o)}(await Ih(e),e.asyncQueue,t,n,r)),r.promise}class Eh{constructor(e,t,n,r,i,s,o,a){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.useFetchStreams=a}}class Sh{constructor(e,t){this.projectId=e,this.database=t||"(default)"}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Sh&&e.projectId===this.projectId&&e.database===this.database}}const kh=new Map;function Ah(e,t,n){if(!n)throw new Nr(xr.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function xh(e,t,n,r){if(!0===t&&!0===r)throw new Nr(xr.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function Nh(e){if(!di.isDocumentKey(e))throw new Nr(xr.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Oh(e){if(di.isDocumentKey(e))throw new Nr(xr.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function Ph(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return"function"==typeof e?"a function":Er()}function Rh(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Nr(xr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Ph(e);throw new Nr(xr.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}function Dh(e,t){if(t<=0)throw new Nr(xr.INVALID_ARGUMENT,`Function ${e}() requires a positive number, but it was: ${t}.`)}class Lh{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Nr(xr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Nr(xr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,xh("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mh{constructor(e,t){this._credentials=t,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lh({}),this._settingsFrozen=!1,e instanceof Sh?this._databaseId=e:(this._app=e,this._databaseId=function(e){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Nr(xr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Sh(e.options.projectId)}(e))}get app(){if(!this._app)throw new Nr(xr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Nr(xr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lh(e),void 0!==e.credentials&&(this._credentials=function(e){if(!e)return new Rr;switch(e.type){case"gapi":const t=e.client;return Sr(!("object"!=typeof t||null===t||!t.auth||!t.auth.getAuthHeaderValueForFirstParty)),new Fr(t,e.sessionIndex||"0",e.iamToken||null);case"provider":return e.client;default:throw new Nr(xr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=kh.get(e);t&&(br("ComponentProvider","Removing Datastore"),kh.delete(e),t.terminate())}(this),Promise.resolve()}}function Fh(e,t,n,r={}){var i;const s=(e=Rh(e,Mh))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==t&&Cr("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},s),{host:`${t}:${n}`,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=mr.MOCK_USER;else{t=(0,a.Sg)(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Nr(xr.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new mr(s)}e._credentials=new Dr(new Pr(t,n))}}class $h{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Uh(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $h(this.firestore,e,this._key)}}class Vh{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new Vh(this.firestore,e,this._query)}}class Uh extends Vh{constructor(e,t,n){super(e,t,Ji(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $h(this.firestore,null,new di(e))}withConverter(e){return new Uh(this.firestore,e,this._path)}}function jh(e,t,...n){if(e=(0,a.m9)(e),Ah("collection","path",t),e instanceof Mh){const r=Qr.fromString(t,...n);return Oh(r),new Uh(e,null,r)}{if(!(e instanceof $h||e instanceof Uh))throw new Nr(xr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Qr.fromString(t,...n));return Oh(r),new Uh(e.firestore,null,r)}}function qh(e,t){if(e=Rh(e,Mh),Ah("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Nr(xr.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Vh(e,null,function(e){return new Qi(Qr.emptyPath(),e)}(t))}function Bh(e,t,...n){if(e=(0,a.m9)(e),1===arguments.length&&(t=Ur.I()),Ah("doc","path",t),e instanceof Mh){const r=Qr.fromString(t,...n);return Nh(r),new $h(e,null,new di(r))}{if(!(e instanceof $h||e instanceof Uh))throw new Nr(xr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(Qr.fromString(t,...n));return Nh(r),new $h(e.firestore,e instanceof Uh?e.converter:null,new di(r))}}function zh(e,t){return e=(0,a.m9)(e),t=(0,a.m9)(t),(e instanceof $h||e instanceof Uh)&&(t instanceof $h||t instanceof Uh)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Hh(e,t){return e=(0,a.m9)(e),t=(0,a.m9)(t),e instanceof Vh&&t instanceof Vh&&e.firestore===t.firestore&&as(e._query,t._query)&&e.converter===t.converter}class Gh{constructor(){this._c=Promise.resolve(),this.mc=[],this.gc=!1,this.yc=[],this.Tc=null,this.Ec=!1,this.Ic=!1,this.Ac=[],this.ar=new kl(this,"async_queue_retry"),this.Rc=()=>{const e=El();e&&br("AsyncQueue","Visibility state changed to "+e.visibilityState),this.ar.tr()};const e=El();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Rc)}get isShuttingDown(){return this.gc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.bc(),this.Pc(e)}enterRestrictedMode(e){if(!this.gc){this.gc=!0,this.Ic=e||!1;const t=El();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Rc)}}enqueue(e){if(this.bc(),this.gc)return new Promise(()=>{});const t=new Or;return this.Pc(()=>this.gc&&this.Ic?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.mc.push(e),this.vc()))}async vc(){if(0!==this.mc.length){try{await this.mc[0](),this.mc.shift(),this.ar.reset()}catch(b){if(!Aa(b))throw b;br("AsyncQueue","Operation failed with retryable error: "+b)}this.mc.length>0&&this.ar.Xi(()=>this.vc())}}Pc(e){const t=this._c.then(()=>(this.Ec=!0,e().catch(e=>{throw this.Tc=e,this.Ec=!1,Ir("INTERNAL UNHANDLED ERROR: ",function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e)),e}).then(e=>(this.Ec=!1,e))));return this._c=t,t}enqueueAfterDelay(e,t,n){this.bc(),this.Ac.indexOf(e)>-1&&(t=0);const r=au.createAndSchedule(this,e,t,n,e=>this.Vc(e));return this.yc.push(r),r}bc(){this.Tc&&Er()}verifyOperationInProgress(){}async Sc(){let e;do{e=this._c,await e}while(e!==this._c)}Dc(e){for(const t of this.yc)if(t.timerId===e)return!0;return!1}Cc(e){return this.Sc().then(()=>{this.yc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.yc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Sc()})}Nc(e){this.Ac.push(e)}Vc(e){const t=this.yc.indexOf(e);this.yc.splice(t,1)}}function Wh(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of["next","error","complete"])if(r in n&&"function"==typeof n[r])return!0;return!1}(e)}class Kh{constructor(){this._progressObserver={},this._taskCompletionResolver=new Or,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const Yh=-1;class Qh extends Mh{constructor(e,t){super(e,t),this.type="firestore",this._queue=new Gh,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Zh(this),this._firestoreClient.terminate()}}function Xh(e=(0,i.getApp)()){return(0,i._getProvider)(e,"firestore").getImmediate()}function Jh(e){return e._firestoreClient||Zh(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Zh(e){var t;const n=e._freezeSettings(),r=function(e,t,n,r){return new Eh(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,n);e._firestoreClient=new ph(e._credentials,e._queue,r)}function ed(e,t){ld(e=Rh(e,Qh));const n=Jh(e),r=e._freezeSettings(),i=new ah;return nd(n,i,new sh(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}function td(e){ld(e=Rh(e,Qh));const t=Jh(e),n=e._freezeSettings(),r=new ah;return nd(t,r,new oh(r,n.cacheSizeBytes))}function nd(e,t,n){const r=new Or;return e.asyncQueue.enqueue(async()=>{try{await fh(e,n),await gh(e,t),r.resolve()}catch(e){if(!function(e){return"FirebaseError"===e.name?e.code===xr.FAILED_PRECONDITION||e.code===xr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(e))throw e;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),r.reject(e)}}).then(()=>r.promise)}function rd(e){if(e._initialized&&!e._terminated)throw new Nr(xr.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new Or;return e._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(e){if(!Ea.bt())return Promise.resolve();const t=e+"main";await Ea.delete(t)}(Mc(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}}),t.promise}function id(e){return function(e){const t=new Or;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t){const n=Ar(e);ql(n.remoteStore)||br("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=Ar(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",e=>t.In.getHighestUnacknowledgedBatchId(e))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Ko.get(e)||[];r.push(t),n.Ko.set(e,r)}catch(e){const n=cu(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await bh(e),t)),t.promise}(Jh(e=Rh(e,Qh)))}function sd(e){return function(e){return e.asyncQueue.enqueue(async()=>{const t=await vh(e),n=await wh(e);return t.setNetworkEnabled(!0),function(e){const t=Ar(e);return t.Wr.delete(0),Dl(t)}(n)})}(Jh(e=Rh(e,Qh)))}function od(e){return function(e){return e.asyncQueue.enqueue(async()=>{const t=await vh(e),n=await wh(e);return t.setNetworkEnabled(!1),async function(e){const t=Ar(e);t.Wr.add(0),await Ll(t),t.Hr.set("Offline")}(n)})}(Jh(e=Rh(e,Qh)))}function ad(e,t){const n=Jh(e=Rh(e,Qh)),r=new Kh;return function(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?(new TextEncoder).encode(e):e,function(e,t){return new uh(e,t)}(function(e,t){if(e instanceof Uint8Array)return ch(e,t);if(e instanceof ArrayBuffer)return ch(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Sl(t));e.asyncQueue.enqueueAndForget(async()=>{!function(e,t,n){const r=Ar(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=Ar(e),r=ko(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",e=>n.Je.getBundleMetadata(e,t.id)).then(e=>!!e&&e.createTime.compareTo(r)>=0)}(e.localStore,r))return await t.close(),void n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r));n._updateProgress(Cu(r));const i=new Iu(r,e.localStore,t.N);let s=await t.zo();for(;s;){const e=await i.mo(s);e&&n._updateProgress(e),s=await t.zo()}const o=await i.complete();await Hu(e,o.En,void 0),await function(e,t){const n=Ar(e);return n.persistence.runTransaction("Save bundle","readwrite",e=>n.Je.saveBundleMetadata(e,t))}(e.localStore,r),n._completeWith(o.progress)}catch(e){Cr("SyncEngine",`Loading bundle failed with ${e}`),n._failWith(e)}})(r,t,n).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(await bh(e),i,r)})}(n,e._databaseId,t,r),r}function cd(e,t){return function(e,t){return e.asyncQueue.enqueue(async()=>function(e,t){const n=Ar(e);return n.persistence.runTransaction("Get named query","readonly",e=>n.Je.getNamedQuery(e,t))}(await _h(e),t))}(Jh(e=Rh(e,Qh)),t).then(t=>t?new Vh(e,null,t.query):null)}function ld(e){if(e._initialized||e._terminated)throw new Nr(xr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ud{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Nr(xr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Jr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class hd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new hd(ti.fromBase64String(e))}catch(e){throw new Nr(xr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new hd(ti.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class dd{constructor(e){this._methodName=e}}class pd{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Nr(xr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Nr(xr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return jr(this._lat,e._lat)||jr(this._long,e._long)}}const fd=/^__.*__$/;class gd{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Vs(e,this.data,this.fieldMask,t,this.fieldTransforms):new $s(e,this.data,t,this.fieldTransforms)}}class md{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Vs(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function yd(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Er()}}class vd{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.N=n,this.ignoreUndefinedProperties=r,void 0===i&&this.xc(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get kc(){return this.settings.kc}$c(e){return new vd(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.N,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Oc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.$c({path:n,Fc:!1});return r.Mc(e),r}Lc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.$c({path:n,Fc:!1});return r.xc(),r}Bc(e){return this.$c({path:void 0,Fc:!0})}Uc(e){return $d(e,this.settings.methodName,this.settings.qc||!1,this.path,this.settings.Kc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}xc(){if(this.path)for(let e=0;e<this.path.length;e++)this.Mc(this.path.get(e))}Mc(e){if(0===e.length)throw this.Uc("Document fields must not be empty");if(yd(this.kc)&&fd.test(e))throw this.Uc('Document fields cannot begin and end with "__"')}}class _d{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.N=n||Sl(e)}jc(e,t,n,r=!1){return new vd({kc:e,methodName:t,Kc:n,path:Jr.emptyPath(),Fc:!1,qc:r},this.databaseId,this.N,this.ignoreUndefinedProperties)}}function wd(e){const t=e._freezeSettings(),n=Sl(e._databaseId);return new _d(e._databaseId,!!t.ignoreUndefinedProperties,n)}function bd(e,t,n,r,i,s={}){const o=e.jc(s.merge||s.mergeFields?2:0,t,n,i);Dd("Data must be an object, but it was:",o,r);const a=Pd(r,o);let c,l;if(s.merge)c=new Zr(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=Ld(t,r,n);if(!o.contains(i))throw new Nr(xr.INVALID_ARGUMENT,`Field '${i}' is specified in your field mask but missing from your input data.`);Vd(e,i)||e.push(i)}c=new Zr(e),l=o.fieldTransforms.filter(e=>c.covers(e.field))}else c=null,l=o.fieldTransforms;return new gd(new ki(a),c,l)}class Id extends dd{_toFieldTransform(e){if(2!==e.kc)throw e.Uc(1===e.kc?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Id}}function Cd(e,t,n){return new vd({kc:3,Kc:t.settings.Kc,methodName:e._methodName,Fc:n},t.databaseId,t.N,t.ignoreUndefinedProperties)}class Td extends dd{_toFieldTransform(e){return new As(e.path,new ws)}isEqual(e){return e instanceof Td}}class Ed extends dd{constructor(e,t){super(e),this.Qc=t}_toFieldTransform(e){const t=Cd(this,e,!0),n=this.Qc.map(e=>Od(e,t)),r=new bs(n);return new As(e.path,r)}isEqual(e){return this===e}}class Sd extends dd{constructor(e,t){super(e),this.Qc=t}_toFieldTransform(e){const t=Cd(this,e,!0),n=this.Qc.map(e=>Od(e,t)),r=new Cs(n);return new As(e.path,r)}isEqual(e){return this===e}}class kd extends dd{constructor(e,t){super(e),this.Wc=t}_toFieldTransform(e){const t=new Es(e.N,gs(e.N,this.Wc));return new As(e.path,t)}isEqual(e){return this===e}}function Ad(e,t,n,r){const i=e.jc(1,t,n);Dd("Data must be an object, but it was:",i,r);const s=[],o=ki.empty();Wr(r,(e,r)=>{const c=Fd(t,e,n);r=(0,a.m9)(r);const l=i.Lc(c);if(r instanceof Id)s.push(c);else{const e=Od(r,l);null!=e&&(s.push(c),o.set(c,e))}});const c=new Zr(s);return new md(o,c,i.fieldTransforms)}function xd(e,t,n,r,i,s){const o=e.jc(1,t,n),c=[Ld(t,r,n)],l=[i];if(s.length%2!=0)throw new Nr(xr.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let a=0;a<s.length;a+=2)c.push(Ld(t,s[a])),l.push(s[a+1]);const u=[],h=ki.empty();for(let p=c.length-1;p>=0;--p)if(!Vd(u,c[p])){const e=c[p];let t=l[p];t=(0,a.m9)(t);const n=o.Lc(e);if(t instanceof Id)u.push(e);else{const r=Od(t,n);null!=r&&(u.push(e),h.set(e,r))}}const d=new Zr(u);return new md(h,d,o.fieldTransforms)}function Nd(e,t,n,r=!1){return Od(n,e.jc(r?4:3,t))}function Od(e,t){if(Rd(e=(0,a.m9)(e)))return Dd("Unsupported field value:",t,e),Pd(e,t);if(e instanceof dd)return function(e,t){if(!yd(t.kc))throw t.Uc(`${e._methodName}() can only be used with update() and set()`);if(!t.path)throw t.Uc(`${e._methodName}() is not currently supported inside arrays`);const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Fc&&4!==t.kc)throw t.Uc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=Od(i,t.Bc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,a.m9)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return gs(t.N,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=zr.fromDate(e);return{timestampValue:To(t.N,n)}}if(e instanceof zr){const n=new zr(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:To(t.N,n)}}if(e instanceof pd)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof hd)return{bytesValue:Eo(t.N,e._byteString)};if(e instanceof $h){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Uc(`Document reference is for database ${r.projectId}/${r.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Ao(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.Uc(`Unsupported field value: ${Ph(e)}`)}(e,t)}function Pd(e,t){const n={};return Kr(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Wr(e,(e,r)=>{const i=Od(r,t.Oc(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function Rd(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof zr||e instanceof pd||e instanceof hd||e instanceof $h||e instanceof dd)}function Dd(e,t,n){if(!Rd(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Ph(n);throw t.Uc("an object"===r?e+" a custom object":e+" "+r)}}function Ld(e,t,n){if((t=(0,a.m9)(t))instanceof ud)return t._internalPath;if("string"==typeof t)return Fd(e,t);throw $d("Field path arguments must be of type string or FieldPath.",e,!1,void 0,n)}const Md=new RegExp("[~\\*/\\[\\]]");function Fd(e,t,n){if(t.search(Md)>=0)throw $d(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new ud(...t.split("."))._internalPath}catch(r){throw $d(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function $d(e,t,n,r,i){const s=r&&!r.isEmpty(),o=void 0!==i;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${r}`),o&&(c+=` in document ${i}`),c+=")"),new Nr(xr.INVALID_ARGUMENT,a+e+c)}function Vd(e,t){return e.some(e=>e.isEqual(t))}class Ud{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new $h(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new jd(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(qd("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class jd extends Ud{data(){return super.data()}}function qd(e,t){return"string"==typeof t?Fd(e,t):t instanceof ud?t._internalPath:t._delegate._internalPath}class Bd{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class zd extends Ud{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Hd(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const n=this._document.data.field(qd("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Hd extends zd{data(e={}){return super.data(e)}}class Gd{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Bd(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Hd(this._firestore,this._userDataWriter,n.key,n,new Bd(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Nr(xr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>({type:"added",doc:new Hd(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Bd(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter),oldIndex:-1,newIndex:t++}))}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Hd(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Bd(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Wd(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Wd(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Er()}}function Kd(e,t){return e instanceof zd&&t instanceof zd?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Gd&&t instanceof Gd&&e._firestore===t._firestore&&Hh(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function Yd(e){if(es(e)&&0===e.explicitOrderBy.length)throw new Nr(xr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Qd{}function Xd(e,...t){for(const n of t)e=n._apply(e);return e}class Jd extends Qd{constructor(e,t,n){super(),this.Gc=e,this.zc=t,this.Hc=n,this.type="where"}_apply(e){const t=wd(e.firestore),n=function(e,t,n,r,i,s,o){let a;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new Nr(xr.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on FieldPath.documentId().`);if("in"===s||"not-in"===s){pp(o,s);const t=[];for(const n of o)t.push(dp(r,e,n));a={arrayValue:{values:t}}}else a=dp(r,e,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||pp(o,s),a=Nd(n,"where",o,"in"===s||"not-in"===s);const c=Li.create(i,s,a);return function(e,t){if(t.v()){const n=ns(e);if(null!==n&&!n.isEqual(t.field))throw new Nr(xr.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${n.toString()}' and '${t.field.toString()}'`);const r=ts(e);null!==r&&fp(0,t.field,r)}const n=function(e,t){for(const n of e.filters)if(t.indexOf(n.op)>=0)return n.op;return null}(e,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw new Nr(xr.INVALID_ARGUMENT,n===t.op?`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`:`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}(e,c),c}(e._query,0,t,e.firestore._databaseId,this.Gc,this.zc,this.Hc);return new Vh(e.firestore,e.converter,function(e,t){const n=e.filters.concat([t]);return new Qi(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}(e._query,n))}}function Zd(e,t,n){const r=t,i=qd("where",e);return new Jd(i,r,n)}class ep extends Qd{constructor(e,t){super(),this.Gc=e,this.Jc=t,this.type="orderBy"}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Nr(xr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Nr(xr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const r=new Gi(t,n);return function(e,t){if(null===ts(e)){const n=ns(e);null!==n&&fp(0,n,t.field)}}(e,r),r}(e._query,this.Gc,this.Jc);return new Vh(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Qi(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function tp(e,t="asc"){const n=t,r=qd("orderBy",e);return new ep(r,n)}class np extends Qd{constructor(e,t,n){super(),this.type=e,this.Yc=t,this.Xc=n}_apply(e){return new Vh(e.firestore,e.converter,os(e._query,this.Yc,this.Xc))}}function rp(e){return Dh("limit",e),new np("limit",e,"F")}function ip(e){return Dh("limitToLast",e),new np("limitToLast",e,"L")}class sp extends Qd{constructor(e,t,n){super(),this.type=e,this.Zc=t,this.ta=n}_apply(e){const t=hp(e,this.type,this.Zc,this.ta);return new Vh(e.firestore,e.converter,function(e,t){return new Qi(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}function op(...e){return new sp("startAt",e,!0)}function ap(...e){return new sp("startAfter",e,!1)}class cp extends Qd{constructor(e,t,n){super(),this.type=e,this.Zc=t,this.ta=n}_apply(e){const t=hp(e,this.type,this.Zc,this.ta);return new Vh(e.firestore,e.converter,function(e,t){return new Qi(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function lp(...e){return new cp("endBefore",e,!0)}function up(...e){return new cp("endAt",e,!1)}function hp(e,t,n,r){if(n[0]=(0,a.m9)(n[0]),n[0]instanceof Ud)return function(e,t,n,r,i){if(!r)throw new Nr(xr.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const o of is(e))if(o.field.isKeyField())s.push(wi(t,r.key));else{const e=r.data.field(o.field);if(oi(e))throw new Nr(xr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=o.field.canonicalString();throw new Nr(xr.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${e}' (used as the orderBy) does not exist.`)}s.push(e)}return new zi(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=wd(e.firestore);return function(e,t,n,r,i,s){const o=e.explicitOrderBy;if(i.length>o.length)throw new Nr(xr.INVALID_ARGUMENT,`Too many arguments provided to ${r}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let c=0;c<i.length;c++){const s=i[c];if(o[c].field.isKeyField()){if("string"!=typeof s)throw new Nr(xr.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${r}(), but got a ${typeof s}`);if(!rs(e)&&-1!==s.indexOf("/"))throw new Nr(xr.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to ${r}() must be a plain document ID, but '${s}' contains a slash.`);const n=e.path.child(Qr.fromString(s));if(!di.isDocumentKey(n))throw new Nr(xr.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to ${r}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const i=new di(n);a.push(wi(t,i))}else{const e=Nd(n,r,s);a.push(e)}}return new zi(a,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function dp(e,t,n){if("string"==typeof(n=(0,a.m9)(n))){if(""===n)throw new Nr(xr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!rs(t)&&-1!==n.indexOf("/"))throw new Nr(xr.INVALID_ARGUMENT,`Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Qr.fromString(n));if(!di.isDocumentKey(r))throw new Nr(xr.INVALID_ARGUMENT,`Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return wi(e,new di(r))}if(n instanceof $h)return wi(e,n._key);throw new Nr(xr.INVALID_ARGUMENT,`Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: ${Ph(n)}.`)}function pp(e,t){if(!Array.isArray(e)||0===e.length)throw new Nr(xr.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`);if(e.length>10)throw new Nr(xr.INVALID_ARGUMENT,`Invalid Query. '${t.toString()}' filters support a maximum of 10 elements in the value array.`)}function fp(e,t,n){if(!n.isEqual(t))throw new Nr(xr.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${t.toString()}' and so you must also use '${t.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class gp{convertValue(e,t="none"){switch(pi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ii(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(si(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Er()}}convertObject(e,t){const n={};return Wr(e.fields,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertGeoPoint(e){return new pd(ii(e.latitude),ii(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=ai(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(ci(e));default:return null}}convertTimestamp(e){const t=ri(e);return new zr(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=Qr.fromString(e);Sr(Zo(n));const r=new Sh(n.get(1),n.get(3)),i=new di(n.popFirst(5));return r.isEqual(t)||Ir(`Document ${i} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),i}}function mp(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class yp extends gp{constructor(e){super(),this.firestore=e}convertBytes(e){return new hd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $h(this.firestore,null,t)}}class vp{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=wd(e)}set(e,t,n){this._verifyNotCommitted();const r=_p(e,this._firestore),i=mp(r.converter,t,n),s=bd(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Ns.none())),this}update(e,t,n,...r){this._verifyNotCommitted();const i=_p(e,this._firestore);let s;return s="string"==typeof(t=(0,a.m9)(t))||t instanceof ud?xd(this._dataReader,"WriteBatch.update",i._key,t,n,r):Ad(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(s.toMutation(i._key,Ns.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=_p(e,this._firestore);return this._mutations=this._mutations.concat(new Bs(t._key,Ns.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Nr(xr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function _p(e,t){if((e=(0,a.m9)(e)).firestore!==t)throw new Nr(xr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function wp(e){e=Rh(e,$h);const t=Rh(e.firestore,Qh);return Ch(Jh(t),e._key).then(n=>Dp(t,e,n))}class bp extends gp{constructor(e){super(),this.firestore=e}convertBytes(e){return new hd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $h(this.firestore,null,t)}}function Ip(e){e=Rh(e,$h);const t=Rh(e.firestore,Qh),n=Jh(t),r=new bp(t);return function(e,t){const n=new Or;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){try{const r=await function(e,t){const n=Ar(e);return n.persistence.runTransaction("read document","readonly",e=>n.Qn.An(e,t))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new Nr(xr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=cu(e,`Failed to get document '${t} from cache`);n.reject(r)}}(await _h(e),t,n)),n.promise}(n,e._key).then(n=>new zd(t,r,e._key,n,new Bd(null!==n&&n.hasLocalMutations,!0),e.converter))}function Cp(e){e=Rh(e,$h);const t=Rh(e.firestore,Qh);return Ch(Jh(t),e._key,{source:"server"}).then(n=>Dp(t,e,n))}function Tp(e){e=Rh(e,Vh);const t=Rh(e.firestore,Qh),n=Jh(t),r=new bp(t);return Yd(e._query),Th(n,e._query).then(n=>new Gd(t,r,e,n))}function Ep(e){e=Rh(e,Vh);const t=Rh(e.firestore,Qh),n=Jh(t),r=new bp(t);return function(e,t){const n=new Or;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){try{const r=await Yc(e,t,!0),i=new Su(t,r.Gn),s=i.bo(r.documents),o=i.applyChanges(s,!1);n.resolve(o.snapshot)}catch(e){const r=cu(e,`Failed to execute query '${t} against cache`);n.reject(r)}}(await _h(e),t,n)),n.promise}(n,e._query).then(n=>new Gd(t,r,e,n))}function Sp(e){e=Rh(e,Vh);const t=Rh(e.firestore,Qh),n=Jh(t),r=new bp(t);return Th(n,e._query,{source:"server"}).then(n=>new Gd(t,r,e,n))}function kp(e,t,n){e=Rh(e,$h);const r=Rh(e.firestore,Qh),i=mp(e.converter,t,n);return Rp(r,[bd(wd(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Ns.none())])}function Ap(e,t,n,...r){e=Rh(e,$h);const i=Rh(e.firestore,Qh),s=wd(i);let o;return o="string"==typeof(t=(0,a.m9)(t))||t instanceof ud?xd(s,"updateDoc",e._key,t,n,r):Ad(s,"updateDoc",e._key,t),Rp(i,[o.toMutation(e._key,Ns.exists(!0))])}function xp(e){return Rp(Rh(e.firestore,Qh),[new Bs(e._key,Ns.none())])}function Np(e,t){const n=Rh(e.firestore,Qh),r=Bh(e),i=mp(e.converter,t);return Rp(n,[bd(wd(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Ns.exists(!1))]).then(()=>r)}function Op(e,...t){var n,r,i;e=(0,a.m9)(e);let s={includeMetadataChanges:!1},o=0;"object"!=typeof t[o]||Wh(t[o])||(s=t[o],o++);const c={includeMetadataChanges:s.includeMetadataChanges};if(Wh(t[o])){const e=t[o];t[o]=null===(n=e.next)||void 0===n?void 0:n.bind(e),t[o+1]=null===(r=e.error)||void 0===r?void 0:r.bind(e),t[o+2]=null===(i=e.complete)||void 0===i?void 0:i.bind(e)}let l,u,h;if(e instanceof $h)u=Rh(e.firestore,Qh),h=Ji(e._key.path),l={next:n=>{t[o]&&t[o](Dp(u,e,n))},error:t[o+1],complete:t[o+2]};else{const n=Rh(e,Vh);u=Rh(n.firestore,Qh),h=n._query;const r=new bp(u);l={next:e=>{t[o]&&t[o](new Gd(u,r,n,e))},error:t[o+1],complete:t[o+2]},Yd(e._query)}return function(e,t,n,r){const i=new lh(r),s=new _u(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>fu(await Ih(e),s)),()=>{i.ec(),e.asyncQueue.enqueueAndForget(async()=>gu(await Ih(e),s))}}(Jh(u),h,c,l)}function Pp(e,t){return function(e,t){const n=new lh(t);return e.asyncQueue.enqueueAndForget(async()=>function(e,t){Ar(e).so.add(t),t.next()}(await Ih(e),n)),()=>{n.ec(),e.asyncQueue.enqueueAndForget(async()=>function(e,t){Ar(e).so.delete(t)}(await Ih(e),n))}}(Jh(e=Rh(e,Qh)),Wh(t)?t:{next:t})}function Rp(e,t){return function(e,t){const n=new Or;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=rh(e);try{const e=await function(e,t){const n=Ar(e),r=zr.now(),i=t.reduce((e,t)=>e.add(t.key),co());let s;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>n.Qn.Pn(e,i).next(i=>{s=i;const o=[];for(const e of t){const t=Ls(e,s.get(e.key));null!=t&&o.push(new Vs(e.key,t,Ai(t.value.mapValue),Ns.exists(!0)))}return n.In.addMutationBatch(e,r,o,t)})).then(e=>(e.applyToLocalDocumentSet(s),{batchId:e.batchId,changes:s}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.qo[e.currentUser.toKey()];r||(r=new Qs(jr)),r=r.insert(t,n),e.qo[e.currentUser.toKey()]=r}(r,e.batchId,n),await Hu(r,e.changes),await Yl(r.remoteStore)}catch(e){const t=cu(e,"Failed to persist write");n.reject(t)}}(await bh(e),t,n)),n.promise}(Jh(e),t)}function Dp(e,t,n){const r=n.docs.get(t._key),i=new bp(e);return new zd(e,i,t._key,r,new Bd(n.hasPendingWrites,n.fromCache),t.converter)}class Lp extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=wd(e)}get(e){const t=_p(e,this._firestore),n=new yp(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return Er();const r=e[0];if(r.isFoundDocument())return new Ud(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new Ud(this._firestore,n,t._key,null,t.converter);throw Er()})}set(e,t,n){const r=_p(e,this._firestore),i=mp(r.converter,t,n),s=bd(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n,...r){const i=_p(e,this._firestore);let s;return s="string"==typeof(t=(0,a.m9)(t))||t instanceof ud?xd(this._dataReader,"Transaction.update",i._key,t,n,r):Ad(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,s),this}delete(e){const t=_p(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=_p(e,this._firestore),n=new bp(this._firestore);return super.get(e).then(e=>new zd(this._firestore,n,t._key,e._document,new Bd(!1,!1),t.converter))}}function Mp(e,t){return function(e,t){const n=new Or;return e.asyncQueue.enqueueAndForget(async()=>{const r=await function(e){return yh(e).then(e=>e.datastore)}(e);new dh(e.asyncQueue,r,t,n).run()}),n.promise}(Jh(e=Rh(e,Qh)),n=>t(new Lp(e,n)))}function Fp(){return new Id("deleteField")}function $p(){return new Td("serverTimestamp")}function Vp(...e){return new Ed("arrayUnion",e)}function Up(...e){return new Sd("arrayRemove",e)}function jp(e){return new kd("increment",e)}!function(e,t=!0){!function(e){yr=e}(i.SDK_VERSION),(0,i._registerComponent)(new s.wA("firestore",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=new Qh(r,new Lr(e.getProvider("auth-internal")));return n=Object.assign({useFetchStreams:t},n),i._setSettings(n),i},"PUBLIC")),(0,i.registerVersion)(gr,"3.3.1",e),(0,i.registerVersion)(gr,"3.3.1","esm2017")}()},4560:(e,t,n)=>{"use strict";n.d(t,{in:()=>i,Yd:()=>l,Ub:()=>u,Am:()=>h});const r=[];var i=(()=>(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={})),i))();const s={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},o=i.INFO,a={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},c=(e,t,...n)=>{if(t<e.logLevel)return;const r=(new Date).toISOString(),i=a[t];if(!i)throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`);console[i](`[${r}]  ${e.name}:`,...n)};class l{constructor(e){this.name=e,this._logLevel=o,this._logHandler=c,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel="string"==typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...e),this._logHandler(this,i.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...e),this._logHandler(this,i.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,i.INFO,...e),this._logHandler(this,i.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,i.WARN,...e),this._logHandler(this,i.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,i.ERROR,...e),this._logHandler(this,i.ERROR,...e)}}function u(e){r.forEach(t=>{t.setLogLevel(e)})}function h(e,t){for(const n of r){let r=null;t&&t.level&&(r=s[t.level]),n.userLogHandler=null===e?null:(t,n,...s)=>{const o=s.map(e=>{if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}}).filter(e=>e).join(" ");n>=(null!=r?r:t.logLevel)&&e({level:i[n].toLowerCase(),message:o,args:s,type:t.name})}}}},9870:(e,t,n)=>{"use strict";n.d(t,{BH:()=>d,LL:()=>x,ZR:()=>A,gQ:()=>H,zI:()=>k,hu:()=>r,g5:()=>i,US:()=>o,tV:()=>l,h$:()=>a,$s:()=>te,r3:()=>M,Sg:()=>p,ne:()=>G,p$:()=>u,vZ:()=>U,ZB:()=>h,gK:()=>Q,pd:()=>z,m9:()=>ne,z$:()=>f,GJ:()=>L,jU:()=>y,ru:()=>v,d:()=>w,xb:()=>$,w1:()=>b,hl:()=>E,uI:()=>g,UG:()=>m,Yr:()=>C,b$:()=>_,G6:()=>T,Mn:()=>I,w9:()=>D,cI:()=>O,UI:()=>V,xO:()=>q,zd:()=>B,DV:()=>F,ug:()=>ee,dS:()=>Z,Pz:()=>P,Dv:()=>Y,Wj:()=>X,lb:()=>J,eu:()=>S});const r=function(e,t){if(!e)throw i(t)},i=function(e){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+e)},s=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296==(64512&i)&&r+1<e.length&&56320==(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,o=s?e[i+1]:0,a=i+2<e.length,c=a?e[i+2]:0;let l=(15&o)<<2|c>>6,u=63&c;a||(u=64,s||(l=64)),r.push(n[t>>2],n[(3&t)<<4|o>>4],n[l],n[u])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(s(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&o)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],s=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const a=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==s||null==o||null==a)throw Error();r.push(t<<2|s>>4),64!==o&&(r.push(s<<4&240|o>>2),64!==a&&r.push(o<<6&192|a))}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},a=function(e){const t=s(e);return o.encodeByteArray(t,!0)},c=function(e){return a(e).replace(/\./g,"")},l=function(e){try{return o.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function u(e){return h(void 0,e)}function h(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(const n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=h(e[n],t[n]));return e}class d{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"==typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function p(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[c(JSON.stringify({alg:"none",type:"JWT"})),c(JSON.stringify(s)),""].join(".")}function f(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function g(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(f())}function m(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(e){return!1}}function y(){return"object"==typeof self&&self.self===self}function v(){const e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof e&&void 0!==e.id}function _(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function w(){return f().indexOf("Electron/")>=0}function b(){const e=f();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function I(){return f().indexOf("MSAppHost/")>=0}function C(){return!1}function T(){return!m()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function E(){return"object"==typeof indexedDB}function S(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}function k(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class A extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,A.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,x.prototype.create)}}class x{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e,...t){const n=t[0]||{},r=`${this.service}/${e}`,i=this.errors[e],s=i?function(e,t){return e.replace(N,(e,n)=>{const r=t[n];return null!=r?String(r):`<${n}?>`})}(i,n):"Error";return new A(r,`${this.serviceName}: ${s} (${r}).`,n)}}const N=/\{\$([^}]+)}/g;function O(e){return JSON.parse(e)}function P(e){return JSON.stringify(e)}const R=function(e){let t={},n={},r={},i="";try{const s=e.split(".");t=O(l(s[0])||""),n=O(l(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch(s){}return{header:t,claims:n,data:r,signature:i}},D=function(e){const t=R(e).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")},L=function(e){const t=R(e).claims;return"object"==typeof t&&!0===t.admin};function M(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function F(e,t){return Object.prototype.hasOwnProperty.call(e,t)?e[t]:void 0}function $(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function V(e,t,n){const r={};for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(r[i]=t.call(n,e[i],i,e));return r}function U(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(j(n)&&j(s)){if(!U(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function j(e){return null!==e&&"object"==typeof e}function q(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function B(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function z(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class H{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,t){t||(t=0);const n=this.W_;if("string"==typeof e)for(let u=0;u<16;u++)n[u]=e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|e.charCodeAt(t+3),t+=4;else for(let u=0;u<16;u++)n[u]=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3],t+=4;for(let u=16;u<80;u++){const e=n[u-3]^n[u-8]^n[u-14]^n[u-16];n[u]=4294967295&(e<<1|e>>>31)}let r,i,s=this.chain_[0],o=this.chain_[1],a=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(let u=0;u<80;u++){u<40?u<20?(r=c^o&(a^c),i=1518500249):(r=o^a^c,i=1859775393):u<60?(r=o&a|c&(o|a),i=2400959708):(r=o^a^c,i=3395469782);const e=(s<<5|s>>>27)+r+l+i+n[u]&4294967295;l=c,c=a,a=4294967295&(o<<30|o>>>2),o=s,s=e}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+o&4294967295,this.chain_[2]=this.chain_[2]+a&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295}update(e,t){if(null==e)return;void 0===t&&(t=e.length);const n=t-this.blockSize;let r=0;const i=this.buf_;let s=this.inbuf_;for(;r<t;){if(0===s)for(;r<=n;)this.compress_(e,r),r+=this.blockSize;if("string"==typeof e){for(;r<t;)if(i[s]=e.charCodeAt(r),++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}else for(;r<t;)if(i[s]=e[r],++s,++r,s===this.blockSize){this.compress_(i),s=0;break}}this.inbuf_=s,this.total_+=t}digest(){const e=[];let t=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let r=this.blockSize-1;r>=56;r--)this.buf_[r]=255&t,t/=256;this.compress_(this.buf_);let n=0;for(let r=0;r<5;r++)for(let t=24;t>=0;t-=8)e[n]=this.chain_[r]>>t&255,++n;return e}}function G(e,t){const n=new W(e,t);return n.subscribe.bind(n)}class W{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!=typeof e||null===e)return!1;for(const n of["next","error","complete"])if(n in e&&"function"==typeof e[n])return!0;return!1}(e)?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=K),void 0===r.error&&(r.error=K),void 0===r.complete&&(r.complete=K);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!=typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function K(){}const Y=function(e,t,n,r){let i;if(r<t?i="at least "+t:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(e+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function Q(e,t){return`${e} failed: ${t} argument `}function X(e,t,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(Q(e,t)+"must be a valid function.")}function J(e,t,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(Q(e,t)+"must be a valid context object.")}const Z=function(e){const t=[];let n=0;for(let i=0;i<e.length;i++){let s=e.charCodeAt(i);if(s>=55296&&s<=56319){const t=s-55296;i++,r(i<e.length,"Surrogate pair missing trail surrogate."),s=65536+(t<<10)+(e.charCodeAt(i)-56320)}s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):s<65536?(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},ee=function(e){let t=0;for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);r<128?t++:r<2048?t+=2:r>=55296&&r<=56319?(t+=4,n++):t+=3}return t};function te(e,t=1e3,n=2){const r=t*Math.pow(n,e),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function ne(e){return e&&e._delegate?e._delegate:e}},8620:(e,t,n)=>{"use strict";function r(e,t,n,r){var i,s=arguments.length,o=s<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(o=(s<3?i(o):s>3?i(t,n,o):i(t,n))||o);return s>3&&o&&Object.defineProperty(t,n,o),o}function i(e,t){return function(n,r){t(n,r,e)}}function s(e,t,n,r){return new(n||(n=Promise))(function(i,s){function o(e){try{c(r.next(e))}catch(t){s(t)}}function a(e){try{c(r.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((r=r.apply(e,t||[])).next())})}n.d(t,{Br:()=>et,dr:()=>ee,BJ:()=>te,oU:()=>ne,cs:()=>Qe,YG:()=>re,Sm:()=>ie,PM:()=>se,FN:()=>oe,Zi:()=>ae,gZ:()=>ce,wI:()=>le,W2:()=>ue,IJ:()=>he,W4:()=>de,zq:()=>pe,fr:()=>fe,jY:()=>ge,Gu:()=>me,gu:()=>ye,pK:()=>ve,Ie:()=>_e,Q$:()=>we,q_:()=>be,z0:()=>Ie,fG:()=>Ce,jP:()=>Ke,Nd:()=>Te,g2:()=>Ee,wd:()=>Se,sr:()=>ke,Pc:()=>ft,r4:()=>ht,HT:()=>tt,YI:()=>Xe,j9:()=>q,yF:()=>ot});var o=n(2741),a=n(4988),c=n(6274),l=n(1626),u=n(6760),h=(n(7438),n(765),n(6943)),d=n(4366),p=n(4973),f=n(5392),g=n(5614),m=n(7501),y=n(1092),v=(n(5901),n(5133)),_=n(6006),w=n(4958),b=n(9923),I=n(3305),C=n(2812),T=n(7689);const E=p.i,S=["*"],k=e=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(e):"function"==typeof requestAnimationFrame?requestAnimationFrame(e):setTimeout(e);let A=(()=>{class e{constructor(e,t){this.injector=e,this.el=t,this.onChange=()=>{},this.onTouched=()=>{}}writeValue(e){this.el.nativeElement.value=this.lastValue=null==e?"":e,x(this.el)}handleChangeEvent(e,t){e===this.el.nativeElement&&(t!==this.lastValue&&(this.lastValue=t,this.onChange(t)),x(this.el))}_handleBlurEvent(e){e===this.el.nativeElement&&(this.onTouched(),x(this.el))}registerOnChange(e){this.onChange=e}registerOnTouched(e){this.onTouched=e}setDisabledState(e){this.el.nativeElement.disabled=e}ngOnDestroy(){this.statusChanges&&this.statusChanges.unsubscribe()}ngAfterViewInit(){let e;try{e=this.injector.get(a.a5)}catch(n){}if(!e)return;e.statusChanges&&(this.statusChanges=e.statusChanges.subscribe(()=>x(this.el)));const t=e.control;t&&["markAsTouched","markAllAsTouched","markAsUntouched","markAsDirty","markAsPristine"].forEach(e=>{if(t[e]){const n=t[e].bind(t);t[e]=(...e)=>{n(...e),x(this.el)}}})}}return e.\u0275fac=function(e){o.$Z()},e.\u0275dir=o.lG2({type:e,hostBindings:function(e,t){1&e&&o.NdJ("ionBlur",function(e){return t._handleBlurEvent(e.target)})}}),r([(0,o.L6J)("ionBlur",["$event.target"])],e.prototype,"_handleBlurEvent",null),e})();const x=e=>{k(()=>{const t=e.nativeElement,n=N(t);O(t,n);const r=t.closest("ion-item");r&&O(r,n)})},N=e=>{const t=e.classList,n=[];for(let r=0;r<t.length;r++){const e=t.item(r);null!==e&&P(e,"ng-")&&n.push(`ion-${e.substr(3)}`)}return n},O=(e,t)=>{const n=e.classList;["ion-valid","ion-invalid","ion-touched","ion-untouched","ion-dirty","ion-pristine"].forEach(e=>n.remove(e)),t.forEach(e=>n.add(e))},P=(e,t)=>e.substr(0,t.length)===t;var R;let D=R=class extends A{constructor(e,t){super(e,t)}writeValue(e){this.el.nativeElement.checked=this.lastValue=null!=e&&e,x(this.el)}_handleIonChange(e){this.handleChangeEvent(e,e.checked)}};var L;D.\u0275fac=function(e){return new(e||D)(o.Y36(o.zs3),o.Y36(o.SBq))},D.\u0275dir=o.lG2({type:D,selectors:[["ion-checkbox"],["ion-toggle"]],hostBindings:function(e,t){1&e&&o.NdJ("ionChange",function(e){return t._handleIonChange(e.target)})},features:[o._Bn([{provide:a.JU,useExisting:R,multi:!0}]),o.qOj]}),D.ctorParameters=()=>[{type:o.zs3},{type:o.SBq}],r([(0,o.L6J)("ionChange",["$event.target"])],D.prototype,"_handleIonChange",null);let M=L=class extends A{constructor(e,t){super(e,t)}_handleIonChange(e){this.handleChangeEvent(e,e.value)}registerOnChange(e){super.registerOnChange(t=>{e(""===t?null:parseFloat(t))})}};var F;M.\u0275fac=function(e){return new(e||M)(o.Y36(o.zs3),o.Y36(o.SBq))},M.\u0275dir=o.lG2({type:M,selectors:[["ion-input","type","number"]],hostBindings:function(e,t){1&e&&o.NdJ("ionChange",function(e){return t._handleIonChange(e.target)})},features:[o._Bn([{provide:a.JU,useExisting:L,multi:!0}]),o.qOj]}),M.ctorParameters=()=>[{type:o.zs3},{type:o.SBq}],r([(0,o.L6J)("ionChange",["$event.target"])],M.prototype,"_handleIonChange",null);let $=F=class extends A{constructor(e,t){super(e,t)}_handleIonSelect(e){this.handleChangeEvent(e,e.checked)}};var V;$.\u0275fac=function(e){return new(e||$)(o.Y36(o.zs3),o.Y36(o.SBq))},$.\u0275dir=o.lG2({type:$,selectors:[["ion-radio"]],hostBindings:function(e,t){1&e&&o.NdJ("ionSelect",function(e){return t._handleIonSelect(e.target)})},features:[o._Bn([{provide:a.JU,useExisting:F,multi:!0}]),o.qOj]}),$.ctorParameters=()=>[{type:o.zs3},{type:o.SBq}],r([(0,o.L6J)("ionSelect",["$event.target"])],$.prototype,"_handleIonSelect",null);let U=V=class extends A{constructor(e,t){super(e,t)}_handleChangeEvent(e){this.handleChangeEvent(e,e.value)}};var j;U.\u0275fac=function(e){return new(e||U)(o.Y36(o.zs3),o.Y36(o.SBq))},U.\u0275dir=o.lG2({type:U,selectors:[["ion-range"],["ion-select"],["ion-radio-group"],["ion-segment"],["ion-datetime"]],hostBindings:function(e,t){1&e&&o.NdJ("ionChange",function(e){return t._handleChangeEvent(e.target)})},features:[o._Bn([{provide:a.JU,useExisting:V,multi:!0}]),o.qOj]}),U.ctorParameters=()=>[{type:o.zs3},{type:o.SBq}],r([(0,o.L6J)("ionChange",["$event.target"])],U.prototype,"_handleChangeEvent",null);let q=j=class extends A{constructor(e,t){super(e,t)}_handleInputEvent(e){this.handleChangeEvent(e,e.value)}};q.\u0275fac=function(e){return new(e||q)(o.Y36(o.zs3),o.Y36(o.SBq))},q.\u0275dir=o.lG2({type:q,selectors:[["ion-input",3,"type","number"],["ion-textarea"],["ion-searchbar"]],hostBindings:function(e,t){1&e&&o.NdJ("ionChange",function(e){return t._handleInputEvent(e.target)})},features:[o._Bn([{provide:a.JU,useExisting:j,multi:!0}]),o.qOj]}),q.ctorParameters=()=>[{type:o.zs3},{type:o.SBq}],r([(0,o.L6J)("ionChange",["$event.target"])],q.prototype,"_handleInputEvent",null);let B=class{constructor(e,t){this.doc=e,this.backButton=new _.xQ,this.keyboardDidShow=new _.xQ,this.keyboardDidHide=new _.xQ,this.pause=new _.xQ,this.resume=new _.xQ,this.resize=new _.xQ,t.run(()=>{let n;this.win=e.defaultView,this.backButton.subscribeWithPriority=function(e,n){return this.subscribe(r=>r.register(e,e=>t.run(()=>n(e))))},H(this.pause,e,"pause"),H(this.resume,e,"resume"),H(this.backButton,e,"ionBackButton"),H(this.resize,this.win,"resize"),H(this.keyboardDidShow,this.win,"ionKeyboardDidShow"),H(this.keyboardDidHide,this.win,"ionKeyboardDidHide"),this._readyPromise=new Promise(e=>{n=e}),this.win&&this.win.cordova?e.addEventListener("deviceready",()=>{n("cordova")},{once:!0}):n("dom")})}is(e){return(0,p.a)(this.win,e)}platforms(){return(0,p.g)(this.win)}ready(){return this._readyPromise}get isRTL(){return"rtl"===this.doc.dir}getQueryParam(e){return z(this.win.location.href,e)}isLandscape(){return!this.isPortrait()}isPortrait(){return this.win.matchMedia&&this.win.matchMedia("(orientation: portrait)").matches}testUserAgent(e){const t=this.win.navigator;return!!(t&&t.userAgent&&t.userAgent.indexOf(e)>=0)}url(){return this.win.location.href}width(){return this.win.innerWidth}height(){return this.win.innerHeight}};B.\u0275fac=function(e){return new(e||B)(o.LFG(c.K0),o.LFG(o.R0b))},B.\u0275prov=o.Yz7({token:B,factory:function(e){return B.\u0275fac(e)},providedIn:"root"}),B.ngInjectableDef=(0,o.Yz7)({factory:function(){return new B((0,o.LFG)(c.K0),(0,o.LFG)(o.R0b))},token:B,providedIn:"root"}),B=r([i(0,(0,o.tBr)(c.K0))],B);const z=(e,t)=>{t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");const n=new RegExp("[\\?&]"+t+"=([^&#]*)").exec(e);return n?decodeURIComponent(n[1].replace(/\+/g," ")):null},H=(e,t,n)=>{t&&t.addEventListener(n,t=>{e.next(null!=t?t.detail:void 0)})};let G=class{constructor(e,t,n,r){this.location=t,this.serializer=n,this.router=r,this.direction=K,this.animated=Y,this.guessDirection="forward",this.lastNavId=-1,r&&r.events.subscribe(e=>{if(e instanceof l.OD){const t=e.restoredState?e.restoredState.navigationId:e.id;this.guessDirection=t<this.lastNavId?"back":"forward",this.guessAnimation=e.restoredState?void 0:this.guessDirection,this.lastNavId="forward"===this.guessDirection?e.id:t}}),e.backButton.subscribeWithPriority(0,e=>{this.pop(),e()})}navigateForward(e,t={}){return this.setDirection("forward",t.animated,t.animationDirection,t.animation),this.navigate(e,t)}navigateBack(e,t={}){return this.setDirection("back",t.animated,t.animationDirection,t.animation),this.navigate(e,t)}navigateRoot(e,t={}){return this.setDirection("root",t.animated,t.animationDirection,t.animation),this.navigate(e,t)}back(e={animated:!0,animationDirection:"back"}){return this.setDirection("back",e.animated,e.animationDirection,e.animation),this.location.back()}pop(){return s(this,void 0,void 0,function*(){let e=this.topOutlet;for(;e&&!(yield e.pop());)e=e.parentOutlet})}setDirection(e,t,n,r){this.direction=e,this.animated=W(e,t,n),this.animationBuilder=r}setTopOutlet(e){this.topOutlet=e}consumeTransition(){let e,t="root";const n=this.animationBuilder;return"auto"===this.direction?(t=this.guessDirection,e=this.guessAnimation):(e=this.animated,t=this.direction),this.direction=K,this.animated=Y,this.animationBuilder=void 0,{direction:t,animation:e,animationBuilder:n}}navigate(e,t){if(Array.isArray(e))return this.router.navigate(e,t);{const n=this.serializer.parse(e.toString());return void 0!==t.queryParams&&(n.queryParams=Object.assign({},t.queryParams)),void 0!==t.fragment&&(n.fragment=t.fragment),this.router.navigateByUrl(n,t)}}};G.\u0275fac=function(e){return new(e||G)(o.LFG(B),o.LFG(c.Ye),o.LFG(l.Hx),o.LFG(l.F0,8))},G.\u0275prov=o.Yz7({token:G,factory:function(e){return G.\u0275fac(e)},providedIn:"root"}),G.ngInjectableDef=(0,o.Yz7)({factory:function(){return new G((0,o.LFG)(B),(0,o.LFG)(c.Ye),(0,o.LFG)(l.Hx),(0,o.LFG)(l.F0,8))},token:G,providedIn:"root"}),G=r([i(3,(0,o.FiY)())],G);const W=(e,t,n)=>{if(!1!==t)return void 0!==n?n:"forward"===e||"back"===e?e:"root"===e&&!0===t?"forward":void 0},K="auto",Y=void 0,Q=(e,t)=>{const n=e.prototype;t.forEach(e=>{Object.defineProperty(n,e,{get(){return this.el[e]},set(t){this.z.runOutsideAngular(()=>this.el[e]=t)}})})},X=(e,t)=>{const n=e.prototype;t.forEach(e=>{n[e]=function(){const t=arguments;return this.z.runOutsideAngular(()=>this.el[e].apply(this.el,t))}})},J=(e,t,n)=>{n.forEach(n=>e[n]=(0,w.R)(t,n))};function Z(e){return function(t){return e.inputs&&Q(t,e.inputs),e.methods&&X(t,e.methods),t}}let ee=(()=>{let e=class{constructor(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}};return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO),o.Y36(o.SBq),o.Y36(o.R0b))},e.\u0275cmp=o.Xpm({type:e,selectors:[["ion-app"]],ngContentSelectors:S,decls:1,vars:0,template:function(e,t){1&e&&(o.F$t(),o.Hsn(0))},encapsulation:2,changeDetection:0}),e})(),te=(()=>{let e=class{constructor(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}};return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO),o.Y36(o.SBq),o.Y36(o.R0b))},e.\u0275cmp=o.Xpm({type:e,selectors:[["ion-avatar"]],ngContentSelectors:S,decls:1,vars:0,template:function(e,t){1&e&&(o.F$t(),o.Hsn(0))},encapsulation:2,changeDetection:0}),e})(),ne=(()=>{let e=class{constructor(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}};return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO),o.Y36(o.SBq),o.Y36(o.R0b))},e.\u0275cmp=o.Xpm({type:e,selectors:[["ion-back-button"]],inputs:{color:"color",defaultHref:"defaultHref",disabled:"disabled",icon:"icon",mode:"mode",routerAnimation:"routerAnimation",text:"text",type:"type"},ngContentSelectors:S,decls:1,vars:0,template:function(e,t){1&e&&(o.F$t(),o.Hsn(0))},encapsulation:2,changeDetection:0}),e=r([Z({inputs:["color","defaultHref","disabled","icon","mode","routerAnimation","text","type"]})],e),e})(),re=(()=>{let e=class{constructor(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement,J(this,this.el,["ionFocus","ionBlur"])}};return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO),o.Y36(o.SBq),o.Y36(o.R0b))},e.\u0275cmp=o.Xpm({type:e,selectors:[["ion-button"]],inputs:{buttonType:"buttonType",color:"color",disabled:"disabled",download:"download",expand:"expand",fill:"fill",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",shape:"shape",size:"size",strong:"strong",target:"target",type:"type"},ngContentSelectors:S,decls:1,vars:0,template:function(e,t){1&e&&(o.F$t(),o.Hsn(0))},encapsulation:2,changeDetection:0}),e=r([Z({inputs:["buttonType","color","disabled","download","expand","fill","href","mode","rel","routerAnimation","routerDirection","shape","size","strong","target","type"]})],e),e})(),ie=(()=>{let e=class{constructor(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}};return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO),o.Y36(o.SBq),o.Y36(o.R0b))},e.\u0275cmp=o.Xpm({type:e,selectors:[["ion-buttons"]],inputs:{collapse:"collapse"},ngContentSelectors:S,decls:1,vars:0,template:function(e,t){1&e&&(o.F$t(),o.Hsn(0))},encapsulation:2,changeDetection:0}),e=r([Z({inputs:["collapse"]})],e),e})(),se=(()=>{let e=class{constructor(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}};return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO),o.Y36(o.SBq),o.Y36(o.R0b))},e.\u0275cmp=o.Xpm({type:e,selectors:[["ion-card"]],inputs:{button:"button",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},ngContentSelectors:S,decls:1,vars:0,template:function(e,t){1&e&&(o.F$t(),o.Hsn(0))},encapsulation:2,changeDetection:0}),e=r([Z({inputs:["button","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","target","type"]})],e),e})(),oe=(()=>{let e=class{constructor(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}};return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO),o.Y36(o.SBq),o.Y36(o.R0b))},e.\u0275cmp=o.Xpm({type:e,selectors:[["ion-card-content"]],inputs:{mode:"mode"},ngContentSelectors:S,decls:1,vars:0,template:function(e,t){1&e&&(o.F$t(),o.Hsn(0))},encapsulation:2,changeDetection:0}),e=r([Z({inputs:["mode"]})],e),e})(),ae=(()=>{let e=class{constructor(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}};return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO),o.Y36(o.SBq),o.Y36(o.R0b))},e.\u0275cmp=o.Xpm({type:e,selectors:[["ion-card-header"]],inputs:{color:"color",mode:"mode",translucent:"translucent"},ngContentSelectors:S,decls:1,vars:0,template:function(e,t){1&e&&(o.F$t(),o.Hsn(0))},encapsulation:2,changeDetection:0}),e=r([Z({inputs:["color","mode","translucent"]})],e),e})(),ce=(()=>{let e=class{constructor(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}};return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO),o.Y36(o.SBq),o.Y36(o.R0b))},e.\u0275cmp=o.Xpm({type:e,selectors:[["ion-card-title"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:S,decls:1,vars:0,template:function(e,t){1&e&&(o.F$t(),o.Hsn(0))},encapsulation:2,changeDetection:0}),e=r([Z({inputs:["color","mode"]})],e),e})(),le=(()=>{let e=class{constructor(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}};return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO),o.Y36(o.SBq),o.Y36(o.R0b))},e.\u0275cmp=o.Xpm({type:e,selectors:[["ion-col"]],inputs:{offset:"offset",offsetLg:"offsetLg",offsetMd:"offsetMd",offsetSm:"offsetSm",offsetXl:"offsetXl",offsetXs:"offsetXs",pull:"pull",pullLg:"pullLg",pullMd:"pullMd",pullSm:"pullSm",pullXl:"pullXl",pullXs:"pullXs",push:"push",pushLg:"pushLg",pushMd:"pushMd",pushSm:"pushSm",pushXl:"pushXl",pushXs:"pushXs",size:"size",sizeLg:"sizeLg",sizeMd:"sizeMd",sizeSm:"sizeSm",sizeXl:"sizeXl",sizeXs:"sizeXs"},ngContentSelectors:S,decls:1,vars:0,template:function(e,t){1&e&&(o.F$t(),o.Hsn(0))},encapsulation:2,changeDetection:0}),e=r([Z({inputs:["offset","offsetLg","offsetMd","offsetSm","offsetXl","offsetXs","pull","pullLg","pullMd","pullSm","pullXl","pullXs","push","pushLg","pushMd","pushSm","pushXl","pushXs","size","sizeLg","sizeMd","sizeSm","sizeXl","sizeXs"]})],e),e})(),ue=(()=>{let e=class{constructor(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement,J(this,this.el,["ionScrollStart","ionScroll","ionScrollEnd"])}};return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO),o.Y36(o.SBq),o.Y36(o.R0b))},e.\u0275cmp=o.Xpm({type:e,selectors:[["ion-content"]],inputs:{color:"color",forceOverscroll:"forceOverscroll",fullscreen:"fullscreen",scrollEvents:"scrollEvents",scrollX:"scrollX",scrollY:"scrollY"},ngContentSelectors:S,decls:1,vars:0,template:function(e,t){1&e&&(o.F$t(),o.Hsn(0))},encapsulation:2,changeDetection:0}),e=r([Z({inputs:["color","forceOverscroll","fullscreen","scrollEvents","scrollX","scrollY"],methods:["getScrollElement","scrollToTop","scrollToBottom","scrollByPoint","scrollToPoint"]})],e),e})(),he=(()=>{let e=class{constructor(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}};return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO),o.Y36(o.SBq),o.Y36(o.R0b))},e.\u0275cmp=o.Xpm({type:e,selectors:[["ion-fab"]],inputs:{activated:"activated",edge:"edge",horizontal:"horizontal",vertical:"vertical"},ngContentSelectors:S,decls:1,vars:0,template:function(e,t){1&e&&(o.F$t(),o.Hsn(0))},encapsulation:2,changeDetection:0}),e=r([Z({inputs:["activated","edge","horizontal","vertical"],methods:["close"]})],e),e})(),de=(()=>{let e=class{constructor(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement,J(this,this.el,["ionFocus","ionBlur"])}};return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO),o.Y36(o.SBq),o.Y36(o.R0b))},e.\u0275cmp=o.Xpm({type:e,selectors:[["ion-fab-button"]],inputs:{activated:"activated",closeIcon:"closeIcon",color:"color",disabled:"disabled",download:"download",href:"href",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",show:"show",size:"size",target:"target",translucent:"translucent",type:"type"},ngContentSelectors:S,decls:1,vars:0,template:function(e,t){1&e&&(o.F$t(),o.Hsn(0))},encapsulation:2,changeDetection:0}),e=r([Z({inputs:["activated","closeIcon","color","disabled","download","href","mode","rel","routerAnimation","routerDirection","show","size","target","translucent","type"]})],e),e})(),pe=(()=>{let e=class{constructor(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}};return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO),o.Y36(o.SBq),o.Y36(o.R0b))},e.\u0275cmp=o.Xpm({type:e,selectors:[["ion-fab-list"]],inputs:{activated:"activated",side:"side"},ngContentSelectors:S,decls:1,vars:0,template:function(e,t){1&e&&(o.F$t(),o.Hsn(0))},encapsulation:2,changeDetection:0}),e=r([Z({inputs:["activated","side"]})],e),e})(),fe=(()=>{let e=class{constructor(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}};return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO),o.Y36(o.SBq),o.Y36(o.R0b))},e.\u0275cmp=o.Xpm({type:e,selectors:[["ion-footer"]],inputs:{mode:"mode",translucent:"translucent"},ngContentSelectors:S,decls:1,vars:0,template:function(e,t){1&e&&(o.F$t(),o.Hsn(0))},encapsulation:2,changeDetection:0}),e=r([Z({inputs:["mode","translucent"]})],e),e})(),ge=(()=>{let e=class{constructor(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}};return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO),o.Y36(o.SBq),o.Y36(o.R0b))},e.\u0275cmp=o.Xpm({type:e,selectors:[["ion-grid"]],inputs:{fixed:"fixed"},ngContentSelectors:S,decls:1,vars:0,template:function(e,t){1&e&&(o.F$t(),o.Hsn(0))},encapsulation:2,changeDetection:0}),e=r([Z({inputs:["fixed"]})],e),e})(),me=(()=>{let e=class{constructor(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}};return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO),o.Y36(o.SBq),o.Y36(o.R0b))},e.\u0275cmp=o.Xpm({type:e,selectors:[["ion-header"]],inputs:{collapse:"collapse",mode:"mode",translucent:"translucent"},ngContentSelectors:S,decls:1,vars:0,template:function(e,t){1&e&&(o.F$t(),o.Hsn(0))},encapsulation:2,changeDetection:0}),e=r([Z({inputs:["collapse","mode","translucent"]})],e),e})(),ye=(()=>{let e=class{constructor(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}};return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO),o.Y36(o.SBq),o.Y36(o.R0b))},e.\u0275cmp=o.Xpm({type:e,selectors:[["ion-icon"]],inputs:{ariaHidden:"ariaHidden",ariaLabel:"ariaLabel",color:"color",flipRtl:"flipRtl",icon:"icon",ios:"ios",lazy:"lazy",md:"md",mode:"mode",name:"name",sanitize:"sanitize",size:"size",src:"src"},ngContentSelectors:S,decls:1,vars:0,template:function(e,t){1&e&&(o.F$t(),o.Hsn(0))},encapsulation:2,changeDetection:0}),e=r([Z({inputs:["ariaHidden","ariaLabel","color","flipRtl","icon","ios","lazy","md","mode","name","sanitize","size","src"]})],e),e})(),ve=(()=>{let e=class{constructor(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement,J(this,this.el,["ionInput","ionChange","ionBlur","ionFocus"])}};return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO),o.Y36(o.SBq),o.Y36(o.R0b))},e.\u0275cmp=o.Xpm({type:e,selectors:[["ion-input"]],inputs:{accept:"accept",autocapitalize:"autocapitalize",autocomplete:"autocomplete",autocorrect:"autocorrect",autofocus:"autofocus",clearInput:"clearInput",clearOnEdit:"clearOnEdit",color:"color",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",max:"max",maxlength:"maxlength",min:"min",minlength:"minlength",mode:"mode",multiple:"multiple",name:"name",pattern:"pattern",placeholder:"placeholder",readonly:"readonly",required:"required",size:"size",spellcheck:"spellcheck",step:"step",type:"type",value:"value"},ngContentSelectors:S,decls:1,vars:0,template:function(e,t){1&e&&(o.F$t(),o.Hsn(0))},encapsulation:2,changeDetection:0}),e=r([Z({inputs:["accept","autocapitalize","autocomplete","autocorrect","autofocus","clearInput","clearOnEdit","color","debounce","disabled","enterkeyhint","inputmode","max","maxlength","min","minlength","mode","multiple","name","pattern","placeholder","readonly","required","size","spellcheck","step","type","value"],methods:["setFocus","getInputElement"]})],e),e})(),_e=(()=>{let e=class{constructor(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}};return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO),o.Y36(o.SBq),o.Y36(o.R0b))},e.\u0275cmp=o.Xpm({type:e,selectors:[["ion-item"]],inputs:{button:"button",color:"color",detail:"detail",detailIcon:"detailIcon",disabled:"disabled",download:"download",href:"href",lines:"lines",mode:"mode",rel:"rel",routerAnimation:"routerAnimation",routerDirection:"routerDirection",target:"target",type:"type"},ngContentSelectors:S,decls:1,vars:0,template:function(e,t){1&e&&(o.F$t(),o.Hsn(0))},encapsulation:2,changeDetection:0}),e=r([Z({inputs:["button","color","detail","detailIcon","disabled","download","href","lines","mode","rel","routerAnimation","routerDirection","target","type"]})],e),e})(),we=(()=>{let e=class{constructor(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}};return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO),o.Y36(o.SBq),o.Y36(o.R0b))},e.\u0275cmp=o.Xpm({type:e,selectors:[["ion-label"]],inputs:{color:"color",mode:"mode",position:"position"},ngContentSelectors:S,decls:1,vars:0,template:function(e,t){1&e&&(o.F$t(),o.Hsn(0))},encapsulation:2,changeDetection:0}),e=r([Z({inputs:["color","mode","position"]})],e),e})(),be=(()=>{let e=class{constructor(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}};return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO),o.Y36(o.SBq),o.Y36(o.R0b))},e.\u0275cmp=o.Xpm({type:e,selectors:[["ion-list"]],inputs:{inset:"inset",lines:"lines",mode:"mode"},ngContentSelectors:S,decls:1,vars:0,template:function(e,t){1&e&&(o.F$t(),o.Hsn(0))},encapsulation:2,changeDetection:0}),e=r([Z({inputs:["inset","lines","mode"],methods:["closeSlidingItems"]})],e),e})(),Ie=(()=>{let e=class{constructor(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement,J(this,this.el,["ionWillOpen","ionWillClose","ionDidOpen","ionDidClose"])}};return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO),o.Y36(o.SBq),o.Y36(o.R0b))},e.\u0275cmp=o.Xpm({type:e,selectors:[["ion-menu"]],inputs:{contentId:"contentId",disabled:"disabled",maxEdgeStart:"maxEdgeStart",menuId:"menuId",side:"side",swipeGesture:"swipeGesture",type:"type"},ngContentSelectors:S,decls:1,vars:0,template:function(e,t){1&e&&(o.F$t(),o.Hsn(0))},encapsulation:2,changeDetection:0}),e=r([Z({inputs:["contentId","disabled","maxEdgeStart","menuId","side","swipeGesture","type"],methods:["isOpen","isActive","open","close","toggle","setOpen"]})],e),e})(),Ce=(()=>{let e=class{constructor(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}};return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO),o.Y36(o.SBq),o.Y36(o.R0b))},e.\u0275cmp=o.Xpm({type:e,selectors:[["ion-menu-button"]],inputs:{autoHide:"autoHide",color:"color",disabled:"disabled",menu:"menu",mode:"mode",type:"type"},ngContentSelectors:S,decls:1,vars:0,template:function(e,t){1&e&&(o.F$t(),o.Hsn(0))},encapsulation:2,changeDetection:0}),e=r([Z({inputs:["autoHide","color","disabled","menu","mode","type"]})],e),e})(),Te=(()=>{let e=class{constructor(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}};return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO),o.Y36(o.SBq),o.Y36(o.R0b))},e.\u0275cmp=o.Xpm({type:e,selectors:[["ion-row"]],ngContentSelectors:S,decls:1,vars:0,template:function(e,t){1&e&&(o.F$t(),o.Hsn(0))},encapsulation:2,changeDetection:0}),e})(),Ee=(()=>{let e=class{constructor(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement,J(this,this.el,["ionChange","ionInput","ionBlur","ionFocus"])}};return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO),o.Y36(o.SBq),o.Y36(o.R0b))},e.\u0275cmp=o.Xpm({type:e,selectors:[["ion-textarea"]],inputs:{autoGrow:"autoGrow",autocapitalize:"autocapitalize",autofocus:"autofocus",clearOnEdit:"clearOnEdit",color:"color",cols:"cols",debounce:"debounce",disabled:"disabled",enterkeyhint:"enterkeyhint",inputmode:"inputmode",maxlength:"maxlength",minlength:"minlength",mode:"mode",name:"name",placeholder:"placeholder",readonly:"readonly",required:"required",rows:"rows",spellcheck:"spellcheck",value:"value",wrap:"wrap"},ngContentSelectors:S,decls:1,vars:0,template:function(e,t){1&e&&(o.F$t(),o.Hsn(0))},encapsulation:2,changeDetection:0}),e=r([Z({inputs:["autoGrow","autocapitalize","autofocus","clearOnEdit","color","cols","debounce","disabled","enterkeyhint","inputmode","maxlength","minlength","mode","name","placeholder","readonly","required","rows","spellcheck","value","wrap"],methods:["setFocus","getInputElement"]})],e),e})(),Se=(()=>{let e=class{constructor(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}};return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO),o.Y36(o.SBq),o.Y36(o.R0b))},e.\u0275cmp=o.Xpm({type:e,selectors:[["ion-title"]],inputs:{color:"color",size:"size"},ngContentSelectors:S,decls:1,vars:0,template:function(e,t){1&e&&(o.F$t(),o.Hsn(0))},encapsulation:2,changeDetection:0}),e=r([Z({inputs:["color","size"]})],e),e})(),ke=(()=>{let e=class{constructor(e,t,n){this.z=n,e.detach(),this.el=t.nativeElement}};return e.\u0275fac=function(t){return new(t||e)(o.Y36(o.sBO),o.Y36(o.SBq),o.Y36(o.R0b))},e.\u0275cmp=o.Xpm({type:e,selectors:[["ion-toolbar"]],inputs:{color:"color",mode:"mode"},ngContentSelectors:S,decls:1,vars:0,template:function(e,t){1&e&&(o.F$t(),o.Hsn(0))},encapsulation:2,changeDetection:0}),e=r([Z({inputs:["color","mode"]})],e),e})(),Ae=class{get(e,t){const n=Ne();return n?n.get(e,t):null}getBoolean(e,t){const n=Ne();return!!n&&n.getBoolean(e,t)}getNumber(e,t){const n=Ne();return n?n.getNumber(e,t):0}set(e,t){console.warn("[DEPRECATION][Config]: The Config.set() method is deprecated and will be removed in Ionic Framework 6.0. Please see https://ionicframework.com/docs/angular/config for alternatives.");const n=Ne();n&&n.set(e,t)}};Ae.\u0275fac=function(e){return new(e||Ae)},Ae.\u0275prov=o.Yz7({token:Ae,factory:function(e){return Ae.\u0275fac(e)},providedIn:"root"}),Ae.ngInjectableDef=(0,o.Yz7)({factory:function(){return new Ae},token:Ae,providedIn:"root"});const xe=new o.OlP("USERCONFIG"),Ne=()=>{if("undefined"!=typeof window){const e=window.Ionic;if(e&&e.config)return e.config}return null};class Oe{constructor(e={}){this.data=e}get(e){return this.data[e]}}let Pe=(()=>{let e=class{constructor(e,t){this.zone=e,this.appRef=t}create(e,t,n){return new Re(e,t,n,this.appRef,this.zone)}};return e.\u0275fac=function(t){return new(t||e)(o.LFG(o.R0b),o.LFG(o.z2F))},e.\u0275prov=o.Yz7({token:e,factory:function(t){return e.\u0275fac(t)}}),e})();class Re{constructor(e,t,n,r,i){this.resolver=e,this.injector=t,this.location=n,this.appRef=r,this.zone=i,this.elRefMap=new WeakMap,this.elEventsMap=new WeakMap}attachViewToDom(e,t,n,r){return this.zone.run(()=>new Promise(i=>{i(De(this.zone,this.resolver,this.injector,this.location,this.appRef,this.elRefMap,this.elEventsMap,e,t,n,r))}))}removeViewFromDom(e,t){return this.zone.run(()=>new Promise(e=>{const n=this.elRefMap.get(t);if(n){n.destroy(),this.elRefMap.delete(t);const e=this.elEventsMap.get(t);e&&(e(),this.elEventsMap.delete(t))}e()}))}}const De=(e,t,n,r,i,s,a,c,l,u,h)=>{const d=t.resolveComponentFactory(l),p=o.zs3.create({providers:$e(u),parent:n}),f=r?r.createComponent(d,r.length,p):d.create(p),g=f.instance,m=f.location.nativeElement;if(u&&Object.assign(g,u),h)for(const o of h)m.classList.add(o);const y=Me(e,g,m);return c.appendChild(m),r||i.attachView(f.hostView),f.changeDetectorRef.reattach(),s.set(m,f),a.set(m,y),m},Le=[g.L,g.a,g.b,g.c,g.d],Me=(e,t,n)=>e.run(()=>{const e=Le.filter(e=>"function"==typeof t[e]).map(e=>{const r=n=>t[e](n.detail);return n.addEventListener(e,r),()=>n.removeEventListener(e,r)});return()=>e.forEach(e=>e())}),Fe=new o.OlP("NavParamsToken"),$e=e=>[{provide:Fe,useValue:e},{provide:Oe,useFactory:Ve,deps:[Fe]}],Ve=e=>new Oe(e),Ue=(e,t)=>((e=e.filter(e=>e.stackId!==t.stackId)).push(t),e),je=(e,t)=>{const n=e.createUrlTree(["."],{relativeTo:t});return e.serializeUrl(n)},qe=(e,t)=>{if(!e)return;const n=Be(t);for(let r=0;r<n.length;r++){if(r>=e.length)return n[r];if(n[r]!==e[r])return}},Be=e=>e.split("/").map(e=>e.trim()).filter(e=>""!==e),ze=e=>{e&&(e.ref.destroy(),e.unlistenEvents())};class He{constructor(e,t,n,r,i,s){this.containerEl=t,this.router=n,this.navCtrl=r,this.zone=i,this.location=s,this.views=[],this.skipTransition=!1,this.nextId=0,this.tabsPrefix=void 0!==e?Be(e):void 0}createView(e,t){const n=je(this.router,t),r=e&&e.location&&e.location.nativeElement,i=Me(this.zone,e.instance,r);return{id:this.nextId++,stackId:qe(this.tabsPrefix,n),unlistenEvents:i,element:r,ref:e,url:n}}getExistingView(e){const t=je(this.router,e),n=this.views.find(e=>e.url===t);return n&&n.ref.changeDetectorRef.reattach(),n}setActive(e){const t=this.navCtrl.consumeTransition();let{direction:n,animation:r,animationBuilder:i}=t;const s=this.activeView,o=((e,t)=>!t||e.stackId!==t.stackId)(e,s);o&&(n="back",r=void 0);const a=this.views.slice();let c;const l=this.router;l.getCurrentNavigation?c=l.getCurrentNavigation():l.navigations&&l.navigations.value&&(c=l.navigations.value),c&&c.extras&&c.extras.replaceUrl&&this.views.length>0&&this.views.splice(-1,1);const u=this.views.includes(e),h=this.insertView(e,n);u||e.ref.changeDetectorRef.detectChanges();const d=e.animationBuilder;return void 0!==i||"back"!==n||o||void 0===d||(i=d),s&&(s.animationBuilder=i),this.zone.runOutsideAngular(()=>this.wait(()=>(s&&s.ref.changeDetectorRef.detach(),e.ref.changeDetectorRef.reattach(),this.transition(e,s,r,this.canGoBack(1),!1,i).then(()=>Ge(e,h,a,this.location)).then(()=>({enteringView:e,direction:n,animation:r,tabSwitch:o})))))}canGoBack(e,t=this.getActiveStackId()){return this.getStack(t).length>e}pop(e,t=this.getActiveStackId()){return this.zone.run(()=>{const n=this.getStack(t);if(n.length<=e)return Promise.resolve(!1);const r=n[n.length-e-1];let i=r.url;const s=r.savedData;if(s){const e=s.get("primary");e&&e.route&&e.route._routerState&&e.route._routerState.snapshot&&e.route._routerState.snapshot.url&&(i=e.route._routerState.snapshot.url)}const{animationBuilder:o}=this.navCtrl.consumeTransition();return this.navCtrl.navigateBack(i,Object.assign({},r.savedExtras,{animation:o})).then(()=>!0)})}startBackTransition(){const e=this.activeView;if(e){const t=this.getStack(e.stackId),n=t[t.length-2],r=n.animationBuilder;return this.wait(()=>this.transition(n,e,"back",this.canGoBack(2),!0,r))}return Promise.resolve()}endBackTransition(e){e?(this.skipTransition=!0,this.pop(1)):this.activeView&&We(this.activeView,this.views,this.views,this.location)}getLastUrl(e){const t=this.getStack(e);return t.length>0?t[t.length-1]:void 0}getRootUrl(e){const t=this.getStack(e);return t.length>0?t[0]:void 0}getActiveStackId(){return this.activeView?this.activeView.stackId:void 0}hasRunningTask(){return void 0!==this.runningTask}destroy(){this.containerEl=void 0,this.views.forEach(ze),this.activeView=void 0,this.views=[]}getStack(e){return this.views.filter(t=>t.stackId===e)}insertView(e,t){return this.activeView=e,this.views=((e,t,n)=>"root"===n?Ue(e,t):"forward"===n?((e,t)=>(e.indexOf(t)>=0?e=e.filter(e=>e.stackId!==t.stackId||e.id<=t.id):e.push(t),e))(e,t):((e,t)=>e.indexOf(t)>=0?e.filter(e=>e.stackId!==t.stackId||e.id<=t.id):Ue(e,t))(e,t))(this.views,e,t),this.views.slice()}transition(e,t,n,r,i,s){if(this.skipTransition)return this.skipTransition=!1,Promise.resolve(!1);if(t===e)return Promise.resolve(!1);const o=e?e.element:void 0,a=t?t.element:void 0,c=this.containerEl;return o&&o!==a&&(o.classList.add("ion-page"),o.classList.add("ion-page-invisible"),o.parentElement!==c&&c.appendChild(o),c.commit)?c.commit(o,a,{deepWait:!0,duration:void 0===n?0:void 0,direction:n,showGoBack:r,progressAnimation:i,animationBuilder:s}):Promise.resolve(!1)}wait(e){return s(this,void 0,void 0,function*(){void 0!==this.runningTask&&(yield this.runningTask,this.runningTask=void 0);const t=this.runningTask=e();return t.finally(()=>this.runningTask=void 0),t})}}const Ge=(e,t,n,r)=>"function"==typeof requestAnimationFrame?new Promise(i=>{requestAnimationFrame(()=>{We(e,t,n,r),i()})}):Promise.resolve(),We=(e,t,n,r)=>{n.filter(e=>!t.includes(e)).forEach(ze),t.forEach(t=>{const n=r.path().split("?")[0].split("#")[0];if(t!==e&&t.url!==n){const e=t.element;e.setAttribute("aria-hidden","true"),e.classList.add("ion-page-hidden"),t.ref.changeDetectorRef.detach()}})};let Ke=(()=>{let e=class{constructor(e,t,n,r,i,s,a,c,u,h,d,p,f){this.parentContexts=e,this.location=t,this.resolver=n,this.config=s,this.navCtrl=a,this.parentOutlet=f,this.activated=null,this.activatedView=null,this._activatedRoute=null,this.proxyMap=new WeakMap,this.currentActivatedRoute$=new b.X(null),this.stackEvents=new o.vpe,this.activateEvents=new o.vpe,this.deactivateEvents=new o.vpe,this.nativeEl=u.nativeElement,this.name=r||l.eC,this.tabsPrefix="true"===i?je(h,p):void 0,this.stackCtrl=new He(this.tabsPrefix,this.nativeEl,h,a,d,c),e.onChildOutletCreated(this.name,this)}set animation(e){this.nativeEl.animation=e}set animated(e){this.nativeEl.animated=e}set swipeGesture(e){this._swipeGesture=e,this.nativeEl.swipeHandler=e?{canStart:()=>this.stackCtrl.canGoBack(1)&&!this.stackCtrl.hasRunningTask(),onStart:()=>this.stackCtrl.startBackTransition(),onEnd:e=>this.stackCtrl.endBackTransition(e)}:void 0}ngOnDestroy(){this.stackCtrl.destroy()}getContext(){return this.parentContexts.getContext(this.name)}ngOnInit(){if(!this.activated){const e=this.getContext();e&&e.route&&this.activateWith(e.route,e.resolver||null)}new Promise(e=>(0,f.c)(this.nativeEl,e)).then(()=>{void 0===this._swipeGesture&&(this.swipeGesture=this.config.getBoolean("swipeBackEnabled","ios"===this.nativeEl.mode))})}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){throw new Error("incompatible reuse strategy")}attach(e,t){throw new Error("incompatible reuse strategy")}deactivate(){if(this.activated){if(this.activatedView){const e=this.getContext();this.activatedView.savedData=new Map(e.children.contexts);const t=this.activatedView.savedData.get("primary");if(t&&e.route&&(t.route=Object.assign({},e.route)),this.activatedView.savedExtras={},e.route){const t=e.route.snapshot;this.activatedView.savedExtras.queryParams=t.queryParams,this.activatedView.savedExtras.fragment=t.fragment}}const e=this.component;this.activatedView=null,this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,t){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");let n;this._activatedRoute=e;let r=this.stackCtrl.getExistingView(e);if(r){n=this.activated=r.ref;const t=r.savedData;t&&(this.getContext().children.contexts=t),this.updateActivatedRouteProxy(n.instance,e)}else{const i=(t=t||this.resolver).resolveComponentFactory(e._futureSnapshot.routeConfig.component),s=this.parentContexts.getOrCreateContext(this.name).children,o=new b.X(null),a=this.createActivatedRouteProxy(o,e),c=new Ye(a,s,this.location.injector);n=this.activated=this.location.createComponent(i,this.location.length,c),o.next(n.instance),r=this.stackCtrl.createView(this.activated,e),this.proxyMap.set(n.instance,a),this.currentActivatedRoute$.next({component:n.instance,activatedRoute:e})}this.activatedView=r,this.stackCtrl.setActive(r).then(e=>{this.navCtrl.setTopOutlet(this),this.activateEvents.emit(n.instance),this.stackEvents.emit(e)})}canGoBack(e=1,t){return this.stackCtrl.canGoBack(e,t)}pop(e=1,t){return this.stackCtrl.pop(e,t)}getLastUrl(e){const t=this.stackCtrl.getLastUrl(e);return t?t.url:void 0}getLastRouteView(e){return this.stackCtrl.getLastUrl(e)}getRootView(e){return this.stackCtrl.getRootUrl(e)}getActiveStackId(){return this.stackCtrl.getActiveStackId()}createActivatedRouteProxy(e,t){const n=new l.gz;return n._futureSnapshot=t._futureSnapshot,n._routerState=t._routerState,n.snapshot=t.snapshot,n.outlet=t.outlet,n.component=t.component,n._paramMap=this.proxyObservable(e,"paramMap"),n._queryParamMap=this.proxyObservable(e,"queryParamMap"),n.url=this.proxyObservable(e,"url"),n.params=this.proxyObservable(e,"params"),n.queryParams=this.proxyObservable(e,"queryParams"),n.fragment=this.proxyObservable(e,"fragment"),n.data=this.proxyObservable(e,"data"),n}proxyObservable(e,t){return e.pipe((0,I.h)(e=>!!e),(0,C.w)(e=>this.currentActivatedRoute$.pipe((0,I.h)(t=>null!==t&&t.component===e),(0,C.w)(e=>e&&e.activatedRoute[t]),(0,T.x)())))}updateActivatedRouteProxy(e,t){const n=this.proxyMap.get(e);if(!n)throw new Error("Could not find activated route proxy for view");n._futureSnapshot=t._futureSnapshot,n._routerState=t._routerState,n.snapshot=t.snapshot,n.outlet=t.outlet,n.component=t.component,this.currentActivatedRoute$.next({component:e,activatedRoute:t})}};return e.\u0275fac=function(t){return new(t||e)(o.Y36(l.y6),o.Y36(o.s_b),o.Y36(o._Vd),o.$8M("name"),o.$8M("tabs"),o.Y36(Ae),o.Y36(G),o.Y36(c.Ye),o.Y36(o.SBq),o.Y36(l.F0),o.Y36(o.R0b),o.Y36(l.gz),o.Y36(e,12))},e.\u0275dir=o.lG2({type:e,selectors:[["ion-router-outlet"]],inputs:{animated:"animated",animation:"animation",swipeGesture:"swipeGesture"},outputs:{stackEvents:"stackEvents",activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),r([(0,o.r_U)()],e.prototype,"stackEvents",void 0),r([(0,o.r_U)("activate")],e.prototype,"activateEvents",void 0),r([(0,o.r_U)("deactivate")],e.prototype,"deactivateEvents",void 0),e=r([i(3,(0,o.ahi)("name")),i(4,(0,o.FiY)()),i(4,(0,o.ahi)("tabs")),i(12,(0,o.tp0)()),i(12,(0,o.FiY)())],e),e})();class Ye{constructor(e,t,n){this.route=e,this.childContexts=t,this.parent=n}get(e,t){return e===l.gz?this.route:e===l.y6?this.childContexts:this.parent.get(e,t)}}let Qe=(()=>{let e=class{constructor(e,t,n){this.routerOutlet=e,this.navCtrl=t,this.config=n}onClick(e){const t=this.defaultHref||this.config.get("backButtonDefaultHref");this.routerOutlet&&this.routerOutlet.canGoBack()?(this.navCtrl.setDirection("back",void 0,void 0,this.routerAnimation),this.routerOutlet.pop(),e.preventDefault()):null!=t&&(this.navCtrl.navigateBack(t,{animation:this.routerAnimation}),e.preventDefault())}};return e.\u0275fac=function(t){return new(t||e)(o.Y36(Ke,8),o.Y36(G),o.Y36(Ae))},e.\u0275dir=o.lG2({type:e,selectors:[["ion-back-button"]],hostBindings:function(e,t){1&e&&o.NdJ("click",function(e){return t.onClick(e)})},inputs:{defaultHref:"defaultHref",routerAnimation:"routerAnimation"}}),r([(0,o.L6J)("click",["$event"])],e.prototype,"onClick",null),e=r([i(0,(0,o.FiY)())],e),e})(),Xe=(()=>{let e=class{constructor(e,t,n,r,i){this.locationStrategy=e,this.navCtrl=t,this.elementRef=n,this.router=r,this.routerLink=i,this.routerDirection="forward"}ngOnInit(){this.updateTargetUrlAndHref()}ngOnChanges(){this.updateTargetUrlAndHref()}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}updateTargetUrlAndHref(){if(this.routerLink){const e=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.routerLink.urlTree));this.elementRef.nativeElement.href=e}}onClick(e){this.navCtrl.setDirection(this.routerDirection,void 0,void 0,this.routerAnimation),e.preventDefault()}};return e.\u0275fac=function(t){return new(t||e)(o.Y36(c.S$),o.Y36(G),o.Y36(o.SBq),o.Y36(l.F0),o.Y36(l.rH,8))},e.\u0275dir=o.lG2({type:e,selectors:[["","routerLink",""]],hostBindings:function(e,t){1&e&&o.NdJ("click",function(e){return t.onClick(e)})},inputs:{routerDirection:"routerDirection",routerAnimation:"routerAnimation"},features:[o.TTD]}),r([(0,o.L6J)("click",["$event"])],e.prototype,"onClick",null),e=r([i(4,(0,o.FiY)())],e),e})();class Je{constructor(e){this.ctrl=e}create(e){return this.ctrl.create(e||{})}dismiss(e,t,n){return this.ctrl.dismiss(e,t,n)}getTop(){return this.ctrl.getTop()}}let Ze=class extends Je{constructor(){super(y.b)}};Ze.\u0275fac=function(e){return new(e||Ze)},Ze.\u0275prov=o.Yz7({token:Ze,factory:function(e){return Ze.\u0275fac(e)},providedIn:"root"}),Ze.ngInjectableDef=(0,o.Yz7)({factory:function(){return new Ze},token:Ze,providedIn:"root"});let et=class extends Je{constructor(){super(y.a)}};et.\u0275fac=function(e){return new(e||et)},et.\u0275prov=o.Yz7({token:et,factory:function(e){return et.\u0275fac(e)},providedIn:"root"}),et.ngInjectableDef=(0,o.Yz7)({factory:function(){return new et},token:et,providedIn:"root"});let tt=class extends Je{constructor(){super(y.l)}};tt.\u0275fac=function(e){return new(e||tt)},tt.\u0275prov=o.Yz7({token:tt,factory:function(e){return tt.\u0275fac(e)},providedIn:"root"}),tt.ngInjectableDef=(0,o.Yz7)({factory:function(){return new tt},token:tt,providedIn:"root"});let nt=class{open(e){return m.m.open(e)}close(e){return m.m.close(e)}toggle(e){return m.m.toggle(e)}enable(e,t){return m.m.enable(e,t)}swipeGesture(e,t){return m.m.swipeGesture(e,t)}isOpen(e){return m.m.isOpen(e)}isEnabled(e){return m.m.isEnabled(e)}get(e){return m.m.get(e)}getOpen(){return m.m.getOpen()}getMenus(){return m.m.getMenus()}};nt.\u0275fac=function(e){return new(e||nt)},nt.\u0275prov=o.Yz7({token:nt,factory:function(e){return nt.\u0275fac(e)},providedIn:"root"}),nt.ngInjectableDef=(0,o.Yz7)({factory:function(){return new nt},token:nt,providedIn:"root"});let rt=class extends Je{constructor(){super(y.p)}};rt.\u0275fac=function(e){return new(e||rt)},rt.\u0275prov=o.Yz7({token:rt,factory:function(e){return rt.\u0275fac(e)},providedIn:"root"}),rt.ngInjectableDef=(0,o.Yz7)({factory:function(){return new rt},token:rt,providedIn:"root"});let it=(()=>{let e=class extends Je{constructor(e,t,n){super(y.m),this.angularDelegate=e,this.resolver=t,this.injector=n}create(e){return super.create(Object.assign({},e,{delegate:this.angularDelegate.create(this.resolver,this.injector)}))}};return e.\u0275fac=function(t){return new(t||e)(o.LFG(Pe),o.LFG(o._Vd),o.LFG(o.zs3))},e.\u0275prov=o.Yz7({token:e,factory:function(t){return e.\u0275fac(t)}}),e})(),st=(()=>{let e=class extends Je{constructor(e,t,n){super(y.c),this.angularDelegate=e,this.resolver=t,this.injector=n}create(e){return super.create(Object.assign({},e,{delegate:this.angularDelegate.create(this.resolver,this.injector)}))}};return e.\u0275fac=function(t){return new(t||e)(o.LFG(Pe),o.LFG(o._Vd),o.LFG(o.zs3))},e.\u0275prov=o.Yz7({token:e,factory:function(t){return e.\u0275fac(t)}}),e})(),ot=class extends Je{constructor(){super(y.t)}};ot.\u0275fac=function(e){return new(e||ot)},ot.\u0275prov=o.Yz7({token:ot,factory:function(e){return ot.\u0275fac(e)},providedIn:"root"}),ot.ngInjectableDef=(0,o.Yz7)({factory:function(){return new ot},token:ot,providedIn:"root"});let at=class{read(e){ct().read(e)}write(e){ct().write(e)}};at.\u0275fac=function(e){return new(e||at)},at.\u0275prov=o.Yz7({token:at,factory:function(e){return at.\u0275fac(e)},providedIn:"root"}),at.ngInjectableDef=(0,o.Yz7)({factory:function(){return new at},token:at,providedIn:"root"});const ct=()=>{const e="undefined"!=typeof window?window:null;if(null!=e){const t=e.Ionic;return t&&t.queue?t.queue:{read:t=>e.requestAnimationFrame(t),write:t=>e.requestAnimationFrame(t)}}return{read:e=>e(),write:e=>e()}};let lt=class{create(e){return(0,u.c)(e)}easingTime(e,t,n,r,i){return(0,h.g)(e,t,n,r,i)}};lt.\u0275fac=function(e){return new(e||lt)},lt.\u0275prov=o.Yz7({token:lt,factory:function(e){return lt.\u0275fac(e)},providedIn:"root"}),lt.ngInjectableDef=(0,o.Yz7)({factory:function(){return new lt},token:lt,providedIn:"root"});let ut=class{constructor(e){this.zone=e}create(e,t=!1){return t&&Object.getOwnPropertyNames(e).forEach(t=>{if("function"==typeof e[t]){const n=e[t];e[t]=(...e)=>this.zone.run(()=>n(...e))}}),(0,d.createGesture)(e)}};ut.\u0275fac=function(e){return new(e||ut)(o.LFG(o.R0b))},ut.\u0275prov=o.Yz7({token:ut,factory:function(e){return ut.\u0275fac(e)},providedIn:"root"}),ut.ngInjectableDef=(0,o.Yz7)({factory:function(){return new ut((0,o.LFG)(o.R0b))},token:ut,providedIn:"root"});class ht{shouldDetach(e){return!1}shouldAttach(e){return!1}store(e,t){}retrieve(e){return null}shouldReuseRoute(e,t){if(e.routeConfig!==t.routeConfig)return!1;const n=e.params,r=t.params,i=Object.keys(n),s=Object.keys(r);if(i.length!==s.length)return!1;for(const o of i)if(r[o]!==n[o])return!1;return!0}}const dt=(e,t,r)=>()=>{if(t.defaultView&&"undefined"!=typeof window){(e=>{const t=window,n=t.Ionic;n&&n.config&&"Object"!==n.config.constructor.name||(t.Ionic=t.Ionic||{},t.Ionic.config=Object.assign(Object.assign({},t.Ionic.config),e))})(Object.assign({},e,{_zoneGate:e=>r.run(e)}));const i="__zone_symbol__addEventListener"in t.body?"__zone_symbol__addEventListener":"addEventListener";return function(){var e=[];if("undefined"!=typeof window){var t=window;t.customElements&&(!t.Element||t.Element.prototype.closest&&t.Element.prototype.matches&&t.Element.prototype.remove&&t.Element.prototype.getRootNode)||e.push(n.e(6748).then(n.t.bind(n,6546,23))),"function"==typeof Object.assign&&Object.entries&&Array.prototype.find&&Array.prototype.includes&&String.prototype.startsWith&&String.prototype.endsWith&&(!t.NodeList||t.NodeList.prototype.forEach)&&t.fetch&&function(){try{var e=new URL("b","http://a");return e.pathname="c%20d","http://a/c%20d"===e.href&&e.searchParams}catch(t){return!1}}()&&"undefined"!=typeof WeakMap||e.push(n.e(2214).then(n.t.bind(n,864,23)))}return Promise.all(e)}().then(()=>{return e={exclude:["ion-tabs","ion-tab"],syncQueue:!0,raf:k,jmp:e=>r.runOutsideAngular(e),ael(e,t,n,r){e[i](t,n,r)},rel(e,t,n,r){e.removeEventListener(t,n,r)}},"undefined"==typeof window?Promise.resolve():(v.C&&v.C.supports&&v.C.supports("color","var(--c)")?(0,v.a)():n.e(1843).then(n.t.bind(n,5466,23)).then(()=>(v.p.$cssShim$=v.w.__cssshim)?v.p.$cssShim$.i():0)).then(()=>(E(),(0,v.b)(JSON.parse('[["ion-select_3",[[2,"ion-select-popover",{"header":[1],"subHeader":[1,"sub-header"],"message":[1],"options":[16]},[[0,"ionChange","onSelect"]]],[33,"ion-select",{"disabled":[4],"cancelText":[1,"cancel-text"],"okText":[1,"ok-text"],"placeholder":[1],"name":[1],"selectedText":[1,"selected-text"],"multiple":[4],"interface":[1],"interfaceOptions":[8,"interface-options"],"compareWith":[1,"compare-with"],"value":[1032],"isExpanded":[32],"open":[64]}],[1,"ion-select-option",{"disabled":[4],"value":[8]}]]],["ion-menu_3",[[33,"ion-menu-button",{"color":[513],"disabled":[4],"menu":[1],"autoHide":[4,"auto-hide"],"type":[1],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]],[33,"ion-menu",{"contentId":[513,"content-id"],"menuId":[513,"menu-id"],"type":[1025],"disabled":[1028],"side":[513],"swipeGesture":[4,"swipe-gesture"],"maxEdgeStart":[2,"max-edge-start"],"isPaneVisible":[32],"isEndSide":[32],"isOpen":[64],"isActive":[64],"open":[64],"close":[64],"toggle":[64],"setOpen":[64]},[[16,"ionSplitPaneVisible","onSplitPaneChanged"],[2,"click","onBackdropClick"],[0,"keydown","onKeydown"]]],[1,"ion-menu-toggle",{"menu":[1],"autoHide":[4,"auto-hide"],"visible":[32]},[[16,"ionMenuChange","visibilityChanged"],[16,"ionSplitPaneVisible","visibilityChanged"]]]]],["ion-action-sheet",[[34,"ion-action-sheet",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"header":[1],"subHeader":[1,"sub-header"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-fab_3",[[33,"ion-fab-button",{"color":[513],"activated":[4],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1],"show":[4],"translucent":[4],"type":[1],"size":[1],"closeIcon":[1,"close-icon"]}],[1,"ion-fab",{"horizontal":[1],"vertical":[1],"edge":[4],"activated":[1028],"close":[64]}],[1,"ion-fab-list",{"activated":[4],"side":[1]}]]],["ion-refresher_2",[[0,"ion-refresher-content",{"pullingIcon":[1025,"pulling-icon"],"pullingText":[1,"pulling-text"],"refreshingSpinner":[1025,"refreshing-spinner"],"refreshingText":[1,"refreshing-text"]}],[32,"ion-refresher",{"pullMin":[2,"pull-min"],"pullMax":[2,"pull-max"],"closeDuration":[1,"close-duration"],"snapbackDuration":[1,"snapback-duration"],"pullFactor":[2,"pull-factor"],"disabled":[4],"nativeRefresher":[32],"state":[32],"complete":[64],"cancel":[64],"getProgress":[64]}]]],["ion-alert",[[34,"ion-alert",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"header":[1],"subHeader":[1,"sub-header"],"message":[1],"buttons":[16],"inputs":[1040],"backdropDismiss":[4,"backdrop-dismiss"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]},[[4,"keydown","onKeydown"]]]]],["ion-back-button",[[33,"ion-back-button",{"color":[513],"defaultHref":[1025,"default-href"],"disabled":[516],"icon":[1],"text":[1],"type":[1],"routerAnimation":[16]}]]],["ion-loading",[[34,"ion-loading",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"message":[1],"cssClass":[1,"css-class"],"duration":[2],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"spinner":[1025],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-toast",[[33,"ion-toast",{"overlayIndex":[2,"overlay-index"],"color":[513],"enterAnimation":[16],"leaveAnimation":[16],"cssClass":[1,"css-class"],"duration":[2],"header":[1],"message":[1],"keyboardClose":[4,"keyboard-close"],"position":[1],"buttons":[16],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-card_5",[[33,"ion-card",{"color":[513],"button":[4],"type":[1],"disabled":[4],"download":[1],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}],[32,"ion-card-content"],[33,"ion-card-header",{"color":[513],"translucent":[4]}],[33,"ion-card-subtitle",{"color":[513]}],[33,"ion-card-title",{"color":[513]}]]],["ion-item-option_3",[[33,"ion-item-option",{"color":[513],"disabled":[4],"download":[1],"expandable":[4],"href":[1],"rel":[1],"target":[1],"type":[1]}],[32,"ion-item-options",{"side":[1],"fireSwipeEvent":[64]}],[0,"ion-item-sliding",{"disabled":[4],"state":[32],"getOpenAmount":[64],"getSlidingRatio":[64],"open":[64],"close":[64],"closeOpened":[64]}]]],["ion-infinite-scroll_2",[[32,"ion-infinite-scroll-content",{"loadingSpinner":[1025,"loading-spinner"],"loadingText":[1,"loading-text"]}],[0,"ion-infinite-scroll",{"threshold":[1],"disabled":[4],"position":[1],"isLoading":[32],"complete":[64]}]]],["ion-reorder_2",[[33,"ion-reorder",null,[[2,"click","onClick"]]],[0,"ion-reorder-group",{"disabled":[4],"state":[32],"complete":[64]}]]],["ion-segment_2",[[33,"ion-segment-button",{"disabled":[4],"layout":[1],"type":[1],"value":[1],"checked":[32]}],[33,"ion-segment",{"color":[513],"disabled":[4],"scrollable":[4],"swipeGesture":[4,"swipe-gesture"],"value":[1025],"activated":[32]}]]],["ion-tab-bar_2",[[33,"ion-tab-button",{"disabled":[4],"download":[1],"href":[1],"rel":[1],"layout":[1025],"selected":[1028],"tab":[1],"target":[1]},[[8,"ionTabBarChanged","onTabBarChanged"]]],[33,"ion-tab-bar",{"color":[513],"selectedTab":[1,"selected-tab"],"translucent":[4],"keyboardVisible":[32]}]]],["ion-chip",[[33,"ion-chip",{"color":[513],"outline":[4],"disabled":[4]}]]],["ion-modal",[[34,"ion-modal",{"overlayIndex":[2,"overlay-index"],"delegate":[16],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"showBackdrop":[4,"show-backdrop"],"animated":[4],"swipeToClose":[4,"swipe-to-close"],"presentingElement":[16],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-popover",[[34,"ion-popover",{"delegate":[16],"overlayIndex":[2,"overlay-index"],"enterAnimation":[16],"leaveAnimation":[16],"component":[1],"componentProps":[16],"keyboardClose":[4,"keyboard-close"],"cssClass":[1,"css-class"],"backdropDismiss":[4,"backdrop-dismiss"],"event":[8],"showBackdrop":[4,"show-backdrop"],"translucent":[4],"animated":[4],"htmlAttributes":[16],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64]}]]],["ion-searchbar",[[34,"ion-searchbar",{"color":[513],"animated":[4],"autocomplete":[1],"autocorrect":[1],"cancelButtonIcon":[1,"cancel-button-icon"],"cancelButtonText":[1,"cancel-button-text"],"clearIcon":[1,"clear-icon"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"placeholder":[1],"searchIcon":[1,"search-icon"],"showCancelButton":[1,"show-cancel-button"],"showClearButton":[1,"show-clear-button"],"spellcheck":[4],"type":[1],"value":[1025],"focused":[32],"noAnimate":[32],"setFocus":[64],"getInputElement":[64]}]]],["ion-app_8",[[0,"ion-app"],[34,"ion-buttons",{"collapse":[4]}],[1,"ion-content",{"color":[513],"fullscreen":[4],"forceOverscroll":[1028,"force-overscroll"],"scrollX":[4,"scroll-x"],"scrollY":[4,"scroll-y"],"scrollEvents":[4,"scroll-events"],"getScrollElement":[64],"scrollToTop":[64],"scrollToBottom":[64],"scrollByPoint":[64],"scrollToPoint":[64]},[[8,"appload","onAppLoad"],[2,"click","onClick"]]],[36,"ion-footer",{"translucent":[4]}],[36,"ion-header",{"collapse":[1],"translucent":[4]}],[1,"ion-router-outlet",{"mode":[1025],"delegate":[16],"animated":[4],"animation":[16],"swipeHandler":[16],"commit":[64],"setRouteId":[64],"getRouteId":[64]}],[33,"ion-title",{"color":[513],"size":[1]}],[33,"ion-toolbar",{"color":[513]},[[0,"ionStyle","childrenStyle"]]]]],["ion-route_4",[[0,"ion-route",{"url":[1],"component":[1],"componentProps":[16],"beforeLeave":[16],"beforeEnter":[16]}],[0,"ion-route-redirect",{"from":[1],"to":[1]}],[0,"ion-router",{"root":[1],"useHash":[4,"use-hash"],"canTransition":[64],"push":[64],"back":[64],"printDebug":[64],"navChanged":[64]},[[8,"popstate","onPopState"],[4,"ionBackButton","onBackButton"]]],[1,"ion-router-link",{"color":[513],"href":[1],"rel":[1],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"target":[1]}]]],["ion-avatar_3",[[33,"ion-avatar"],[33,"ion-badge",{"color":[513]}],[1,"ion-thumbnail"]]],["ion-col_3",[[1,"ion-col",{"offset":[1],"offsetXs":[1,"offset-xs"],"offsetSm":[1,"offset-sm"],"offsetMd":[1,"offset-md"],"offsetLg":[1,"offset-lg"],"offsetXl":[1,"offset-xl"],"pull":[1],"pullXs":[1,"pull-xs"],"pullSm":[1,"pull-sm"],"pullMd":[1,"pull-md"],"pullLg":[1,"pull-lg"],"pullXl":[1,"pull-xl"],"push":[1],"pushXs":[1,"push-xs"],"pushSm":[1,"push-sm"],"pushMd":[1,"push-md"],"pushLg":[1,"push-lg"],"pushXl":[1,"push-xl"],"size":[1],"sizeXs":[1,"size-xs"],"sizeSm":[1,"size-sm"],"sizeMd":[1,"size-md"],"sizeLg":[1,"size-lg"],"sizeXl":[1,"size-xl"]},[[9,"resize","onResize"]]],[1,"ion-grid",{"fixed":[4]}],[1,"ion-row"]]],["ion-nav_2",[[1,"ion-nav",{"delegate":[16],"swipeGesture":[1028,"swipe-gesture"],"animated":[4],"animation":[16],"rootParams":[16],"root":[1],"push":[64],"insert":[64],"insertPages":[64],"pop":[64],"popTo":[64],"popToRoot":[64],"removeIndex":[64],"setRoot":[64],"setPages":[64],"setRouteId":[64],"getRouteId":[64],"getActive":[64],"getByIndex":[64],"canGoBack":[64],"getPrevious":[64]}],[0,"ion-nav-link",{"component":[1],"componentProps":[16],"routerDirection":[1,"router-direction"],"routerAnimation":[16]}]]],["ion-slide_2",[[0,"ion-slide"],[36,"ion-slides",{"options":[8],"pager":[4],"scrollbar":[4],"update":[64],"updateAutoHeight":[64],"slideTo":[64],"slideNext":[64],"slidePrev":[64],"getActiveIndex":[64],"getPreviousIndex":[64],"length":[64],"isEnd":[64],"isBeginning":[64],"startAutoplay":[64],"stopAutoplay":[64],"lockSwipeToNext":[64],"lockSwipeToPrev":[64],"lockSwipes":[64],"getSwiper":[64]}]]],["ion-tab_2",[[1,"ion-tab",{"active":[1028],"delegate":[16],"tab":[1],"component":[1],"setActive":[64]}],[1,"ion-tabs",{"useRouter":[1028,"use-router"],"selectedTab":[32],"select":[64],"getTab":[64],"getSelected":[64],"setRouteId":[64],"getRouteId":[64]}]]],["ion-checkbox",[[33,"ion-checkbox",{"color":[513],"name":[1],"checked":[1028],"indeterminate":[1028],"disabled":[4],"value":[1]}]]],["ion-img",[[1,"ion-img",{"alt":[1],"src":[1],"loadSrc":[32],"loadError":[32]}]]],["ion-input",[[34,"ion-input",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"accept":[1],"autocapitalize":[1],"autocomplete":[1],"autocorrect":[1],"autofocus":[4],"clearInput":[4,"clear-input"],"clearOnEdit":[4,"clear-on-edit"],"debounce":[2],"disabled":[4],"enterkeyhint":[1],"inputmode":[1],"max":[1],"maxlength":[2],"min":[1],"minlength":[2],"multiple":[4],"name":[1],"pattern":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"step":[1],"size":[2],"type":[1],"value":[1032],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-progress-bar",[[33,"ion-progress-bar",{"type":[1],"reversed":[4],"value":[2],"buffer":[2],"color":[513]}]]],["ion-range",[[33,"ion-range",{"color":[513],"debounce":[2],"name":[1],"dualKnobs":[4,"dual-knobs"],"min":[2],"max":[2],"pin":[4],"snaps":[4],"step":[2],"ticks":[4],"disabled":[4],"value":[1026],"ratioA":[32],"ratioB":[32],"pressedKnob":[32]}]]],["ion-split-pane",[[33,"ion-split-pane",{"contentId":[513,"content-id"],"disabled":[4],"when":[8],"visible":[32]}]]],["ion-text",[[1,"ion-text",{"color":[513]}]]],["ion-textarea",[[34,"ion-textarea",{"fireFocusEvents":[4,"fire-focus-events"],"color":[513],"autocapitalize":[1],"autofocus":[4],"clearOnEdit":[1028,"clear-on-edit"],"debounce":[2],"disabled":[4],"inputmode":[1],"enterkeyhint":[1],"maxlength":[2],"minlength":[2],"name":[1],"placeholder":[1],"readonly":[4],"required":[4],"spellcheck":[4],"cols":[2],"rows":[2],"wrap":[1],"autoGrow":[4,"auto-grow"],"value":[1025],"hasFocus":[32],"setFocus":[64],"setBlur":[64],"getInputElement":[64]}]]],["ion-toggle",[[33,"ion-toggle",{"color":[513],"name":[1],"checked":[1028],"disabled":[4],"value":[1],"activated":[32]}]]],["ion-virtual-scroll",[[0,"ion-virtual-scroll",{"approxItemHeight":[2,"approx-item-height"],"approxHeaderHeight":[2,"approx-header-height"],"approxFooterHeight":[2,"approx-footer-height"],"headerFn":[16],"footerFn":[16],"items":[16],"itemHeight":[16],"headerHeight":[16],"footerHeight":[16],"renderItem":[16],"renderHeader":[16],"renderFooter":[16],"nodeRender":[16],"domRender":[16],"totalHeight":[32],"positionForItem":[64],"checkRange":[64],"checkEnd":[64]},[[9,"resize","onResize"]]]]],["ion-datetime_3",[[34,"ion-picker",{"overlayIndex":[2,"overlay-index"],"keyboardClose":[4,"keyboard-close"],"enterAnimation":[16],"leaveAnimation":[16],"buttons":[16],"columns":[16],"cssClass":[1,"css-class"],"duration":[2],"showBackdrop":[4,"show-backdrop"],"backdropDismiss":[4,"backdrop-dismiss"],"animated":[4],"htmlAttributes":[16],"presented":[32],"present":[64],"dismiss":[64],"onDidDismiss":[64],"onWillDismiss":[64],"getColumn":[64]}],[33,"ion-datetime",{"name":[1],"disabled":[4],"readonly":[4],"min":[1025],"max":[1025],"displayFormat":[1,"display-format"],"displayTimezone":[1,"display-timezone"],"pickerFormat":[1,"picker-format"],"cancelText":[1,"cancel-text"],"doneText":[1,"done-text"],"yearValues":[8,"year-values"],"monthValues":[8,"month-values"],"dayValues":[8,"day-values"],"hourValues":[8,"hour-values"],"minuteValues":[8,"minute-values"],"monthNames":[1,"month-names"],"monthShortNames":[1,"month-short-names"],"dayNames":[1,"day-names"],"dayShortNames":[1,"day-short-names"],"pickerOptions":[16],"placeholder":[1],"value":[1025],"isExpanded":[32],"open":[64]}],[32,"ion-picker-column",{"col":[16]}]]],["ion-radio_2",[[33,"ion-radio",{"color":[513],"name":[1],"disabled":[4],"value":[8],"checked":[32],"buttonTabindex":[32],"setFocus":[64],"setButtonTabindex":[64]}],[0,"ion-radio-group",{"allowEmptySelection":[4,"allow-empty-selection"],"name":[1],"value":[1032]},[[4,"keydown","onKeydown"]]]]],["ion-spinner",[[1,"ion-spinner",{"color":[513],"duration":[2],"name":[1],"paused":[4]}]]],["ion-backdrop",[[33,"ion-backdrop",{"visible":[4],"tappable":[4],"stopPropagation":[4,"stop-propagation"]},[[2,"click","onMouseDown"]]]]],["ion-ripple-effect",[[1,"ion-ripple-effect",{"type":[1],"addRipple":[64]}]]],["ion-button_2",[[33,"ion-button",{"color":[513],"buttonType":[1025,"button-type"],"disabled":[516],"expand":[513],"fill":[1537],"routerDirection":[1,"router-direction"],"routerAnimation":[16],"download":[1],"href":[1],"rel":[1],"shape":[513],"size":[513],"strong":[4],"target":[1],"type":[1]}],[1,"ion-icon",{"mode":[1025],"color":[1],"ariaLabel":[1537,"aria-label"],"ariaHidden":[513,"aria-hidden"],"ios":[1],"md":[1],"flipRtl":[4,"flip-rtl"],"name":[513],"src":[1],"icon":[8],"size":[1],"lazy":[4],"sanitize":[4],"svgContent":[32],"isVisible":[32]}]]],["ion-item_8",[[33,"ion-item-divider",{"color":[513],"sticky":[4]}],[32,"ion-item-group"],[33,"ion-note",{"color":[513]}],[1,"ion-skeleton-text",{"animated":[4]}],[49,"ion-item",{"color":[513],"button":[4],"detail":[4],"detailIcon":[1,"detail-icon"],"disabled":[4],"download":[1],"href":[1],"rel":[1],"lines":[1],"routerAnimation":[16],"routerDirection":[1,"router-direction"],"target":[1],"type":[1],"multipleInputs":[32],"focusable":[32]},[[0,"ionColor","labelColorChanged"],[0,"ionStyle","itemStyle"]]],[34,"ion-label",{"color":[513],"position":[1],"noAnimate":[32]}],[32,"ion-list",{"lines":[1],"inset":[4],"closeSlidingItems":[64]}],[33,"ion-list-header",{"color":[513],"lines":[1]}]]]]'),e)));var e})}};var pt;let ft=pt=class{static forRoot(e){return{ngModule:pt,providers:[{provide:xe,useValue:e},{provide:o.ip1,useFactory:dt,multi:!0,deps:[xe,c.K0,o.R0b]}]}}};ft.\u0275fac=function(e){return new(e||ft)},ft.\u0275mod=o.oAB({type:ft}),ft.\u0275inj=o.cJS({providers:[Pe,it,st],imports:[[c.ez]]})},6760:(e,t,n)=>{"use strict";n.d(t,{c:()=>u});var r=n(5392);let i;const s=e=>{if(void 0===i){const t=void 0!==e.style.webkitAnimationName;i=void 0===e.style.animationName&&t?"-webkit-":""}return i},o=(e,t,n)=>{const r=t.startsWith("animation")?s(e):"";e.style.setProperty(r+t,n)},a=(e,t)=>{const n=t.startsWith("animation")?s(e):"";e.style.removeProperty(n+t)},c=[],l=(e=[],t)=>{if(void 0!==t){const n=Array.isArray(t)?t:[t];return[...e,...n]}return e},u=e=>{let t,n,i,u,h,d,p,f,g,m,y,v,_,w=[],b=[],I=[],C=!1,T={},E=[],S=[],k={},A=0,x=!1,N=!1,O=!0,P=!1,R=!0;const D=e,L=[],M=[],F=[],$=[],V=[],U=[],j=[],q=[],B=[],z=[],H="function"==typeof AnimationEffect||"function"==typeof window.AnimationEffect,G="function"==typeof Element&&"function"==typeof Element.prototype.animate&&H,W=(e,t)=>((t&&t.oneTimeCallback?M:L).push({c:e,o:t}),_),K=()=>{if(G)z.forEach(e=>{e.cancel()}),z.length=0;else{const e=F.slice();(0,r.r)(()=>{e.forEach(e=>{a(e,"animation-name"),a(e,"animation-duration"),a(e,"animation-timing-function"),a(e,"animation-iteration-count"),a(e,"animation-delay"),a(e,"animation-play-state"),a(e,"animation-fill-mode"),a(e,"animation-direction")})})}},Y=()=>{V.forEach(e=>{e&&e.parentNode&&e.parentNode.removeChild(e)}),V.length=0},Q=()=>void 0!==h?h:p?p.getFill():"both",X=()=>void 0!==g?g:void 0!==d?d:p?p.getDirection():"normal",J=()=>x?"linear":void 0!==i?i:p?p.getEasing():"linear",Z=()=>N?0:void 0!==m?m:void 0!==n?n:p?p.getDuration():0,ee=()=>void 0!==u?u:p?p.getIterations():1,te=()=>void 0!==y?y:void 0!==t?t:p?p.getDelay():0,ne=()=>{0!==A&&(A--,0===A&&((()=>{ue(),q.forEach(e=>e()),B.forEach(e=>e());const e=O?1:0,t=E,n=S,r=k;F.forEach(e=>{const i=e.classList;t.forEach(e=>i.add(e)),n.forEach(e=>i.remove(e));for(const t in r)r.hasOwnProperty(t)&&o(e,t,r[t])}),L.forEach(t=>t.c(e,_)),M.forEach(t=>t.c(e,_)),M.length=0,R=!0,O&&(P=!0),O=!0})(),p&&p.animationFinish()))},re=(t=!0)=>{(()=>{U.forEach(e=>e()),j.forEach(e=>e());const e=b,t=I,n=T;F.forEach(r=>{const i=r.classList;e.forEach(e=>i.add(e)),t.forEach(e=>i.remove(e));for(const e in n)n.hasOwnProperty(e)&&o(r,e,n[e])})})(),w.length>0&&(G?(F.forEach(e=>{const t=e.animate(w,{id:D,delay:te(),duration:Z(),easing:J(),iterations:ee(),fill:Q(),direction:X()});t.pause(),z.push(t)}),z.length>0&&(z[0].onfinish=()=>{ne()})):((t=!0)=>{Y();const n=((i=w).forEach(e=>{for(const t in e)if(e.hasOwnProperty(t)){const n=e[t];if("easing"===t)e["animation-timing-function"]=n,delete e[t];else{const r=t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();r!==t&&(e[r]=n,delete e[t])}}}),i);var i;F.forEach(i=>{if(n.length>0){const a=((e=[])=>e.map(e=>{const t=e.offset,n=[];for(const r in e)e.hasOwnProperty(r)&&"offset"!==r&&n.push(`${r}: ${e[r]};`);return`${100*t}% { ${n.join(" ")} }`}).join(" "))(n);v=void 0!==e?e:(e=>{let t=c.indexOf(e);return t<0&&(t=c.push(e)-1),`ion-animation-${t}`})(a);const l=((e,t,n)=>{const r=(e=>{const t=e.getRootNode();return t.head||t})(n),i=s(n),o=r.querySelector("#"+e);if(o)return o;const a=(n.ownerDocument||document).createElement("style");return a.id=e,a.textContent=`@${i}keyframes ${e} { ${t} } @${i}keyframes ${e}-alt { ${t} }`,r.appendChild(a),a})(v,a,i);V.push(l),o(i,"animation-duration",`${Z()}ms`),o(i,"animation-timing-function",J()),o(i,"animation-delay",`${te()}ms`),o(i,"animation-fill-mode",Q()),o(i,"animation-direction",X());const u=ee()===1/0?"infinite":ee().toString();o(i,"animation-iteration-count",u),o(i,"animation-play-state","paused"),t&&o(i,"animation-name",`${l.id}-alt`),(0,r.r)(()=>{o(i,"animation-name",l.id||null)})}})})(t)),C=!0},ie=e=>{if(e=Math.min(Math.max(e,0),.9999),G)z.forEach(t=>{t.currentTime=t.effect.getComputedTiming().delay+Z()*e,t.pause()});else{const t=`-${Z()*e}ms`;F.forEach(e=>{w.length>0&&(o(e,"animation-delay",t),o(e,"animation-play-state","paused"))})}},se=e=>{z.forEach(e=>{e.effect.updateTiming({delay:te(),duration:Z(),easing:J(),iterations:ee(),fill:Q(),direction:X()})}),void 0!==e&&ie(e)},oe=(e=!0,t)=>{(0,r.r)(()=>{F.forEach(n=>{o(n,"animation-name",v||null),o(n,"animation-duration",`${Z()}ms`),o(n,"animation-timing-function",J()),o(n,"animation-delay",void 0!==t?`-${t*Z()}ms`:`${te()}ms`),o(n,"animation-fill-mode",Q()||null),o(n,"animation-direction",X()||null);const i=ee()===1/0?"infinite":ee().toString();o(n,"animation-iteration-count",i),e&&o(n,"animation-name",`${v}-alt`),(0,r.r)(()=>{o(n,"animation-name",v||null)})})})},ae=(e=!1,t=!0,n)=>(e&&$.forEach(r=>{r.update(e,t,n)}),G?se(n):oe(t,n),_),ce=()=>{C&&(G?z.forEach(e=>{e.pause()}):F.forEach(e=>{o(e,"animation-play-state","paused")}))},le=()=>{f=void 0,ne()},ue=()=>{f&&clearTimeout(f)},he=e=>new Promise(t=>{e&&e.sync&&(N=!0,W(()=>N=!1,{oneTimeCallback:!0})),C||re(),P&&(G?(ie(0),se()):oe(),P=!1),R&&(A=$.length+1,R=!1),W(()=>t(),{oneTimeCallback:!0}),$.forEach(e=>{e.play()}),G?(z.forEach(e=>{e.play()}),0!==w.length&&0!==F.length||ne()):(()=>{if(ue(),(0,r.r)(()=>{F.forEach(e=>{w.length>0&&o(e,"animation-play-state","running")})}),0===w.length||0===F.length)ne();else{const e=te()||0,t=Z()||0,n=ee()||1;isFinite(n)&&(f=setTimeout(le,e+t*n+100)),((e,t)=>{let n;const i={passive:!0},s=t=>{e===t.target&&(n&&n(),ue(),(0,r.r)(()=>{F.forEach(e=>{a(e,"animation-duration"),a(e,"animation-delay"),a(e,"animation-play-state")}),(0,r.r)(ne)}))};e&&(e.addEventListener("webkitAnimationEnd",s,i),e.addEventListener("animationend",s,i),n=()=>{e.removeEventListener("webkitAnimationEnd",s,i),e.removeEventListener("animationend",s,i)})})(F[0])}})()}),de=(e,t)=>{const n=w[0];return void 0===n||void 0!==n.offset&&0!==n.offset?w=[{offset:0,[e]:t},...w]:n[e]=t,_};return _={parentAnimation:p,elements:F,childAnimations:$,id:D,animationFinish:ne,from:de,to:(e,t)=>{const n=w[w.length-1];return void 0===n||void 0!==n.offset&&1!==n.offset?w=[...w,{offset:1,[e]:t}]:n[e]=t,_},fromTo:(e,t,n)=>de(e,t).to(e,n),parent:e=>(p=e,_),play:he,pause:()=>($.forEach(e=>{e.pause()}),ce(),_),stop:()=>{$.forEach(e=>{e.stop()}),C&&(K(),C=!1),x=!1,N=!1,R=!0,g=void 0,m=void 0,y=void 0,A=0,P=!1,O=!0},destroy:e=>($.forEach(t=>{t.destroy(e)}),(e=>{K(),e&&Y()})(e),F.length=0,$.length=0,w.length=0,L.length=0,M.length=0,C=!1,R=!0,_),keyframes:e=>(w=e,_),addAnimation:e=>{if(null!=e)if(Array.isArray(e))for(const t of e)t.parent(_),$.push(t);else e.parent(_),$.push(e);return _},addElement:e=>{if(null!=e)if(1===e.nodeType)F.push(e);else if(e.length>=0)for(let t=0;t<e.length;t++)F.push(e[t]);else console.error("Invalid addElement value");return _},update:ae,fill:e=>(h=e,ae(!0),_),direction:e=>(d=e,ae(!0),_),iterations:e=>(u=e,ae(!0),_),duration:e=>(G||0!==e||(e=1),n=e,ae(!0),_),easing:e=>(i=e,ae(!0),_),delay:e=>(t=e,ae(!0),_),getWebAnimations:()=>z,getKeyframes:()=>w,getFill:Q,getDirection:X,getDelay:te,getIterations:ee,getEasing:J,getDuration:Z,afterAddRead:e=>(q.push(e),_),afterAddWrite:e=>(B.push(e),_),afterClearStyles:(e=[])=>{for(const t of e)k[t]="";return _},afterStyles:(e={})=>(k=e,_),afterRemoveClass:e=>(S=l(S,e),_),afterAddClass:e=>(E=l(E,e),_),beforeAddRead:e=>(U.push(e),_),beforeAddWrite:e=>(j.push(e),_),beforeClearStyles:(e=[])=>{for(const t of e)T[t]="";return _},beforeStyles:(e={})=>(T=e,_),beforeRemoveClass:e=>(I=l(I,e),_),beforeAddClass:e=>(b=l(b,e),_),onFinish:W,progressStart:(e=!1,t)=>($.forEach(n=>{n.progressStart(e,t)}),ce(),x=e,C?ae(!1,!0,t):re(),_),progressStep:e=>($.forEach(t=>{t.progressStep(e)}),ie(e),_),progressEnd:(e,t,n)=>(x=!1,$.forEach(r=>{r.progressEnd(e,t,n)}),void 0!==n&&(m=n),P=!1,O=!0,0===e?(g="reverse"===X()?"normal":"reverse","reverse"===g&&(O=!1),G?(ae(),ie(1-t)):(y=(1-t)*Z()*-1,ae(!1,!1))):1===e&&(G?(ae(),ie(t)):(y=t*Z()*-1,ae(!1,!1))),void 0!==e&&(W(()=>{m=void 0,g=void 0,y=void 0},{oneTimeCallback:!0}),p||he()),_)}}},6943:(e,t,n)=>{"use strict";n.d(t,{g:()=>r});const r=(e,t,n,r,o)=>s(e[1],t[1],n[1],r[1],o).map(s=>i(e[0],t[0],n[0],r[0],s)),i=(e,t,n,r,i)=>i*(3*t*Math.pow(i-1,2)+i*(-3*n*i+3*n+r*i))-e*Math.pow(i-1,3),s=(e,t,n,r,i)=>o((r-=i)-3*(n-=i)+3*(t-=i)-(e-=i),3*n-6*t+3*e,3*t-3*e,e).filter(e=>e>=0&&e<=1),o=(e,t,n,r)=>{if(0===e)return((e,t,n)=>{const r=t*t-4*e*n;return r<0?[]:[(-t+Math.sqrt(r))/(2*e),(-t-Math.sqrt(r))/(2*e)]})(t,n,r);const i=(3*(n/=e)-(t/=e)*t)/3,s=(2*t*t*t-9*t*n+27*(r/=e))/27;if(0===i)return[Math.pow(-s,1/3)];if(0===s)return[Math.sqrt(-i),-Math.sqrt(-i)];const o=Math.pow(s/2,2)+Math.pow(i/3,3);if(0===o)return[Math.pow(s/2,.5)-t/3];if(o>0)return[Math.pow(-s/2+Math.sqrt(o),1/3)-Math.pow(s/2+Math.sqrt(o),1/3)-t/3];const a=Math.sqrt(Math.pow(-i/3,3)),c=Math.acos(-s/(2*Math.sqrt(Math.pow(-i/3,3)))),l=2*Math.pow(a,1/3);return[l*Math.cos(c/3)-t/3,l*Math.cos((c+2*Math.PI)/3)-t/3,l*Math.cos((c+4*Math.PI)/3)-t/3]}},5901:(e,t,n)=>{"use strict";n.d(t,{G:()=>o});class r{constructor(e,t,n,r,i){this.id=t,this.name=n,this.disableScroll=i,this.priority=1e6*r+t,this.ctrl=e}canStart(){return!!this.ctrl&&this.ctrl.canStart(this.name)}start(){return!!this.ctrl&&this.ctrl.start(this.name,this.id,this.priority)}capture(){if(!this.ctrl)return!1;const e=this.ctrl.capture(this.name,this.id,this.priority);return e&&this.disableScroll&&this.ctrl.disableScroll(this.id),e}release(){this.ctrl&&(this.ctrl.release(this.id),this.disableScroll&&this.ctrl.enableScroll(this.id))}destroy(){this.release(),this.ctrl=void 0}}class i{constructor(e,t,n,r){this.id=t,this.disable=n,this.disableScroll=r,this.ctrl=e}block(){if(this.ctrl){if(this.disable)for(const e of this.disable)this.ctrl.disableGesture(e,this.id);this.disableScroll&&this.ctrl.disableScroll(this.id)}}unblock(){if(this.ctrl){if(this.disable)for(const e of this.disable)this.ctrl.enableGesture(e,this.id);this.disableScroll&&this.ctrl.enableScroll(this.id)}}destroy(){this.unblock(),this.ctrl=void 0}}const s="backdrop-no-scroll",o=new class{constructor(){this.gestureId=0,this.requestedStart=new Map,this.disabledGestures=new Map,this.disabledScroll=new Set}createGesture(e){return new r(this,this.newID(),e.name,e.priority||0,!!e.disableScroll)}createBlocker(e={}){return new i(this,this.newID(),e.disable,!!e.disableScroll)}start(e,t,n){return this.canStart(e)?(this.requestedStart.set(t,n),!0):(this.requestedStart.delete(t),!1)}capture(e,t,n){if(!this.start(e,t,n))return!1;const r=this.requestedStart;let i=-1e4;if(r.forEach(e=>{i=Math.max(i,e)}),i===n){this.capturedId=t,r.clear();const n=new CustomEvent("ionGestureCaptured",{detail:{gestureName:e}});return document.dispatchEvent(n),!0}return r.delete(t),!1}release(e){this.requestedStart.delete(e),this.capturedId===e&&(this.capturedId=void 0)}disableGesture(e,t){let n=this.disabledGestures.get(e);void 0===n&&(n=new Set,this.disabledGestures.set(e,n)),n.add(t)}enableGesture(e,t){const n=this.disabledGestures.get(e);void 0!==n&&n.delete(t)}disableScroll(e){this.disabledScroll.add(e),1===this.disabledScroll.size&&document.body.classList.add(s)}enableScroll(e){this.disabledScroll.delete(e),0===this.disabledScroll.size&&document.body.classList.remove(s)}canStart(e){return void 0===this.capturedId&&!this.isDisabled(e)}isCaptured(){return void 0!==this.capturedId}isScrollDisabled(){return this.disabledScroll.size>0}isDisabled(e){const t=this.disabledGestures.get(e);return!!(t&&t.size>0)}newID(){return this.gestureId++,this.gestureId}}},8876:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MENU_BACK_BUTTON_PRIORITY:()=>o,OVERLAY_BACK_BUTTON_PRIORITY:()=>s,blockHardwareBackButton:()=>r,startHardwareBackButton:()=>i});const r=()=>{document.addEventListener("backbutton",()=>{})},i=()=>{const e=document;let t=!1;e.addEventListener("backbutton",()=>{if(t)return;let n=0,r=[];const i=new CustomEvent("ionBackButton",{bubbles:!1,detail:{register(e,t){r.push({priority:e,handler:t,id:n++})}}});e.dispatchEvent(i);const s=()=>{if(r.length>0){let e={priority:Number.MIN_SAFE_INTEGER,handler:()=>{},id:-1};r.forEach(t=>{t.priority>=e.priority&&(e=t)}),t=!0,r=r.filter(t=>t.id!==e.id),(async e=>{try{if(e&&e.handler){const t=e.handler(s);null!=t&&await t}}catch(t){console.error(t)}})(e).then(()=>t=!1)}};s()})},s=100,o=99},5392:(e,t,n)=>{"use strict";n.d(t,{a:()=>s,b:()=>o,c:()=>r,d:()=>h,e:()=>d,f:()=>v,g:()=>a,h:()=>u,i:()=>i,j:()=>p,k:()=>l,l:()=>f,m:()=>y,n:()=>_,o:()=>g,p:()=>m,r:()=>c});const r=(e,t)=>{e.componentOnReady?e.componentOnReady().then(e=>t(e)):c(()=>t(e))},i=(e,t=[])=>{const n={};return t.forEach(t=>{e.hasAttribute(t)&&(null!==e.getAttribute(t)&&(n[t]=e.getAttribute(t)),e.removeAttribute(t))}),n},s=(e,t,n,r)=>{if("undefined"!=typeof window){const i=window,s=i&&i.Ionic&&i.Ionic.config;if(s){const i=s.get("_ael");if(i)return i(e,t,n,r);if(s._ael)return s._ael(e,t,n,r)}}return e.addEventListener(t,n,r)},o=(e,t,n,r)=>{if("undefined"!=typeof window){const i=window,s=i&&i.Ionic&&i.Ionic.config;if(s){const i=s.get("_rel");if(i)return i(e,t,n,r);if(s._rel)return s._rel(e,t,n,r)}}return e.removeEventListener(t,n,r)},a=(e,t=e)=>e.shadowRoot||t,c=e=>"function"==typeof __zone_symbol__requestAnimationFrame?__zone_symbol__requestAnimationFrame(e):"function"==typeof requestAnimationFrame?requestAnimationFrame(e):setTimeout(e),l=e=>!!e.shadowRoot&&!!e.attachShadow,u=e=>{const t=e.closest("ion-item");return t?t.querySelector("ion-label"):null},h=(e,t)=>{let n;const r=e.getAttribute("aria-labelledby"),i=e.id;let s=null!==r&&""!==r.trim()?r:t+"-lbl",o=null!==r&&""!==r.trim()?document.getElementById(r):u(e);return o?(null===r&&(o.id=s),n=o.textContent,o.setAttribute("aria-hidden","true")):""!==i.trim()&&(o=document.querySelector(`label[for="${i}"]`),o&&(""!==o.id?s=o.id:o.id=s=`${i}-lbl`,n=o.textContent)),{label:o,labelId:s,labelText:n}},d=(e,t,n,r,i)=>{if(e||l(t)){let e=t.querySelector("input.aux-input");e||(e=t.ownerDocument.createElement("input"),e.type="hidden",e.classList.add("aux-input"),t.appendChild(e)),e.disabled=i,e.name=n,e.value=r||""}},p=(e,t,n)=>Math.max(e,Math.min(t,n)),f=(e,t)=>{if(!e){const e="ASSERT: "+t;throw console.error(e),new Error(e)}},g=e=>e.timeStamp||Date.now(),m=e=>{if(e){const t=e.changedTouches;if(t&&t.length>0){const e=t[0];return{x:e.clientX,y:e.clientY}}if(void 0!==e.pageX)return{x:e.pageX,y:e.pageY}}return{x:0,y:0}},y=e=>{const t="rtl"===document.dir;switch(e){case"start":return t;case"end":return!t;default:throw new Error(`"${e}" is not a valid value for [side]. Use "start" or "end" instead.`)}},v=(e,t)=>{const n=e._original||e;return{_original:e,emit:_(n.emit.bind(n),t)}},_=(e,t=0)=>{let n;return(...r)=>{clearTimeout(n),n=setTimeout(e,t,...r)}}},7501:(e,t,n)=>{"use strict";n.d(t,{m:()=>h});var r=n(8876),i=n(5392),s=n(4973),o=n(6760);const a=e=>(0,o.c)().duration(e?400:300),c=e=>{let t,n;const r=e.width+8,i=(0,o.c)(),c=(0,o.c)();e.isEndSide?(t=r+"px",n="0px"):(t=-r+"px",n="0px"),i.addElement(e.menuInnerEl).fromTo("transform",`translateX(${t})`,`translateX(${n})`);const l="ios"===(0,s.b)(e),u=l?.2:.25;return c.addElement(e.backdropEl).fromTo("opacity",.01,u),a(l).addAnimation([i,c])},l=e=>{let t,n;const r=(0,s.b)(e),i=e.width;e.isEndSide?(t=-i+"px",n=i+"px"):(t=i+"px",n=-i+"px");const c=(0,o.c)().addElement(e.menuInnerEl).fromTo("transform",`translateX(${n})`,"translateX(0px)"),l=(0,o.c)().addElement(e.contentEl).fromTo("transform","translateX(0px)",`translateX(${t})`),u=(0,o.c)().addElement(e.backdropEl).fromTo("opacity",.01,.32);return a("ios"===r).addAnimation([c,l,u])},u=e=>{const t=(0,s.b)(e),n=e.width*(e.isEndSide?-1:1)+"px",r=(0,o.c)().addElement(e.contentEl).fromTo("transform","translateX(0px)",`translateX(${n})`);return a("ios"===t).addAnimation(r)},h=(()=>{const e=new Map,t=[],n=async e=>(await f(),"start"===e||"end"===e?p(t=>t.side===e&&!t.disabled)||p(t=>t.side===e):null!=e?p(t=>t.menuId===e):p(e=>!e.disabled)||(t.length>0?t[0].el:void 0)),s=async()=>(await f(),h()),o=(t,n)=>{e.set(t,n)},a=e=>{const n=e.side;t.filter(t=>t.side===n&&t!==e).forEach(e=>e.disabled=!0)},h=()=>p(e=>e._isOpen),d=()=>t.some(e=>e.isAnimating),p=e=>{const n=t.find(e);if(void 0!==n)return n.el},f=()=>Promise.all(Array.from(document.querySelectorAll("ion-menu")).map(e=>new Promise(t=>(0,i.c)(e,t))));return o("reveal",u),o("push",l),o("overlay",c),"undefined"!=typeof document&&document.addEventListener("ionBackButton",e=>{const t=h();t&&e.detail.register(r.MENU_BACK_BUTTON_PRIORITY,()=>t.close())}),{registerAnimation:o,get:n,getMenus:async()=>(await f(),t.map(e=>e.el)),getOpen:s,isEnabled:async e=>{const t=await n(e);return!!t&&!t.disabled},swipeGesture:async(e,t)=>{const r=await n(t);return r&&(r.swipeGesture=e),r},isAnimating:async()=>(await f(),d()),isOpen:async e=>{if(null!=e){const t=await n(e);return void 0!==t&&t.isOpen()}return void 0!==await s()},enable:async(e,t)=>{const r=await n(t);return r&&(r.disabled=!e),r},toggle:async e=>{const t=await n(e);return!!t&&t.toggle()},close:async e=>{const t=await(void 0!==e?n(e):s());return void 0!==t&&t.close()},open:async e=>{const t=await n(e);return!!t&&t.open()},_getOpenSync:h,_createAnimation:(t,n)=>{const r=e.get(t);if(!r)throw new Error("animation not registered");return r(n)},_register:e=>{t.indexOf(e)<0&&(e.disabled||a(e),t.push(e))},_unregister:e=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},_setOpen:async(e,t,n)=>{if(d())return!1;if(t){const t=await s();t&&e.el!==t&&await t.setOpen(!1,!1)}return e._setOpen(t,n)},_setActiveMenu:a}})()},4366:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GESTURE_CONTROLLER:()=>r.G,createGesture:()=>c});var r=n(5901);const i=(e,t,n,r)=>{const i=s(e)?{capture:!!r.capture,passive:!!r.passive}:!!r.capture;let o,a;return e.__zone_symbol__addEventListener?(o="__zone_symbol__addEventListener",a="__zone_symbol__removeEventListener"):(o="addEventListener",a="removeEventListener"),e[o](t,n,i),()=>{e[a](t,n,i)}},s=e=>{if(void 0===o)try{const t=Object.defineProperty({},"passive",{get:()=>{o=!0}});e.addEventListener("optsTest",()=>{},t)}catch(t){o=!1}return!!o};let o;const a=e=>e instanceof Document?e:e.ownerDocument,c=e=>{let t=!1,n=!1,s=!0,o=!1;const c=Object.assign({disableScroll:!1,direction:"x",gesturePriority:0,passive:!0,maxAngle:40,threshold:10},e),d=c.canStart,p=c.onWillStart,f=c.onStart,g=c.onEnd,m=c.notCaptured,y=c.onMove,v=c.threshold,_=c.passive,w=c.blurOnStart,b={type:"pan",startX:0,startY:0,startTime:0,currentX:0,currentY:0,velocityX:0,velocityY:0,deltaX:0,deltaY:0,currentTime:0,event:void 0,data:void 0},I=((e,t,n)=>{const r=n*(Math.PI/180),i="x"===e,s=Math.cos(r),o=t*t;let a=0,c=0,l=!1,u=0;return{start(e,t){a=e,c=t,u=0,l=!0},detect(e,t){if(!l)return!1;const n=e-a,r=t-c,h=n*n+r*r;if(h<o)return!1;const d=Math.sqrt(h),p=(i?n:r)/d;return u=p>s?1:p<-s?-1:0,l=!1,!0},isGesture:()=>0!==u,getDirection:()=>u}})(c.direction,c.threshold,c.maxAngle),C=r.G.createGesture({name:e.gestureName,priority:e.gesturePriority,disableScroll:e.disableScroll}),T=()=>{t&&(o=!1,y&&y(b))},E=()=>!(C&&!C.capture()||(t=!0,s=!1,b.startX=b.currentX,b.startY=b.currentY,b.startTime=b.currentTime,p?p(b).then(S):S(),0)),S=()=>{w&&(()=>{if("undefined"!=typeof document){const e=document.activeElement;null!==e&&e.blur&&e.blur()}})(),f&&f(b),s=!0},k=()=>{t=!1,n=!1,o=!1,s=!0,C.release()},A=e=>{const n=t,r=s;k(),r&&(l(b,e),n?g&&g(b):m&&m(b))},x=((e,t,n,r,s)=>{let o,c,l,u,h,d,p,f=0;const g=r=>{f=Date.now()+2e3,t(r)&&(!c&&n&&(c=i(e,"touchmove",n,s)),l||(l=i(r.target,"touchend",y,s)),u||(u=i(r.target,"touchcancel",y,s)))},m=r=>{f>Date.now()||t(r)&&(!d&&n&&(d=i(a(e),"mousemove",n,s)),p||(p=i(a(e),"mouseup",v,s)))},y=e=>{_(),r&&r(e)},v=e=>{w(),r&&r(e)},_=()=>{c&&c(),l&&l(),u&&u(),c=l=u=void 0},w=()=>{d&&d(),p&&p(),d=p=void 0},b=()=>{_(),w()},I=(t=!0)=>{t?(o||(o=i(e,"touchstart",g,s)),h||(h=i(e,"mousedown",m,s))):(o&&o(),h&&h(),o=h=void 0,b())};return{enable:I,stop:b,destroy:()=>{I(!1),r=n=t=void 0}}})(c.el,e=>{const t=h(e);return!(n||!s)&&(u(e,b),b.startX=b.currentX,b.startY=b.currentY,b.startTime=b.currentTime=t,b.velocityX=b.velocityY=b.deltaX=b.deltaY=0,b.event=e,(!d||!1!==d(b))&&(C.release(),!!C.start()&&(n=!0,0===v?E():(I.start(b.startX,b.startY),!0))))},e=>{t?!o&&s&&(o=!0,l(b,e),requestAnimationFrame(T)):(l(b,e),I.detect(b.currentX,b.currentY)&&(I.isGesture()&&E()||N()))},A,{capture:!1,passive:_}),N=()=>{k(),x.stop(),m&&m(b)};return{enable(e=!0){e||(t&&A(void 0),k()),x.enable(e)},destroy(){C.destroy(),x.destroy()}}},l=(e,t)=>{if(!t)return;const n=e.currentX,r=e.currentY,i=e.currentTime;u(t,e);const s=e.currentX,o=e.currentY,a=(e.currentTime=h(t))-i;if(a>0&&a<100){const t=(o-r)/a;e.velocityX=(s-n)/a*.7+.3*e.velocityX,e.velocityY=.7*t+.3*e.velocityY}e.deltaX=s-e.startX,e.deltaY=o-e.startY,e.event=t},u=(e,t)=>{let n=0,r=0;if(e){const t=e.changedTouches;if(t&&t.length>0){const e=t[0];n=e.clientX,r=e.clientY}else void 0!==e.pageX&&(n=e.pageX,r=e.pageY)}t.currentX=n,t.currentY=r},h=e=>e.timeStamp||Date.now()},5133:(e,t,n)=>{"use strict";n.d(t,{B:()=>qe,C:()=>d,H:()=>L,a:()=>m,b:()=>Ie,c:()=>je,e:()=>re,f:()=>Ue,g:()=>N,h:()=>R,i:()=>ne,j:()=>he,k:()=>Ce,p:()=>f,r:()=>Se,s:()=>x,w:()=>h});let r,i,s,o=!1,a=!1,c=!1,l=!1,u=!1;const h="undefined"!=typeof window?window:{},d=h.CSS,p=h.document||{head:{}},f={$flags$:0,$resourcesUrl$:"",jmp:e=>e(),raf:e=>requestAnimationFrame(e),ael:(e,t,n,r)=>e.addEventListener(t,n,r),rel:(e,t,n,r)=>e.removeEventListener(t,n,r),ce:(e,t)=>new CustomEvent(e,t)},g=(()=>(p.head.attachShadow+"").indexOf("[native")>-1)(),m=e=>Promise.resolve(e),y=(()=>{try{return new CSSStyleSheet,"function"==typeof(new CSSStyleSheet).replace}catch(e){}return!1})(),v=(e,t,n,r)=>{n&&n.map(([n,r,i])=>{const s=w(e,n),o=_(t,i),a=b(n);f.ael(s,r,o,a),(t.$rmListeners$=t.$rmListeners$||[]).push(()=>f.rel(s,r,o,a))})},_=(e,t)=>n=>{try{256&e.$flags$?e.$lazyInstance$[t](n):(e.$queuedListeners$=e.$queuedListeners$||[]).push([t,n])}catch(r){xe(r)}},w=(e,t)=>4&t?p:8&t?h:16&t?p.body:e,b=e=>0!=(2&e),I="s-id",C="c-id",T="http://www.w3.org/1999/xlink",E=new WeakMap,S=(e,t,n)=>{let r=Pe.get(e);y&&n?(r=r||new CSSStyleSheet,r.replace(t)):r=t,Pe.set(e,r)},k=(e,t,n,r)=>{let i=A(t,n),s=Pe.get(i);if(e=11===e.nodeType?e:p,s)if("string"==typeof s){let n,o=E.get(e=e.head||e);if(o||E.set(e,o=new Set),!o.has(i)){if(e.host&&(n=e.querySelector(`[sty-id="${i}"]`)))n.innerHTML=s;else{if(f.$cssShim$){n=f.$cssShim$.createHostStyle(r,i,s,!!(10&t.$flags$));const e=n["s-sc"];e&&(i=e,o=null)}else n=p.createElement("style"),n.innerHTML=s;e.insertBefore(n,e.querySelector("link"))}o&&o.add(i)}}else e.adoptedStyleSheets.includes(s)||(e.adoptedStyleSheets=[...e.adoptedStyleSheets,s]);return i},A=(e,t)=>"sc-"+(t&&32&e.$flags$?e.$tagName$+"-"+t:e.$tagName$),x=e=>Re.push(e),N=e=>Ee(e).$modeName$,O={},P=e=>"object"==(e=typeof e)||"function"===e,R=(e,t,...n)=>{let r=null,i=null,s=null,o=!1,a=!1,c=[];const l=t=>{for(let n=0;n<t.length;n++)r=t[n],Array.isArray(r)?l(r):null!=r&&"boolean"!=typeof r&&((o="function"!=typeof e&&!P(r))&&(r=String(r)),o&&a?c[c.length-1].$text$+=r:c.push(o?D(null,r):r),a=o)};if(l(n),t){t.key&&(i=t.key),t.name&&(s=t.name);{const e=t.className||t.class;e&&(t.class="object"!=typeof e?e:Object.keys(e).filter(t=>e[t]).join(" "))}}if("function"==typeof e)return e(null===t?{}:t,c,M);const u=D(e,null);return u.$attrs$=t,c.length>0&&(u.$children$=c),u.$key$=i,u.$name$=s,u},D=(e,t)=>({$flags$:0,$tag$:e,$text$:t,$elm$:null,$children$:null,$attrs$:null,$key$:null,$name$:null}),L={},M={forEach:(e,t)=>e.map(F).forEach(t),map:(e,t)=>e.map(F).map(t).map($)},F=e=>({vattrs:e.$attrs$,vchildren:e.$children$,vkey:e.$key$,vname:e.$name$,vtag:e.$tag$,vtext:e.$text$}),$=e=>{if("function"==typeof e.vtag){const t=Object.assign({},e.vattrs);return e.vkey&&(t.key=e.vkey),e.vname&&(t.name=e.vname),R(e.vtag,t,...e.vchildren||[])}const t=D(e.vtag,e.vtext);return t.$attrs$=e.vattrs,t.$children$=e.vchildren,t.$key$=e.vkey,t.$name$=e.vname,t},V=(e,t,n,r,i,s)=>{if(n!==r){let a=Ae(e,t),c=t.toLowerCase();if("class"===t){const t=e.classList,i=j(n),s=j(r);t.remove(...i.filter(e=>e&&!s.includes(e))),t.add(...s.filter(e=>e&&!i.includes(e)))}else if("style"===t){for(const t in n)r&&null!=r[t]||(t.includes("-")?e.style.removeProperty(t):e.style[t]="");for(const t in r)n&&r[t]===n[t]||(t.includes("-")?e.style.setProperty(t,r[t]):e.style[t]=r[t])}else if("key"===t);else if("ref"===t)r&&r(e);else if(a||"o"!==t[0]||"n"!==t[1]){const l=P(r);if((a||l&&null!==r)&&!i)try{if(e.tagName.includes("-"))e[t]=r;else{let i=null==r?"":r;"list"===t?a=!1:null!=n&&e[t]==i||(e[t]=i)}}catch(o){}let u=!1;c!==(c=c.replace(/^xlink\:?/,""))&&(t=c,u=!0),null==r||!1===r?!1===r&&""!==e.getAttribute(t)||(u?e.removeAttributeNS(T,t):e.removeAttribute(t)):(!a||4&s||i)&&!l&&(r=!0===r?"":r,u?e.setAttributeNS(T,t,r):e.setAttribute(t,r))}else t="-"===t[2]?t.slice(3):Ae(h,c)?c.slice(2):c[2]+t.slice(3),n&&f.rel(e,t,n,!1),r&&f.ael(e,t,r,!1)}},U=/\s/,j=e=>e?e.split(U):[],q=(e,t,n,r)=>{const i=11===t.$elm$.nodeType&&t.$elm$.host?t.$elm$.host:t.$elm$,s=e&&e.$attrs$||O,o=t.$attrs$||O;for(r in s)r in o||V(i,r,s[r],void 0,n,t.$flags$);for(r in o)V(i,r,s[r],o[r],n,t.$flags$)},B=(e,t,n,a)=>{let u,h,d,f=t.$children$[n],g=0;if(o||(c=!0,"slot"===f.$tag$&&(r&&a.classList.add(r+"-s"),f.$flags$|=f.$children$?2:1)),null!==f.$text$)u=f.$elm$=p.createTextNode(f.$text$);else if(1&f.$flags$)u=f.$elm$=p.createTextNode("");else{if(l||(l="svg"===f.$tag$),u=f.$elm$=p.createElementNS(l?"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",2&f.$flags$?"slot-fb":f.$tag$),l&&"foreignObject"===f.$tag$&&(l=!1),q(null,f,l),null!=r&&u["s-si"]!==r&&u.classList.add(u["s-si"]=r),f.$children$)for(g=0;g<f.$children$.length;++g)h=B(e,f,g,u),h&&u.appendChild(h);"svg"===f.$tag$?l=!1:"foreignObject"===u.tagName&&(l=!0)}return u["s-hn"]=s,3&f.$flags$&&(u["s-sr"]=!0,u["s-cr"]=i,u["s-sn"]=f.$name$||"",d=e&&e.$children$&&e.$children$[n],d&&d.$tag$===f.$tag$&&e.$elm$&&z(e.$elm$,!1)),u},z=(e,t)=>{f.$flags$|=1;const n=e.childNodes;for(let r=n.length-1;r>=0;r--){const e=n[r];e["s-hn"]!==s&&e["s-ol"]&&(Y(e).insertBefore(e,K(e)),e["s-ol"].remove(),e["s-ol"]=void 0,c=!0),t&&z(e,t)}f.$flags$&=-2},H=(e,t,n,r,i,o)=>{let a,c=e["s-cr"]&&e["s-cr"].parentNode||e;for(c.shadowRoot&&c.tagName===s&&(c=c.shadowRoot);i<=o;++i)r[i]&&(a=B(null,n,i,e),a&&(r[i].$elm$=a,c.insertBefore(a,K(t))))},G=(e,t,n,r,i)=>{for(;t<=n;++t)(r=e[t])&&(i=r.$elm$,te(r),a=!0,i["s-ol"]?i["s-ol"].remove():z(i,!0),i.remove())},W=(e,t)=>e.$tag$===t.$tag$&&("slot"===e.$tag$?e.$name$===t.$name$:e.$key$===t.$key$),K=e=>e&&e["s-ol"]||e,Y=e=>(e["s-ol"]?e["s-ol"]:e).parentNode,Q=(e,t)=>{const n=t.$elm$=e.$elm$,r=e.$children$,i=t.$children$,s=t.$tag$,o=t.$text$;let a;null===o?(l="svg"===s||"foreignObject"!==s&&l,"slot"===s||q(e,t,l),null!==r&&null!==i?((e,t,n,r)=>{let i,s,o=0,a=0,c=0,l=0,u=t.length-1,h=t[0],d=t[u],p=r.length-1,f=r[0],g=r[p];for(;o<=u&&a<=p;)if(null==h)h=t[++o];else if(null==d)d=t[--u];else if(null==f)f=r[++a];else if(null==g)g=r[--p];else if(W(h,f))Q(h,f),h=t[++o],f=r[++a];else if(W(d,g))Q(d,g),d=t[--u],g=r[--p];else if(W(h,g))"slot"!==h.$tag$&&"slot"!==g.$tag$||z(h.$elm$.parentNode,!1),Q(h,g),e.insertBefore(h.$elm$,d.$elm$.nextSibling),h=t[++o],g=r[--p];else if(W(d,f))"slot"!==h.$tag$&&"slot"!==g.$tag$||z(d.$elm$.parentNode,!1),Q(d,f),e.insertBefore(d.$elm$,h.$elm$),d=t[--u],f=r[++a];else{for(c=-1,l=o;l<=u;++l)if(t[l]&&null!==t[l].$key$&&t[l].$key$===f.$key$){c=l;break}c>=0?(s=t[c],s.$tag$!==f.$tag$?i=B(t&&t[a],n,c,e):(Q(s,f),t[c]=void 0,i=s.$elm$),f=r[++a]):(i=B(t&&t[a],n,a,e),f=r[++a]),i&&Y(h.$elm$).insertBefore(i,K(h.$elm$))}o>u?H(e,null==r[p+1]?null:r[p+1].$elm$,n,r,a,p):a>p&&G(t,o,u)})(n,r,t,i):null!==i?(null!==e.$text$&&(n.textContent=""),H(n,null,t,i,0,i.length-1)):null!==r&&G(r,0,r.length-1),l&&"svg"===s&&(l=!1)):(a=n["s-cr"])?a.parentNode.textContent=o:e.$text$!==o&&(n.data=o)},X=e=>{let t,n,r,i,s,o,a=e.childNodes;for(n=0,r=a.length;n<r;n++)if(t=a[n],1===t.nodeType){if(t["s-sr"])for(s=t["s-sn"],t.hidden=!1,i=0;i<r;i++)if(o=a[i].nodeType,a[i]["s-hn"]!==t["s-hn"]||""!==s){if(1===o&&s===a[i].getAttribute("slot")){t.hidden=!0;break}}else if(1===o||3===o&&""!==a[i].textContent.trim()){t.hidden=!0;break}X(t)}},J=[],Z=e=>{let t,n,r,i,s,o,c=0,l=e.childNodes,u=l.length;for(;c<u;c++){if(t=l[c],t["s-sr"]&&(n=t["s-cr"])&&n.parentNode)for(r=n.parentNode.childNodes,i=t["s-sn"],o=r.length-1;o>=0;o--)n=r[o],n["s-cn"]||n["s-nr"]||n["s-hn"]===t["s-hn"]||(ee(n,i)?(s=J.find(e=>e.$nodeToRelocate$===n),a=!0,n["s-sn"]=n["s-sn"]||i,s?s.$slotRefNode$=t:J.push({$slotRefNode$:t,$nodeToRelocate$:n}),n["s-sr"]&&J.map(e=>{ee(e.$nodeToRelocate$,n["s-sn"])&&(s=J.find(e=>e.$nodeToRelocate$===n),s&&!e.$slotRefNode$&&(e.$slotRefNode$=s.$slotRefNode$))})):J.some(e=>e.$nodeToRelocate$===n)||J.push({$nodeToRelocate$:n}));1===t.nodeType&&Z(t)}},ee=(e,t)=>1===e.nodeType?null===e.getAttribute("slot")&&""===t||e.getAttribute("slot")===t:e["s-sn"]===t||""===t,te=e=>{e.$attrs$&&e.$attrs$.ref&&e.$attrs$.ref(null),e.$children$&&e.$children$.map(te)},ne=e=>Ee(e).$hostElement$,re=(e,t,n)=>{const r=ne(e);return{emit:e=>ie(r,t,{bubbles:!!(4&n),composed:!!(2&n),cancelable:!!(1&n),detail:e})}},ie=(e,t,n)=>{const r=f.ce(t,n);return e.dispatchEvent(r),r},se=(e,t)=>{t&&!e.$onRenderResolve$&&t["s-p"]&&t["s-p"].push(new Promise(t=>e.$onRenderResolve$=t))},oe=(e,t)=>{if(e.$flags$|=16,!(4&e.$flags$))return se(e,e.$ancestorComponent$),je(()=>ae(e,t));e.$flags$|=512},ae=(e,t)=>{const n=e.$lazyInstance$;let r;return t&&(e.$flags$|=256,e.$queuedListeners$&&(e.$queuedListeners$.map(([e,t])=>pe(n,e,t)),e.$queuedListeners$=null),r=pe(n,"componentWillLoad")),r=fe(r,()=>pe(n,"componentWillRender")),fe(r,()=>ce(e,n,t))},ce=async(e,t,n)=>{const r=e.$hostElement$,i=r["s-rc"];n&&(e=>{const t=e.$cmpMeta$,n=e.$hostElement$,r=t.$flags$,i=k(g&&n.shadowRoot?n.shadowRoot:n.getRootNode(),t,e.$modeName$,n);10&r&&(n["s-sc"]=i,n.classList.add(i+"-h"),2&r&&n.classList.add(i+"-s"))})(e),le(e,t),f.$cssShim$&&f.$cssShim$.updateHost(r),i&&(i.map(e=>e()),r["s-rc"]=void 0);{const t=r["s-p"],n=()=>ue(e);0===t.length?n():(Promise.all(t).then(n),e.$flags$|=4,t.length=0)}},le=(e,t,n)=>{try{t=t.render&&t.render(),e.$flags$&=-17,e.$flags$|=2,((e,t)=>{const n=e.$hostElement$,l=e.$cmpMeta$,u=e.$vnode$||D(null,null),h=(d=t)&&d.$tag$===L?t:R(null,null,t);var d;if(s=n.tagName,l.$attrsToReflect$&&(h.$attrs$=h.$attrs$||{},l.$attrsToReflect$.map(([e,t])=>h.$attrs$[t]=n[e])),h.$tag$=null,h.$flags$|=4,e.$vnode$=h,h.$elm$=u.$elm$=n.shadowRoot||n,r=n["s-sc"],i=n["s-cr"],o=g&&0!=(1&l.$flags$),a=!1,Q(u,h),f.$flags$|=1,c){let e,t,n,r,i,s;Z(h.$elm$);let o=0;for(;o<J.length;o++)e=J[o],t=e.$nodeToRelocate$,t["s-ol"]||(n=p.createTextNode(""),n["s-nr"]=t,t.parentNode.insertBefore(t["s-ol"]=n,t));for(o=0;o<J.length;o++)if(e=J[o],t=e.$nodeToRelocate$,e.$slotRefNode$){for(r=e.$slotRefNode$.parentNode,i=e.$slotRefNode$.nextSibling,n=t["s-ol"];n=n.previousSibling;)if(s=n["s-nr"],s&&s["s-sn"]===t["s-sn"]&&r===s.parentNode&&(s=s.nextSibling,!s||!s["s-nr"])){i=s;break}(!i&&r!==t.parentNode||t.nextSibling!==i)&&t!==i&&(!t["s-hn"]&&t["s-ol"]&&(t["s-hn"]=t["s-ol"].parentNode.nodeName),r.insertBefore(t,i))}else 1===t.nodeType&&(t.hidden=!0)}a&&X(h.$elm$),f.$flags$&=-2,J.length=0})(e,t)}catch(l){xe(l,e.$hostElement$)}return null},ue=e=>{const t=e.$hostElement$,n=e.$lazyInstance$,r=e.$ancestorComponent$;64&e.$flags$?pe(n,"componentDidUpdate"):(e.$flags$|=64,ge(t),pe(n,"componentDidLoad"),e.$onReadyResolve$(t),r||de()),e.$onInstanceResolve$(t),e.$onRenderResolve$&&(e.$onRenderResolve$(),e.$onRenderResolve$=void 0),512&e.$flags$&&Ve(()=>oe(e,!1)),e.$flags$&=-517},he=e=>{{const t=Ee(e),n=t.$hostElement$.isConnected;return n&&2==(18&t.$flags$)&&oe(t,!1),n}},de=e=>{ge(p.documentElement),Ve(()=>ie(h,"appload",{detail:{namespace:"ionic"}}))},pe=(e,t,n)=>{if(e&&e[t])try{return e[t](n)}catch(r){xe(r)}},fe=(e,t)=>e&&e.then?e.then(t):t(),ge=e=>e.classList.add("hydrated"),me=(e,t,n,r,i,s,o)=>{let a,c,l,u;if(1===s.nodeType){for(a=s.getAttribute(C),a&&(c=a.split("."),c[0]!==o&&"0"!==c[0]||(l={$flags$:0,$hostId$:c[0],$nodeId$:c[1],$depth$:c[2],$index$:c[3],$tag$:s.tagName.toLowerCase(),$elm$:s,$attrs$:null,$children$:null,$key$:null,$name$:null,$text$:null},t.push(l),s.removeAttribute(C),e.$children$||(e.$children$=[]),e.$children$[l.$index$]=l,e=l,r&&"0"===l.$depth$&&(r[l.$index$]=l.$elm$))),u=s.childNodes.length-1;u>=0;u--)me(e,t,n,r,i,s.childNodes[u],o);if(s.shadowRoot)for(u=s.shadowRoot.childNodes.length-1;u>=0;u--)me(e,t,n,r,i,s.shadowRoot.childNodes[u],o)}else if(8===s.nodeType)c=s.nodeValue.split("."),c[1]!==o&&"0"!==c[1]||(a=c[0],l={$flags$:0,$hostId$:c[1],$nodeId$:c[2],$depth$:c[3],$index$:c[4],$elm$:s,$attrs$:null,$children$:null,$key$:null,$name$:null,$tag$:null,$text$:null},"t"===a?(l.$elm$=s.nextSibling,l.$elm$&&3===l.$elm$.nodeType&&(l.$text$=l.$elm$.textContent,t.push(l),s.remove(),e.$children$||(e.$children$=[]),e.$children$[l.$index$]=l,r&&"0"===l.$depth$&&(r[l.$index$]=l.$elm$))):l.$hostId$===o&&("s"===a?(l.$tag$="slot",s["s-sn"]=c[5]?l.$name$=c[5]:"",s["s-sr"]=!0,r&&(l.$elm$=p.createElement(l.$tag$),l.$name$&&l.$elm$.setAttribute("name",l.$name$),s.parentNode.insertBefore(l.$elm$,s),s.remove(),"0"===l.$depth$&&(r[l.$index$]=l.$elm$)),n.push(l),e.$children$||(e.$children$=[]),e.$children$[l.$index$]=l):"r"===a&&(r?s.remove():(i["s-cr"]=s,s["s-cn"]=!0))));else if(e&&"style"===e.$tag$){const t=D(null,s.textContent);t.$elm$=s,t.$index$="0",e.$children$=[t]}},ye=(e,t)=>{if(1===e.nodeType){let n=0;for(;n<e.childNodes.length;n++)ye(e.childNodes[n],t);if(e.shadowRoot)for(n=0;n<e.shadowRoot.childNodes.length;n++)ye(e.shadowRoot.childNodes[n],t)}else if(8===e.nodeType){const n=e.nodeValue.split(".");"o"===n[0]&&(t.set(n[1]+"."+n[2],e),e.nodeValue="",e["s-en"]=n[3])}},ve=(e,t,n)=>{if(t.$members$){e.watchers&&(t.$watchers$=e.watchers);const r=Object.entries(t.$members$),i=e.prototype;if(r.map(([e,[r]])=>{31&r||2&n&&32&r?Object.defineProperty(i,e,{get(){return t=e,Ee(this).$instanceValues$.get(t);var t},set(n){((e,t,n,r)=>{const i=Ee(this),s=i.$hostElement$,o=i.$instanceValues$.get(t),a=i.$flags$,c=i.$lazyInstance$;var l,u;if(u=r.$members$[t][0],n=null==(l=n)||P(l)?l:4&u?"false"!==l&&(""===l||!!l):2&u?parseFloat(l):1&u?String(l):l,!(8&a&&void 0!==o||n===o)&&(i.$instanceValues$.set(t,n),c)){if(r.$watchers$&&128&a){const e=r.$watchers$[t];e&&e.map(e=>{try{c[e](n,o,t)}catch(r){xe(r,s)}})}2==(18&a)&&oe(i,!1)}})(0,e,n,t)},configurable:!0,enumerable:!0}):1&n&&64&r&&Object.defineProperty(i,e,{value(...t){const n=Ee(this);return n.$onInstancePromise$.then(()=>n.$lazyInstance$[e](...t))}})}),1&n){const n=new Map;i.attributeChangedCallback=function(e,t,r){f.jmp(()=>{const t=n.get(e);this[t]=(null!==r||"boolean"!=typeof this[t])&&r})},e.observedAttributes=r.filter(([e,t])=>15&t[0]).map(([e,r])=>{const i=r[1]||e;return n.set(i,e),512&r[0]&&t.$attrsToReflect$.push([e,i]),i})}}return e},_e=e=>{pe(e,"connectedCallback")},we=e=>{if(0==(1&f.$flags$)){const t=Ee(e),r=t.$cmpMeta$,i=()=>{};if(1&t.$flags$)v(e,t,r.$listeners$),_e(t.$lazyInstance$);else{let i;if(t.$flags$|=1,i=e.getAttribute(I),i){if(g&&1&r.$flags$){const t=k(e.shadowRoot,r,e.getAttribute("s-mode"));e.classList.remove(t+"-h",t+"-s")}((e,t,n,r)=>{const i=e.shadowRoot,s=[],o=i?[]:null,a=r.$vnode$=D(t,null);f.$orgLocNodes$||ye(p.body,f.$orgLocNodes$=new Map),e["s-id"]=n,e.removeAttribute(I),me(a,s,[],o,e,e,n),s.map(e=>{const n=e.$hostId$+"."+e.$nodeId$,r=f.$orgLocNodes$.get(n),s=e.$elm$;r&&g&&""===r["s-en"]&&r.parentNode.insertBefore(s,r.nextSibling),i||(s["s-hn"]=t,r&&(s["s-ol"]=r,s["s-ol"]["s-nr"]=s)),f.$orgLocNodes$.delete(n)}),i&&o.map(e=>{e&&i.appendChild(e)})})(e,r.$tagName$,i,t)}i||12&r.$flags$&&be(e);{let n=e;for(;n=n.parentNode||n.host;)if(1===n.nodeType&&n.hasAttribute("s-id")&&n["s-p"]||n["s-p"]){se(t,t.$ancestorComponent$=n);break}}r.$members$&&Object.entries(r.$members$).map(([t,[n]])=>{if(31&n&&e.hasOwnProperty(t)){const n=e[t];delete e[t],e[t]=n}}),Ve(()=>(async(e,t,r,i,s)=>{if(0==(32&t.$flags$)){{if(t.$flags$|=32,(s=Oe(r)).then){const e=()=>{};s=await s,e()}s.isProxied||(r.$watchers$=s.watchers,ve(s,r,2),s.isProxied=!0);const e=()=>{};t.$flags$|=8;try{new s(t)}catch(c){xe(c)}t.$flags$&=-9,t.$flags$|=128,e(),_e(t.$lazyInstance$)}if(s.style){let i=s.style;"string"!=typeof i&&(i=i[t.$modeName$=(e=>Re.map(t=>t(e)).find(e=>!!e))(e)]);const o=A(r,t.$modeName$);if(!Pe.has(o)){const e=()=>{};8&r.$flags$&&(i=await n.e(5561).then(n.bind(n,5561)).then(e=>e.scopeCss(i,o,!1))),S(o,i,!!(1&r.$flags$)),e()}}}const o=t.$ancestorComponent$,a=()=>oe(t,!0);o&&o["s-rc"]?o["s-rc"].push(a):a()})(e,t,r))}i()}},be=e=>{const t=e["s-cr"]=p.createComment("");t["s-cn"]=!0,e.insertBefore(t,e.firstChild)},Ie=(e,t={})=>{const n=[],r=t.exclude||[],i=h.customElements,s=p.head,o=s.querySelector("meta[charset]"),a=p.createElement("style"),c=[],l=p.querySelectorAll("[sty-id]");let u,d=!0,m=0;for(Object.assign(f,t),f.$resourcesUrl$=new URL(t.resourcesUrl||"./",p.baseURI).href,f.$flags$|=2;m<l.length;m++)S(l[m].getAttribute("sty-id"),l[m].innerHTML.replace(/\/\*!@([^\/]+)\*\/[^\{]+\{/g,"$1{"),!0);e.map(e=>e[1].map(t=>{const s={$flags$:t[0],$tagName$:t[1],$members$:t[2],$listeners$:t[3]};s.$members$=t[2],s.$listeners$=t[3],s.$attrsToReflect$=[],s.$watchers$={},!g&&1&s.$flags$&&(s.$flags$|=8);const o=s.$tagName$,a=class extends HTMLElement{constructor(e){super(e),ke(e=this,s),1&s.$flags$&&(g?e.attachShadow({mode:"open",delegatesFocus:!!(16&s.$flags$)}):"shadowRoot"in e||(e.shadowRoot=e))}connectedCallback(){u&&(clearTimeout(u),u=null),d?c.push(this):f.jmp(()=>we(this))}disconnectedCallback(){f.jmp(()=>(e=>{if(0==(1&f.$flags$)){const t=Ee(e),n=t.$lazyInstance$;t.$rmListeners$&&(t.$rmListeners$.map(e=>e()),t.$rmListeners$=void 0),f.$cssShim$&&f.$cssShim$.removeHost(e),pe(n,"disconnectedCallback")}})(this))}componentOnReady(){return Ee(this).$onReadyPromise$}};s.$lazyBundleId$=e[0],r.includes(o)||i.get(o)||(n.push(o),i.define(o,ve(a,s,1)))})),a.innerHTML=n+"{visibility:hidden}.hydrated{visibility:inherit}",a.setAttribute("data-styles",""),s.insertBefore(a,o?o.nextSibling:s.firstChild),d=!1,c.length?c.map(e=>e.connectedCallback()):f.jmp(()=>u=setTimeout(de,30))},Ce=e=>{const t=new URL(e,f.$resourcesUrl$);return t.origin!==h.location.origin?t.href:t.pathname},Te=new WeakMap,Ee=e=>Te.get(e),Se=(e,t)=>Te.set(t.$lazyInstance$=e,t),ke=(e,t)=>{const n={$flags$:0,$hostElement$:e,$cmpMeta$:t,$instanceValues$:new Map};return n.$onInstancePromise$=new Promise(e=>n.$onInstanceResolve$=e),n.$onReadyPromise$=new Promise(e=>n.$onReadyResolve$=e),e["s-p"]=[],e["s-rc"]=[],v(e,n,t.$listeners$),Te.set(e,n)},Ae=(e,t)=>t in e,xe=(e,t)=>(0,console.error)(e,t),Ne=new Map,Oe=(e,t,r)=>{const i=e.$tagName$.replace(/-/g,"_"),s=e.$lazyBundleId$,o=Ne.get(s);return o?o[i]:n(863)(`./${s}.entry.js`).then(e=>(Ne.set(s,e),e[i]),xe)},Pe=new Map,Re=[],De=[],Le=[],Me=(e,t)=>n=>{e.push(n),u||(u=!0,t&&4&f.$flags$?Ve($e):f.raf($e))},Fe=e=>{for(let n=0;n<e.length;n++)try{e[n](performance.now())}catch(t){xe(t)}e.length=0},$e=()=>{Fe(De),Fe(Le),(u=De.length>0)&&f.raf($e)},Ve=e=>m().then(e),Ue=Me(De,!1),je=Me(Le,!0),qe={isDev:!1,isBrowser:!0,isServer:!1,isTesting:!1}},5614:(e,t,n)=>{"use strict";n.d(t,{L:()=>s,a:()=>o,b:()=>a,c:()=>c,d:()=>l,e:()=>T,g:()=>k,l:()=>I,s:()=>E,t:()=>u});var r=n(5133),i=n(5392);const s="ionViewWillEnter",o="ionViewDidEnter",a="ionViewWillLeave",c="ionViewDidLeave",l="ionViewWillUnload",u=e=>new Promise((t,n)=>{(0,r.c)(()=>{h(e),d(e).then(n=>{n.animation&&n.animation.destroy(),p(e),t(n)},t=>{p(e),n(t)})})}),h=e=>{const t=e.enteringEl,n=e.leavingEl;S(t,n,e.direction),e.showGoBack?t.classList.add("can-go-back"):t.classList.remove("can-go-back"),E(t,!1),t.style.setProperty("pointer-events","none"),n&&(E(n,!1),n.style.setProperty("pointer-events","none"))},d=async e=>{const t=await f(e);return t&&r.B.isBrowser?g(t,e):m(e)},p=e=>{const t=e.enteringEl,n=e.leavingEl;t.classList.remove("ion-page-invisible"),t.style.removeProperty("pointer-events"),void 0!==n&&(n.classList.remove("ion-page-invisible"),n.style.removeProperty("pointer-events"))},f=async e=>{if(e.leavingEl&&e.animated&&0!==e.duration)return e.animationBuilder?e.animationBuilder:"ios"===e.mode?(await Promise.resolve().then(n.bind(n,7438))).iosTransitionAnimation:(await Promise.resolve().then(n.bind(n,765))).mdTransitionAnimation},g=async(e,t)=>{await y(t,!0);const n=e(t.baseEl,t);w(t.enteringEl,t.leavingEl);const r=await _(n,t);return t.progressCallback&&t.progressCallback(void 0),r&&b(t.enteringEl,t.leavingEl),{hasCompleted:r,animation:n}},m=async e=>{const t=e.enteringEl,n=e.leavingEl;return await y(e,!1),w(t,n),b(t,n),{hasCompleted:!0}},y=async(e,t)=>{const n=(void 0!==e.deepWait?e.deepWait:t)?[T(e.enteringEl),T(e.leavingEl)]:[C(e.enteringEl),C(e.leavingEl)];await Promise.all(n),await v(e.viewIsReady,e.enteringEl)},v=async(e,t)=>{e&&await e(t)},_=(e,t)=>{const n=t.progressCallback,r=new Promise(t=>{e.onFinish(e=>t(1===e))});return n?(e.progressStart(!0),n(e)):e.play(),r},w=(e,t)=>{I(t,a),I(e,s)},b=(e,t)=>{I(e,o),I(t,c)},I=(e,t)=>{if(e){const n=new CustomEvent(t,{bubbles:!1,cancelable:!1});e.dispatchEvent(n)}},C=e=>e?new Promise(t=>(0,i.c)(e,t)):Promise.resolve(),T=async e=>{const t=e;if(t){if(null!=t.componentOnReady&&null!=await t.componentOnReady())return;await Promise.all(Array.from(t.children).map(T))}},E=(e,t)=>{t?(e.setAttribute("aria-hidden","true"),e.classList.add("ion-page-hidden")):(e.hidden=!1,e.removeAttribute("aria-hidden"),e.classList.remove("ion-page-hidden"))},S=(e,t,n)=>{void 0!==e&&(e.style.zIndex="back"===n?"99":"101"),void 0!==t&&(t.style.zIndex="100")},k=e=>e.classList.contains("ion-page")?e:e.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")||e},4973:(e,t,n)=>{"use strict";n.d(t,{a:()=>s,b:()=>I,c:()=>v,g:()=>i,i:()=>C});var r=n(5133);const i=e=>o(e),s=(e,t)=>("string"==typeof e&&(t=e,e=void 0),i(e).includes(t)),o=(e=window)=>{if(void 0===e)return[];e.Ionic=e.Ionic||{};let t=e.Ionic.platforms;return null==t&&(t=e.Ionic.platforms=a(e),t.forEach(t=>e.document.documentElement.classList.add(`plt-${t}`))),t},a=e=>Object.keys(m).filter(t=>m[t](e)),c=e=>!!f(e,/iPad/i)||!(!f(e,/Macintosh/i)||!u(e)),l=e=>f(e,/android|sink/i),u=e=>g(e,"(any-pointer:coarse)"),h=e=>d(e)||p(e),d=e=>!!(e.cordova||e.phonegap||e.PhoneGap),p=e=>{const t=e.Capacitor;return!(!t||!t.isNative)},f=(e,t)=>t.test(e.navigator.userAgent),g=(e,t)=>e.matchMedia(t).matches,m={ipad:c,iphone:e=>f(e,/iPhone/i),ios:e=>f(e,/iPhone|iPod/i)||c(e),android:l,phablet:e=>{const t=e.innerWidth,n=e.innerHeight,r=Math.min(t,n),i=Math.max(t,n);return r>390&&r<520&&i>620&&i<800},tablet:e=>{const t=e.innerWidth,n=e.innerHeight,r=Math.min(t,n),i=Math.max(t,n);return c(e)||(e=>l(e)&&!f(e,/mobile/i))(e)||r>460&&r<820&&i>780&&i<1400},cordova:d,capacitor:p,electron:e=>f(e,/electron/i),pwa:e=>!(!e.matchMedia("(display-mode: standalone)").matches&&!e.navigator.standalone),mobile:u,mobileweb:e=>u(e)&&!h(e),desktop:e=>!u(e),hybrid:h};class y{constructor(){this.m=new Map}reset(e){this.m=new Map(Object.entries(e))}get(e,t){const n=this.m.get(e);return void 0!==n?n:t}getBoolean(e,t=!1){const n=this.m.get(e);return void 0===n?t:"string"==typeof n?"true"===n:!!n}getNumber(e,t){const n=parseFloat(this.m.get(e));return isNaN(n)?void 0!==t?t:NaN:n}set(e,t){this.m.set(e,t)}}const v=new y,_="ionic:",w="ionic-persist-config";let b;const I=e=>e&&(0,r.g)(e)||b,C=(e={})=>{if("undefined"==typeof window)return;const t=window.document,n=window,i=n.Ionic=n.Ionic||{};o(n);const a=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},(e=>{try{const t=e.sessionStorage.getItem(w);return null!==t?JSON.parse(t):{}}catch(t){return{}}})(n)),{persistConfig:!1}),i.config),(e=>{const t={};return e.location.search.slice(1).split("&").map(e=>e.split("=")).map(([e,t])=>[decodeURIComponent(e),decodeURIComponent(t)]).filter(([e])=>"ionic:"===e.substr(0,_.length)).map(([e,t])=>[e.slice(_.length),t]).forEach(([e,n])=>{t[e]=n}),t})(n)),e);v.reset(a),v.getBoolean("persistConfig")&&((e,t)=>{try{e.sessionStorage.setItem(w,JSON.stringify(t))}catch(n){return}})(n,a),i.config=v,i.mode=b=v.get("mode",t.documentElement.getAttribute("mode")||(s(n,"ios")?"ios":"md")),v.set("mode",b),t.documentElement.setAttribute("mode",b),t.documentElement.classList.add(b),v.getBoolean("_testing")&&v.set("animated",!1);const c=e=>e.tagName&&e.tagName.startsWith("ION-"),l=e=>["ios","md"].includes(e);(0,r.s)(e=>{for(;e;){const t=e.mode||e.getAttribute("mode");if(t){if(l(t))return t;c(e)&&console.warn('Invalid ionic mode: "'+t+'", expected: "ios" or "md"')}e=e.parentElement}return b})}},7438:(e,t,n)=>{"use strict";n.r(t),n.d(t,{iosTransitionAnimation:()=>h,shadow:()=>o});var r=n(6760),i=n(5614);n(5133);const s=e=>document.querySelector(`${e}.ion-cloned-element`),o=e=>e.shadowRoot||e,a=e=>{const t="ION-TABS"===e.tagName?e:e.querySelector("ion-tabs"),n="ion-content ion-header:not(.header-collapse-condense-inactive) ion-title.title-large";if(null!=t){const e=t.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");return null!=e?e.querySelector(n):null}return e.querySelector(n)},c=(e,t)=>{const n="ION-TABS"===e.tagName?e:e.querySelector("ion-tabs");let r=[];if(null!=n){const e=n.querySelector("ion-tab:not(.tab-hidden), .ion-page:not(.ion-page-hidden)");null!=e&&(r=e.querySelectorAll("ion-buttons"))}else r=e.querySelectorAll("ion-buttons");for(const i of r){const e=i.closest("ion-header"),n=e&&!e.classList.contains("header-collapse-condense-inactive"),r=i.querySelector("ion-back-button"),s=i.classList.contains("buttons-collapse"),o="start"===i.slot||""===i.slot;if(null!==r&&o&&(s&&n&&t||!s))return r}return null},l=(e,t,n,i,a,c)=>{const l=t?`calc(100% - ${c.right+4}px)`:c.left-4+"px",u=t?"7px":"-7px",h=t?"-4px":"4px",d=t?"-4px":"4px",p=t?"right":"left",f=t?"left":"right",g=n?[{offset:0,opacity:1,transform:`translate3d(${h}, ${c.top-46}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${u}, ${a.top-40}px, 0) scale(2.1)`}]:[{offset:0,opacity:0,transform:`translate3d(${u}, ${a.top-40}px, 0) scale(2.1)`},{offset:1,opacity:1,transform:`translate3d(${h}, ${c.top-46}px, 0) scale(1)`}],m=n?[{offset:0,opacity:1,transform:`translate3d(${d}, ${c.top-46}px, 0) scale(1)`},{offset:.2,opacity:0,transform:`translate3d(${d}, ${c.top-41}px, 0) scale(0.6)`},{offset:1,opacity:0,transform:`translate3d(${d}, ${c.top-41}px, 0) scale(0.6)`}]:[{offset:0,opacity:0,transform:`translate3d(${d}, ${c.top-41}px, 0) scale(0.6)`},{offset:1,opacity:1,transform:`translate3d(${d}, ${c.top-46}px, 0) scale(1)`}],y=(0,r.c)(),v=(0,r.c)(),_=s("ion-back-button"),w=o(_).querySelector(".button-text"),b=o(_).querySelector("ion-icon");_.text=i.text,_.mode=i.mode,_.icon=i.icon,_.color=i.color,_.disabled=i.disabled,_.style.setProperty("display","block"),_.style.setProperty("position","fixed"),v.addElement(b),y.addElement(w),y.beforeStyles({"transform-origin":`${p} center`}).beforeAddWrite(()=>{i.style.setProperty("display","none"),_.style.setProperty(p,l)}).afterAddWrite(()=>{i.style.setProperty("display",""),_.style.setProperty("display","none"),_.style.removeProperty(p)}).keyframes(g),v.beforeStyles({"transform-origin":`${f} center`}).keyframes(m),e.addAnimation([y,v])},u=(e,t,n,i,o,a)=>{const c=t?`calc(100% - ${o.right}px)`:`${o.left}px`,l=t?"-18px":"18px",u=t?"right":"left",h=n?[{offset:0,opacity:0,transform:`translate3d(${l}, ${a.top-4}px, 0) scale(0.49)`},{offset:.1,opacity:0},{offset:1,opacity:1,transform:`translate3d(0, ${o.top-2}px, 0) scale(1)`}]:[{offset:0,opacity:.99,transform:`translate3d(0, ${o.top-2}px, 0) scale(1)`},{offset:.6,opacity:0},{offset:1,opacity:0,transform:`translate3d(${l}, ${a.top-4}px, 0) scale(0.5)`}],d=s("ion-title"),p=(0,r.c)();d.innerText=i.innerText,d.size=i.size,d.color=i.color,p.addElement(d),p.beforeStyles({"transform-origin":`${u} center`,height:"46px",display:"",position:"relative",[u]:c}).beforeAddWrite(()=>{i.style.setProperty("display","none")}).afterAddWrite(()=>{i.style.setProperty("display",""),d.style.setProperty("display","none")}).keyframes(h),e.addAnimation(p)},h=(e,t)=>{try{const n="cubic-bezier(0.32,0.72,0,1)",s="opacity",h="transform",d="0%",p=.8,f="rtl"===e.ownerDocument.dir,g=f?"-99.5%":"99.5%",m=f?"33%":"-33%",y=t.enteringEl,v=t.leavingEl,_="back"===t.direction,w=y.querySelector(":scope > ion-content"),b=y.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *"),I=y.querySelectorAll(":scope > ion-header > ion-toolbar"),C=(0,r.c)(),T=(0,r.c)();if(C.addElement(y).duration(t.duration||540).easing(t.easing||n).fill("both").beforeRemoveClass("ion-page-invisible"),v&&e){const t=(0,r.c)();t.addElement(e),C.addAnimation(t)}if(w||0!==I.length||0!==b.length?(T.addElement(w),T.addElement(b)):T.addElement(y.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),C.addAnimation(T),_?T.beforeClearStyles([s]).fromTo("transform",`translateX(${m})`,`translateX(${d})`).fromTo(s,p,1):T.beforeClearStyles([s]).fromTo("transform",`translateX(${g})`,`translateX(${d})`),w){const e=o(w).querySelector(".transition-effect");if(e){const t=e.querySelector(".transition-cover"),n=e.querySelector(".transition-shadow"),i=(0,r.c)(),o=(0,r.c)(),a=(0,r.c)();i.addElement(e).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),o.addElement(t).beforeClearStyles([s]).fromTo(s,0,.1),a.addElement(n).beforeClearStyles([s]).fromTo(s,.03,.7),i.addAnimation([o,a]),T.addAnimation([i])}}const E=y.querySelector("ion-header.header-collapse-condense"),{forward:S,backward:k}=((e,t,n,r,i)=>{const s=c(r,n),o=a(i),h=a(r),d=c(i,n),p=null!==s&&null!==o&&!n,f=null!==h&&null!==d&&n;if(p){const r=o.getBoundingClientRect(),i=s.getBoundingClientRect();u(e,t,n,o,r,i),l(e,t,n,s,r,i)}else if(f){const r=h.getBoundingClientRect(),i=d.getBoundingClientRect();u(e,t,n,h,r,i),l(e,t,n,d,r,i)}return{forward:p,backward:f}})(C,f,_,y,v);if(I.forEach(e=>{const t=(0,r.c)();t.addElement(e),C.addAnimation(t);const n=(0,r.c)();n.addElement(e.querySelector("ion-title"));const i=(0,r.c)(),a=Array.from(e.querySelectorAll("ion-buttons,[menuToggle]")),c=e.closest("ion-header"),l=c&&c.classList.contains("header-collapse-condense-inactive");let u;u=a.filter(_?e=>{const t=e.classList.contains("buttons-collapse");return t&&!l||!t}:e=>!e.classList.contains("buttons-collapse")),i.addElement(u);const h=(0,r.c)();h.addElement(e.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])"));const p=(0,r.c)();p.addElement(o(e).querySelector(".toolbar-background"));const y=(0,r.c)(),v=e.querySelector("ion-back-button");if(v&&y.addElement(v),t.addAnimation([n,i,h,p,y]),i.fromTo(s,.01,1),h.fromTo(s,.01,1),_)l||n.fromTo("transform",`translateX(${m})`,`translateX(${d})`).fromTo(s,.01,1),h.fromTo("transform",`translateX(${m})`,`translateX(${d})`),y.fromTo(s,.01,1);else if(E||n.fromTo("transform",`translateX(${g})`,`translateX(${d})`).fromTo(s,.01,1),h.fromTo("transform",`translateX(${g})`,`translateX(${d})`),p.beforeClearStyles([s,"transform"]),(null==c?void 0:c.translucent)?p.fromTo("transform",f?"translateX(-100%)":"translateX(100%)","translateX(0px)"):p.fromTo(s,.01,"var(--opacity)"),S||y.fromTo(s,.01,1),v&&!S){const e=(0,r.c)();e.addElement(o(v).querySelector(".button-text")).fromTo("transform",f?"translateX(-100px)":"translateX(100px)","translateX(0px)"),t.addAnimation(e)}}),v){const e=(0,r.c)(),t=v.querySelector(":scope > ion-content"),n=v.querySelectorAll(":scope > ion-header > ion-toolbar"),a=v.querySelectorAll(":scope > ion-header > *:not(ion-toolbar), :scope > ion-footer > *");if(t||0!==n.length||0!==a.length?(e.addElement(t),e.addElement(a)):e.addElement(v.querySelector(":scope > .ion-page, :scope > ion-nav, :scope > ion-tabs")),C.addAnimation(e),_){e.beforeClearStyles([s]).fromTo("transform",`translateX(${d})`,f?"translateX(-100%)":"translateX(100%)");const t=(0,i.g)(v);C.afterAddWrite(()=>{"normal"===C.getDirection()&&t.style.setProperty("display","none")})}else e.fromTo("transform",`translateX(${d})`,`translateX(${m})`).fromTo(s,1,p);if(t){const n=o(t).querySelector(".transition-effect");if(n){const t=n.querySelector(".transition-cover"),i=n.querySelector(".transition-shadow"),o=(0,r.c)(),a=(0,r.c)(),c=(0,r.c)();o.addElement(n).beforeStyles({opacity:"1",display:"block"}).afterStyles({opacity:"",display:""}),a.addElement(t).beforeClearStyles([s]).fromTo(s,.1,0),c.addElement(i).beforeClearStyles([s]).fromTo(s,.7,.03),o.addAnimation([a,c]),e.addAnimation([o])}}n.forEach(e=>{const t=(0,r.c)();t.addElement(e);const n=(0,r.c)();n.addElement(e.querySelector("ion-title"));const i=(0,r.c)(),a=e.querySelectorAll("ion-buttons,[menuToggle]"),c=e.closest("ion-header"),l=c&&c.classList.contains("header-collapse-condense-inactive"),u=Array.from(a).filter(e=>{const t=e.classList.contains("buttons-collapse");return t&&!l||!t});i.addElement(u);const p=(0,r.c)(),g=e.querySelectorAll(":scope > *:not(ion-title):not(ion-buttons):not([menuToggle])");g.length>0&&p.addElement(g);const y=(0,r.c)();y.addElement(o(e).querySelector(".toolbar-background"));const v=(0,r.c)(),w=e.querySelector("ion-back-button");if(w&&v.addElement(w),t.addAnimation([n,i,p,v,y]),C.addAnimation(t),v.fromTo(s,.99,0),i.fromTo(s,.99,0),p.fromTo(s,.99,0),_){if(l||n.fromTo("transform",`translateX(${d})`,f?"translateX(-100%)":"translateX(100%)").fromTo(s,.99,0),p.fromTo("transform",`translateX(${d})`,f?"translateX(-100%)":"translateX(100%)"),y.beforeClearStyles([s,"transform"]),(null==c?void 0:c.translucent)?y.fromTo("transform","translateX(0px)",f?"translateX(-100%)":"translateX(100%)"):y.fromTo(s,"var(--opacity)",0),w&&!k){const e=(0,r.c)();e.addElement(o(w).querySelector(".button-text")).fromTo("transform",`translateX(${d})`,`translateX(${(f?-124:124)+"px"})`),t.addAnimation(e)}}else l||n.fromTo("transform",`translateX(${d})`,`translateX(${m})`).fromTo(s,.99,0).afterClearStyles([h,s]),p.fromTo("transform",`translateX(${d})`,`translateX(${m})`).afterClearStyles([h,s]),v.afterClearStyles([s]),n.afterClearStyles([s]),i.afterClearStyles([s])})}return C}catch(n){throw n}}},765:(e,t,n)=>{"use strict";n.r(t),n.d(t,{mdTransitionAnimation:()=>s});var r=n(6760),i=n(5614);n(5133);const s=(e,t)=>{const n="back"===t.direction,s=t.leavingEl,o=(0,i.g)(t.enteringEl),a=o.querySelector("ion-toolbar"),c=(0,r.c)();if(c.addElement(o).fill("both").beforeRemoveClass("ion-page-invisible"),n?c.duration(t.duration||200).easing("cubic-bezier(0.47,0,0.745,0.715)"):c.duration(t.duration||280).easing("cubic-bezier(0.36,0.66,0.04,1)").fromTo("transform","translateY(40px)","translateY(0px)").fromTo("opacity",.01,1),a){const e=(0,r.c)();e.addElement(a),c.addAnimation(e)}if(s&&n){c.duration(t.duration||200).easing("cubic-bezier(0.47,0,0.745,0.715)");const e=(0,r.c)();e.addElement((0,i.g)(s)).onFinish(t=>{1===t&&e.elements.length>0&&e.elements[0].style.setProperty("display","none")}).fromTo("transform","translateY(0px)","translateY(40px)").fromTo("opacity",1,0),c.addAnimation(e)}return c}},1092:(e,t,n)=>{"use strict";n.d(t,{B:()=>D,a:()=>l,b:()=>u,c:()=>f,d:()=>T,e:()=>m,f:()=>S,g:()=>x,h:()=>a,i:()=>O,l:()=>h,m:()=>d,p:()=>p,s:()=>R,t:()=>g});var r=n(4973),i=n(8876),s=n(5392);let o=0;const a=new WeakMap,c=e=>({create:t=>y(e,t),dismiss:(t,n,r)=>b(document,t,n,e,r),getTop:async()=>I(document,e)}),l=c("ion-alert"),u=c("ion-action-sheet"),h=c("ion-loading"),d=c("ion-modal"),p=c("ion-picker"),f=c("ion-popover"),g=c("ion-toast"),m=e=>{"undefined"!=typeof document&&w(document);const t=o++;e.overlayIndex=t,e.hasAttribute("id")||(e.id=`ion-overlay-${t}`)},y=(e,t)=>"undefined"!=typeof customElements?customElements.whenDefined(e).then(()=>{const n=document.createElement(e);return n.classList.add("overlay-hidden"),Object.assign(n,t),k(document).appendChild(n),new Promise(e=>(0,s.c)(n,e))}):Promise.resolve(),v='[tabindex]:not([tabindex^="-"]), input:not([type=hidden]):not([tabindex^="-"]), textarea:not([tabindex^="-"]), button:not([tabindex^="-"]), select:not([tabindex^="-"]), .ion-focusable:not([tabindex^="-"])',_="input:not([type=hidden]), textarea, button, select",w=e=>{0===o&&(o=1,e.addEventListener("focus",t=>((e,t)=>{const n=I(t),r=e.target;if(n&&r)if(n===r)n.lastFocus=void 0;else{const e=(0,s.g)(n);if(!e.contains(r))return;const i=e.querySelector(".ion-overlay-wrapper");if(!i)return;if(i.contains(r))n.lastFocus=r;else{const e=n.lastFocus;((e,t)=>{let n=e.querySelector(v);const r=n&&n.shadowRoot;r&&(n=r.querySelector(_)||n),n?n.focus():t.focus()})(i,n),e===t.activeElement&&((e,t)=>{const n=Array.from(e.querySelectorAll(v));let r=n.length>0?n[n.length-1]:null;const i=r&&r.shadowRoot;i&&(r=i.querySelector(_)||r),r?r.focus():t.focus()})(i,n),n.lastFocus=t.activeElement}}})(t,e),!0),e.addEventListener("ionBackButton",t=>{const n=I(e);n&&n.backdropDismiss&&t.detail.register(i.OVERLAY_BACK_BUTTON_PRIORITY,()=>n.dismiss(void 0,D))}),e.addEventListener("keyup",t=>{if("Escape"===t.key){const t=I(e);t&&t.backdropDismiss&&t.dismiss(void 0,D)}}))},b=(e,t,n,r,i)=>{const s=I(e,r,i);return s?s.dismiss(t,n):Promise.reject("overlay does not exist")},I=(e,t,n)=>{const r=((e,t)=>(void 0===t&&(t="ion-alert,ion-action-sheet,ion-loading,ion-modal,ion-picker,ion-popover,ion-toast"),Array.from(e.querySelectorAll(t)).filter(e=>e.overlayIndex>0)))(e,t);return void 0===n?r[r.length-1]:r.find(e=>e.id===n)},C=(e=!1)=>{const t=k(document).querySelector("ion-router-outlet, ion-nav, #ion-view-container-root");t&&(e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))},T=async(e,t,n,i,s)=>{if(e.presented)return;C(!0),e.presented=!0,e.willPresent.emit();const o=(0,r.b)(e),a=e.enterAnimation?e.enterAnimation:r.c.get(t,"ios"===o?n:i);await A(e,a,e.el,s)&&e.didPresent.emit(),"ION-TOAST"!==e.el.tagName&&E(e.el),e.keyboardClose&&e.el.focus()},E=async e=>{let t=document.activeElement;if(!t)return;const n=t&&t.shadowRoot;n&&(t=n.querySelector(_)||t),await e.onDidDismiss(),t.focus()},S=async(e,t,n,i,s,o,c)=>{if(!e.presented)return!1;C(!1),e.presented=!1;try{e.el.style.setProperty("pointer-events","none"),e.willDismiss.emit({data:t,role:n});const l=(0,r.b)(e),u=e.leaveAnimation?e.leaveAnimation:r.c.get(i,"ios"===l?s:o);"gesture"!==n&&await A(e,u,e.el,c),e.didDismiss.emit({data:t,role:n}),a.delete(e)}catch(l){console.error(l)}return e.el.remove(),!0},k=e=>e.querySelector("ion-app")||e.body,A=async(e,t,n,i)=>{n.classList.remove("overlay-hidden");const s=t(n.shadowRoot||e.el,i);e.animated&&r.c.getBoolean("animated",!0)||s.duration(0),e.keyboardClose&&s.beforeAddWrite(()=>{const e=n.ownerDocument.activeElement;e&&e.matches("input, ion-input, ion-textarea")&&e.blur()});const o=a.get(e)||[];return a.set(e,[...o,s]),await s.play(),!0},x=(e,t)=>{let n;const r=new Promise(e=>n=e);return N(e,t,e=>{n(e.detail)}),r},N=(e,t,n)=>{const r=i=>{(0,s.b)(e,t,r),n(i)};(0,s.a)(e,t,r)},O=e=>"cancel"===e||e===D,P=e=>e(),R=(e,t)=>{if("function"==typeof e)return r.c.get("_zoneGate",P)(()=>{try{return e(t)}catch(n){console.error(n)}})},D="backdrop"},1665:(e,t,n)=>{"use strict";n.d(t,{Mq:()=>r.getApp,C6:()=>r.getApps,ZF:()=>r.initializeApp,KN:()=>r.registerVersion});var r=n(5871);(0,r.registerVersion)("firebase","9.5.0","app")},4480:(e,t,n)=>{"use strict";n.d(t,{hJ:()=>r.N,v0:()=>r.n});var r=n(8);n(9870),n(5871),n(4560),n(9171)},2837:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r.Z});var r=n(159);r.Z.registerVersion("firebase","9.5.0","app-compat")},2604:(e,t,n)=>{"use strict";n.r(t);var r=n(159),i=n(8),s=n(9870),o=(n(5871),n(4560),n(9171));function a(){return window}class c extends i.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(e=>{this.resolveInialized=e})}addPassiveListener(e){this.passiveListeners.add(e)}removePassiveListener(e){this.passiveListeners.delete(e)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(e){return this.resolveInialized(),this.passiveListeners.forEach(t=>t(e)),super.onEvent(e)}async initialized(){await this.initPromise}}async function l(e){const t=await h()._get(d(e));return t&&await h()._remove(d(e)),t}function u(){const e=[],t="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let n=0;n<20;n++){const n=Math.floor(Math.random()*t.length);e.push(t.charAt(n))}return e.join("")}function h(){return(0,i.ax)(i.b)}function d(e){return(0,i.ay)("authEvent",e.config.apiKey,e.name)}function p(e){if(!(null==e?void 0:e.includes("?")))return{};const[t,...n]=e.split("?");return(0,s.zd)(n.join("?"))}function f(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,i.av)("no-auth-event")}}function g(){var e;return(null===(e=null===self||void 0===self?void 0:self.location)||void 0===e?void 0:e.protocol)||null}function m(e=(0,s.z$)()){return!("file:"!==g()&&"ionic:"!==g()||!e.toLowerCase().match(/iphone|ipad|ipod|android/))}function y(){try{const e=self.localStorage,t=i.aG();if(e)return e.setItem(t,"1"),e.removeItem(t),!function(e=(0,s.z$)()){return(0,s.w1)()&&11===(null===document||void 0===document?void 0:document.documentMode)||function(e=(0,s.z$)()){return/Edge\/\d+/.test(e)}(e)}()||(0,s.hl)()}catch(e){return v()&&(0,s.hl)()}return!1}function v(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function _(){return("http:"===g()||"https:"===g()||(0,s.ru)()||m())&&!((0,s.b$)()||(0,s.UG)())&&y()&&!v()}function w(){return m()&&"undefined"!=typeof document}const b={LOCAL:"local",NONE:"none",SESSION:"session"},I=i.aw,C="persistence";async function T(e){await e._initializationPromise;const t=E(),n=i.ay(C,e.config.apiKey,e.name);(null==t?void 0:t.sessionStorage)&&t.sessionStorage.setItem(n,e._getPersistence())}function E(){return"undefined"!=typeof window?window:null}const S=i.aw;class k{constructor(){this.browserResolver=i.ax(i.k),this.cordovaResolver=i.ax(class{constructor(){this._redirectPersistence=i.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=i.aA}async _initialize(e){const t=e._key();let n=this.eventManagers.get(t);return n||(n=new c(e),this.eventManagers.set(t,n),this.attachCallbackListeners(e,n)),n}_openPopup(e){(0,i.as)(e,"operation-not-supported-in-this-environment")}async _openRedirect(e,t,n,r){!function(e){var t,n,r,s,o,c,l,u,h,d;const p=a();(0,i.aw)("function"==typeof(null===(t=null==p?void 0:p.universalLinks)||void 0===t?void 0:t.subscribe),e,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,i.aw)(void 0!==(null===(n=null==p?void 0:p.BuildInfo)||void 0===n?void 0:n.packageName),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,i.aw)("function"==typeof(null===(o=null===(s=null===(r=null==p?void 0:p.cordova)||void 0===r?void 0:r.plugins)||void 0===s?void 0:s.browsertab)||void 0===o?void 0:o.openUrl),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,i.aw)("function"==typeof(null===(u=null===(l=null===(c=null==p?void 0:p.cordova)||void 0===c?void 0:c.plugins)||void 0===l?void 0:l.browsertab)||void 0===u?void 0:u.isAvailable),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,i.aw)("function"==typeof(null===(d=null===(h=null==p?void 0:p.cordova)||void 0===h?void 0:h.InAppBrowser)||void 0===d?void 0:d.open),e,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(e);const s=await this._initialize(e);await s.initialized(),s.resetRedirect(),(0,i.aB)(),await this._originValidation(e);const o=function(e,t,n=null){return{type:t,eventId:n,urlResponse:null,sessionId:u(),postBody:null,tenantId:e.tenantId,error:(0,i.av)(e,"no-auth-event")}}(e,n,r);await function(e,t){return h()._set(d(e),t)}(e,o);const c=await async function(e,t,n){var r;const{BuildInfo:s}=a();(0,i.ap)(t.sessionId,"AuthEvent did not contain a session ID");const o=await async function(e){const t=function(e){if((0,i.ap)(/[0-9a-zA-Z]+/.test(e),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e);const t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(let r=0;r<e.length;r++)n[r]=e.charCodeAt(r);return n}(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(e=>e.toString(16).padStart(2,"0")).join("")}(t.sessionId),c={};return(0,i.aq)()?c.ibi=s.packageName:(0,i.ar)()?c.apn=s.packageName:(0,i.as)(e,"operation-not-supported-in-this-environment"),s.displayName&&(c.appDisplayName=s.displayName),c.sessionId=o,(0,i.at)(e,n,t.type,void 0,null!==(r=t.eventId)&&void 0!==r?r:void 0,c)}(e,o,t);return async function(e,t,n){const{cordova:r}=a();let s=()=>{};try{await new Promise((o,a)=>{let c=null;function l(){var e;o();const t=null===(e=r.plugins.browsertab)||void 0===e?void 0:e.close;"function"==typeof t&&t(),"function"==typeof(null==n?void 0:n.close)&&n.close()}function u(){c||(c=window.setTimeout(()=>{a((0,i.av)(e,"redirect-cancelled-by-user"))},2e3))}function h(){"visible"===(null===document||void 0===document?void 0:document.visibilityState)&&u()}t.addPassiveListener(l),document.addEventListener("resume",u,!1),(0,i.ar)()&&document.addEventListener("visibilitychange",h,!1),s=()=>{t.removePassiveListener(l),document.removeEventListener("resume",u,!1),document.removeEventListener("visibilitychange",h,!1),c&&window.clearTimeout(c)}})}finally{s()}}(e,s,await function(e){const{cordova:t}=a();return new Promise(n=>{t.plugins.browsertab.isAvailable(r=>{let s=null;r?t.plugins.browsertab.openUrl(e):s=t.InAppBrowser.open(e,(0,i.ao)()?"_blank":"_system","location=yes"),n(s)})})}(c))}_isIframeWebStorageSupported(e,t){throw new Error("Method not implemented.")}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=async function(e){const{BuildInfo:t}=a(),n={};(0,i.aq)()?n.iosBundleId=t.packageName:(0,i.ar)()?n.androidPackageName=t.packageName:(0,i.as)(e,"operation-not-supported-in-this-environment"),await(0,i.au)(e,n)}(e)),this.originValidationPromises[t]}attachCallbackListeners(e,t){const{universalLinks:n,handleOpenURL:r,BuildInfo:s}=a(),o=setTimeout(async()=>{await l(e),t.onEvent(f())},500),c=async n=>{clearTimeout(o);const r=await l(e);let s=null;r&&(null==n?void 0:n.url)&&(s=function(e,t){var n,r;const s=function(e){const t=p(e),n=t.link?decodeURIComponent(t.link):void 0,r=p(n).link,i=t.deep_link_id?decodeURIComponent(t.deep_link_id):void 0;return p(i).link||i||r||n||e}(t);if(s.includes("/__/auth/callback")){const t=p(s),o=t.firebaseError?function(e){try{return JSON.parse(e)}catch(t){return null}}(decodeURIComponent(t.firebaseError)):null,a=null===(r=null===(n=null==o?void 0:o.code)||void 0===n?void 0:n.split("auth/"))||void 0===r?void 0:r[1],c=a?(0,i.av)(a):null;return c?{type:e.type,eventId:e.eventId,tenantId:e.tenantId,error:c,urlResponse:null,sessionId:null,postBody:null}:{type:e.type,eventId:e.eventId,tenantId:e.tenantId,sessionId:e.sessionId,urlResponse:s,postBody:null}}return null}(r,n.url)),t.onEvent(s||f())};void 0!==n&&"function"==typeof n.subscribe&&n.subscribe(null,c);const u=r,h=`${s.packageName.toLowerCase()}://`;a().handleOpenURL=async e=>{if(e.toLowerCase().startsWith(h)&&c({url:e}),"function"==typeof u)try{u(e)}catch(t){console.error(t)}}}}),this.underlyingResolver=null,this._redirectPersistence=i.a,this._completeRedirectFn=i.aA}async _initialize(e){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._initialize(e)}async _openPopup(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openPopup(e,t,n,r)}async _openRedirect(e,t,n,r){return await this.selectUnderlyingResolver(),this.assertedUnderlyingResolver._openRedirect(e,t,n,r)}_isIframeWebStorageSupported(e,t){this.assertedUnderlyingResolver._isIframeWebStorageSupported(e,t)}_originValidation(e){return this.assertedUnderlyingResolver._originValidation(e)}get _shouldInitProactively(){return w()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return S(this.underlyingResolver,"internal-error"),this.underlyingResolver}async selectUnderlyingResolver(){if(this.underlyingResolver)return;const e=await async function(){return!!w()&&new Promise(e=>{const t=setTimeout(()=>{e(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(t),e(!0)})})}();this.underlyingResolver=e?this.cordovaResolver:this.browserResolver}}function A(e){return e.unwrap()}function x(e){const{_tokenResponse:t}=e instanceof s.ZR?e.customData:e;if(!t)return null;if(!(e instanceof s.ZR)&&"temporaryProof"in t&&"phoneNumber"in t)return i.P.credentialFromResult(e);const n=t.providerId;if(!n||n===i.o.PASSWORD)return null;let r;switch(n){case i.o.GOOGLE:r=i.N;break;case i.o.FACEBOOK:r=i.M;break;case i.o.GITHUB:r=i.Q;break;case i.o.TWITTER:r=i.V;break;default:const{oauthIdToken:e,oauthAccessToken:s,oauthTokenSecret:o,pendingToken:a,nonce:c}=t;return s||o||e||a?a?n.startsWith("saml.")?i.aJ._create(n,a):i.I._fromParams({providerId:n,signInMethod:n,pendingToken:a,idToken:e,accessToken:s}):new i.T(n).credential({idToken:e,accessToken:s,rawNonce:c}):null}return e instanceof s.ZR?r.credentialFromError(e):r.credentialFromResult(e)}function N(e,t){return t.catch(t=>{throw t instanceof s.ZR&&function(e,t){var n;const r=null===(n=t.customData)||void 0===n?void 0:n._tokenResponse;if("auth/multi-factor-auth-required"===t.code)t.resolver=new P(e,i.am(e,t));else if(r){const e=x(t),n=t;e&&(n.credential=e,n.tenantId=r.tenantId||void 0,n.email=r.email||void 0,n.phoneNumber=r.phoneNumber||void 0)}}(e,t),t}).then(e=>{const t=e.user;return{operationType:e.operationType,credential:(n=e,x(n)),additionalUserInfo:i.ak(e),user:R.getOrCreate(t)};var n})}async function O(e,t){const n=await t;return{verificationId:n.verificationId,confirm:t=>N(e,n.confirm(t))}}class P{constructor(e,t){this.resolver=t,this.auth=e.wrapped()}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(e){return N(A(this.auth),this.resolver.resolveSignIn(e))}}class R{constructor(e){this._delegate=e,this.multiFactor=i.an(e)}static getOrCreate(e){return R.USER_MAP.has(e)||R.USER_MAP.set(e,new R(e)),R.USER_MAP.get(e)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(e){return this._delegate.getIdTokenResult(e)}getIdToken(e){return this._delegate.getIdToken(e)}linkAndRetrieveDataWithCredential(e){return this.linkWithCredential(e)}async linkWithCredential(e){return N(this.auth,i.Y(this._delegate,e))}async linkWithPhoneNumber(e,t){return O(this.auth,i.l(this._delegate,e,t))}async linkWithPopup(e){return N(this.auth,i.d(this._delegate,e,k))}async linkWithRedirect(e){return await T(i.aC(this.auth)),i.g(this._delegate,e,k)}reauthenticateAndRetrieveDataWithCredential(e){return this.reauthenticateWithCredential(e)}async reauthenticateWithCredential(e){return N(this.auth,i.Z(this._delegate,e))}reauthenticateWithPhoneNumber(e,t){return O(this.auth,i.r(this._delegate,e,t))}reauthenticateWithPopup(e){return N(this.auth,i.e(this._delegate,e,k))}async reauthenticateWithRedirect(e){return await T(i.aC(this.auth)),i.h(this._delegate,e,k)}sendEmailVerification(e){return i.aa(this._delegate,e)}async unlink(e){return await i.aj(this._delegate,e),this}updateEmail(e){return i.af(this._delegate,e)}updatePassword(e){return i.ag(this._delegate,e)}updatePhoneNumber(e){return i.u(this._delegate,e)}updateProfile(e){return i.ae(this._delegate,e)}verifyBeforeUpdateEmail(e,t){return i.ab(this._delegate,e,t)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}R.USER_MAP=new WeakMap;const D=i.aw;let L=(()=>{class e{constructor(e,t){if(this.app=e,t.isInitialized())return this._delegate=t.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:n}=e.options;D(n,"invalid-api-key",{appName:e.name});let r=[i.K];if("undefined"!=typeof window){r=function(e,t){const n=E();if(!(null==n?void 0:n.sessionStorage))return[];const r=i.ay(C,e,t);switch(n.sessionStorage.getItem(r)){case b.NONE:return[i.K];case b.LOCAL:return[i.i,i.a];case b.SESSION:return[i.a];default:return[]}}(n,e.name);for(const e of[i.i,i.b,i.a])r.includes(e)||r.push(e)}D(n,"invalid-api-key",{appName:e.name});const s="undefined"!=typeof window?k:void 0;this._delegate=t.initialize({options:{persistence:r,popupRedirectResolver:s}}),this._delegate._updateErrorMap(i.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?R.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(e){this._delegate.languageCode=e}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(e){this._delegate.tenantId=e}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(e,t){i.E(this._delegate,e,t)}applyActionCode(e){return i.a1(this._delegate,e)}checkActionCode(e){return i.a2(this._delegate,e)}confirmPasswordReset(e,t){return i.a0(this._delegate,e,t)}async createUserWithEmailAndPassword(e,t){return N(this._delegate,i.a4(this._delegate,e,t))}fetchProvidersForEmail(e){return this.fetchSignInMethodsForEmail(e)}fetchSignInMethodsForEmail(e){return i.a9(this._delegate,e)}isSignInWithEmailLink(e){return i.a7(this._delegate,e)}async getRedirectResult(){D(_(),this._delegate,"operation-not-supported-in-this-environment");const e=await i.j(this._delegate,k);return e?N(this._delegate,Promise.resolve(e)):{credential:null,user:null}}addFrameworkForLogging(e){!function(e,t){(0,i.aC)(e)._logFramework(t)}(this._delegate,e)}onAuthStateChanged(e,t,n){const{next:r,error:i,complete:s}=M(e,t,n);return this._delegate.onAuthStateChanged(r,i,s)}onIdTokenChanged(e,t,n){const{next:r,error:i,complete:s}=M(e,t,n);return this._delegate.onIdTokenChanged(r,i,s)}sendSignInLinkToEmail(e,t){return i.a6(this._delegate,e,t)}sendPasswordResetEmail(e,t){return i.$(this._delegate,e,t||void 0)}async setPersistence(e){let t;switch(function(e,t){I(Object.values(b).includes(t),e,"invalid-persistence-type"),(0,s.b$)()?I(t!==b.SESSION,e,"unsupported-persistence-type"):(0,s.UG)()?I(t===b.NONE,e,"unsupported-persistence-type"):v()?I(t===b.NONE||t===b.LOCAL&&(0,s.hl)(),e,"unsupported-persistence-type"):I(t===b.NONE||y(),e,"unsupported-persistence-type")}(this._delegate,e),e){case b.SESSION:t=i.a;break;case b.LOCAL:t=await i.ax(i.i)._isAvailable()?i.i:i.b;break;case b.NONE:t=i.K;break;default:return i.as("argument-error",{appName:this._delegate.name})}return this._delegate.setPersistence(t)}signInAndRetrieveDataWithCredential(e){return this.signInWithCredential(e)}signInAnonymously(){return N(this._delegate,i.W(this._delegate))}signInWithCredential(e){return N(this._delegate,i.X(this._delegate,e))}signInWithCustomToken(e){return N(this._delegate,i._(this._delegate,e))}signInWithEmailAndPassword(e,t){return N(this._delegate,i.a5(this._delegate,e,t))}signInWithEmailLink(e,t){return N(this._delegate,i.a8(this._delegate,e,t))}signInWithPhoneNumber(e,t){return O(this._delegate,i.s(this._delegate,e,t))}async signInWithPopup(e){return D(_(),this._delegate,"operation-not-supported-in-this-environment"),N(this._delegate,i.c(this._delegate,e,k))}async signInWithRedirect(e){return D(_(),this._delegate,"operation-not-supported-in-this-environment"),await T(this._delegate),i.f(this._delegate,e,k)}updateCurrentUser(e){return this._delegate.updateCurrentUser(e)}verifyPasswordResetCode(e){return i.a3(this._delegate,e)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return e.Persistence=b,e})();function M(e,t,n){let r=e;"function"!=typeof e&&({next:r,error:t,complete:n}=e);const i=r;return{next:e=>i(e&&R.getOrCreate(e)),error:t,complete:n}}class F{constructor(){this.providerId="phone",this._delegate=new i.P(A(r.Z.auth()))}static credential(e,t){return i.P.credential(e,t)}verifyPhoneNumber(e,t){return this._delegate.verifyPhoneNumber(e,t)}unwrap(){return this._delegate}}F.PHONE_SIGN_IN_METHOD=i.P.PHONE_SIGN_IN_METHOD,F.PROVIDER_ID=i.P.PROVIDER_ID;const $=i.aw;var V;(V=r.Z).INTERNAL.registerComponent(new o.wA("auth-compat",e=>{const t=e.getProvider("app-compat").getImmediate(),n=e.getProvider("auth");return new L(t,n)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:i.A.EMAIL_SIGNIN,PASSWORD_RESET:i.A.PASSWORD_RESET,RECOVER_EMAIL:i.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:i.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:i.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:i.A.VERIFY_EMAIL}},EmailAuthProvider:i.L,FacebookAuthProvider:i.M,GithubAuthProvider:i.Q,GoogleAuthProvider:i.N,OAuthProvider:i.T,SAMLAuthProvider:i.U,PhoneAuthProvider:F,PhoneMultiFactorGenerator:i.m,RecaptchaVerifier:class{constructor(e,t,n=r.Z.app()){var s;$(null===(s=n.options)||void 0===s?void 0:s.apiKey,"invalid-api-key",{appName:n.name}),this._delegate=new i.R(e,t,n.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}},TwitterAuthProvider:i.V,Auth:L,AuthCredential:i.G,Error:s.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),V.registerVersion("@firebase/auth-compat","0.2.3")},6334:(e,t,n)=>{"use strict";n.d(t,{U2:()=>r.U2,N8:()=>r.N8,jM:()=>r.jM,VF:()=>r.VF,iH:()=>r.iH,Od:()=>r.Od,t8:()=>r.t8,Vx:()=>r.Vx});var r=n(7211)},2842:function(e,t){!function(e){"use strict";function t(e){return Array.prototype.slice.call(e)}function n(e){return new Promise(function(t,n){e.onsuccess=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function r(e,t,r){var i,s=new Promise(function(s,o){n(i=e[t].apply(e,r)).then(s,o)});return s.request=i,s}function i(e,t,n){var i=r(e,t,n);return i.then(function(e){if(e)return new u(e,i.request)})}function s(e,t,n){n.forEach(function(n){Object.defineProperty(e.prototype,n,{get:function(){return this[t][n]},set:function(e){this[t][n]=e}})})}function o(e,t,n,i){i.forEach(function(i){i in n.prototype&&(e.prototype[i]=function(){return r(this[t],i,arguments)})})}function a(e,t,n,r){r.forEach(function(r){r in n.prototype&&(e.prototype[r]=function(){return this[t][r].apply(this[t],arguments)})})}function c(e,t,n,r){r.forEach(function(r){r in n.prototype&&(e.prototype[r]=function(){return i(this[t],r,arguments)})})}function l(e){this._index=e}function u(e,t){this._cursor=e,this._request=t}function h(e){this._store=e}function d(e){this._tx=e,this.complete=new Promise(function(t,n){e.oncomplete=function(){t()},e.onerror=function(){n(e.error)},e.onabort=function(){n(e.error)}})}function p(e,t,n){this._db=e,this.oldVersion=t,this.transaction=new d(n)}function f(e){this._db=e}s(l,"_index",["name","keyPath","multiEntry","unique"]),o(l,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),c(l,"_index",IDBIndex,["openCursor","openKeyCursor"]),s(u,"_cursor",["direction","key","primaryKey","value"]),o(u,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(e){e in IDBCursor.prototype&&(u.prototype[e]=function(){var t=this,r=arguments;return Promise.resolve().then(function(){return t._cursor[e].apply(t._cursor,r),n(t._request).then(function(e){if(e)return new u(e,t._request)})})})}),h.prototype.createIndex=function(){return new l(this._store.createIndex.apply(this._store,arguments))},h.prototype.index=function(){return new l(this._store.index.apply(this._store,arguments))},s(h,"_store",["name","keyPath","indexNames","autoIncrement"]),o(h,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),c(h,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),a(h,"_store",IDBObjectStore,["deleteIndex"]),d.prototype.objectStore=function(){return new h(this._tx.objectStore.apply(this._tx,arguments))},s(d,"_tx",["objectStoreNames","mode"]),a(d,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new h(this._db.createObjectStore.apply(this._db,arguments))},s(p,"_db",["name","version","objectStoreNames"]),a(p,"_db",IDBDatabase,["deleteObjectStore","close"]),f.prototype.transaction=function(){return new d(this._db.transaction.apply(this._db,arguments))},s(f,"_db",["name","version","objectStoreNames"]),a(f,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(e){[h,l].forEach(function(n){e in n.prototype&&(n.prototype[e.replace("open","iterate")]=function(){var n=t(arguments),r=n[n.length-1],i=this._store||this._index,s=i[e].apply(i,n.slice(0,-1));s.onsuccess=function(){r(s.result)}})})}),[l,h].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var n=this,r=[];return new Promise(function(i){n.iterateCursor(e,function(e){e?(r.push(e.value),void 0===t||r.length!=t?e.continue():i(r)):i(r)})})})}),e.openDb=function(e,t,n){var i=r(indexedDB,"open",[e,t]),s=i.request;return s&&(s.onupgradeneeded=function(e){n&&n(new p(s.result,e.oldVersion,s.transaction))}),i.then(function(e){return new f(e)})},e.deleteDb=function(e){return r(indexedDB,"deleteDatabase",[e])},Object.defineProperty(e,"__esModule",{value:!0})}(t)},9923:(e,t,n)=>{"use strict";n.d(t,{X:()=>s});var r=n(6006),i=n(7078);class s extends r.xQ{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return t&&!t.closed&&e.next(this._value),t}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new i.N;return this._value}next(e){super.next(this._value=e)}}},3948:(e,t,n)=>{"use strict";n.d(t,{y:()=>l});var r=n(8744),i=n(9754),s=n(5669),o=n(7631),a=n(7846),c=n(6633);let l=(()=>{class e{constructor(e){this._isScalar=!1,e&&(this._subscribe=e)}lift(t){const n=new e;return n.source=this,n.operator=t,n}subscribe(e,t,n){const{operator:o}=this,a=function(e,t,n){if(e){if(e instanceof r.L)return e;if(e[i.b])return e[i.b]()}return e||t||n?new r.L(e,t,n):new r.L(s.c)}(e,t,n);if(a.add(o?o.call(a,this.source):this.source||c.v.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),c.v.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(e){try{return this._subscribe(e)}catch(t){c.v.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),function(e){for(;e;){const{closed:t,destination:n,isStopped:i}=e;if(t||i)return!1;e=n&&n instanceof r.L?n:null}return!0}(e)?e.error(t):console.warn(t)}}forEach(e,t){return new(t=u(t))((t,n)=>{let r;r=this.subscribe(t=>{try{e(t)}catch(i){n(i),r&&r.unsubscribe()}},n,t)})}_subscribe(e){const{source:t}=this;return t&&t.subscribe(e)}[o.L](){return this}pipe(...e){return 0===e.length?this:(0===(t=e).length?a.y:1===t.length?t[0]:function(e){return t.reduce((e,t)=>t(e),e)})(this);var t}toPromise(e){return new(e=u(e))((e,t)=>{let n;this.subscribe(e=>n=e,e=>t(e),()=>e(n))})}}return e.create=t=>new e(t),e})();function u(e){if(e||(e=c.v.Promise||Promise),!e)throw new Error("no Promise impl found");return e}},5669:(e,t,n)=>{"use strict";n.d(t,{c:()=>s});var r=n(6633),i=n(3863);const s={closed:!0,next(e){},error(e){if(r.v.useDeprecatedSynchronousErrorHandling)throw e;(0,i.z)(e)},complete(){}}},2167:(e,t,n)=>{"use strict";n.d(t,{L:()=>i});var r=n(8744);class i extends r.L{notifyNext(e,t,n,r,i){this.destination.next(t)}notifyError(e,t){this.destination.error(e)}notifyComplete(e){this.destination.complete()}}},6006:(e,t,n)=>{"use strict";n.d(t,{Yc:()=>l,xQ:()=>u});var r=n(3948),i=n(8744),s=n(9734),o=n(7078),a=n(2417),c=n(9754);class l extends i.L{constructor(e){super(e),this.destination=e}}let u=(()=>{class e extends r.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[c.b](){return new l(this)}lift(e){const t=new h(this,this);return t.operator=e,t}next(e){if(this.closed)throw new o.N;if(!this.isStopped){const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].next(e)}}error(e){if(this.closed)throw new o.N;this.hasError=!0,this.thrownError=e,this.isStopped=!0;const{observers:t}=this,n=t.length,r=t.slice();for(let i=0;i<n;i++)r[i].error(e);this.observers.length=0}complete(){if(this.closed)throw new o.N;this.isStopped=!0;const{observers:e}=this,t=e.length,n=e.slice();for(let r=0;r<t;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(e){if(this.closed)throw new o.N;return super._trySubscribe(e)}_subscribe(e){if(this.closed)throw new o.N;return this.hasError?(e.error(this.thrownError),s.w.EMPTY):this.isStopped?(e.complete(),s.w.EMPTY):(this.observers.push(e),new a.W(this,e))}asObservable(){const e=new r.y;return e.source=this,e}}return e.create=(e,t)=>new h(e,t),e})();class h extends u{constructor(e,t){super(),this.destination=e,this.source=t}next(e){const{destination:t}=this;t&&t.next&&t.next(e)}error(e){const{destination:t}=this;t&&t.error&&this.destination.error(e)}complete(){const{destination:e}=this;e&&e.complete&&this.destination.complete()}_subscribe(e){const{source:t}=this;return t?this.source.subscribe(e):s.w.EMPTY}}},2417:(e,t,n)=>{"use strict";n.d(t,{W:()=>i});var r=n(9734);class i extends r.w{constructor(e,t){super(),this.subject=e,this.subscriber=t,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const e=this.subject,t=e.observers;if(this.subject=null,!t||0===t.length||e.isStopped||e.closed)return;const n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},8744:(e,t,n)=>{"use strict";n.d(t,{L:()=>l});var r=n(3673),i=n(5669),s=n(9734),o=n(9754),a=n(6633),c=n(3863);class l extends s.w{constructor(e,t,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.c;break;case 1:if(!e){this.destination=i.c;break}if("object"==typeof e){e instanceof l?(this.syncErrorThrowable=e.syncErrorThrowable,this.destination=e,e.add(this)):(this.syncErrorThrowable=!0,this.destination=new u(this,e));break}default:this.syncErrorThrowable=!0,this.destination=new u(this,e,t,n)}}[o.b](){return this}static create(e,t,n){const r=new l(e,t,n);return r.syncErrorThrowable=!1,r}next(e){this.isStopped||this._next(e)}error(e){this.isStopped||(this.isStopped=!0,this._error(e))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(e){this.destination.next(e)}_error(e){this.destination.error(e),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:e}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this}}class u extends l{constructor(e,t,n,s){let o;super(),this._parentSubscriber=e;let a=this;(0,r.m)(t)?o=t:t&&(o=t.next,n=t.error,s=t.complete,t!==i.c&&(a=Object.create(t),(0,r.m)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=o,this._error=n,this._complete=s}next(e){if(!this.isStopped&&this._next){const{_parentSubscriber:t}=this;a.v.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}}error(e){if(!this.isStopped){const{_parentSubscriber:t}=this,{useDeprecatedSynchronousErrorHandling:n}=a.v;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):(0,c.z)(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;(0,c.z)(e)}}}complete(){if(!this.isStopped){const{_parentSubscriber:e}=this;if(this._complete){const t=()=>this._complete.call(this._context);a.v.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,t),this.unsubscribe()):(this.__tryOrUnsub(t),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(e,t){try{e.call(this._context,t)}catch(n){if(this.unsubscribe(),a.v.useDeprecatedSynchronousErrorHandling)throw n;(0,c.z)(n)}}__tryOrSetError(e,t,n){if(!a.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(r){return a.v.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=r,e.syncErrorThrown=!0,!0):((0,c.z)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:e}=this;this._context=null,this._parentSubscriber=null,e.unsubscribe()}}},9734:(e,t,n)=>{"use strict";n.d(t,{w:()=>a});var r=n(9622),i=n(153),s=n(3673);const o=(()=>{function e(e){return Error.call(this),this.message=e?`${e.length} errors occurred during unsubscription:\n${e.map((e,t)=>`${t+1}) ${e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e})();class a{constructor(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:t,_ctorUnsubscribe:n,_unsubscribe:c,_subscriptions:u}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,t instanceof a)t.remove(this);else if(null!==t)for(let r=0;r<t.length;++r)t[r].remove(this);if((0,s.m)(c)){n&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof o?l(h.errors):[h]}}if((0,r.k)(u)){let t=-1,n=u.length;for(;++t<n;){const n=u[t];if((0,i.K)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof o?e=e.concat(l(h.errors)):e.push(h)}}}if(e)throw new o(e)}add(e){let t=e;if(!e)return a.EMPTY;switch(typeof e){case"function":t=new a(e);case"object":if(t===this||t.closed||"function"!=typeof t.unsubscribe)return t;if(this.closed)return t.unsubscribe(),t;if(!(t instanceof a)){const e=t;t=new a,t._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:n}=t;if(null===n)t._parentOrParents=this;else if(n instanceof a){if(n===this)return t;t._parentOrParents=[n,this]}else{if(-1!==n.indexOf(this))return t;n.push(this)}const r=this._subscriptions;return null===r?this._subscriptions=[t]:r.push(t),t}remove(e){const t=this._subscriptions;if(t){const n=t.indexOf(e);-1!==n&&t.splice(n,1)}}}var c;function l(e){return e.reduce((e,t)=>e.concat(t instanceof o?t.errors:t),[])}a.EMPTY=((c=new a).closed=!0,c)},6633:(e,t,n)=>{"use strict";n.d(t,{v:()=>i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){const e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},6790:(e,t,n)=>{"use strict";n.d(t,{IY:()=>o,Ds:()=>a,ft:()=>c});var r=n(8744),i=n(3948),s=n(7040);class o extends r.L{constructor(e){super(),this.parent=e}_next(e){this.parent.notifyNext(e)}_error(e){this.parent.notifyError(e),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.L{notifyNext(e){this.destination.next(e)}notifyError(e){this.destination.error(e)}notifyComplete(){this.destination.complete()}}function c(e,t){if(t.closed)return;if(e instanceof i.y)return e.subscribe(t);let n;try{n=(0,s.s)(e)(t)}catch(r){t.error(r)}return n}},955:(e,t,n)=>{"use strict";n.d(t,{c:()=>a,N:()=>c});var r=n(6006),i=n(3948),s=n(9734),o=n(5290);class a extends i.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._refCount=0,this._isComplete=!1}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let e=this._connection;return e||(this._isComplete=!1,e=this._connection=new s.w,e.add(this.source.subscribe(new l(this.getSubject(),this))),e.closed&&(this._connection=null,e=s.w.EMPTY)),e}refCount(){return(0,o.x)()(this)}}const c=(()=>{const e=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}})();class l extends r.Yc{constructor(e,t){super(e),this.connectable=t}_error(e){this._unsubscribe(),super._error(e)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const e=this.connectable;if(e){this.connectable=null;const t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}}}},8895:(e,t,n)=>{"use strict";n.d(t,{z:()=>s});var r=n(267),i=n(4540);function s(...e){return(0,i.J)(1)((0,r.of)(...e))}},3974:(e,t,n)=>{"use strict";n.d(t,{E:()=>i,c:()=>s});var r=n(3948);const i=new r.y(e=>e.complete());function s(e){return e?function(e){return new r.y(t=>e.schedule(()=>t.complete()))}(e):i}},2850:(e,t,n)=>{"use strict";n.d(t,{D:()=>h});var r=n(3948),i=n(7040),s=n(9734),o=n(7631),a=n(9112),c=n(5389),l=n(8253),u=n(1292);function h(e,t){return t?function(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[o.L]}(e))return function(e,t){return new r.y(n=>{const r=new s.w;return r.add(t.schedule(()=>{const i=e[o.L]();r.add(i.subscribe({next(e){r.add(t.schedule(()=>n.next(e)))},error(e){r.add(t.schedule(()=>n.error(e)))},complete(){r.add(t.schedule(()=>n.complete()))}}))})),r})}(e,t);if((0,l.t)(e))return function(e,t){return new r.y(n=>{const r=new s.w;return r.add(t.schedule(()=>e.then(e=>{r.add(t.schedule(()=>{n.next(e),r.add(t.schedule(()=>n.complete()))}))},e=>{r.add(t.schedule(()=>n.error(e)))}))),r})}(e,t);if((0,u.z)(e))return(0,a.r)(e,t);if(function(e){return e&&"function"==typeof e[c.hZ]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new r.y(n=>{const r=new s.w;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(t.schedule(()=>{i=e[c.hZ](),r.add(t.schedule(function(){if(n.closed)return;let e,t;try{const n=i.next();e=n.value,t=n.done}catch(r){return void n.error(r)}t?n.complete():(n.next(e),this.schedule())}))})),r})}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}(e,t):e instanceof r.y?e:new r.y((0,i.s)(e))}},6431:(e,t,n)=>{"use strict";n.d(t,{n:()=>o});var r=n(3948),i=n(4537),s=n(9112);function o(e,t){return t?(0,s.r)(e,t):new r.y((0,i.V)(e))}},4958:(e,t,n)=>{"use strict";n.d(t,{R:()=>a});var r=n(3948),i=n(9622),s=n(3673),o=n(8561);function a(e,t,n,l){return(0,s.m)(n)&&(l=n,n=void 0),l?a(e,t,n).pipe((0,o.U)(e=>(0,i.k)(e)?l(...e):l(e))):new r.y(r=>{c(e,t,function(e){r.next(arguments.length>1?Array.prototype.slice.call(arguments):e)},r,n)})}function c(e,t,n,r,i){let s;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(e)){const r=e;e.addEventListener(t,n,i),s=()=>r.removeEventListener(t,n,i)}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(e)){const r=e;e.on(t,n),s=()=>r.off(t,n)}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(e)){const r=e;e.addListener(t,n),s=()=>r.removeListener(t,n)}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(let s=0,o=e.length;s<o;s++)c(e[s],t,n,r,i)}r.add(s)}},636:(e,t,n)=>{"use strict";n.d(t,{T:()=>a});var r=n(3948),i=n(7204),s=n(4540),o=n(6431);function a(...e){let t=Number.POSITIVE_INFINITY,n=null,a=e[e.length-1];return(0,i.K)(a)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(t=e.pop())):"number"==typeof a&&(t=e.pop()),null===n&&1===e.length&&e[0]instanceof r.y?e[0]:(0,s.J)(t)((0,o.n)(e,n))}},267:(e,t,n)=>{"use strict";n.d(t,{of:()=>o});var r=n(7204),i=n(6431),s=n(9112);function o(...e){let t=e[e.length-1];return(0,r.K)(t)?(e.pop(),(0,s.r)(e,t)):(0,i.n)(e)}},395:(e,t,n)=>{"use strict";n.d(t,{d:()=>i});var r=n(8744);function i(e=null){return t=>t.lift(new s(e))}class s{constructor(e){this.defaultValue=e}call(e,t){return t.subscribe(new o(e,this.defaultValue))}}class o extends r.L{constructor(e,t){super(e),this.defaultValue=t,this.isEmpty=!0}_next(e){this.isEmpty=!1,this.destination.next(e)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}},7689:(e,t,n)=>{"use strict";n.d(t,{x:()=>i});var r=n(8744);function i(e,t){return n=>n.lift(new s(e,t))}class s{constructor(e,t){this.compare=e,this.keySelector=t}call(e,t){return t.subscribe(new o(e,this.compare,this.keySelector))}}class o extends r.L{constructor(e,t,n){super(e),this.keySelector=n,this.hasKey=!1,"function"==typeof t&&(this.compare=t)}compare(e,t){return e===t}_next(e){let t;try{const{keySelector:n}=this;t=n?n(e):e}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:e}=this;n=e(this.key,t)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=t,this.destination.next(e))}}},3305:(e,t,n)=>{"use strict";n.d(t,{h:()=>i});var r=n(8744);function i(e,t){return function(n){return n.lift(new s(e,t))}}class s{constructor(e,t){this.predicate=e,this.thisArg=t}call(e,t){return t.subscribe(new o(e,this.predicate,this.thisArg))}}class o extends r.L{constructor(e,t,n){super(e),this.predicate=t,this.thisArg=n,this.count=0}_next(e){let t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}t&&this.destination.next(e)}}},7813:(e,t,n)=>{"use strict";n.d(t,{x:()=>s});var r=n(8744),i=n(9734);function s(e){return t=>t.lift(new o(e))}class o{constructor(e){this.callback=e}call(e,t){return t.subscribe(new a(e,this.callback))}}class a extends r.L{constructor(e,t){super(e),this.add(new i.w(t))}}},3987:(e,t,n)=>{"use strict";n.d(t,{P:()=>l});var r=n(3066),i=n(3305),s=n(9917),o=n(395),a=n(3369),c=n(7846);function l(e,t){const n=arguments.length>=2;return l=>l.pipe(e?(0,i.h)((t,n)=>e(t,n,l)):c.y,(0,s.q)(1),n?(0,o.d)(t):(0,a.T)(()=>new r.K))}},8561:(e,t,n)=>{"use strict";n.d(t,{U:()=>i});var r=n(8744);function i(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new s(e,t))}}class s{constructor(e,t){this.project=e,this.thisArg=t}call(e,t){return t.subscribe(new o(e,this.project,this.thisArg))}}class o extends r.L{constructor(e,t,n){super(e),this.project=t,this.count=0,this.thisArg=n||this}_next(e){let t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(t)}}},4540:(e,t,n)=>{"use strict";n.d(t,{J:()=>s});var r=n(6513),i=n(7846);function s(e=Number.POSITIVE_INFINITY){return(0,r.zg)(i.y,e)}},6513:(e,t,n)=>{"use strict";n.d(t,{zg:()=>o});var r=n(8561),i=n(2850),s=n(6790);function o(e,t,n=Number.POSITIVE_INFINITY){return"function"==typeof t?s=>s.pipe(o((n,s)=>(0,i.D)(e(n,s)).pipe((0,r.U)((e,r)=>t(n,e,s,r))),n)):("number"==typeof t&&(n=t),t=>t.lift(new a(e,n)))}class a{constructor(e,t=Number.POSITIVE_INFINITY){this.project=e,this.concurrent=t}call(e,t){return t.subscribe(new c(e,this.project,this.concurrent))}}class c extends s.Ds{constructor(e,t,n=Number.POSITIVE_INFINITY){super(e),this.project=t,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)}_tryNext(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(t)}_innerSub(e){const t=new s.IY(this),n=this.destination;n.add(t);const r=(0,s.ft)(e,t);r!==t&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(e){this.destination.next(e)}notifyComplete(){const e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},7338:(e,t,n)=>{"use strict";n.d(t,{ht:()=>u,QV:()=>c});var r=n(8744),i=n(3974),s=n(267),o=n(3948);class a{constructor(e,t,n){this.kind=e,this.value=t,this.error=n,this.hasValue="N"===e}observe(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}}do(e,t,n){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return n&&n()}}accept(e,t,n){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,n)}toObservable(){switch(this.kind){case"N":return(0,s.of)(this.value);case"E":return e=this.error,new o.y(t=>t.error(e));case"C":return(0,i.c)()}var e;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new a("N",e):a.undefinedValueNotification}static createError(e){return new a("E",void 0,e)}static createComplete(){return a.completeNotification}}function c(e,t=0){return function(n){return n.lift(new l(e,t))}}a.completeNotification=new a("C"),a.undefinedValueNotification=new a("N",void 0);class l{constructor(e,t=0){this.scheduler=e,this.delay=t}call(e,t){return t.subscribe(new u(e,this.scheduler,this.delay))}}class u extends r.L{constructor(e,t,n=0){super(e),this.scheduler=t,this.delay=n}static dispatch(e){const{notification:t,destination:n}=e;t.observe(n),this.unsubscribe()}scheduleMessage(e){this.destination.add(this.scheduler.schedule(u.dispatch,this.delay,new h(e,this.destination)))}_next(e){this.scheduleMessage(a.createNext(e))}_error(e){this.scheduleMessage(a.createError(e)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(e,t){this.notification=e,this.destination=t}}},5290:(e,t,n)=>{"use strict";n.d(t,{x:()=>i});var r=n(8744);function i(){return function(e){return e.lift(new s(e))}}class s{constructor(e){this.connectable=e}call(e,t){const{connectable:n}=this;n._refCount++;const r=new o(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class o extends r.L{constructor(e,t){super(e),this.connectable=t}_unsubscribe(){const{connectable:e}=this;if(!e)return void(this.connection=null);this.connectable=null;const t=e._refCount;if(t<=0)return void(this.connection=null);if(e._refCount=t-1,t>1)return void(this.connection=null);const{connection:n}=this,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},1310:(e,t,n)=>{"use strict";n.d(t,{R:()=>i});var r=n(8744);function i(e,t){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new s(e,t,n))}}class s{constructor(e,t,n=!1){this.accumulator=e,this.seed=t,this.hasSeed=n}call(e,t){return t.subscribe(new o(e,this.accumulator,this.seed,this.hasSeed))}}class o extends r.L{constructor(e,t,n,r){super(e),this.accumulator=t,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(e){this.hasSeed=!0,this._seed=e}_next(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)}_tryNext(e){const t=this.index++;let n;try{n=this.accumulator(this.seed,e,t)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}},2564:(e,t,n)=>{"use strict";n.d(t,{B:()=>a});var r=n(955),i=n(5290),s=n(6006);function o(){return new s.xQ}function a(){return e=>{return(0,i.x)()((t=o,function(e){let n;n="function"==typeof t?t:function(){return t};const i=Object.create(e,r.N);return i.source=e,i.subjectFactory=n,i})(e));var t}}},3543:(e,t,n)=>{"use strict";n.d(t,{O:()=>s});var r=n(8895),i=n(7204);function s(...e){const t=e[e.length-1];return(0,i.K)(t)?(e.pop(),n=>(0,r.z)(e,n,t)):t=>(0,r.z)(e,t)}},6515:(e,t,n)=>{"use strict";n.d(t,{R:()=>f});var r=n(3948);let i=1;const s=Promise.resolve(),o={};function a(e){return e in o&&(delete o[e],!0)}const c={setImmediate(e){const t=i++;return o[t]=!0,s.then(()=>a(t)&&e()),t},clearImmediate(e){a(e)}};var l=n(5464),u=n(708);const h=new class extends u.v{flush(e){this.active=!0,this.scheduled=void 0;const{actions:t}=this;let n,r=-1,i=t.length;e=e||t.shift();do{if(n=e.execute(e.state,e.delay))break}while(++r<i&&(e=t.shift()));if(this.active=!1,n){for(;++r<i&&(e=t.shift());)e.unsubscribe();throw n}}}(class extends l.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}requestAsyncId(e,t,n=0){return null!==n&&n>0?super.requestAsyncId(e,t,n):(e.actions.push(this),e.scheduled||(e.scheduled=c.setImmediate(e.flush.bind(e,null))))}recycleAsyncId(e,t,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(e,t,n);0===e.actions.length&&(c.clearImmediate(t),e.scheduled=void 0)}});var d=n(9622);class p extends r.y{constructor(e,t=0,n=h){var r;super(),this.source=e,this.delayTime=t,this.scheduler=n,((0,d.k)(r=t)||!(r-parseFloat(r)+1>=0)||t<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=h)}static create(e,t=0,n=h){return new p(e,t,n)}static dispatch(e){const{source:t,subscriber:n}=e;return this.add(t.subscribe(n))}_subscribe(e){return this.scheduler.schedule(p.dispatch,this.delayTime,{source:this.source,subscriber:e})}}function f(e,t=0){return function(n){return n.lift(new g(e,t))}}class g{constructor(e,t){this.scheduler=e,this.delay=t}call(e,t){return new p(t,this.delay,this.scheduler).subscribe(e)}}},2812:(e,t,n)=>{"use strict";n.d(t,{w:()=>o});var r=n(8561),i=n(2850),s=n(6790);function o(e,t){return"function"==typeof t?n=>n.pipe(o((n,s)=>(0,i.D)(e(n,s)).pipe((0,r.U)((e,r)=>t(n,e,s,r))))):t=>t.lift(new a(e))}class a{constructor(e){this.project=e}call(e,t){return t.subscribe(new c(e,this.project))}}class c extends s.Ds{constructor(e,t){super(e),this.project=t,this.index=0}_next(e){let t;const n=this.index++;try{t=this.project(e,n)}catch(r){return void this.destination.error(r)}this._innerSub(t)}_innerSub(e){const t=this.innerSubscription;t&&t.unsubscribe();const n=new s.IY(this),r=this.destination;r.add(n),this.innerSubscription=(0,s.ft)(e,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:e}=this;e&&!e.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(e){this.destination.next(e)}}},9917:(e,t,n)=>{"use strict";n.d(t,{q:()=>o});var r=n(8744),i=n(9862),s=n(3974);function o(e){return t=>0===e?(0,s.c)():t.lift(new a(e))}class a{constructor(e){if(this.total=e,this.total<0)throw new i.W}call(e,t){return t.subscribe(new c(e,this.total))}}class c extends r.L{constructor(e,t){super(e),this.total=t,this.count=0}_next(e){const t=this.total,n=++this.count;n<=t&&(this.destination.next(e),n===t&&(this.destination.complete(),this.unsubscribe()))}}},6286:(e,t,n)=>{"use strict";n.d(t,{b:()=>o});var r=n(8744);function i(){}var s=n(3673);function o(e,t,n){return function(r){return r.lift(new a(e,t,n))}}class a{constructor(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}call(e,t){return t.subscribe(new c(e,this.nextOrObserver,this.error,this.complete))}}class c extends r.L{constructor(e,t,n,r){super(e),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,(0,s.m)(t)?(this._context=this,this._tapNext=t):t&&(this._context=t,this._tapNext=t.next||i,this._tapError=t.error||i,this._tapComplete=t.complete||i)}_next(e){try{this._tapNext.call(this._context,e)}catch(t){return void this.destination.error(t)}this.destination.next(e)}_error(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)}_complete(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()}}},3369:(e,t,n)=>{"use strict";n.d(t,{T:()=>s});var r=n(3066),i=n(8744);function s(e=c){return t=>t.lift(new o(e))}class o{constructor(e){this.errorFactory=e}call(e,t){return t.subscribe(new a(e,this.errorFactory))}}class a extends i.L{constructor(e,t){super(e),this.errorFactory=t,this.hasValue=!1}_next(e){this.hasValue=!0,this.destination.next(e)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(e){t=e}this.destination.error(t)}}}function c(){return new r.K}},9112:(e,t,n)=>{"use strict";n.d(t,{r:()=>s});var r=n(3948),i=n(9734);function s(e,t){return new r.y(n=>{const r=new i.w;let s=0;return r.add(t.schedule(function(){s!==e.length?(n.next(e[s++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},5464:(e,t,n)=>{"use strict";n.d(t,{o:()=>s});var r=n(9734);class i extends r.w{constructor(e,t){super()}schedule(e,t=0){return this}}class s extends i{constructor(e,t){super(e,t),this.scheduler=e,this.work=t,this.pending=!1}schedule(e,t=0){if(this.closed)return this;this.state=e;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this}requestAsyncId(e,t,n=0){return setInterval(e.flush.bind(e,this),n)}recycleAsyncId(e,t,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)}execute(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(e,t){let n,r=!1;try{this.work(e)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null}}},708:(e,t,n)=>{"use strict";n.d(t,{v:()=>i});let r=(()=>{class e{constructor(t,n=e.now){this.SchedulerAction=t,this.now=n}schedule(e,t=0,n){return new this.SchedulerAction(this,e).schedule(n,t)}}return e.now=()=>Date.now(),e})();class i extends r{constructor(e,t=r.now){super(e,()=>i.delegate&&i.delegate!==this?i.delegate.now():t()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(e,t=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(e,t,n):super.schedule(e,t,n)}flush(e){const{actions:t}=this;if(this.active)return void t.push(e);let n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}}},8846:(e,t,n)=>{"use strict";n.d(t,{z:()=>i,P:()=>s});var r=n(5464);const i=new(n(708).v)(r.o),s=i},6511:(e,t,n)=>{"use strict";n.d(t,{c:()=>o,N:()=>s});var r=n(5464),i=n(708);const s=new class extends i.v{}(class extends r.o{constructor(e,t){super(e,t),this.scheduler=e,this.work=t}schedule(e,t=0){return t>0?super.schedule(e,t):(this.delay=t,this.state=e,this.scheduler.flush(this),this)}execute(e,t){return t>0||this.closed?super.execute(e,t):this._execute(e,t)}requestAsyncId(e,t,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(e,t,n):e.flush(this)}}),o=s},5389:(e,t,n)=>{"use strict";n.d(t,{hZ:()=>r});const r="function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"},7631:(e,t,n)=>{"use strict";n.d(t,{L:()=>r});const r="function"==typeof Symbol&&Symbol.observable||"@@observable"},9754:(e,t,n)=>{"use strict";n.d(t,{b:()=>r});const r="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},9862:(e,t,n)=>{"use strict";n.d(t,{W:()=>r});const r=(()=>{function e(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return e.prototype=Object.create(Error.prototype),e})()},3066:(e,t,n)=>{"use strict";n.d(t,{K:()=>r});const r=(()=>{function e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return e.prototype=Object.create(Error.prototype),e})()},7078:(e,t,n)=>{"use strict";n.d(t,{N:()=>r});const r=(()=>{function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e})()},3863:(e,t,n)=>{"use strict";function r(e){setTimeout(()=>{throw e},0)}n.d(t,{z:()=>r})},7846:(e,t,n)=>{"use strict";function r(e){return e}n.d(t,{y:()=>r})},9622:(e,t,n)=>{"use strict";n.d(t,{k:()=>r});const r=Array.isArray||(e=>e&&"number"==typeof e.length)},1292:(e,t,n)=>{"use strict";n.d(t,{z:()=>r});const r=e=>e&&"number"==typeof e.length&&"function"!=typeof e},3673:(e,t,n)=>{"use strict";function r(e){return"function"==typeof e}n.d(t,{m:()=>r})},153:(e,t,n)=>{"use strict";function r(e){return null!==e&&"object"==typeof e}n.d(t,{K:()=>r})},8253:(e,t,n)=>{"use strict";function r(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}n.d(t,{t:()=>r})},7204:(e,t,n)=>{"use strict";function r(e){return e&&"function"==typeof e.schedule}n.d(t,{K:()=>r})},7040:(e,t,n)=>{"use strict";n.d(t,{s:()=>u});var r=n(4537),i=n(3863),s=n(5389),o=n(7631),a=n(1292),c=n(8253),l=n(153);const u=e=>{if(e&&"function"==typeof e[o.L])return u=e,e=>{const t=u[o.L]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if((0,a.z)(e))return(0,r.V)(e);if((0,c.t)(e))return n=e,e=>(n.then(t=>{e.closed||(e.next(t),e.complete())},t=>e.error(t)).then(null,i.z),e);if(e&&"function"==typeof e[s.hZ])return t=e,e=>{const n=t[s.hZ]();for(;;){let t;try{t=n.next()}catch(r){return e.error(r),e}if(t.done){e.complete();break}if(e.next(t.value),e.closed)break}return"function"==typeof n.return&&e.add(()=>{n.return&&n.return()}),e};{const t=(0,l.K)(e)?"an invalid object":`'${e}'`;throw new TypeError(`You provided ${t} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var t,n,u}},4537:(e,t,n)=>{"use strict";n.d(t,{V:()=>r});const r=e=>t=>{for(let n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}},5500:(e,t,n)=>{"use strict";n.d(t,{D:()=>a});var r=n(8744);class i extends r.L{constructor(e,t,n){super(),this.parent=e,this.outerValue=t,this.outerIndex=n,this.index=0}_next(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)}_error(e){this.parent.notifyError(e,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var s=n(7040),o=n(3948);function a(e,t,n,r,a=new i(e,n,r)){if(!a.closed)return t instanceof o.y?t.subscribe(a):(0,s.s)(t)(a)}},6849:(e,t,n)=>{"use strict";n.d(t,{e:()=>o});var r=n(1855),i=n(2741),s=n(8620);let o=(()=>{class e{constructor(e,t){this.alertC=e,this.toastC=t}errorSesionAlert(){return(0,r.mG)(this,void 0,void 0,function*(){const e=yield this.alertC.create({header:"Acceso Denegado!!!",backdropDismiss:!1,message:"Registrese o inicie sesi\xf3n",buttons:["OK"]});yield e.present()})}errorSubirNoticiaAlert(){return(0,r.mG)(this,void 0,void 0,function*(){const e=yield this.alertC.create({header:"Error",subHeader:"Crear Noticia",backdropDismiss:!1,message:"Agregue una imagen por favor",buttons:["OK"]});yield e.present()})}resetPassAlert(){return(0,r.mG)(this,void 0,void 0,function*(){const e=yield this.alertC.create({backdropDismiss:!1,message:"Se envio correo para restablecer la contrase\xf1a",buttons:["OK"]});yield e.present()})}updateNotiAlert(){return(0,r.mG)(this,void 0,void 0,function*(){const e=yield this.alertC.create({header:"Felicidades!!!",backdropDismiss:!1,message:"Se actualizo los datos de su Noticia correctamente",buttons:["OK"]});yield e.present()})}updateUserAlert(){return(0,r.mG)(this,void 0,void 0,function*(){const e=yield this.alertC.create({header:"Felicidades!!!",backdropDismiss:!1,message:"Se actualizo los datos de su perfil",buttons:["OK"]});yield e.present()})}notFound(e){return(0,r.mG)(this,void 0,void 0,function*(){(yield this.toastC.create({message:e,duration:1e3,color:"danger"})).present()})}noExisteCorreo(){return(0,r.mG)(this,void 0,void 0,function*(){(yield this.toastC.create({message:"Correo no registrado",duration:1e3,color:"danger"})).present()})}existeCorreo(){return(0,r.mG)(this,void 0,void 0,function*(){(yield this.toastC.create({message:"Correo ya registrado",duration:1e3,color:"danger"})).present()})}errorLogin(){return(0,r.mG)(this,void 0,void 0,function*(){(yield this.toastC.create({message:"Correo o contrase\xf1a incorrectos",duration:1e3,color:"danger"})).present()})}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(s.Br),i.LFG(s.yF))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},6221:(e,t,n)=>{"use strict";n.d(t,{e:()=>p});var r=n(1855),i=n(4480),s=n(267),o=n(2812),a=n(6334),c=n(2741),l=n(4259),u=n(9805),h=n(4587),d=n(6849);let p=(()=>{class e{constructor(e,t,n,r){this.afAuth=e,this.afs=t,this.db=n,this.alertasSvc=r,this.user$=this.afAuth.authState.pipe((0,o.w)(e=>e?this.afs.doc(`users/${e.uid}`).valueChanges():(0,s.of)(null)))}resetPassword(e){return(0,r.mG)(this,void 0,void 0,function*(){try{return this.afAuth.sendPasswordResetEmail(e)}catch(t){console.log("Error->",t),this.alertasSvc.noExisteCorreo()}})}loginGoogle(){return(0,r.mG)(this,void 0,void 0,function*(){try{const{user:e}=yield this.afAuth.signInWithPopup(new i.hJ);return this.updateUserData(e),e}catch(e){console.log("Error->",e)}})}register(e,t){return(0,r.mG)(this,void 0,void 0,function*(){try{const{user:n}=yield this.afAuth.createUserWithEmailAndPassword(e,t);return yield this.sendVerifcationEmail(),n}catch(n){console.log("Error->",n),this.alertasSvc.existeCorreo()}})}login(e,t){return(0,r.mG)(this,void 0,void 0,function*(){try{const{user:n}=yield this.afAuth.signInWithEmailAndPassword(e,t);return this.updateUserData(n),n}catch(n){console.log("Error->",n),this.alertasSvc.errorLogin()}})}logout(){return(0,r.mG)(this,void 0,void 0,function*(){try{yield this.afAuth.signOut()}catch(e){console.log("Error->",e)}})}sendVerifcationEmail(){return(0,r.mG)(this,void 0,void 0,function*(){try{return(yield this.afAuth.currentUser).sendEmailVerification()}catch(e){console.log("Error->",e)}})}isEmailVerified(e){return!0===e.emailVerified}updateUserData(e){const t=this.afs.doc(`users/${e.uid}`);this.userRef=this.db.list("/Usuarios");const n=(0,a.N8)();let r="https://cdn.pixabay.com/photo/2014/06/27/16/47/person-378368_960_720.png";(0,a.jM)((0,a.iH)(n,"/Usuarios/"+e.uid),e=>{r=e.val()&&e.val().photoURL}),e.photoURL?"https://cdn.pixabay.com/photo/2014/06/27/16/47/person-378368_960_720.png"===r&&(r=e.photoURL):r="https://cdn.pixabay.com/photo/2014/06/27/16/47/person-378368_960_720.png";const i={uid:e.uid,email:e.email,emailVerified:e.emailVerified,displayName:e.displayName,photoURL:r};return this.userRef.update(e.uid,{uid:e.uid,name:e.displayName,email:e.email,emailVerified:e.emailVerified,displayName:e.displayName,photoURL:r}),t.set(i,{merge:!0})}getUserAuth(){return this.afAuth.authState}}return e.\u0275fac=function(t){return new(t||e)(c.LFG(l.zQ),c.LFG(u.ST),c.LFG(h.KQ),c.LFG(d.e))},e.\u0275prov=c.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},6729:(e,t,n)=>{"use strict";var r=n(6274),i=n(2741);class s extends r.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class o extends s{static makeCurrent(){(0,r.HT)(new o)}onAndCancel(e,t,n){return e.addEventListener(t,n,!1),()=>{e.removeEventListener(t,n,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=(c=c||document.querySelector("base"),c?c.getAttribute("href"):null);return null==t?null:function(e){a=a||document.createElement("a"),a.setAttribute("href",e);const t=a.pathname;return"/"===t.charAt(0)?t:`/${t}`}(t)}resetBaseElement(){c=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return(0,r.Mx)(document.cookie,e)}}let a,c=null;const l=new i.OlP("TRANSITION_ID"),u=[{provide:i.ip1,useFactory:function(e,t,n){return()=>{n.get(i.CZH).donePromise.then(()=>{const n=(0,r.q)();Array.prototype.slice.apply(t.querySelectorAll("style[ng-transition]")).filter(t=>t.getAttribute("ng-transition")===e).forEach(e=>n.remove(e))})}},deps:[l,r.K0,i.zs3],multi:!0}];class h{static init(){(0,i.VLi)(new h)}addToWindow(e){i.dqk.getAngularTestability=(t,n=!0)=>{const r=e.findTestabilityInTree(t,n);if(null==r)throw new Error("Could not find testability for element.");return r},i.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),i.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),i.dqk.frameworkStabilizers||(i.dqk.frameworkStabilizers=[]),i.dqk.frameworkStabilizers.push(e=>{const t=i.dqk.getAllAngularTestabilities();let n=t.length,r=!1;const s=function(t){r=r||t,n--,0==n&&e(r)};t.forEach(function(e){e.whenStable(s)})})}findTestabilityInTree(e,t,n){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:n?(0,r.q)().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let d=(()=>{class e{build(){return new XMLHttpRequest}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();const p=new i.OlP("EventManagerPlugins");let f=(()=>{class e{constructor(e,t){this._zone=t,this._eventNameToPlugin=new Map,e.forEach(e=>e.manager=this),this._plugins=e.slice().reverse()}addEventListener(e,t,n){return this._findPluginFor(t).addEventListener(e,t,n)}addGlobalEventListener(e,t,n){return this._findPluginFor(t).addGlobalEventListener(e,t,n)}getZone(){return this._zone}_findPluginFor(e){const t=this._eventNameToPlugin.get(e);if(t)return t;const n=this._plugins;for(let r=0;r<n.length;r++){const t=n[r];if(t.supports(e))return this._eventNameToPlugin.set(e,t),t}throw new Error(`No event manager plugin found for event ${e}`)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(p),i.LFG(i.R0b))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();class g{constructor(e){this._doc=e}addGlobalEventListener(e,t,n){const i=(0,r.q)().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,n)}}let m=(()=>{class e{constructor(){this._stylesSet=new Set}addStyles(e){const t=new Set;e.forEach(e=>{this._stylesSet.has(e)||(this._stylesSet.add(e),t.add(e))}),this.onStylesAdded(t)}onStylesAdded(e){}getAllStyles(){return Array.from(this._stylesSet)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})(),y=(()=>{class e extends m{constructor(e){super(),this._doc=e,this._hostNodes=new Map,this._hostNodes.set(e.head,[])}_addStylesToHost(e,t,n){e.forEach(e=>{const r=this._doc.createElement("style");r.textContent=e,n.push(t.appendChild(r))})}addHost(e){const t=[];this._addStylesToHost(this._stylesSet,e,t),this._hostNodes.set(e,t)}removeHost(e){const t=this._hostNodes.get(e);t&&t.forEach(v),this._hostNodes.delete(e)}onStylesAdded(e){this._hostNodes.forEach((t,n)=>{this._addStylesToHost(e,n,t)})}ngOnDestroy(){this._hostNodes.forEach(e=>e.forEach(v))}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(r.K0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();function v(e){(0,r.q)().remove(e)}const _={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},w=/%COMP%/g;function b(e,t,n){for(let r=0;r<t.length;r++){let i=t[r];Array.isArray(i)?b(e,i,n):(i=i.replace(w,e),n.push(i))}return n}function I(e){return t=>{if("__ngUnwrap__"===t)return e;!1===e(t)&&(t.preventDefault(),t.returnValue=!1)}}let C=(()=>{class e{constructor(e,t,n){this.eventManager=e,this.sharedStylesHost=t,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new T(e)}createRenderer(e,t){if(!e||!t)return this.defaultRenderer;switch(t.encapsulation){case i.ifc.Emulated:{let n=this.rendererByCompId.get(t.id);return n||(n=new E(this.eventManager,this.sharedStylesHost,t,this.appId),this.rendererByCompId.set(t.id,n)),n.applyToHost(e),n}case 1:case i.ifc.ShadowDom:return new S(this.eventManager,this.sharedStylesHost,e,t);default:if(!this.rendererByCompId.has(t.id)){const e=b(t.id,t.styles,[]);this.sharedStylesHost.addStyles(e),this.rendererByCompId.set(t.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(f),i.LFG(y),i.LFG(i.AFp))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();class T{constructor(e){this.eventManager=e,this.data=Object.create(null)}destroy(){}createElement(e,t){return t?document.createElementNS(_[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,n){e&&e.insertBefore(t,n)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let n="string"==typeof e?document.querySelector(e):e;if(!n)throw new Error(`The selector "${e}" did not match any elements`);return t||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,n,r){if(r){t=r+":"+t;const i=_[r];i?e.setAttributeNS(i,t,n):e.setAttribute(t,n)}else e.setAttribute(t,n)}removeAttribute(e,t,n){if(n){const r=_[n];r?e.removeAttributeNS(r,t):e.removeAttribute(`${n}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,n,r){r&(i.JOm.DashCase|i.JOm.Important)?e.style.setProperty(t,n,r&i.JOm.Important?"important":""):e.style[t]=n}removeStyle(e,t,n){n&i.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,n){e[t]=n}setValue(e,t){e.nodeValue=t}listen(e,t,n){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,I(n)):this.eventManager.addEventListener(e,t,I(n))}}class E extends T{constructor(e,t,n,r){super(e),this.component=n;const i=b(r+"-"+n.id,n.styles,[]);t.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(w,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(w,r+"-"+n.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const n=super.createElement(e,t);return super.setAttribute(n,this.contentAttr,""),n}}class S extends T{constructor(e,t,n,r){super(e),this.sharedStylesHost=t,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=b(r.id,r.styles,[]);for(let s=0;s<i.length;s++){const e=document.createElement("style");e.textContent=i[s],this.shadowRoot.appendChild(e)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,n){return super.insertBefore(this.nodeOrShadowRoot(e),t,n)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let k=(()=>{class e extends g{constructor(e){super(e)}supports(e){return!0}addEventListener(e,t,n){return e.addEventListener(t,n,!1),()=>this.removeEventListener(e,t,n)}removeEventListener(e,t,n){return e.removeEventListener(t,n)}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(r.K0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();const A=["alt","control","meta","shift"],x={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},N={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},O={alt:e=>e.altKey,control:e=>e.ctrlKey,meta:e=>e.metaKey,shift:e=>e.shiftKey};let P=(()=>{class e extends g{constructor(e){super(e)}supports(t){return null!=e.parseEventName(t)}addEventListener(t,n,i){const s=e.parseEventName(n),o=e.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,r.q)().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const n=t.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=e._normalizeKey(n.pop());let s="";if(A.forEach(e=>{const t=n.indexOf(e);t>-1&&(n.splice(t,1),s+=e+".")}),s+=i,0!=n.length||0===i.length)return null;const o={};return o.domEventName=r,o.fullKey=s,o}static getEventFullKey(e){let t="",n=function(e){let t=e.key;if(null==t){if(t=e.keyIdentifier,null==t)return"Unidentified";t.startsWith("U+")&&(t=String.fromCharCode(parseInt(t.substring(2),16)),3===e.location&&N.hasOwnProperty(t)&&(t=N[t]))}return x[t]||t}(e);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),A.forEach(r=>{r!=n&&(0,O[r])(e)&&(t+=r+".")}),t+=n,t}static eventCallback(t,n,r){return i=>{e.getEventFullKey(i)===t&&r.runGuarded(()=>n(i))}}static _normalizeKey(e){switch(e){case"esc":return"escape";default:return e}}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(r.K0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac}),e})();const R=(0,i.eFA)(i._c5,"browser",[{provide:i.Lbi,useValue:r.bD},{provide:i.g9A,useValue:function(){o.makeCurrent(),h.init()},multi:!0},{provide:r.K0,useFactory:function(){return(0,i.RDi)(document),document},deps:[]}]),D=[[],{provide:i.zSh,useValue:"root"},{provide:i.qLn,useFactory:function(){return new i.qLn},deps:[]},{provide:p,useClass:k,multi:!0,deps:[r.K0,i.R0b,i.Lbi]},{provide:p,useClass:P,multi:!0,deps:[r.K0]},[],{provide:C,useClass:C,deps:[f,y,i.AFp]},{provide:i.FYo,useExisting:C},{provide:m,useExisting:y},{provide:y,useClass:y,deps:[r.K0]},{provide:i.dDg,useClass:i.dDg,deps:[i.R0b]},{provide:f,useClass:f,deps:[p,i.R0b]},{provide:r.JF,useClass:d,deps:[]},[]];let L=(()=>{class e{constructor(e){if(e)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:e,providers:[{provide:i.AFp,useValue:t.appId},{provide:l,useExisting:i.AFp},u]}}}return e.\u0275fac=function(t){return new(t||e)(i.LFG(e,12))},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:D,imports:[r.ez,i.hGG]}),e})();"undefined"!=typeof window&&window;var M=n(1626),F=n(8620),$=n(6221);function V(e,t){1&e&&(i.ynx(0),i.TgZ(1,"ion-menu",3),i.TgZ(2,"ion-header"),i.TgZ(3,"ion-toolbar",4),i.TgZ(4,"ion-title"),i._uU(5,"Easy Secure Taxi"),i.qZA(),i.qZA(),i.qZA(),i.TgZ(6,"ion-content"),i.TgZ(7,"ion-list"),i.TgZ(8,"ion-item",5),i.TgZ(9,"ion-buttons",6),i._UZ(10,"ion-icon",7),i._uU(11," Inicio "),i.qZA(),i.qZA(),i.TgZ(12,"ion-item",8),i.TgZ(13,"ion-buttons",6),i._UZ(14,"ion-icon",9),i._uU(15," Mi Perfil "),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.qZA(),i.BQk())}function U(e,t){}let j=(()=>{class e{constructor(e){this.authSvc=e,this.authSvc.getUserAuth().subscribe(e=>{this.isAuth=null!=e})}}return e.\u0275fac=function(t){return new(t||e)(i.Y36($.e))},e.\u0275cmp=i.Xpm({type:e,selectors:[["app-root"]],decls:5,vars:2,consts:[[4,"ngIf","ngIfElse"],["elseTemplate",""],["id","main"],["side","start","menuId","first","contentId","main"],["color","primary"],["href","/mapa"],["ion-item",""],["item-left","","name","home","slot","start"],["href","/profile"],["name","person-circle-outline","slot","start"]],template:function(e,t){if(1&e&&(i.TgZ(0,"ion-app"),i.YNc(1,V,16,0,"ng-container",0),i.YNc(2,U,0,0,"ng-template",null,1,i.W1O),i._UZ(4,"ion-router-outlet",2),i.qZA()),2&e){const e=i.MAs(3);i.xp6(1),i.Q6J("ngIf",t.isAuth)("ngIfElse",e)}},directives:[F.dr,r.O5,F.jP,F.z0,F.Gu,F.sr,F.wd,F.W2,F.q_,F.Ie,F.Sm,F.gu],styles:["ion-menu[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--background:var(--ion-item-background,var(--ion-background-color,#fff))}ion-menu.md[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--padding-start:8px;--padding-end:8px;--padding-top:20px;--padding-bottom:20px}ion-menu.md[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{padding:20px 0}ion-menu.md[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{margin-bottom:30px}ion-menu.md[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%], ion-menu.md[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{padding-left:10px}ion-menu.md[_ngcontent-%COMP%]   ion-list#inbox-list[_ngcontent-%COMP%]{border-bottom:1px solid var(--ion-color-step-150,#d7d8da)}ion-menu.md[_ngcontent-%COMP%]   ion-list#inbox-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{font-size:22px;font-weight:600;min-height:20px}ion-menu.md[_ngcontent-%COMP%]   ion-list#labels-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{font-size:16px;margin-bottom:18px;color:#757575;min-height:26px}ion-menu.md[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start:10px;--padding-end:10px;border-radius:4px}ion-menu.md[_ngcontent-%COMP%]   ion-item.selected[_ngcontent-%COMP%]{--background:rgba(var(--ion-color-primary-rgb),0.14)}ion-menu.md[_ngcontent-%COMP%]   ion-item.selected[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary)}ion-menu.md[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#616e7e}ion-menu.md[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{font-weight:500}ion-menu.ios[_ngcontent-%COMP%]   ion-content[_ngcontent-%COMP%]{--padding-bottom:20px}ion-menu.ios[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{padding:20px 0 0}ion-menu.ios[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{line-height:24px;margin-bottom:20px}ion-menu.ios[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]{--padding-start:16px;--padding-end:16px;--min-height:50px}ion-menu.ios[_ngcontent-%COMP%]   ion-item.selected[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary)}ion-menu.ios[_ngcontent-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:24px;color:#73849a}ion-menu.ios[_ngcontent-%COMP%]   ion-list#labels-list[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%]{margin-bottom:8px}ion-menu.ios[_ngcontent-%COMP%]   ion-list-header[_ngcontent-%COMP%], ion-menu.ios[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{padding-left:16px;padding-right:16px}ion-menu.ios[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{margin-bottom:8px}ion-note[_ngcontent-%COMP%]{display:inline-block;font-size:16px;color:var(--ion-color-medium-shade)}ion-item.selected[_ngcontent-%COMP%]{--color:var(--ion-color-primary)}"]}),e})();var q=n(9917),B=n(8561);let z=(()=>{class e{constructor(e,t){this.authSvc=e,this.router=t}canActivate(e,t){return this.authSvc.user$.pipe((0,q.q)(1),(0,B.U)(e=>!!e||(this.router.navigate(["/login"]),!1)))}}return e.\u0275fac=function(t){return new(t||e)(i.LFG($.e),i.LFG(M.F0))},e.\u0275prov=i.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();const H=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"folder",loadChildren:()=>n.e(5785).then(n.bind(n,5785)).then(e=>e.FolderPageModule)},{path:"login",loadChildren:()=>n.e(2012).then(n.bind(n,2012)).then(e=>e.LoginPageModule)},{path:"forgot-password",loadChildren:()=>n.e(2493).then(n.bind(n,2493)).then(e=>e.ForgotPasswordPageModule)},{path:"registration",loadChildren:()=>n.e(1078).then(n.bind(n,1078)).then(e=>e.RegistrationPageModule)},{path:"verify-email",loadChildren:()=>n.e(2749).then(n.bind(n,2749)).then(e=>e.VerifyEmailPageModule)},{path:"dashboard",loadChildren:()=>n.e(2734).then(n.bind(n,2734)).then(e=>e.DashboardPageModule),canActivate:[z]},{path:"profile/update/:uid",loadChildren:()=>Promise.all([n.e(8592),n.e(3720)]).then(n.bind(n,3720)).then(e=>e.UpdatePageModule),canActivate:[z]},{path:"profile",loadChildren:()=>n.e(826).then(n.bind(n,826)).then(e=>e.ProfilePageModule),canActivate:[z]},{path:"mapa",loadChildren:()=>Promise.all([n.e(5862),n.e(8592),n.e(643)]).then(n.bind(n,643)).then(e=>e.MapaPageModule),canActivate:[z]},{path:"message",loadChildren:()=>Promise.all([n.e(8592),n.e(9693)]).then(n.bind(n,9693)).then(e=>e.MessagePageModule),canActivate:[z]},{path:"select-taxi/:uid",loadChildren:()=>Promise.all([n.e(5862),n.e(8592),n.e(5022)]).then(n.bind(n,5022)).then(e=>e.SelectTaxiPageModule),canActivate:[z]},{path:"ruta-mapa",loadChildren:()=>Promise.all([n.e(5862),n.e(7927)]).then(n.bind(n,7927)).then(e=>e.RutaMapaPageModule),canActivate:[z]}];let G=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[M.Bz.forRoot(H,{preloadingStrategy:M.wm})],M.Bz]}),e})();var W=n(4309);const K={projectId:"easytaxi-cfb51",appId:"1:402865396311:web:6019d54c71715b761ae112",storageBucket:"easytaxi-cfb51.appspot.com",apiKey:"AIzaSyD-lao4aYOBYQBIyBU1MlqdkY7KDAxqJrU",authDomain:"easytaxi-cfb51.firebaseapp.com",messagingSenderId:"402865396311"};var Y=n(6507),Q=n(1665),X=n(7955),J=n(4480);const Z="auth";class ee{constructor(e){return e}}class te{constructor(){return(0,Y.vb)(Z)}}const ne=new i.OlP("angularfire2.auth-instances");function re(e){return(t,n)=>{const r=t.runOutsideAngular(()=>e(n));return new ee(r)}}const ie={provide:te,deps:[[new i.FiY,ne]]},se={provide:ee,useFactory:function(e,t){const n=(0,Y.JM)(Z,e,t);return n&&new ee(n)},deps:[[new i.FiY,ne],W.Ot]};let oe=(()=>{class e{constructor(){(0,Q.KN)("angularfire",Y.q4.full,"auth")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[se,ie]}),e})();function ae(e,...t){return{ngModule:oe,providers:[{provide:ne,useFactory:re(e),multi:!0,deps:[i.R0b,i.zs3,Y.HU,W.z6,[new i.FiY,X.nm],...t]}]}}const ce=(0,Y.u3)(J.v0,!0);var le=n(6334);class ue{constructor(e){return e}}const he="database",de=new i.OlP("angularfire2.database-instances");function pe(e){return(t,n)=>{const r=t.runOutsideAngular(()=>e(n));return new ue(r)}}const fe={provide:class{constructor(){return(0,Y.vb)(he)}},deps:[[new i.FiY,de]]},ge={provide:ue,useFactory:function(e,t){const n=(0,Y.JM)(he,e,t);return n&&new ue(n)},deps:[[new i.FiY,de],W.Ot]};let me=(()=>{class e{constructor(){(0,Q.KN)("angularfire",Y.q4.full,"rtdb")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[ge,fe]}),e})();function ye(e,...t){return{ngModule:me,providers:[{provide:de,useFactory:pe(e),multi:!0,deps:[i.R0b,i.zs3,Y.HU,W.z6,[new i.FiY,te],[new i.FiY,X.nm],...t]}]}}const ve=(0,Y.u3)(le.N8,!0);var _e=n(9665);class we{constructor(e){return e}}const be="firestore",Ie=new i.OlP("angularfire2.firestore-instances");function Ce(e){return(t,n)=>{const r=t.runOutsideAngular(()=>e(n));return new we(r)}}const Te={provide:class{constructor(){return(0,Y.vb)(be)}},deps:[[new i.FiY,Ie]]},Ee={provide:we,useFactory:function(e,t){const n=(0,Y.JM)(be,e,t);return n&&new we(n)},deps:[[new i.FiY,Ie],W.Ot]};let Se=(()=>{class e{constructor(){(0,Q.KN)("angularfire",Y.q4.full,"fst")}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({providers:[Ee,Te]}),e})();function ke(e,...t){return{ngModule:Se,providers:[{provide:Ie,useFactory:Ce(e),multi:!0,deps:[i.R0b,i.zs3,Y.HU,W.z6,[new i.FiY,te],[new i.FiY,X.nm],...t]}]}}const Ae=(0,Y.u3)(_e.ad,!0);var xe=n(9106),Ne=n(4259),Oe=n(4587),Pe=n(9805);let Re=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e,bootstrap:[j]}),e.\u0275inj=i.cJS({providers:[{provide:M.wN,useClass:F.r4}],imports:[[L,F.Pc.forRoot(),G,(0,W.hX)(()=>(0,W.ZF)(K)),ae(()=>ce()),ye(()=>ve()),ke(()=>Ae()),xe.hO.initializeApp(K),Ne.ww,Oe.JS,Pe.yb]]}),e})();(0,i.G48)(),R().bootstrapModule(Re).catch(e=>console.log(e))},863:(e,t,n)=>{var r={"./ion-action-sheet.entry.js":[5261,8592,5261],"./ion-alert.entry.js":[26,8592,26],"./ion-app_8.entry.js":[9009,8592,9009],"./ion-avatar_3.entry.js":[7221,8592,7221],"./ion-back-button.entry.js":[4694,8592,4694],"./ion-backdrop.entry.js":[993,993],"./ion-button_2.entry.js":[3645,8592,3645],"./ion-card_5.entry.js":[2245,8592,2245],"./ion-checkbox.entry.js":[3482,8592,3482],"./ion-chip.entry.js":[4081,8592,4081],"./ion-col_3.entry.js":[3315,3315],"./ion-datetime_3.entry.js":[4133,8592,4133],"./ion-fab_3.entry.js":[7542,8592,7542],"./ion-img.entry.js":[1459,1459],"./ion-infinite-scroll_2.entry.js":[7618,8592,7618],"./ion-input.entry.js":[101,8592,101],"./ion-item-option_3.entry.js":[2210,8592,2210],"./ion-item_8.entry.js":[7370,8592,7370],"./ion-loading.entry.js":[3652,8592,3652],"./ion-menu_3.entry.js":[8220,8592,8220],"./ion-modal.entry.js":[7038,8592,5500],"./ion-nav_2.entry.js":[4913,8592,4913],"./ion-popover.entry.js":[5078,8592,5078],"./ion-progress-bar.entry.js":[4857,8592,4857],"./ion-radio_2.entry.js":[8958,8592,8958],"./ion-range.entry.js":[4383,8592,4383],"./ion-refresher_2.entry.js":[7630,8592,7630],"./ion-reorder_2.entry.js":[1297,8592,1297],"./ion-ripple-effect.entry.js":[5492,5492],"./ion-route_4.entry.js":[3752,8592,3752],"./ion-searchbar.entry.js":[7487,8592,7487],"./ion-segment_2.entry.js":[1778,8592,1778],"./ion-select_3.entry.js":[2904,8592,2904],"./ion-slide_2.entry.js":[1609,1609],"./ion-spinner.entry.js":[1218,8592,1218],"./ion-split-pane.entry.js":[2849,2849],"./ion-tab-bar_2.entry.js":[4127,8592,4127],"./ion-tab_2.entry.js":[8400,8592,8400],"./ion-text.entry.js":[4397,8592,4397],"./ion-textarea.entry.js":[3391,8592,3391],"./ion-toast.entry.js":[6793,8592,6793],"./ion-toggle.entry.js":[1695,8592,1695],"./ion-virtual-scroll.entry.js":[4180,4180]};function i(e){if(!n.o(r,e))return Promise.resolve().then(()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=r[e],i=t[0];return Promise.all(t.slice(1).map(n.e)).then(()=>n(i))}i.keys=()=>Object.keys(r),i.id=863,e.exports=i}},e=>{"use strict";e(e.s=6729)}]);